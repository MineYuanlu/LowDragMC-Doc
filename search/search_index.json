{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"en/","title":"LowDragMC","text":""},{"location":"en/#lowdragmc","title":"LowDragMC","text":"<p>Profile</p> <p></p> <p>LowDragMC is not an active team, but rather a collection of various interesting mod projects.  </p> <p>The sole maintainer of these projects is KilaBash :) </p> <p> Join our Discord </p> <p> GitHub Repository </p> <p>In essence, this is more of a hub for independent projects from myself and many talented developers rather than a structured team.  </p> <p>We are dedicated to developing creative mods that offer customization capabilities to users, with a particular focus on technical and rendering aspects.  </p>"},{"location":"en/#our-mod-list","title":"Our Mod List:","text":"<ol> <li>LDLib</li> <li>LDLib2 (1.21+)</li> <li>Multiblocked &amp; Multiblockded2</li> <li>Photon &amp; Photon2</li> <li>Shimmer </li> </ol> <p>If you encounter any issues, feel free to submit an issue.  </p> <p>If you enjoy our projects, contributions via PRs are always welcome! \ud83d\ude80</p>"},{"location":"en/ldlib/","title":"Introduction","text":""},{"location":"en/ldlib/#introduction","title":"Introduction","text":"<p>LDLib is a libarary mod for custom rendering, modular gui.</p> <p>LDLib provides a number of renderers, as well as a modular GUI frameworks, including emissive texture supports, custom shaders, and particle systems.</p> <p> Discord: Join our Discord</p> <p> Github:  LDLib Repository</p>"},{"location":"en/ldlib/#move-to-ldlib2","title":"Move to LDLib2","text":"<p>LDLib2 is a complete rewrite of the original LDLib, redesigned from the ground up to support modern versions of Minecraft <code>1.21+</code>.</p>"},{"location":"en/ldlib/java_integration/","title":"Java Integration","text":""},{"location":"en/ldlib/java_integration/#java-integration","title":"Java Integration","text":"<p>You can find the latest version from our maven.</p> <pre><code>repositories{\n    maven {\n        name \"firstdarkdev\"\n        url \"https://maven.firstdark.dev/snapshots\"\n    }\n}\n</code></pre> ForgeFabricArchitectury-Common <pre><code>dependencies {\n    implementation fg.deobf(\"com.lowdragmc.ldlib:ldlib-forge-{minecraft_version}:{latest_version}\") { transitive = false }\n}\n</code></pre> <pre><code>dependencies {\n    modImplementation(\"com.lowdragmc.ldlib:ldlib-fabric-{minecraft_version}:{latest_version}\") { transitive = false }\n}\n</code></pre> <pre><code>dependencies {\n    modCompileOnly(\"com.lowdragmc.ldlib:ldlib-common-{minecraft_version}:{latest_version}\")\n}\n</code></pre>"},{"location":"en/ldlib/SyncData/","title":"Introduction and Setup","text":""},{"location":"en/ldlib/SyncData/#introduction-and-setup","title":"Introduction and Setup","text":"<p>Developers always feel annoying while maintain the data synchronization between the <code>Remote</code> and <code>Server</code>, as well as the data persistence. In general, dev has to write massive code about the serialization and network packet handling.</p> <p>INSTEAD: LDLib provides a powerful sync/persisted system based on annotation. You can easily handle all sync/persisted logic for your <code>BlockEntity</code> without any addional code.</p>"},{"location":"en/ldlib/SyncData/#setup","title":"Setup","text":"<p>To use SyncData system for your blockentity, you can make your class implement <code>IManagedBlockEntity</code> and <code>IManaged</code>.</p>"},{"location":"en/ldlib/SyncData/#iasyncautosyncblockentity","title":"<code>IAsyncAutoSyncBlockEntity</code>","text":"<p>I suggest you use <code>IAsyncAutoSyncBlockEntity</code> instead of <code>IManagedBlockEntity</code>, whihc allow you to ignore <code>markDirty</code>, everything will be done by SyncData system, you no need to care about anything else.</p> <p></p><pre><code>public class MyBlockEntity extends BlockEntity implements IAsyncAutoSyncBlockEntity, IAutoPersistBlockEntity, IManaged {\n    protected static final ManagedFieldHolder MANAGED_FIELD_HOLDER = new ManagedFieldHolder(MyBlockEntity.class);\n    private final FieldManagedStorage syncStorage = new FieldManagedStorage(this);\n\n    @Override\n    public ManagedFieldHolder getFieldHolder() {\n        return MANAGED_FIELD_HOLDER;\n    }\n\n    @Override\n    public IManagedStorage getSyncStorage() {\n        return syncStorage;\n    }\n\n    @Override\n    public void onChanged() {\n        setChanged();\n    }\n\n    @Override\n    public IManagedStorage getRootStorage() {\n        return getSyncStorage();\n    }\n}\n</code></pre> Then you can enjoy the benefits of the SyncData System!!<p></p>"},{"location":"en/ldlib/SyncData/#iautopersistblockentity","title":"<code>IAutoPersistBlockEntity</code>","text":"<p>If you want to persisted data to nbt via <code>@Persisted</code>, also implenet this interface. </p> <p>you can save <code>@DropSaved</code> fields to ItemStack: </p><pre><code>IAutoPersistBlockEntity.saveManagedPersistentData(tag, true);\n\n// for example, block clone\n@Override\npublic ItemStack getCloneItemStack(BlockGetter level, BlockPos pos, BlockState state) {\n    ItemStack itemStack = super.getCloneItemStack(level, pos, state);\n    if (getBlockEntity(level, pos) instanceof IAutoPersistBlockEntity dropSave) {\n        dropSave.saveManagedPersistentData(itemStack.getOrCreateTag(), true);\n    }\n    return itemStack;\n}\n</code></pre><p></p> <p>also lead from itemStack:</p> <pre><code>IAutoPersistBlockEntity.loadManagedPersistentData(tag);\n\n//for example, place a block\n@Override\npublic void setPlacedBy(Level pLevel, BlockPos pPos, BlockState pState, @Nullable LivingEntity player, ItemStack pStack) {\n    if (!pLevel.isClientSide) {\n        if (getBlockEntity(level, pos) instanceof IAutoPersistBlockEntity dropSave) {\n            CompoundTag tag = pStack.getTag();\n            if (tag != null) {\n                dropSave.loadManagedPersistentData(tag);\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"en/ldlib/SyncData/#listen-managed-field-changes","title":"Listen Managed Field Changes","text":"<p>Sometimes you need to listen for a field changes, such as scheduling render updates when a field is synchronized to the client. </p><pre><code>public class MyBlockEntity extends BlockEntity implements IAsyncAutoSyncBlockEntity, IAutoPersistBlockEntity, IManaged {\n    @Persisted\n    boolean shouldRenderOverlay;\n\n    public MyBlockEntity(.....) {\n        if (LDLib.isRemote()) {\n            addSyncUpdateListener(\"shouldRenderOverlay\", this::fieldUpdated);\n        }\n    }\n\n    protected void fieldUpdated(String fieldName, Object newValue, Object oldValue) {\n        scheduleRenderUpdate();\n    }\n}\n</code></pre><p></p>"},{"location":"en/ldlib/SyncData/#using-persisted-fields-in-initialization-code","title":"Using <code>@Persisted</code> fields in initialization code","text":"<p>Loading those fields usually happens during the chunk load, which does not guarantee a safe environment to perform any additional operations.</p> <p>If the initialization logic needs to access the values of any <code>@Persisted</code> fields, it needs to be scheduled to happen on the next tick instead:</p> <pre><code>public void onLoad() {\n    if (!LDLib.isRemote()) {\n        getLevel().getServer().tell(new TickTask(0, this::initialize));\n    }\n}\n\npublic void initialize() {\n    // init code here\n}\n</code></pre>"},{"location":"en/ldlib/SyncData/Anotations/","title":"Anotations","text":""},{"location":"en/ldlib/SyncData/Anotations/#anotations","title":"Anotations","text":"<p>We show all anotations and their usage in this page.</p>"},{"location":"en/ldlib/SyncData/Anotations/#descsynced","title":"<code>@DescSynced</code>","text":"<p>Annotate a field, the value of this field (server side) will be synced to the client side (specifically, <code>remote</code>)</p> <p>if field also be annotated with <code>@LazyManaged</code>, you need to manually tell him when to synchronize</p> <pre><code>@DescSynced\nint a;\n@DescSynced @LazyManaged\nint b;\n\npublic void setA(int newValue) {\n    a = newValue; // will be synced automatically, in general\n}\n\npublic void setB(int newValue) {\n    b = newValue;\n    markDirty(\"b\"); // mannually notify chagned\n}\n</code></pre>"},{"location":"en/ldlib/SyncData/Anotations/#persisted","title":"<code>@Persisted</code>","text":"<p>Annotate a field, the value of this field (server side) will be written/read to/from BlockEntities' nbt. </p> <p>-<code>String key()</code> represent tag name in nbt. default -- use field name instead.</p> <p></p><pre><code>@Persisted(key = \"fluidAmount\")\nint value = 100;\n@Persisted\nboolean isWater = true;\n</code></pre> its nbt looks like<p></p> <pre><code>{\n  \"fluidAmount\": 100,\n  \"isWater\": true\n}\n</code></pre>"},{"location":"en/ldlib/SyncData/Anotations/#dropsaved","title":"<code>@DropSaved</code>","text":"<p>Annotate a field, the value of this field will be saved to <code>Itemstack</code>'s nbt when you pick(clone) / harvest this block, and loaded from <code>ItemStack</code> when you place the block in the world.</p>"},{"location":"en/ldlib/SyncData/Anotations/#rpcmethod","title":"<code>@RPCMethod</code>","text":"<p>Annotate a method, you can send RPC packet between different sides. You are free to define the parameters of the methodas long as the parameters support sync, and send rpc anywhere in your class.</p> <pre><code>public void update() {\n    if (!isRemote()) {\n        rpcToTracking(\"rpcLogic\", Direction.UP, 100);\n        rpcToPlayer(player, \"rpcLogic\", Direction.UP, 100);\n    } else {\n        rpcToServer(\"rpcLogic\", Direction.UP, 100);\n    }\n}\n\n@RPCMethod\npublic void rpcLogic(Direction value1, int value2) {\n    // do your logic\n    if (isRemote()) {\n        System.out.println(\"Recipe rpc from server\");\n    }\n    if (isRemote()) {\n        System.out.println(\"Recipe rpc from remote\");\n    }\n}\n</code></pre> <ul> <li><code>rpcToTracking</code>: send to all remote players if this blockentity is loaded(tracked) in their remotes.</li> <li><code>rpcToPlayer</code>: send to a specfic player</li> <li><code>rpcToServer</code>: send to server.</li> </ul>"},{"location":"en/ldlib/SyncData/Anotations/#readonlymanaged","title":"<code>@ReadOnlyManaged</code>","text":"<p>Some class types do not support instance, and they must be <code>final</code> and cannot be changed. (e.g. class type with <code>ITagSerializable</code> is read only, they can be synchronized and persisted, but cannot modify their instance references). If you want this field not to be <code>finnal</code>, it may be <code>null</code>, and the instance may changed, you can use <code>@ReadOnlyManaged</code>.</p> <pre><code>@DescSynced\n@Persisted\n@ReadOnlyManaged(onDirtyMethod = \"onCoverDirty\", serializeMethod = \"serializeCoverUid\", deserializeMethod = \"deserializeCoverUid\")\nprivate CoverBehavior up, down, north, south, west, east;\n\nprivate boolean onCoverDirty(CoverBehavior coverBehavior) {\n    if (coverBehavior != null) {\n        for (IRef ref : coverBehavior.getSyncStorage().getNonLazyFields()) {\n            ref.update();\n        }\n        return coverBehavior.getSyncStorage().hasDirtyFields();\n    }\n    return false;\n}\n\nprivate CompoundTag serializeCoverUid(CoverBehavior coverBehavior) {\n    var uid = new CompoundTag();\n    uid.putString(\"id\", GTRegistries.COVERS.getKey(coverBehavior.coverDefinition).toString());\n    uid.putInt(\"side\", coverBehavior.attachedSide.ordinal());\n    return uid;\n}\n\nprivate CoverBehavior deserializeCoverUid(CompoundTag uid) {\n    var definitionId = new ResourceLocation(uid.getString(\"id\"));\n    var side = Direction.values()[uid.getInt(\"side\")];\n    var definition = GTRegistries.COVERS.get(definitionId);\n    if (definition != null) {\n        return definition.createCoverBehavior(this, side);\n    }\n    GTCEu.LOGGER.error(\"couldn't find cover definition {}\", definitionId);\n    throw new RuntimeException();\n}\n</code></pre> <p><code>onDirtyMethod</code>: if this field has changes.</p> <p><code>serializeMethod</code>: get a unique id of this field.</p> <p><code>deserializeMethod</code>: if field's unique id changed / set from <code>null</code> to instance. create a new instance for it.</p> <p>For example, <code>CoverBehavior</code> above is a calss inherit <code>IManaged</code>(so sync annotations in CoverBehavior also works). but it's constructor need to pass <code>BlockEntity</code> into it, so SyncData system couldn't help create its instance. we can use this way to address it.</p>"},{"location":"en/ldlib/SyncData/type/","title":"Type Support","text":""},{"location":"en/ldlib/SyncData/type/#type-support","title":"Type Support","text":"<p>Here we list all the classes with built-in support and how to add support to a class.</p>"},{"location":"en/ldlib/SyncData/type/#built-in-supports","title":"Built-in Supports:","text":"<ul> <li><code>Primitive</code>: <code>int</code>, <code>boolean</code>, <code>Integer</code>, <code>String</code>, ...</li> <li><code>Enum</code></li> <li><code>NBT</code></li> <li><code>FriendlyBuf</code></li> <li><code>UUID</code></li> <li><code>ResourceLocation</code></li> <li><code>Component</code></li> <li><code>Recipe</code></li> <li><code>ItemStack</code></li> <li><code>FluidStack</code>(ldlib)</li> <li><code>BlockPos</code></li> <li><code>Size</code></li> <li><code>Position</code></li> <li><code>IGuiTexture</code></li> <li><code>Array</code>: T[] value.... (if T is support)</li> <li><code>Collection</code>: Set, List.... (if T is support)</li> <li><code>ITagSerializable</code>: if class inherits from <code>ITagSerializable</code> it can also be synced/persisted but it should be a <code>final</code> field.</li> <li><code>IManaged</code>: if class inherits from <code>IManaged</code> it can also be synced/persisted but it should be a <code>final</code> field. Besides, syndata annotations in Imanaged can also be handled.</li> </ul>"},{"location":"en/ldlib/SyncData/type/#addtional-supports","title":"Addtional Supports:","text":"<p>The easiest way add support for a new class is to create an <code>Accessor</code>. </p><pre><code>public class GTRecipeAccessor extends CustomObjectAccessor&lt;GTRecipe&gt; {\n\n    public GTRecipeAccessor() {\n        super(GTRecipe.class, true); // field class, whether this accessor is available for its children class\n    }\n\n    @Override\n    public ITypedPayload&lt;?&gt; serialize(AccessorOp accessorOp, GTRecipe gtRecipe) {\n        FriendlyByteBuf serializedHolder = new FriendlyByteBuf(Unpooled.buffer());\n        serializedHolder.writeUtf(gtRecipe.id.toString());\n        GTRecipeSerializer.SERIALIZER.toNetwork(serializedHolder, gtRecipe);\n        return FriendlyBufPayload.of(serializedHolder);\n    }\n\n    @Override\n    public GTRecipe deserialize(AccessorOp accessorOp, ITypedPayload&lt;?&gt; payload) {\n        if (payload instanceof FriendlyBufPayload buffer) {\n            var id = new ResourceLocation(buffer.getPayload().readUtf());\n            return GTRecipeSerializer.SERIALIZER.fromNetwork(id, buffer.getPayload());\n        }\n        return null;\n    }\n}\n</code></pre> register accessors <pre><code>TypedPayloadRegistries.register(Class&lt;T&gt; clazz, Supplier&lt;T&gt; factory, IAccessor accessor, int priority)\n</code></pre> * <code>clazz</code>: payload class, Generally speaking, it is the same as the payload used in the accessor. The payload here is persisted only. You can use different payloads in the accessor and check for the correct type. * <code>factory</code>: payload instance * <code>accessor</code>: accessor * <code>priority</code>: priority (if this field can be handled by multi accessors)<p></p> <p>Forge: </p><pre><code>@LDLibPlugin\npublic class LDLibPlugin implements ILDLibPlugin {\n    @Override\n    public void onLoad() {\n        // in ldlib plugin\n        register(FriendlyBufPayload.class, FriendlyBufPayload::new, new GTRecipeAccessor(), 1000);\n    }\n}\n</code></pre><p></p> <p>Fabric: add an entrypoints: </p><pre><code>\"entrypoints\": {\n    \"ldlib_pugin\": [\n      \"com.gregtechceu.gtceu.integration.ldlib.fabric.LDLibPlugin\"\n    ],\n}\n</code></pre> <pre><code>public class LDLibPlugin implements ILDLibPlugin {\n    @Override\n    public void onLoad() {\n        // in ldlib plugin\n        register(FriendlyBufPayload.class, FriendlyBufPayload::new, new GTRecipeAccessor(), 1000);\n    }\n}\n</code></pre><p></p>"},{"location":"en/ldlib/compass/","title":"Introduction","text":""},{"location":"en/ldlib/compass/#introduction","title":"Introduction","text":"<p>Compass is a doucament system combine both ponder-like and quest book-like system.</p> <p>You can create separate compass system for your mods and projects.</p> <p>The compass is entirely file driven and requires no java code to be written.</p> <p>The compass file should be placed in <code>/assets/project_id/compass/...</code></p>"},{"location":"en/ldlib/compass/#structure","title":"Structure","text":"<ul> <li><code>section</code>: The classification section in comapss, similar to the list on the left in quest. All configuration files are located at <code>/assets/project_id/compass/sections/..</code>.</li> <li><code>node</code>: The node in the section is similar to a task node in questbook, and there are relationship between the nodes. All configuration files are located at <code>/assets/project_id/compass/nodes/..</code>.</li> <li><code>page</code>: The node json file points to a page, edited using <code>xml</code>. All configuration files are located at <code>/assets/project_id/compass/pages/en_us/..</code>.</li> </ul>"},{"location":"en/ldlib/compass/#section","title":"Section","text":"<p>The section configuration is as follows: </p><pre><code>{\n  \"button_texture\": {\n    \"type\": \"item\",\n    \"res\": \"minecraft:apple\"\n  },\n  \"priority\": 1,\n  \"background_texture\": {\n    \"type\": \"resource\",\n    \"res\": \"ldlib:textures/gui/icon.png\"\n  }\n}\n</code></pre><p></p> <ul> <li><code>priority</code>: The lower the priority, the higher in the list.</li> <li><code>section_id</code>: The unique identification id of a section is determined by the path to the configuration file. For example, if a section file is located at <code>assets/gtceu/compass/sections/my_section.json</code>, then its <code>section_id</code> should be <code>gtceu:my_section</code></li> </ul>"},{"location":"en/ldlib/compass/#node","title":"Node","text":"<p>The section configuration is as follows: </p><pre><code>{\n  \"section\": \"ldlib:my_section\",\n  \"szie\": 24,\n  \"button_texture\": {\n    \"type\": \"item\",\n    \"res\": \"minecraft:black_wool\"\n  },\n  \"position\": [50, 50],\n  \"pre_nodes\": [\n    \"ldlib:my_node_2\"\n  ],\n  \"page\": \"ldlib:my_node\",\n  \"items\": [\n    \"minecraft:apple\",\n    \"minecraft:stone\"\n  ]\n}\n</code></pre><p></p> <ul> <li><code>section</code>: section id. It indicates which section the node belongs to.</li> <li><code>size</code>: size of the node in the section view. (default by 24)</li> <li><code>position</code>: the relative coordinates in the section view. The actual display position in the screen is calculated by compass automatically.</li> <li><code>pre_nodes</code>: it refers to its parent nods. the section view will show their relations by lines. And a quick link to these relevant nodes is shown on the right panel after you open the page view.</li> <li><code>items</code>: Pressing <code>[C]</code> when you're looking hover toolips at specifc items for a while will quickly open the compass system.</li> </ul>"},{"location":"en/ldlib/compass/#page","title":"Page","text":"<p>Pages are configured using xml, you can learn it by reading the ttuto Compass XML. The comments detail the purpose of tags in xml.</p> <p><code>Localization</code>: You can localize xml files by placing them in different language folders. such as: </p> <ul> <li>en_us: <code>assets/ldlib/compass/pages/en_us/my_page.xml</code></li> <li>zh_cn: <code>assets/ldlib/compass/pages/zh_cmn/my_page.xml</code></li> </ul>"},{"location":"en/ldlib/compass/#example","title":"Example","text":"<p>unzip it under the <code>.minecraft/ldlib/assets/...</code> example.zip</p>"},{"location":"en/ldlib/compass/scene/","title":"Compass Scene","text":""},{"location":"en/ldlib/compass/scene/#compass-scene","title":"Compass Scene","text":"<p>Compass Scene is inspired by the ponder. The difference is that you don't need to write code, and all scenes can be implemented through <code>xml</code>. This page details how to configure a scene.</p>"},{"location":"en/ldlib/compass/scene/#compass","title":"<code>&lt;compass/&gt;</code>","text":"<p>Prepare your scene settings: * <code>scene</code>: only use the scene (disable the information above) * <code>height</code>: scene height * <code>zoom</code>: zoom intial value * <code>range</code>: plane range intial value * <code>draggable</code>: whether the scene is draggable * <code>scalable</code>: whether the scene is scalable * <code>camera</code>: camera mode, <code>perspective</code> or <code>ortho</code> * <code>yaw</code>: yad intial value * <code>tick-scene</code>: should the scene try to call objects' tick functions, such as blockentities, entities, particles. </p><pre><code>&lt;page&gt;\n    &lt;compass tick-scene=\"true\"&gt; \n    &lt;!-- scene=\"true\" height=\"250\" zoom=\"28\" range=\"5\" draggable=\"false\" scalable=\"false\" camera=\"perspective\" yaw=\"25\" tick-scene=\"false\" can also be set here--&gt;\n    &lt;/compass&gt;\n&lt;/page&gt;\n</code></pre><p></p>"},{"location":"en/ldlib/compass/scene/#frame","title":"<code>&lt;frame/&gt;</code>","text":"<p>The compass scene consists of many <code>&lt;frame&gt;</code>. <code>&lt;frame&gt;</code> refers to a chapter/section of the scene animation.</p> <p>The user can jump back and forth between frames, but not to a specific moment of animation within the frame.</p> <p><code>&lt;description/&gt;</code>: Describes the frame, shows it on hover tooltips, and has the same syntax as the <code>&lt;text/&gt;</code> label. </p><pre><code>&lt;page&gt;\n    &lt;compass&gt;\n        &lt;frame&gt;\n            &lt;description&gt;F1&lt;/description&gt;\n            &lt;!--actions--&gt;\n        &lt;/frame&gt;\n        &lt;frame&gt;\n            &lt;description&gt;F2&lt;/description&gt;\n            &lt;!--actions--&gt;\n        &lt;/frame&gt;\n        &lt;frame&gt;\n            &lt;description&gt;F3&lt;/description&gt;\n            &lt;!--actions--&gt;\n        &lt;/frame&gt;\n    &lt;/compass&gt;\n&lt;/page&gt;\n</code></pre> <p></p>"},{"location":"en/ldlib/compass/scene/#actions","title":"Actions","text":"<p>Actions are used under the <code>&lt;frame/&gt;</code> tag. There are two types of built-in actions <code>&lt;information/&gt;</code> and <code>&lt;scene/&gt;</code>. You can register custom actions via Java if you want.</p> <p>Actions are executed sequentially, and the next action is executed if and only if the last action is completed, but this can be adjusted using the following attributes, similar to ppt animation:  - delay: delay time after last action finish. (tick)  - start-before-last: start this action while the last one is performing. </p><pre><code>&lt;frame&gt;\n    &lt;information type=\"item\" url=\"minecraft:apple\"&gt;\n        &lt;style bold=\"true\" color=\"#ffff0000\"&gt;&lt;lang key=\"ldlib.author\"/&gt;&lt;/style&gt;\n    &lt;/information&gt;\n    &lt;scene delay=\"20\"&gt;\n        &lt;add pos=\"1 0 1\" block=\"minecraft:glass\"/&gt;\n    &lt;/scene&gt;\n    &lt;scene start-before-last=\"true\"&gt;\n        &lt;add pos=\"0 0 0\" block=\"minecraft:glass\"/&gt;\n    &lt;/scene&gt;\n&lt;/frame&gt;\n</code></pre> <p></p>"},{"location":"en/ldlib/compass/scene/#information","title":"<code>&lt;information/&gt;</code>","text":"<p>Action information: display text and images on top </p><pre><code>&lt;information&gt;\n    &lt;style bold=\"true\" color=\"#ffff0000\"&gt;&lt;lang key=\"ldlib.author\"/&gt;&lt;/style&gt;\n&lt;/information&gt;\n&lt;information type=\"item\" url=\"minecraft:apple\"&gt;\n    item\n&lt;/information&gt;\n&lt;information type=\"resource\" url=\"ldlib:textures/gui/icon.png\"&gt;\n    image\n&lt;/information&gt;\n&lt;information type=\"shader\" url=\"ldlib:fbm\"&gt;\n    shader\n&lt;/information&gt;\n</code></pre><p></p>"},{"location":"en/ldlib/compass/scene/#scene","title":"<code>&lt;scene/&gt;</code>","text":"<p>Action scene: Animate the scene. Notice that all the operations under the <code>&lt;scene/&gt;</code> are performing simultaneously. More than one <code>&lt;scene/&gt;</code> label should be used when the operation is sequential.</p> <p>Operations: <code>&lt;add/&gt;</code>, <code>&lt;remove/&gt;</code>, <code>&lt;modify/&gt;</code>, <code>&lt;add-entity/&gt;</code>, <code>&lt;modify-entity/&gt;</code>, <code>&lt;remoge-entity/&gt;</code>, <code>&lt;rotation/&gt;</code>, <code>&lt;highlight/&gt;</code>, <code>&lt;tooltip/&gt;</code></p>"},{"location":"en/ldlib/compass/scene/#add","title":"<code>&lt;add/&gt;</code>","text":"<pre><code>&lt;!--add block to the scene with animation--&gt;\n&lt;add pos=\"0 0 0\" block=\"minecraft:glass\"/&gt;\n&lt;!--add block with properties--&gt;\n&lt;add pos=\"1 1 0\" block=\"minecraft:campfire\"&gt;\n    &lt;properties name=\"lit\" value=\"false\"/&gt;\n&lt;/add&gt;\n&lt;!--add block with nbt for blockentity--&gt;\n&lt;add pos=\"3 0 1\" block=\"minecraft:chest\"&gt;\n    &lt;nbt&gt;\n        {\n            Items: [\n                {\n                    Count: 63b,\n                    Slot: 0b,\n                    id: \"minecraft:coal_block\"\n                }\n            ]\n        }\n    &lt;/nbt&gt;\n&lt;/add&gt;\n&lt;!--offset: animation offset, duration: animation duration--&gt;\n&lt;add pos=\"0 1 0\" offset=\"3 1 0\" duration=\"40\" block=\"minecraft:glass\"/&gt;\n</code></pre>"},{"location":"en/ldlib/compass/scene/#remove","title":"<code>&lt;remove/&gt;</code>","text":"<pre><code>&lt;!--remove block from the scene with animation--&gt;\n&lt;remove pos=\"0 0 0\" offset=\"3 1 0\" duration=\"40\"/&gt;\n</code></pre>"},{"location":"en/ldlib/compass/scene/#modify","title":"<code>&lt;modify/&gt;</code>","text":"<pre><code>&lt;!--modify a block, its kinda similar to the add label but without animation --&gt;\n&lt;modify pos=\"1 1 0\" block=\"minecraft:campfire\"&gt;\n    &lt;properties name=\"lit\" value=\"true\"/&gt;\n    &lt;nbt&gt;\n        {\n        }\n    &lt;/nbt&gt;\n&lt;/modify&gt;\n</code></pre>"},{"location":"en/ldlib/compass/scene/#add-entity","title":"<code>&lt;add-entity/&gt;</code>","text":"<pre><code>&lt;!-- add entities by its type name. You have to allocate it an id, or a random id will be generated--&gt;\n&lt;add-entity pos=\"0 1 0\" type=\"minecraft:player\" id=\"12\"/&gt;\n&lt;!-- add entities with tag--&gt;\n&lt;add-entity pos=\"0.5 3 0.5\" type=\"minecraft:item\" id=\"2\"&gt;\n    &lt;nbt&gt;\n        {\n            Item: {\n                Count: 64b,\n                id: \"minecraft:spruce_door\"\n            }\n        }\n    &lt;/nbt&gt;\n&lt;/add-entity&gt;\n</code></pre>"},{"location":"en/ldlib/compass/scene/#remove-entity","title":"<code>&lt;remove-entity/&gt;</code>","text":"<pre><code>&lt;!-- remove entity by id--&gt;\n&lt;remove-entity id=\"12\" force=\"true\"/&gt;\n</code></pre>"},{"location":"en/ldlib/compass/scene/#modify-entity","title":"<code>&lt;modify-entity/&gt;</code>","text":"<pre><code>&lt;!-- modify entity's tag and position by id--&gt;\n&lt;modify-entity pos=\"3 0 3\" id=\"12\"&gt;\n    &lt;nbt&gt;\n        {\n            Inventory: [\n                {\n                    Count: 1b,\n                    Slot: 0b,\n                    id: \"minecraft:stone_sword\",\n                    tag: {\n                        Damage: 0\n                    }\n                }\n            ],\n            SelectedItemSlot: 0,\n            Rotation: [\n                -30f,\n                0f\n            ]\n        }\n    &lt;/nbt&gt;\n&lt;/modify-entity&gt;\n</code></pre>"},{"location":"en/ldlib/compass/scene/#rotation","title":"<code>&lt;rotation/&gt;</code>","text":"<pre><code>&lt;!--rotate the scene view--&gt;\n&lt;rotation degree=\"90\"/&gt;\n</code></pre>"},{"location":"en/ldlib/compass/scene/#hightlight","title":"<code>&lt;hightlight/&gt;</code>","text":"<pre><code>&lt;!--hightlight a block or a face of the block--&gt;\n&lt;highlight pos=\"0 0 0\" duration=\"70\"/&gt;\n&lt;highlight pos=\"0 0 0\" face=\"UP\" duration=\"70\"/&gt;\n</code></pre>"},{"location":"en/ldlib/compass/scene/#tooltip","title":"<code>&lt;tooltip/&gt;</code>","text":"<pre><code>&lt;!--Point to a location in the scene and provide a description--&gt;\n&lt;tooltip pos=\"1.5 1.5 0.5\" screen-offset=\"0.6 0.5\" duration = \"60\" item=\"minecraft:flint_and_steel\"&gt;\n    &lt;!--pos: position in the scene, screen-offset: description positon in the compass view--&gt;\n    lit = &lt;style color=\"0xff00ff00\"&gt;true&lt;/style&gt;\n&lt;/tooltip&gt;\n</code></pre>"},{"location":"en/ldlib/compass/scene/#example","title":"Example","text":"<p>Now lets review the compass structure:</p> <p></p> <p>Lets check how do the aboves actions look like!!</p> <p></p> <pre><code>&lt;page&gt;\n    &lt;compass tick-scene=\"true\"&gt; &lt;!-- scene=\"true\" height=\"250\" zoom=\"28\" range=\"5\" draggable=\"false\" scalable=\"false\" camera=\"perspective\" yaw=\"25\" tick-scene=\"false\" can also be set here--&gt;\n        &lt;!-- Frames divide the animation into different parts, similar to how the animation is segmented in a ponder. Frames are executed sequentially.--&gt;\n        &lt;frame&gt; &lt;!-- duration=\"-1\" delay=\"0\"--&gt;\n            &lt;description&gt;\n                &lt;!-- Describes the frame, shows it on hovertooltips, and has the same syntax as the text label--&gt;\n                section 1.\n            &lt;/description&gt;\n            &lt;!--actions--&gt;\n            &lt;!--Actions are executed sequentially, and the next action is executed if and only if the last action is completed, but this can be adjusted using the following attributes, similar to ppt animation.\n                delay=\"0\"\n                start-before-last=\"false\"\n            --&gt;\n\n            &lt;!--Action information: display text and images on top--&gt;\n            &lt;information type=\"item\" url=\"minecraft:apple\"&gt;\n                &lt;style bold=\"true\" color=\"#ffff0000\"&gt;&lt;lang key=\"ldlib.author\"/&gt;&lt;/style&gt;\n            &lt;/information&gt;\n\n            &lt;!--Action scene: Animate the scene. Notice that all the operations under the &lt;scene/&gt; are happening simultaneously. More than one &lt;scene/&gt; label should be used when the operation is sequential--&gt;\n            &lt;scene start-before-last=\"true\"&gt;\n                &lt;!--add block to the scene with animation--&gt;\n                &lt;add pos=\"0 0 0\" block=\"minecraft:glass\"/&gt;\n                &lt;!--add block with properties--&gt;\n                &lt;add pos=\"1 1 0\" block=\"minecraft:campfire\"&gt;\n                    &lt;properties name=\"lit\" value=\"false\"/&gt;\n                &lt;/add&gt;\n                &lt;!--add block with nbt for blockentity--&gt;\n                &lt;add pos=\"3 0 1\" block=\"minecraft:chest\"&gt;\n                    &lt;nbt&gt;\n                        {\n                            Items: [\n                                {\n                                    Count: 63b,\n                                    Slot: 0b,\n                                    id: \"minecraft:coal_block\"\n                                }\n                            ]\n                        }\n                    &lt;/nbt&gt;\n                &lt;/add&gt;\n                &lt;add pos=\"0 1 0\" offset=\"3 1 0\" duration=\"40\" block=\"minecraft:glass\"/&gt;\n                &lt;!--offset: animation offset, duration: animation duration--&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;!--modify a block, its kinda similar to the add label but without animation --&gt;\n                &lt;modify pos=\"1 1 0\" block=\"minecraft:campfire\"&gt;\n                    &lt;properties name=\"lit\" value=\"true\"/&gt;\n                &lt;/modify&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;!--remove block from the scene with animation--&gt;\n                &lt;remove pos=\"0 0 0\" offset=\"3 1 0\" duration=\"40\"/&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;!--Point to a location in the scene and provide a description--&gt;\n                &lt;tooltip pos=\"1.5 1.5 0.5\" screen-offset=\"0.6 0.5\" duration = \"60\" item=\"minecraft:flint_and_steel\"&gt;\n                    &lt;!--pos: position in the scene, screen-offset: description positon in the compass view--&gt;\n                    lit = &lt;style color=\"0xff00ff00\"&gt;true&lt;/style&gt;\n                &lt;/tooltip&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;!--hightlight a block or a face of the block--&gt;\n                &lt;highlight pos=\"0 0 0\" duration=\"70\"/&gt;\n                &lt;highlight pos=\"0 0 0\" face=\"UP\" duration=\"70\"/&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;!--rotate the scene view--&gt;\n                &lt;rotation degree=\"90\"/&gt;\n            &lt;/scene&gt;\n        &lt;/frame&gt;\n        &lt;frame&gt;\n            &lt;description&gt;\n                &lt;!-- Describes the frame, shows it on hovertooltips, and has the same syntax as the text label--&gt;\n                section 2.\n            &lt;/description&gt;\n            &lt;scene&gt;\n                &lt;!-- add entities by its type name. You have to allocate it an id, or a random id will be generated--&gt;\n                &lt;add-entity pos=\"0 1 0\" type=\"minecraft:player\" id=\"12\"/&gt;\n                &lt;!-- add entities with tag--&gt;\n                &lt;add-entity pos=\"0.5 3 0.5\" type=\"minecraft:item\" id=\"2\"&gt;\n                    &lt;nbt&gt;\n                        {\n                            Item: {\n                                Count: 64b,\n                                id: \"minecraft:spruce_door\"\n                            }\n                        }\n                    &lt;/nbt&gt;\n                &lt;/add-entity&gt;\n            &lt;/scene&gt;\n        &lt;/frame&gt;\n        &lt;frame delay=\"40\"&gt;\n            &lt;description&gt;\n                &lt;!-- Describes the frame, shows it on hovertooltips, and has the same syntax as the text label--&gt;\n                section 3.\n            &lt;/description&gt;\n            &lt;scene&gt;\n                &lt;!-- modify entity's tag and position by id--&gt;\n                &lt;modify-entity pos=\"3 0 3\" id=\"12\"&gt;\n                    &lt;nbt&gt;\n                        {\n                            Inventory: [\n                                {\n                                    Count: 1b,\n                                    Slot: 0b,\n                                    id: \"minecraft:stone_sword\",\n                                    tag: {\n                                        Damage: 0\n                                    }\n                                }\n                            ],\n                            SelectedItemSlot: 0,\n                            Rotation: [\n                                -30f,\n                                0f\n                            ]\n                        }\n                    &lt;/nbt&gt;\n                &lt;/modify-entity&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;rotation degree=\"180\"/&gt;\n                &lt;tooltip pos=\"3 0.7 3\" duration=\"60\" screen-offset=\"0.2 0.5\"&gt;\n                    Carry a sword to fight!\n                &lt;/tooltip&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;!-- remove entity by id--&gt;\n                &lt;remove-entity id=\"12\" force=\"true\"/&gt;\n            &lt;/scene&gt;\n        &lt;/frame&gt;\n    &lt;/compass&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"en/ldlib/compass/xml/","title":"Compass XML","text":""},{"location":"en/ldlib/compass/xml/#compass-xml","title":"Compass XML","text":"<p>We will breifly inllustrates labels in the xml.</p>"},{"location":"en/ldlib/compass/xml/#generic-attributes","title":"generic attributes","text":"<pre><code>&lt;page&gt;\n  &lt;xxx top-margin=\"10\" bottom-margin=\"10\" left-margin=\"10\", right-margin=\"10\"&gt;\n  &lt;!--margin is a generic property that represents the amount of space reserved between the previous component and the next component. The default is 0.--&gt;\n  &lt;/xxx&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"en/ldlib/compass/xml/#header","title":"Header","text":"<pre><code>&lt;page&gt;\n    &lt;h1&gt;Title H1 &lt;lang key=\"ldlib.author\"/&gt;&lt;/h1&gt; &lt;!-- label &lt;lang/&gt; can be used to load text according to the lang key --&gt;\n    &lt;h2&gt;Title H2&lt;/h2&gt;\n    &lt;h3&gt;Title H3&lt;/h3&gt;\n    &lt;!-- attributes--&gt;\n    &lt;h1 space=\"2\" font-size=\"9\" isCenter=\"false\" isShadow=\"true\"&gt; &lt;!-- space: row spacing--&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"en/ldlib/compass/xml/#blank","title":"Blank","text":"<pre><code>&lt;page&gt;\n    &lt;br height=\"20\"/&gt; &lt;!--blank height--&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"en/ldlib/compass/xml/#text","title":"Text","text":"<pre><code>&lt;page&gt;\n    &lt;text&gt;\n        Lorem ipsum dolor sit amet, consectetur adipisicing elit,\n        &lt;style underlined=\"true\" link=\"ldlib:test_node2\"&gt;\n            link to node2\n        &lt;/style&gt;\n        &lt;style underlined=\"true\" url-link=\"https://github.com/Low-Drag-MC/LDLib-Architectury\"&gt;\n            link to url\n        &lt;/style&gt;\n        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n        &lt;style color=\"#ffff0000\" hover-info=\"hover tooltips\"&gt;\n            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi\n            ut aliquip ex ea commodo consequat.\n        &lt;/style&gt;\n        &lt;br/&gt;\n        Duis aute irure dolor in reprehenderit\n        in voluptate velit esse cillum dolore eu fugiat nulla pariatur.\n    &lt;/text&gt;\n    &lt;!-- attributes--&gt;\n    &lt;text space=\"2\" isCenter=\"false\"&gt;\n        &lt;br/&gt; &lt;!--new line--&gt;\n        &lt;lang key=\"ldlib.author\"/&gt; &lt;!-- used to load text according to the lang key --&gt;\n        &lt;style color=\"#ffffffff\" bold=\"false\" italic=\"false\" underlined=\"false\" strikethrough=\"false\" obfuscated=\"false\"&gt; \n            &lt;!--The style of the text in the range--&gt;\n        &lt;/style&gt;\n        &lt;style hover-info=\"hover tooltips\" link=\"ldlib:my_node_2\"&gt; \n            &lt;!--link will jump to the given node while click--&gt;\n        &lt;/style&gt;\n    &lt;/text&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"en/ldlib/compass/xml/#image","title":"Image","text":"<pre><code>&lt;page&gt;\n    &lt;image width=\"160\" height=\"40\" type=\"resource\" top-margin=\"10\" bottom-margin=\"10\" url=\"gtceu:textures/gt_logo_long.png\" hover-info=\"tooltips\"&gt;\n        &lt;!-- same as the text label here --&gt;\n        description of the image.\n    &lt;/image&gt;\n    &lt;image width=\"100\" height=\"100\" type=\"item\" item=\"minecraft:stone\"/&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"en/ldlib/compass/xml/#recipe","title":"Recipe","text":"<pre><code>&lt;page&gt;\n    &lt;recipe id=\"minecraft:barrel\"/&gt; &lt;!--recipe id--&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"en/ldlib/compass/xml/#ingredient","title":"Ingredient","text":"<pre><code>&lt;page&gt;\n    &lt;ingredient&gt;\n    &lt;item item=\"minecraft:stick\" count=\"3\"/&gt;\n    &lt;item tag=\"minecraft:ores\" forge-tag=\"forge:ores/gold\" fabric-tag=\"c:ores/gold\" count=\"64\"/&gt;\n    &lt;fluid fluid=\"minecraft:lava\" count=\"64000\"/&gt;\n    &lt;/ingredient&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"en/ldlib/compass/xml/#scene","title":"Scene","text":"<pre><code>&lt;page&gt;\n    &lt;scene height=\"300\"&gt; &lt;!-- draggable=\"false\" scalable=\"false\" zoom=\"6\" camera=\"perspective\"  yaw=\"25\"can also be set here--&gt;\n    &lt;page&gt;\n        &lt;block pos=\"0 0 0\" block=\"minecraft:glass\"/&gt;\n        &lt;block pos=\"1 0 0\" block=\"minecraft:dirt\" item-tips=\"true\"/&gt;\n        &lt;block pos=\"0 0 1\" block=\"minecraft:furnace\"&gt;hover info&lt;/block&gt;\n    &lt;/page&gt;\n         &lt;page&gt;\n        &lt;block pos=\"0 0 0\" block=\"minecraft:redstone\"/&gt;\n        &lt;block pos=\"1 0 0\" block=\"minecraft:wool\" item-tips=\"true\"/&gt;\n        &lt;block pos=\"0 0 1\" block=\"minecraft:grass\"&gt;hover info&lt;/block&gt;\n    &lt;/page&gt;\n    &lt;/scene&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"en/ldlib/compass/xml/#storyline-scene","title":"Storyline Scene","text":"<p>Please refer to the page Compass Scene</p>"},{"location":"en/ldlib/compass/xml/#useful-command-to-get-the-nbt-of-the-blockentityentity","title":"Useful command to get the nbt of the blockentity/entity.","text":"<p>It's inevitable that when you're writing a scene you'll come across some blocks/entities that require nbt to be set. </p> <p>while you can get it by <code>/data get block/entity</code> you can't copy it in the game.</p> <p>Ldlib provides a command to help you get the nbt of a block/entity in your game and copy it to the clipboard.</p> <p><code>/ldlib copy_block_tag [pos]</code> / <code>/ldlib copy_entity_tag [entity_selector]</code>: chat panel will show the tag when you execute this command. and you mouse click the <code>[Copy to clipboard]</code> in the chat panel to copy to the clipboard.</p>"},{"location":"en/ldlib/ui/","title":"Introduction","text":""},{"location":"en/ldlib/ui/#introduction","title":"Introduction","text":"<p>LDLib provides a wide range of ready-to-use components, allowing you to create GUI with advanced UI controls. Additionally, LDLib offers a visual editor, enabling you to design UIs without writing a single line of code.  </p> <p>We provide two methods for creating UI:  </p> <ol> <li>Java / KubeJS </li> <li>UI Editor </li> </ol> <p>Of course, you can also combine both methods. For example, you can use the <code>UI Editor</code> to design the UI and then use <code>Java</code> or <code>KubeJS</code> to add interaction logic\u2014which is our recommended approach.</p> <p>Refer to the Widgets to check all widgets in details.</p>"},{"location":"en/ldlib/ui/code/","title":"Get Started","text":""},{"location":"en/ldlib/ui/code/#get-started","title":"Get Started","text":"<p>Creating UI using <code>Java</code> and <code>KubeJS</code> is mostly the same. This page will introduce the basic workflow of creating and using a UI.  </p> <p>The entire UI creation and usage pipeline consists of the following steps:</p> <ol> <li> <p>Create UI widget and layout (1)</p> <ol> <li> Create <code>buttons</code> and <code>item slots</code>, set their positions...</li> </ol> </li> <li> <p>Bind UI functional logic (1)</p> <ol> <li> Add logic to be executed when a <code>button</code> is clicked, bind <code>inventory</code> to <code>item slots</code>...</li> </ol> </li> <li> <p>Display the UI (1)</p> <ol> <li> Open the <code>GUI</code> when <code>right-clicking</code> an item, open the <code>GUI</code> when <code>right-clicking</code> a block...</li> </ol> </li> </ol> <p>Technically, the <code>UI function binding</code> and <code>UI widget creation</code> processes happen simultaneously, as many controls provide constructors that bind functions at the same time.  </p> <p>On this page, we separate step 1 and step 2 in the code examples to provide a clearer understanding of how the <code>UI</code> works.</p>"},{"location":"en/ldlib/ui/code/#create-ui-widgets-and-layout","title":"Create <code>UI</code> Widgets and Layout","text":"<p>Let's begin with a <code>WigetGroup</code>, which is a container of child widgtes. Therefore, we create a <code>WidgetGroup</code> as a root widget. Check all widgets <code>here</code>.</p> <p>Then, we add a <code>Label</code> and a <code>Button</code> into it.</p> JavaKubeJS <pre><code>public WidgetGroup createUI() {\n    // create a root container\n    var root = new WidgetGroup();\n    root.setSize(100, 100);\n    root.setBackground(ResourceBorderTexture.BORDERED_BACKGROUND);\n\n    // create a label and a button\n    var label = new LabelWidget();\n    label.setSelfPosition(20, 20);\n    label.setText(\"Hello, World!\");\n    var button = new ButtonWidget();\n    button.setSelfPosition(20, 60);\n    button.setSize(60, 20);\n    // prepare button textures\n    var backgroundImage = ResourceBorderTexture.BUTTON_COMMON;\n    var hoverImage = backgroundImage.copy().setColor(ColorPattern.CYAN.color);\n    var textAbove = new TextTexture(\"Click me!\");\n    button.setButtonTexture(backgroundImage, textAbove);\n    button.setClickedTexture(hoverImage, textAbove);\n\n    // add the label and button to the root container\n    root.addWidgets(label, button);\n    return root;\n}\n</code></pre> <pre><code>function createUI() {\n    // create a root container\n    let root = new WidgetGroup();\n    root.setSize(100, 100);\n    root.setBackground(ResourceBorderTexture.BORDERED_BACKGROUND);\n\n    // create a label and a button\n    let label = new LabelWidget();\n    label.setSelfPosition(20, 20);\n    label.setText(\"Hello, World!\");\n    let button = new ButtonWidget();\n    button.setSelfPosition(20, 60);\n    button.setSize(60, 20);\n    // prepare button textures\n    let backgroundImage = ResourceBorderTexture.BUTTON_COMMON;\n    let hoverImage = backgroundImage.copy().setColor(ColorPattern.CYAN.color);\n    let textAbove = new TextTexture(\"Click me!\");\n    button.setButtonTexture(backgroundImage, textAbove);\n    button.setClickedTexture(hoverImage, textAbove);\n\n    // add the label and button to the root container\n    root.addWidgets(label, button);\n    return root;\n}\n</code></pre>      Your browser does not support video."},{"location":"en/ldlib/ui/code/#bind-ui-functional-logic","title":"Bind UI functional logic","text":"<p>After the creation of the ui, we should implement the logic of the ui. For example, we want to click the button to change the label text.</p> JavaKubeJS <pre><code>public WidgetGroup createUI() {\n    // creation of the ui\n    // ....\n\n    // click logic\n    AtomicInteger counter = new AtomicInteger(0);\n    button.setOnPressCallback(clickData -&gt; {\n        label.setText(\"Clicked \" + counter.incrementAndGet() + \" times!\");\n    });\n\n    return root;\n}\n</code></pre> <pre><code>function createUI() {\n    // creation of the ui\n    // ....\n\n    // click logic\n    let counter = 0;\n    button.setOnPressCallback(clickData =&gt; {\n        counter++;\n        label.setText(\"Clicked \" + counter + \" times!\");\n    });\n\n    return root;\n}\n</code></pre>      Your browser does not support video."},{"location":"en/ldlib/ui/code/#display-the-ui","title":"Display the UI","text":"<p>Now, let's display the ui we create! We need to specify a <code>UI Factory</code> to display the ui, which maintains the lifecycle of the ui. </p> <p>There are four steps:</p> <ol> <li><code>open ui</code></li> <li><code>create UI in server side</code></li> <li><code>notify to open UI</code></li> <li><code>create UI in remote side</code></li> </ol> <pre><code>sequenceDiagram\n  autonumber\n  Note left of Server: 1. open UI\n  Note left of Server: 2. create UI in server side\n  Server-&gt;&gt;Remote: 3. notify to open UI\n  Note right of Remote: 4. create UI in remote side\n</code></pre> <p><code>UI Factory</code> will help handle the <code>step 3</code>. Therefore, user should define WHEN to trigger <code>step 1</code>, and WHAT to be createed in <code>step 2</code> and <code>step 4</code>. In general, the UI created on the server side and the remote side is the same in most cases.</p> <p>LDLib provides two built-in factories:</p> <ol> <li>Block Entity UI Factory</li> <li>Held Item UI Factory</li> </ol>"},{"location":"en/ldlib/ui/code/#block-entity-ui-factory","title":"Block Entity UI Factory","text":"<p>This factory allows user to open the ui from a block.</p>"},{"location":"en/ldlib/ui/code/#java","title":"Java","text":"<ol> <li> <p>Java user should implement <code>IUIHolder.Block</code> for your own <code>BlockEntity</code> and implement the method <code>createUI(Player entityPlayer)</code>.</p> </li> <li> <p>Call the method <code>BlockEntityUIFactory.INSTANCE.openUI()</code> when you want to open the ui.</p> </li> </ol>"},{"location":"en/ldlib/ui/code/#kubejs","title":"KubeJS","text":"<p>KubeJS user can do the same thing in an easy way. User can even open the ui for the block (without entity), but less accessibility compared with Java.</p> <ol> <li>KubeJS user should use <code>LDLibUI.block(ui_name, e =&gt; {})</code> to create the ui by the given <code>ui_name</code>.</li> <li>Call the method <code>BlockUIFactory.INSTANCE.openUI(player, pos, ui_name)</code> when you want to open the ui.</li> </ol> JavaKubeJS <pre><code>public class TestBlockEntity extends BlockEntity implements IUIHolder {\n\n    public void onPlayerUse(Player player) {\n        // step 1 here.\n        if (player instanceof ServerPlayer serverPlayer) {\n            BlockEntityUIFactory.INSTANCE.openUI(this, serverPlayer);\n        }\n    }\n\n    private WidgetGroup createUI() {\n        // ....\n    }\n\n    @Override\n    public ModularUI createUI(Player entityPlayer) {\n        // step 2 and step 4 here \n        return new ModularUI(createUI(), this, entityPlayer);\n    }\n}\n</code></pre> <pre><code>// server script\n\nBlockEvents.rightClicked('test_block_ui', event =&gt; { \n    // step 1 here.\n    BlockUIFactory.INSTANCE.openUI(event.player, event.block.pos);\n})\n\nfunction createUI() {\n    // ....\n}\n\nLDLibUI.block(\"test_block_ui\", e =&gt; { \n    // step 2 and step 4 here \n\n    // let level = e.level\n    // let pos = e.pos\n    // let block = e.block\n    // let player = e.player\n\n    var ui = createUI();\n    e.success(ui);\n})\n</code></pre>"},{"location":"en/ldlib/ui/code/#held-item-ui-factory","title":"Held Item UI Factory","text":"<p>This factory allows user to open the ui from the held item.</p>"},{"location":"en/ldlib/ui/code/#java_1","title":"Java","text":"<ol> <li> <p>Java user should implement <code>IUIHolder.Item</code> for your own <code>Item</code> and implement the method <code>createUI(Player entityPlayer, HeldItemUIFactory.HeldItemHolder holder)</code>.</p> </li> <li> <p>Call the method <code>HeldItemUIFactory.INSTANCE.openUI()</code> when you want to open the ui.</p> </li> </ol>"},{"location":"en/ldlib/ui/code/#kubejs_1","title":"KubeJS","text":"<p>KubeJS user can do the same thing in an easy way. User can even open the ui for the block (without entity), but less accessibility compared with Java.</p> <ol> <li>KubeJS user should use <code>LDLibUI.item(ui_name, e =&gt; {})</code> to create the ui by the given <code>ui_name</code>.</li> <li>Call the method <code>ItemUIFactory.INSTANCE.openUI(player, hand, ui_name)</code> when you want to open the ui.</li> </ol> JavaKubeJS <pre><code>public class TestItem implements IUIHolder.Item {\n    @Override\n    public InteractionResult useOn(UseOnContext context) {\n        // step 1 here.\n        if (context.getPlayer() instanceof ServerPlayer serverPlayer) {\n            HeldItemUIFactory.INSTANCE.openUI(serverPlayer, context.getHand());\n        }\n        return InteractionResult.SUCCESS;\n    }\n\n    private WidgetGroup createUI() {\n        // ....\n    }\n\n    @Override\n    public ModularUI createUI(Player entityPlayer, HeldItemUIFactory.HeldItemHolder holder) {\n        // step 2 and step 4\n        return new ModularUI(createUI(), holder, entityPlayer);\n    }\n}\n</code></pre> <pre><code>// server script\n\nItemEvents.firstRightClicked('minecraft:stick', event =&gt; {\n    // step 1 here.\n    ItemUIFactory.INSTANCE.openUI(event.player, event.hand, \"test_item_ui\");\n})\n\nfunction createUI() {\n    // ....\n}\n\nLDLibUI.item(\"test_item_ui\", e =&gt; {\n    // step 2 and step 4\n\n    // let player = e.player\n    // let hand = e.hand\n    // let held = e.held\n\n    var ui = createUI();\n    e.success(ui);\n})\n</code></pre>      Your browser does not support video."},{"location":"en/ldlib/ui/code/load_ui_file/","title":"Load UI from file","text":""},{"location":"en/ldlib/ui/code/load_ui_file/#load-ui-from-file","title":"Load UI from file","text":"<p>Through creating UI by code has more flexibility, using <code>UI Editor</code> instead is more intuitive and easy for novice. The ideal approach is to design the ui layout via the Editor and bind UI functional logic via code.</p> <p>before reading</p> <p>Make sure you has basic knowledge of how to create the ui via <code>UI Editor</code> and prepare a ui file for loading.</p> <p>Loading ui file is realy easy, just few lines code. We suppose you have a ui file with the location <code>.minecraft/ldlib/assets/ldlib/projects/ui/test_ui.ui</code>.</p> <p></p> <p>You can get a <code>creator</code> via the method <code>UIProject.loadUIFromFile(location)</code>. <code>creator</code> caches the resources to speed up the creation process which should be stored for the same project loading.</p> <p>Warning</p> <p><code>creator</code> may be null if the ui file counld not be loaded.</p> JavaKubeJS <pre><code>public WidgetGroup createUI() {\n    var creator = UIProject.loadUIFromFile(new ResourceLocation(\"ldlib:test_ui\"));\n    // creator caches the resources to speed up the creation process.\n    // you should better store it for the same project loading.\n    return creator.get();\n}\n</code></pre> <pre><code>function createUI() {\n    let creator = UIProject.loadUIFromFile(\"ldlib:test_ui\");\n    // creator caches the resources to speed up the creation process.\n    // you should better store it for the same project loading.\n    return creator.get();\n}\n</code></pre>"},{"location":"en/ldlib/ui/code/load_ui_file/#bind-ui-functional-logic","title":"Bind UI functional logic","text":"<p>After loading the ui project, we should bind the functional logic for it. First, we should get the instance of the widget. LDLib provide two methods to obtain it:</p> <ol> <li><code>List&lt;Widget&gt; getWidgetsById(regex)</code>: Get all widgets based on a regex pattern and return all of them.</li> <li><code>Widget getFirstWidgetById(regex)</code>: Get all widgets based on a regex pattern and return the first one.</li> </ol> <p>Note</p> <p>Do not forget to assign an <code>id</code> to the widgets you need. </p> JavaKubeJS <pre><code>public WidgetGroup createUI() {\n    var creator = UIProject.loadUIFromFile(new ResourceLocation(\"ldlib:test_ui.ui\"));\n    // creator caches the resources to speed up the creation process.\n    // you should better store it for the same project loading.\n    var root = creator.get();\n\n    var button = root.getFirstWidgetById(\"button_id\");\n    if (button != null) {\n        button.setOnPressCallback(clickData -&gt; {\n            System.out.println(clickData.isShiftClick);\n        });\n    }\n\n    return root;\n}\n</code></pre> <pre><code>function createUI() {\n    let creator = UIProject.loadUIFromFile(\"ldlib:test_ui.ui\");\n    // creator caches the resources to speed up the creation process.\n    // you should better store it for the same project loading.\n    let root = creator.get();\n\n    let button = root.getFirstWidgetById(\"button_id\");\n    if (button != null) {\n        button.setOnPressCallback(clickData =&gt; {\n            console.log(clickData.isShiftClick);\n        });\n    }\n\n    return root;\n}\n</code></pre>"},{"location":"en/ldlib/ui/textures/","title":"Preliminary","text":""},{"location":"en/ldlib/ui/textures/#preliminary","title":"Preliminary","text":"<p><code>GUI Texture</code> is widely used for background setup, image dispaly, etc. LDLib provides lots of different textures. Textures have some generic functions.</p>"},{"location":"en/ldlib/ui/textures/#basic-properties","title":"Basic Properties","text":"Field Description xOffset Horizontal offset yOffset Vertical offset scale Scale factor (default is 1) rotation Rotation angle in degrees"},{"location":"en/ldlib/ui/textures/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/textures/#rotate","title":"rotate","text":"<p>Sets the rotation angle.</p> Java / KubeJS <pre><code>texture.rotate(45);\n</code></pre>"},{"location":"en/ldlib/ui/textures/#scale","title":"scale","text":"<p>Sets the scale factor.</p> Java / KubeJS <pre><code>texture.scale(1.5);\n</code></pre>"},{"location":"en/ldlib/ui/textures/#transform","title":"transform","text":"<p>Sets the horizontal and vertical offset.</p> Java / KubeJS <pre><code>texture.transform(10, 20);\n</code></pre>"},{"location":"en/ldlib/ui/textures/#copy","title":"copy","text":"<p>Creates a copy of the texture.</p> Java / KubeJS <pre><code>var copiedTexture = texture.copy();\n</code></pre>"},{"location":"en/ldlib/ui/textures/animation/","title":"AnimationTexture","text":""},{"location":"en/ldlib/ui/textures/animation/#animationtexture","title":"AnimationTexture","text":""},{"location":"en/ldlib/ui/textures/animation/#basic-properties","title":"Basic Properties","text":"Field Description imageLocation The resource location for the image cellSize The size of each cell in the texture grid from The starting cell index for animation to The ending cell index for animation animation The animation speed value color The color overlay applied to the texture"},{"location":"en/ldlib/ui/textures/animation/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/textures/animation/#settexture","title":"setTexture","text":"<p>Sets the texture</p> Java / KubeJS <pre><code>animationTexture.setTexture(\"ldlib:textures/gui/particles.png\");\n</code></pre>"},{"location":"en/ldlib/ui/textures/animation/#setcellsize","title":"setCellSize","text":"<p>Sets the cell size. Refer to how many cells does the animation texture need to be divided into (side length).</p> Java / KubeJS <pre><code>animationTexture.setCellSize(8);\n</code></pre>"},{"location":"en/ldlib/ui/textures/animation/#setanimation","title":"setAnimation","text":"<p>Sets the animation range <code>from</code> which cell <code>to</code> which cell.</p> Java / KubeJS <pre><code>animationTexture.setAnimation(32, 44);\n</code></pre>"},{"location":"en/ldlib/ui/textures/animation/#setanimation_1","title":"setAnimation","text":"<p>Sets the animation speed. Tick time between cells.</p> Java / KubeJS <pre><code>animationTexture.setAnimation(1);\n</code></pre>"},{"location":"en/ldlib/ui/textures/animation/#setcolor","title":"setColor","text":"<p>Sets the texture color.</p> Java / KubeJS <pre><code>animationTexture.setColor(0xff000000);\n</code></pre>"},{"location":"en/ldlib/ui/textures/border/","title":"ColorBorderTexture","text":""},{"location":"en/ldlib/ui/textures/border/#colorbordertexture","title":"ColorBorderTexture","text":""},{"location":"en/ldlib/ui/textures/border/#basic-properties","title":"Basic Properties","text":"Field Description color The color applied to the border border The border width radiusLTInner Top-left inner corner radius radiusLBInner Bottom-left inner corner radius radiusRTInner Top-right inner corner radius radiusRBInner Bottom-right inner corner radius radiusLTOuter Top-left outer corner radius radiusLBOuter Bottom-left outer corner radius radiusRTOuter Top-right outer corner radius radiusRBOuter Bottom-right outer corner radius"},{"location":"en/ldlib/ui/textures/border/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/textures/border/#setborder","title":"setBorder","text":"<p>Sets the border width.</p> Java / KubeJS <pre><code>colorBorderTexture.setBorder(5);\n</code></pre>"},{"location":"en/ldlib/ui/textures/border/#setcolor","title":"setColor","text":"<p>Sets the border color.</p> Java / KubeJS <pre><code>colorBorderTexture.setColor(0xff00ff);\n</code></pre>"},{"location":"en/ldlib/ui/textures/border/#setradius","title":"setRadius","text":"<p>Sets uniform inner and outer radii based on the provided radius and current border.</p> Java / KubeJS <pre><code>colorBorderTexture.setRadius(10);\n</code></pre>"},{"location":"en/ldlib/ui/textures/border/#setleftradius","title":"setLeftRadius","text":"<p>Sets the left-side radii for both inner and outer corners.</p> Java / KubeJS <pre><code>colorBorderTexture.setLeftRadius(8);\n</code></pre>"},{"location":"en/ldlib/ui/textures/border/#setrightradius","title":"setRightRadius","text":"<p>Sets the right-side radii for both inner and outer corners.</p> Java / KubeJS <pre><code>colorBorderTexture.setRightRadius(8);\n</code></pre>"},{"location":"en/ldlib/ui/textures/border/#settopradius","title":"setTopRadius","text":"<p>Sets the top-side radii for both inner and outer corners.</p> Java / KubeJS <pre><code>colorBorderTexture.setTopRadius(8);\n</code></pre>"},{"location":"en/ldlib/ui/textures/border/#setbottomradius","title":"setBottomRadius","text":"<p>Sets the bottom-side radii for both inner and outer corners.</p> Java / KubeJS <pre><code>colorBorderTexture.setBottomRadius(8);\n</code></pre>"},{"location":"en/ldlib/ui/textures/group/","title":"GuiTextureGroup","text":""},{"location":"en/ldlib/ui/textures/group/#guitexturegroup","title":"GuiTextureGroup","text":""},{"location":"en/ldlib/ui/textures/group/#basic-properties","title":"Basic Properties","text":"Field Description textures An array of textures used in the group"},{"location":"en/ldlib/ui/textures/group/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/textures/group/#settextures","title":"setTextures","text":"<p>Sets the textures used in the group.</p> Java / KubeJS <pre><code>guiTextureGroup.setTextures(texture1, texture2);\n</code></pre>"},{"location":"en/ldlib/ui/textures/group/#setcolor","title":"setColor","text":"<p>Sets the color for all textures in the group.</p> Java / KubeJS <pre><code>guiTextureGroup.setColor(0xff00ff);\n</code></pre>"},{"location":"en/ldlib/ui/textures/itemstack/","title":"ItemStackTexture","text":""},{"location":"en/ldlib/ui/textures/itemstack/#itemstacktexture","title":"ItemStackTexture","text":"<p><code>ItemStackTexture</code> will display items in a loop.</p>"},{"location":"en/ldlib/ui/textures/itemstack/#basic-properties","title":"Basic Properties","text":"Field Description items Array of item stacks used by the texture color Color overlay applied to the item stack texture"},{"location":"en/ldlib/ui/textures/itemstack/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/textures/itemstack/#setitems","title":"setItems","text":"<p>Sets the items.</p> Java / KubeJS <pre><code>itemStackTexture.setItems(item1, item2);\n</code></pre>"},{"location":"en/ldlib/ui/textures/itemstack/#setcolor","title":"setColor","text":"<p>Sets the color overlay for the item stack texture.</p> Java / KubeJS <pre><code>itemStackTexture.setColor(0xffff00ff);\n</code></pre>"},{"location":"en/ldlib/ui/textures/progress/","title":"ProgressTexture","text":""},{"location":"en/ldlib/ui/textures/progress/#progresstexture","title":"ProgressTexture","text":"<p>The <code>ProgressTexture</code> is used to render a progress bar texture that fills according to a specified direction. It combines an empty and a filled texture area to visually represent progress.</p>"},{"location":"en/ldlib/ui/textures/progress/#basic-properties","title":"Basic Properties","text":"Field Description fillDirection The direction in which the progress fills emptyBarArea Texture used for the empty portion of the progress bar filledBarArea Texture used for the filled portion of the progress bar progress The current progress value (0.0 to 1.0)"},{"location":"en/ldlib/ui/textures/progress/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/textures/progress/#settexture","title":"setTexture","text":"<p>Sets the progress textures. <code>emptyBarArea</code> and <code>filledBarArea</code> can any type of the <code>GUi Texture</code>.</p> Java / KubeJS <pre><code>progressTexture.setTexture(emptyBarArea, filledBarArea);\n</code></pre>"},{"location":"en/ldlib/ui/textures/progress/#setprogress","title":"setProgress","text":"<p>Sets the progress value.</p> Java / KubeJS <pre><code>progressTexture.setProgress(0.75);\n</code></pre>"},{"location":"en/ldlib/ui/textures/progress/#setfilldirection","title":"setFillDirection","text":"<p>Sets the fill direction for the progress bar.</p> Java / KubeJS <pre><code>progressTexture.setFillDirection(ProgressTexture.FillDirection.RIGHT_TO_LEFT);\n</code></pre>"},{"location":"en/ldlib/ui/textures/rect/","title":"ColorRectTexture","text":""},{"location":"en/ldlib/ui/textures/rect/#colorrecttexture","title":"ColorRectTexture","text":""},{"location":"en/ldlib/ui/textures/rect/#basic-properties","title":"Basic Properties","text":"Field Description color The color applied to the rectangle radiusLT Top-left corner radius radiusLB Bottom-left corner radius radiusRT Top-right corner radius radiusRB Bottom-right corner radius"},{"location":"en/ldlib/ui/textures/rect/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/textures/rect/#setradius","title":"setRadius","text":"<p>Sets a uniform radius for all corners.</p> Java / KubeJS <pre><code>colorRectTexture.setRadius(10);\n</code></pre>"},{"location":"en/ldlib/ui/textures/rect/#setleftradius","title":"setLeftRadius","text":"<p>Sets the left-side radii (top and bottom) for the rectangle.</p> Java / KubeJS <pre><code>colorRectTexture.setLeftRadius(8);\n</code></pre>"},{"location":"en/ldlib/ui/textures/rect/#setrightradius","title":"setRightRadius","text":"<p>Sets the right-side radii (top and bottom) for the rectangle.</p> Java / KubeJS <pre><code>colorRectTexture.setRightRadius(8);\n</code></pre>"},{"location":"en/ldlib/ui/textures/rect/#settopradius","title":"setTopRadius","text":"<p>Sets the top-side radii (left and right) for the rectangle.</p> Java / KubeJS <pre><code>colorRectTexture.setTopRadius(8);\n</code></pre>"},{"location":"en/ldlib/ui/textures/rect/#setbottomradius","title":"setBottomRadius","text":"<p>Sets the bottom-side radii (left and right) for the rectangle.</p> Java / KubeJS <pre><code>colorRectTexture.setBottomRadius(8);\n</code></pre>"},{"location":"en/ldlib/ui/textures/resource/","title":"ResourceTexture","text":""},{"location":"en/ldlib/ui/textures/resource/#resourcetexture","title":"ResourceTexture","text":"<p>The <code>ResourceTexture</code> class extends <code>TransformTexture</code> to render textures based on a resource location. It supports configurable offsets, dimensions, and color overlays.</p>"},{"location":"en/ldlib/ui/textures/resource/#basic-properties","title":"Basic Properties","text":"Field Description imageLocation The resource location of the texture image offsetX Horizontal offset of the texture (default is 0) offsetY Vertical offset of the texture (default is 0) imageWidth Width factor of the texture (default is 1) imageHeight Height factor of the texture (default is 1) color Color overlay applied to the texture (default is -1)"},{"location":"en/ldlib/ui/textures/resource/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/textures/resource/#createtexture","title":"createTexture","text":"<p>Create a texture from a resource location.</p> Java / KubeJS <pre><code>// Using float parameters\nvar texture = new ResourceTexture(\"ldlib:textures/gui/icon.png\");\n</code></pre>"},{"location":"en/ldlib/ui/textures/resource/#getsubtexture","title":"getSubTexture","text":"<p>Returns a sub-texture of the current texture.</p> Java / KubeJS <pre><code>// Using float parameters\nvar subTexture = resourceTexture.getSubTexture(0.2, 0.2, 0.5, 0.5);\n</code></pre>"},{"location":"en/ldlib/ui/textures/resourceborder/","title":"ResourceBorderTexture","text":""},{"location":"en/ldlib/ui/textures/resourceborder/#resourcebordertexture","title":"ResourceBorderTexture","text":"<p>The <code>ResourceBorderTexture</code> class extends <code>ResourceTexture</code> to render textures with configurable borders. It calculates relative sizes for corners, edges, and the central area, enabling detailed customization for UI backgrounds and buttons.</p>"},{"location":"en/ldlib/ui/textures/resourceborder/#basic-properties","title":"Basic Properties","text":"Field Description boderSize The size of the border corners imageSize The overall size of the texture image imageLocation The resource location of the texture image"},{"location":"en/ldlib/ui/textures/resourceborder/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/textures/resourceborder/#setbodersize","title":"setBoderSize","text":"<p>Sets the size of the border corners.</p> Java / KubeJS <pre><code>resourceBorderTexture.setBoderSize(5, 5);\n</code></pre>"},{"location":"en/ldlib/ui/textures/resourceborder/#setimagesize","title":"setImageSize","text":"<p>Sets the overall size of the texture image.</p> Java / KubeJS <pre><code>resourceBorderTexture.setImageSize(200, 150);\n</code></pre>"},{"location":"en/ldlib/ui/textures/shader/","title":"ShaderTexture","text":""},{"location":"en/ldlib/ui/textures/shader/#shadertexture","title":"ShaderTexture","text":"<p>The <code>ShaderTexture</code> class extends <code>TransformTexture</code> to render textures using custom shaders. It supports dynamic shader updates, setting uniform values, and binding textures for advanced visual effects. The class provides methods for creating shader-based textures from resource locations or raw shader code, along with caching and disposal mechanisms. </p> <p>IMPORTANT!!!</p> <p>If you are using raw shader, DO NOT forget to release the texture after using.</p>"},{"location":"en/ldlib/ui/textures/shader/#basic-properties","title":"Basic Properties","text":"Field Description location The resource location of the shader resolution The shader resolution factor (affects the iResolution uniform) color Color overlay applied to the shader texture"},{"location":"en/ldlib/ui/textures/shader/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/textures/shader/#dispose","title":"dispose","text":"<p>Dispose shader.</p> Java / KubeJS <pre><code>shaderTexture.dispose();\n</code></pre>"},{"location":"en/ldlib/ui/textures/shader/#updateshader","title":"updateShader","text":"<p>Updates the shader using a new resource location.</p> Java / KubeJS <pre><code>shaderTexture.updateShader(new ResourceLocation(\"modid:shader\"));\n</code></pre>"},{"location":"en/ldlib/ui/textures/shader/#updaterawshader","title":"updateRawShader","text":"<p>Updates the shader using raw shader code.</p> Java / KubeJS <pre><code>shaderTexture.updateRawShader(\"raw shader code\");\n</code></pre>"},{"location":"en/ldlib/ui/textures/shader/#setuniformcache","title":"setUniformCache","text":"<p>Sets a uniform cache consumer to update additional shader uniforms.</p> Java / KubeJS <pre><code>shaderTexture.setUniformCache(cache -&gt; {\n    // Update additional uniforms as needed\n});\n</code></pre>"},{"location":"en/ldlib/ui/textures/shader/#setresolution","title":"setResolution","text":"<p>Sets the resolution factor used in the shader.</p> Java / KubeJS <pre><code>shaderTexture.setResolution(2.5f);\n</code></pre>"},{"location":"en/ldlib/ui/textures/text/","title":"TextTexture","text":""},{"location":"en/ldlib/ui/textures/text/#texttexture","title":"TextTexture","text":"<p>The <code>TextTexture</code> class extends <code>TransformTexture</code> to render text as a texture. It supports dynamic text updates through a supplier, configurable text styling (color, background color, drop shadow), and various text alignment or animation types (e.g. roll, hide). This class is primarily used to display formatted and localized text within GUI components.</p>"},{"location":"en/ldlib/ui/textures/text/#basic-properties","title":"Basic Properties","text":"Field Description text The formatted text to display color The text color (modifiable via setter) backgroundColor The background color behind the text width The maximum width for wrapping the text rollSpeed The speed at which text rolls (for animated text types) dropShadow Whether a drop shadow is applied to the text type The text display type (e.g., NORMAL, ROLL, HIDE, LEFT, RIGHT) supplier A supplier for dynamic text updates"},{"location":"en/ldlib/ui/textures/text/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/textures/text/#setsupplier","title":"setSupplier","text":"<p>Sets a supplier to provide dynamic text updates.</p> JavaKubeJS <pre><code>textTexture.setSupplier(() -&gt; \"Updated dynamic text\");\n</code></pre> <pre><code>textTexture.setSupplier(() =&gt; \"Updated dynamic text\");\n</code></pre>"},{"location":"en/ldlib/ui/textures/text/#updatetext","title":"updateText","text":"<p>Updates the displayed text. This method is invoked automatically via the supplier or can be called directly.</p> Java / KubeJS <pre><code>textTexture.updateText(\"New Text Content\");\n</code></pre>"},{"location":"en/ldlib/ui/textures/text/#setbackgroundcolor","title":"setBackgroundColor","text":"<p>Sets the background color behind the text.</p> Java / KubeJS <pre><code>textTexture.setBackgroundColor(0xffff0000);\n</code></pre>"},{"location":"en/ldlib/ui/textures/text/#setdropshadow","title":"setDropShadow","text":"<p>Enables or disables the drop shadow effect on the text.</p> Java / KubeJS <pre><code>textTexture.setDropShadow(true);\n</code></pre>"},{"location":"en/ldlib/ui/textures/text/#setwidth","title":"setWidth","text":"<p>Sets the maximum width for the text area. This method also recalculates text wrapping based on the new width.</p> Java / KubeJS <pre><code>textTexture.setWidth(100);\n</code></pre>"},{"location":"en/ldlib/ui/textures/text/#settype","title":"setType","text":"<p>Sets the text display type (e.g., NORMAL, ROLL, LEFT_HIDE).</p> <p>TextType</p> <ul> <li><code>NORMAL</code>:  center, add new lines below</li> <li><code>HIDE</code>:  center, hide redundant words</li> <li><code>ROLL</code>:  center, hide redundant words, roll words while hover</li> <li><code>ROLL_ALWAYS</code>:  center always roll words while redundant</li> <li><code>LEFT</code>:  same as NOMAL but left align</li> <li><code>RIGHT</code>:  same as NORMAL but right aligh</li> <li><code>LEFT_HIDE</code>:  same as HIDE but left align</li> <li><code>LEFT_ROLL</code>:  same as ROLL but left align</li> <li><code>LEFT_ROLL_ALWAYS</code>:  same as ROLL_ALWAYS but let align</li> </ul> Java / KubeJS <pre><code>textTexture.setType(TextType.ROLL);\n</code></pre>"},{"location":"en/ldlib/ui/ui_editor/","title":"Get Start","text":""},{"location":"en/ldlib/ui/ui_editor/#get-start","title":"Get Start","text":"<p>The UI Editor is a powerful built-in visual editor provided by ldlib. You can use it to easily design your UI, use it in your own mods, or use it through Java / KubeJS.</p>"},{"location":"en/ldlib/ui/ui_editor/#1-get-start","title":"1. Get Start","text":""},{"location":"en/ldlib/ui/ui_editor/#how-to-open-the-ui-editor","title":"How to open the UI Editor","text":"<p>In general, you can open it by command<code>/ldlib ui_editor</code>, which will use <code>./minecraft/ldlib/..</code> as its workspace.</p> <p></p>"},{"location":"en/ldlib/ui/ui_editor/#main-screen","title":"Main Screen","text":"<ol> <li>Menu: New/Save/Open UI projects. You can also import/export <code>Resources</code> here.</li> <li>Configurator: Basically all the setup happens here.</li> <li>Resources: available resources, e.g. <code>color</code>, <code>texture</code>, <code>lang entries</code>.</li> </ol>"},{"location":"en/ldlib/ui/ui_editor/#create-a-new-project","title":"Create a new project","text":"<p>When you first use it, click it to create an empty UI project. (If you are making UI for MBD, select the MBD project)</p> <p></p> <p>No surprise, you'll see the follow case.</p> <p></p> <ol> <li>ToolBox: Contains all the available UI widgets(components).</li> <li>Root Widget: The whole project has one and only one root widget, which is created by the system and you cannot delete it.</li> </ol>"},{"location":"en/ldlib/ui/ui_editor/#2-basic","title":"2. Basic","text":"<ol> <li>red frame are selected widgets.</li> <li>blue frame is the widget that mouse is hovering over it.</li> </ol>"},{"location":"en/ldlib/ui/ui_editor/#multi-select","title":"Multi-Select","text":"<p>Press <code>ctrl</code> to multi-select / cancle-select widget.</p>"},{"location":"en/ldlib/ui/ui_editor/#drag-selected-widgets","title":"Drag Selected Widgets","text":"<ol> <li>Hold down <code>alt</code> + <code>left-clicked</code>, if you see the arrows (all directions) then you can drag it.</li> <li>Anyway, you could also modify position by a configurator.</li> </ol>"},{"location":"en/ldlib/ui/ui_editor/#scale-selected-widgets","title":"Scale Selected Widgets","text":"<ol> <li>Hold down <code>alt</code> + <code>right-clicked</code>, if you see the arrows (right bottom) then you can scale it.</li> <li>Anyway, you could also modify size by a configurator.</li> </ol>"},{"location":"en/ldlib/ui/ui_editor/#add-a-widget","title":"Add a Widget","text":"<p>All widgets (except the Root) need to be added to a <code>father (parent)</code> widget that accepts it, and we call such <code>father (parent)</code> widget as <code>Group Type</code> widget (e.g. <code>Group</code>, <code>Tab Group</code>, <code>Scrollable Group</code>).</p> <p></p> <ol> <li>You can find all available widgets in the toolbox.</li> <li>Drag a widget into a <code>Group Type</code> widget. </li> <li>Rendering a green frame if such widget can accept it.</li> </ol>"},{"location":"en/ldlib/ui/ui_editor/#move-widget-from-one-groug-to-another-group","title":"Move widget from one Groug to another Group","text":"<p>Sometimes you may want to modify the parent control. </p> <ol> <li>You can do this by the menu (right-clicking page) and cut/copy to the selected parent widget. </li> <li>A better way is to press the <code>shift</code>and move it into the new Group.</li> </ol> <p> Rendering a green frame if such widget can accept it.</p>"},{"location":"en/ldlib/ui/ui_editor/#adjust-children-widgets-order","title":"Adjust Children Widgets Order","text":"<p>In general, all the <code>Group</code> widgets have a <code>children</code> tab in its configurator, showing all children, you can adjust their order by dragging.</p> <p></p>"},{"location":"en/ldlib/ui/ui_editor/#menu","title":"Menu","text":"<p>Right-click the page to open the menu.</p> <p></p> <ol> <li>All operations will be performed on selected widgets.</li> <li>Basic operations</li> <li>Align: availabe when you select multi widgets.</li> </ol>"},{"location":"en/ldlib/ui/ui_editor/group_widget/","title":"Group Widget","text":""},{"location":"en/ldlib/ui/ui_editor/group_widget/#group-widget","title":"Group Widget","text":"<p><code>Group</code> refers to widgets to which can accept child widgets</p> <p>There are three built-in widgets so far: <code>Group</code>, <code>Scrollable Group</code>, and <code>Tab Group</code>.</p>"},{"location":"en/ldlib/ui/ui_editor/group_widget/#group","title":"Group","text":"<p><code>Group</code> is the most common widget, <code>Transform</code> will be applied to its children, and deletion and copy of the group are also applied to its children.</p> <p>You can drag child's preview to adjust their order</p> <p> </p>"},{"location":"en/ldlib/ui/ui_editor/group_widget/#scrollable-group","title":"Scrollable Group","text":"<p>Children in a <code>Scrollable Group</code> are hidden when they exceed the its size and allow users to scroll or drag groups to adjust the view.</p> <p></p> <p>The configurator has a lot of settings such as scroll bar styles, whether you can drag, etc. You can try them out yourself.</p>"},{"location":"en/ldlib/ui/ui_editor/group_widget/#tab-group","title":"Tab Group","text":"<p>As the name implies, <code>Tab group</code> allows you to set multiple tabs, which you can switch between different group views.</p> <p></p>"},{"location":"en/ldlib/ui/ui_editor/resource/","title":"Resources","text":""},{"location":"en/ldlib/ui/ui_editor/resource/#resources","title":"Resources","text":"<p>The <code>UI Project</code> contains three built-in resources: <code>textures</code>, <code>colors</code> and <code>lang entries</code>. Resources are owned by projects and cannot be shared between projects.</p> <p>If you want the current project's resources to be available in other projects, you can <code>export</code> the resources first and then open other projects to <code>import</code> it.</p> <p></p>"},{"location":"en/ldlib/ui/ui_editor/resource/#textrures","title":"Textrures","text":"<ol> <li>Stored textures.</li> <li>Add new textures, glad we support many types of textures so far :).</li> <li>It's worth noting that <code>empty</code> is a built-in texture and you can't delete it.</li> </ol>"},{"location":"en/ldlib/ui/ui_editor/resource/#use-it","title":"Use it","text":"<p>When you open the configuration of a widget, you find that some where can accept the texture (e.g. background of Basic Info), and you can drag the texture in.</p> <p></p> <ol> <li>Drag texture.</li> <li>Rendering a green frame if it can accept this texture.</li> </ol> <p>NOTE: When you drag it to a widget, it replaces its background image by default.</p> <p></p>"},{"location":"en/ldlib/ui/ui_editor/resource/#edit-texture","title":"Edit Texture","text":"<p>Right-click to open the menu and edit the selected texture.</p> <p> 1. Open its configurator. 2. Modify the texture type. In general you'd better not modify it, because switching type will not modify references of previous one. 3. Some textures provide a preview of the settings, and you can open the file selector by clicking on it. 4. You can scale, translate, and rotate the texture by setting its Transform.</p> <p>NOTE: You can use <code>GroupTexture</code> with transform to create a more complex texture.</p> <p> 1. Combine multi textures. 2. Add a new layer.</p> <p>NOTE: You can create an animation texture by setting the starting and ending of frames, and the interval time.</p> <p></p>"},{"location":"en/ldlib/ui/ui_editor/resource/#colors","title":"Colors","text":""},{"location":"en/ldlib/ui/ui_editor/resource/#use-it_1","title":"Use it","text":"<p>When you open a configuration, you find that some where can accept the number (e.g. color of the label widget), and you can drag the color in.</p> <p></p> <ol> <li>Drag color.</li> <li>Rendering a green frame if it can accept this color.</li> </ol> <p>NOTE: When you drag it to a widget, it replaces its background to a Color Texture by default.</p> <p></p>"},{"location":"en/ldlib/ui/ui_editor/resource/#edit-color","title":"Edit Color","text":"<p>Right-click to open the menu and edit the selected color.</p> <p></p> <ol> <li>Pickup color (HSB mode), you can right click the pallete to swith mode.</li> <li>Preview.</li> <li>Modify by argb.</li> </ol>"},{"location":"en/ldlib/ui/ui_editor/resource/#entries","title":"Entries","text":"<p>Enties stores key-value, which can be regard as a lang file.</p> <p>When you open a configuration, you find that some where can accept the number (e.g. color of the label widget), and you can drag the color in. You can fill in your localization data, and then export to the lang file directly (W.I.P)</p>"},{"location":"en/ldlib/ui/ui_editor/resource/#use-it_2","title":"Use it","text":"<ol> <li>Drag entries.</li> <li>Rendering a green frame if it can accept a string.</li> </ol> <p>NOTE: When you drag it to a widget, it replaces its hover tooltips by default.</p> <p></p>"},{"location":"en/ldlib/ui/ui_editor/resource/#edit-entries","title":"Edit Entries","text":"<p>Right-click to open the menu and edit its vaule.</p> <p></p> <ol> <li>Typing your text here.</li> </ol> <p>You can right-click to open the menu and rename its key.</p>"},{"location":"en/ldlib/ui/widget/","title":"Preliminary","text":""},{"location":"en/ldlib/ui/widget/#preliminary","title":"Preliminary","text":"<p>LDLib provides a wide range of widgets. You can review their functionalities and APIs on their respective pages. In this section, we introduce the fundamental concepts that underlie all widgets, ensuring you have a solid understanding of their common principles.</p> <p>All widgets inherit from the Widget class. As a result, they all share a set of universal APIs.</p>"},{"location":"en/ldlib/ui/widget/#basic-properties","title":"Basic properties","text":"<p>All properties can be accessed via Java / KubeJS.</p> JavaKubeJS <pre><code>var id = widget.getId();\nvar pos = widget.getPosition();\nwidget.setSize(10, 32);\nwidget.setSlefPosition(10, 10);\n</code></pre> <pre><code>let id = widget.getId();\nlet pos = widget.position // getPosition() is also fine.\nwidget.setSize(10, 32);\nwidget.setSlefPosition(10, 10);\n</code></pre> Field Description <code>id</code> Widget id, it doesn't have to be unique\uff0cand can be empty. <code>selftPosition</code> Self position represents the relative local position in the parent widget <code>parentPosition</code> Parent widget's global position. <code>position</code> Global position in the window, which is computed by the self position and parent position. <code>size</code> Widget size, this property affect the rect collid dection, e.g. hover, click, etc. <code>isVisible</code> Whether the widget is visible, only affect rendering, logic is still working. <code>isActive</code> Whether the widget logic is working. <code>align</code> align position refer to the parent. <code>backgroundTexture</code> background texture. <code>hoverTexture</code> darw texture while mouse hover. <code>overlay</code> overlay texture above the background texture. <code>parent</code> parent widget. <code>align</code> align position refer to the parent. <p>about position</p> <p><code>Position</code> is an important concept. Check the image below: </p>"},{"location":"en/ldlib/ui/widget/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/widget/#sethovertooltips","title":"<code>setHoverTooltips()</code>","text":"<p>Used to define the tooltips while the mouse hovered. It support both <code>string</code> and <code>component</code> as input.</p>      Your browser does not support video.    Java / KubeJS <pre><code>widget.setHoverTooltips(\"this is a button\");\n// widget.setHoverTooltips(\"line 1\", \"line2\");\n</code></pre> <p>Info</p> <p>LDLib provides massive different types of textures, choose what you want:). See <code>GUI Textures</code> to check supported textures.</p>"},{"location":"en/ldlib/ui/widget/#setbackground","title":"<code>setBackground()</code>","text":"<p>Used to set the background texture of the widget. </p>"},{"location":"en/ldlib/ui/widget/#sethovertexture","title":"<code>setHoverTexture()</code>","text":"<p>Used to set the hover texture of the widget.</p> Java / KubeJS <pre><code>widget.setBackground(new ResourceTexture(\"ldlib:textures/gui/icon.png\"));\n</code></pre>"},{"location":"en/ldlib/ui/widget/#ismouseoverelement","title":"<code>isMouseOverElement()</code>","text":"<p>TO check whether the mouse over the widget.</p> Java / KubeJS <pre><code>widget.isMouseOverElement(mouseX, mouseY);\n</code></pre>"},{"location":"en/ldlib/ui/widget/Button/","title":"ButtonWidget","text":""},{"location":"en/ldlib/ui/widget/Button/#buttonwidget","title":"ButtonWidget","text":"<p>The ButtonWidget is a UI widget representing a clickable button in the GUI system</p>"},{"location":"en/ldlib/ui/widget/Button/#basic-properties","title":"Basic properties","text":"<p>All properties can be accessed via Java / KubeJS.</p> Field Description <code>isClicked</code> is the button clicked currently"},{"location":"en/ldlib/ui/widget/Button/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/widget/Button/#setbuttontexture","title":"<code>setButtonTexture()</code>","text":"<p>Equal to the <code>setBackground</code>.</p> Java / KubeJS <pre><code>button.setButtonTexture(ResourceBorderTexture.BUTTON_COMMON, new TextTexture(\"Button\"));\n</code></pre>"},{"location":"en/ldlib/ui/widget/Button/#setclickedtexture","title":"<code>setClickedTexture()</code>","text":"<p>Remove child widget from it.</p> Java / KubeJS <pre><code>button.setClickedTexture(ResourceBorderTexture.BUTTON_COMMON, new TextTexture(\"Clicked\"));\n</code></pre>"},{"location":"en/ldlib/ui/widget/Button/#setonpresscallback","title":"<code>setOnPressCallback()</code>","text":"<p>Used to bind functional logic.</p> <p><code>ClickData</code> provides mouse state information:</p> <ol> <li> <p><code>clickData.button</code>: mouse button id number.</p> button Description <code>0</code> left button <code>1</code> right button <code>2</code> middle button </li> <li> <p><code>clickData.isShiftClick</code>: is the shift key typed.</p> </li> <li><code>clickData.isCtrlClick</code>: is the ctrl key typed.</li> <li><code>clickData.isRemote</code>: is the remote enverionment.</li> </ol> JavaKubeJS <pre><code>button.setOnPressCallback(clickData -&gt; {\n    if (clickData.isRemote) { // can be used to check trigger side\n\n    }\n});\n</code></pre> <pre><code>button.setOnPressCallback(clickData =&gt; {\n    if (clickData.isRemote) { // can be used to check trigger side\n\n    }\n});\n</code></pre>"},{"location":"en/ldlib/ui/widget/Image/","title":"ImageWidget","text":""},{"location":"en/ldlib/ui/widget/Image/#imagewidget","title":"ImageWidget","text":"<p><code>ImageWidget</code> is used to display images, which provided by a <code>GUI Texture</code>.</p>"},{"location":"en/ldlib/ui/widget/Image/#basic-properties","title":"Basic Properties","text":"Field Description border The border width (range: -100 to 100) borderColor The color of the border"},{"location":"en/ldlib/ui/widget/Image/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/widget/Image/#setimage","title":"setImage","text":"<p>Sets the image texture using a texture instance.</p> Java / KubeJS <pre><code>imageWidget.setImage(new ResourceTexture(\"ldlib:textures/gui/icon.png\"));\n</code></pre>"},{"location":"en/ldlib/ui/widget/Image/#setimage_1","title":"setImage","text":"<p>Sets the image texture using a supplier.</p> JavaKubeJS <pre><code>imageWidget.setImage(() -&gt; new ResourceTexture(\"ldlib:textures/gui/icon.png\"));\n</code></pre> <pre><code>imageWidget.setImage(() =&gt; new ResourceTexture(\"ldlib:textures/gui/icon.png\"));\n</code></pre>"},{"location":"en/ldlib/ui/widget/Image/#getimage","title":"getImage","text":"<p>Returns the current image texture.</p> Java / KubeJS <pre><code>var texture = imageWidget.getImage();\n</code></pre>"},{"location":"en/ldlib/ui/widget/Image/#setborder","title":"setBorder","text":"<p>Sets the border width and color.</p> Java / KubeJS <pre><code>imageWidget.setBorder(2, 0xFFFFFFFF); // ARGB\n</code></pre>"},{"location":"en/ldlib/ui/widget/Label/","title":"LabelWidget","text":""},{"location":"en/ldlib/ui/widget/Label/#labelwidget","title":"LabelWidget","text":"<p><code>LabelWidget</code> is used to display text and component.</p> <p>Advanced Widget</p> <p><code>LabelWidget</code> is a light-weight widget to display text only. text height, align, ... are fixed. Therefore, we reconmend to use the <code>TextTextureWidget</code> instead, which provids advanced controll of text display.</p>"},{"location":"en/ldlib/ui/widget/Label/#basic-properties","title":"Basic Properties","text":"Field Description <code>color</code> The text color as an integer <code>dropShadow</code> Indicates whether the drop shadow effect is enabled <code>lastTextValue</code> currently text <code>read only</code>"},{"location":"en/ldlib/ui/widget/Label/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/widget/Label/#settext","title":"<code>setText()</code>","text":"<p>Updates the label text with a <code>string</code>.</p> Java / KubeJS <pre><code>label.setText(\"New Label Text\");\n</code></pre>"},{"location":"en/ldlib/ui/widget/Label/#setcomponent","title":"<code>setComponent()</code>","text":"<p>Same as <code>setText()</code> but support <code>component</code> as input</p>"},{"location":"en/ldlib/ui/widget/Label/#settextprovider","title":"<code>setTextProvider()</code>","text":"<p>Configures a supplier to dynamically provide the label text. It will obtain the latest text per tick.</p> JavaKubeJS <pre><code>label.setTextProvider(() -&gt; \"Dynamic Text\");\n</code></pre> <pre><code>label.setTextProvider(() =&gt; \"Dynamic Text\");\n</code></pre>"},{"location":"en/ldlib/ui/widget/Label/#setcolor","title":"<code>setColor()</code>","text":"<p>Sets the text color. If a rich text component is already set, its style will be replaced accordingly.</p> Java / KubeJS <pre><code>label.setColor(0xFFFFFFFF); // ARGB\n</code></pre>"},{"location":"en/ldlib/ui/widget/Label/#setdropshadow","title":"<code>setDropShadow()</code>","text":"<p>Enables or disables the drop shadow effect for the label.</p> Java / KubeJS <pre><code>label.setDropShadow(true);\n</code></pre>"},{"location":"en/ldlib/ui/widget/PlantomSlot/","title":"PhantomSlotWidget","text":""},{"location":"en/ldlib/ui/widget/PlantomSlot/#phantomslotwidget","title":"PhantomSlotWidget","text":"Your browser does not support video.    <p>The <code>PhantomSlotWidget</code> is a UI widget representing a \"phantom\" item slot, commonly used for ghost ingredient inputs in recipe configurations. Unlike regular slots, it does not interact with real inventories but allows setting, modifying, and clearing items for visual or configurational purposes.</p>"},{"location":"en/ldlib/ui/widget/PlantomSlot/#features","title":"Features","text":"<ul> <li>Does not allow item taking or putting from real inventories.</li> <li>Supports setting items via UI clicks or API calls.</li> <li>Allows right-click clearing (<code>clearSlotOnRightClick</code>).</li> <li>Supports integration with JEI/EMI for ghost ingredient handling.</li> </ul>"},{"location":"en/ldlib/ui/widget/PlantomSlot/#basic-properties","title":"Basic Properties","text":"Field Description <code>maxStackSize</code> Maximum allowed stack size in this phantom slot. <code>clearSlotOnRightClick</code> Whether right-clicking clears the slot."},{"location":"en/ldlib/ui/widget/PlantomSlot/#apis","title":"APIs","text":"<p>It owns all APIs from <code>SlotWidget</code>, and you can get or set item by its APIs.</p>"},{"location":"en/ldlib/ui/widget/PlantomSlot/#setclearslotonrightclick","title":"setClearSlotOnRightClick","text":"<p>Configures whether right-clicking on the slot clears its contents.</p> Java / KubeJS <pre><code>phantomSlot.setClearSlotOnRightClick(true);\n</code></pre>"},{"location":"en/ldlib/ui/widget/PlantomSlot/#setmaxstacksize","title":"setMaxStackSize","text":"<p>Sets the maximum allowed stack size in the phantom slot.</p> Java / KubeJS <pre><code>phantomSlot.setMaxStackSize(64);\n</code></pre>"},{"location":"en/ldlib/ui/widget/PlantomSlot/#mouse-interactions","title":"Mouse Interactions","text":"<p>Phantom slots handle different types of mouse interactions:</p> Mouse Action Effect Left-click on empty slot with an item Sets the item to the slot Left-click on filled slot with an item Replaces the item in the slot Right-click on filled slot Decreases stack size Shift + Click Adjusts stack size dynamically Right-click on empty slot Clears the slot (if <code>clearSlotOnRightClick</code> is enabled)"},{"location":"en/ldlib/ui/widget/PlantomTank/","title":"PhantomTankWidget","text":""},{"location":"en/ldlib/ui/widget/PlantomTank/#phantomtankwidget","title":"PhantomTankWidget","text":"Your browser does not support video.    <p>The <code>PhantomTankWidget</code> is a ghost fluid slot that allows setting fluid content without actual transfer mechanics. It's useful for defining recipe inputs or fluid placeholders.</p>"},{"location":"en/ldlib/ui/widget/PlantomTank/#features","title":"Features","text":"<ul> <li>Phantom fluid storage \u2013 Doesn't actually consume or provide fluids.</li> <li>Supports drag-and-drop \u2013 Accepts fluid items from JEI, EMI, or REI.</li> <li>Custom event handling \u2013 Updates an external state when fluid changes.</li> </ul>"},{"location":"en/ldlib/ui/widget/PlantomTank/#apis","title":"APIs","text":"<p>It owns all APIs from <code>TankWidget</code>, and you can get or set item by its APIs.</p>"},{"location":"en/ldlib/ui/widget/PlantomTank/#setifluidstackupdater","title":"setIFluidStackUpdater","text":"<p>Registers a callback to track fluid changes.</p> JavaKubeJS <pre><code>phantomTank.setIFluidStackUpdater(fluid -&gt; {\n    System.out.println(\"New phantom fluid: \" + fluid);\n});\n</code></pre> <pre><code>phantomTank.setIFluidStackUpdater(fluid =&gt; {\n    console.log(\"New phantom fluid: \" + fluid);\n});\n</code></pre>"},{"location":"en/ldlib/ui/widget/Selector/","title":"SelectorWidget","text":""},{"location":"en/ldlib/ui/widget/Selector/#selectorwidget","title":"SelectorWidget","text":"Your browser does not support video.    <p>The <code>SelectorWidget</code> is a dropdown-style selection widget that allows users to pick an option from a predefined list. It supports dynamically updating the selection list, displaying a configurable UI, and handling selection changes efficiently.</p>"},{"location":"en/ldlib/ui/widget/Selector/#features","title":"Features","text":"<ul> <li>Dropdown selection \u2013 Expands to show available choices.</li> <li>Event handling \u2013 Fires callbacks when the selection changes.</li> </ul>"},{"location":"en/ldlib/ui/widget/Selector/#properties","title":"Properties","text":"Field Type Description <code>currentValue</code> <code>String</code> Currently selected option."},{"location":"en/ldlib/ui/widget/Selector/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/widget/Selector/#setcandidates","title":"setCandidates","text":"<p>Updates the list of selectable options.</p> JavaKubeJS <pre><code>selectorWidget.setCandidates(List.of(\"OptionA\", \"OptionB\", \"OptionC\"));\n</code></pre> <pre><code>selectorWidget.setCandidates([\"OptionA\", \"OptionB\", \"OptionC\"]);\n</code></pre> <ul> <li>Triggers a UI update to reflect the new options.</li> </ul>"},{"location":"en/ldlib/ui/widget/Selector/#setvalue","title":"setValue","text":"<p>Sets the currently selected value.</p> Java / KubeJS <pre><code>selectorWidget.setValue(\"OptionA\");\n</code></pre> <ul> <li>If the value is not found in <code>candidates</code>, it remains unchanged.</li> </ul>"},{"location":"en/ldlib/ui/widget/Selector/#setmaxcount","title":"setMaxCount","text":"<p>Defines how many options should be visible before scrolling.</p> Java / KubeJS <pre><code>selectorWidget.setMaxCount(3);\n</code></pre> <ul> <li>If there are more than <code>maxCount</code> options, a scrollbar is added.</li> </ul>"},{"location":"en/ldlib/ui/widget/Selector/#setfontcolor","title":"setFontColor","text":"<p>Changes the color of option text.</p> Java / KubeJS <pre><code>selectorWidget.setFontColor(0xFFFFFF); // White text\n</code></pre>"},{"location":"en/ldlib/ui/widget/Selector/#setbuttonbackground","title":"setButtonBackground","text":"<p>Sets the background texture for the button area.</p> Java / KubeJS <pre><code>selectorWidget.setButtonBackground(myCustomTexture);\n</code></pre>"},{"location":"en/ldlib/ui/widget/Selector/#setonchanged","title":"setOnChanged","text":"<p>Registers a callback to handle selection changes.</p> JavaKubeJS <pre><code>selectorWidget.setOnChanged(selected -&gt; {\n    System.out.println(\"New selection: \" + selected);\n});\n</code></pre> <pre><code>selectorWidget.setOnChanged(selected =&gt; {\n    console.log(\"New selection: \" + selected);\n});\n</code></pre> <ul> <li>This is useful for updating UI state or triggering game logic.</li> </ul>"},{"location":"en/ldlib/ui/widget/Selector/#setcandidatessupplier","title":"setCandidatesSupplier","text":"<p>Automatically updates the option list from a dynamic source.</p> JavaKubeJS <pre><code>selectorWidget.setCandidatesSupplier(() -&gt; fetchDynamicOptions());\n</code></pre> <pre><code>selectorWidget.setCandidatesSupplier(() =&gt; fetchDynamicOptions());\n</code></pre> <ul> <li>The widget polls this function to refresh the list.</li> <li>Useful when candidates change based on external conditions.</li> </ul>"},{"location":"en/ldlib/ui/widget/Selector/#setshow","title":"setShow","text":"<p>Manually toggles the dropdown visibility.</p> Java / KubeJS <pre><code>selectorWidget.setShow(true); // Opens dropdown\n</code></pre>"},{"location":"en/ldlib/ui/widget/Slot/","title":"SlotWidget","text":""},{"location":"en/ldlib/ui/widget/Slot/#slotwidget","title":"SlotWidget","text":"<p>The <code>SlotWidget</code> represents an interactive item slot within a container GUI. This widget supports configurable properties such as whether items can be taken or placed, customizable hover overlays and tooltips, and integration with JEI/REI/EMI systems for displaying ingredient details. It can be configured to represent a slot in either a standard inventory container or via an item transfer handler.</p> <p>Note</p> <p>You cannot modify slot widget size.</p>"},{"location":"en/ldlib/ui/widget/Slot/#basic-properties","title":"Basic Properties","text":"Field Description canTakeItems Indicates if items can be extracted from the slot (modifiable via setter) canPutItems Indicates if items can be inserted into the slot (modifiable via setter) drawHoverOverlay Determines whether a hover overlay is drawn when the mouse is over the slot drawHoverTips Determines whether tooltips are shown when the mouse hovers over the slot lastItem Item stored in the last tick."},{"location":"en/ldlib/ui/widget/Slot/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/widget/Slot/#setcontainerslot","title":"setContainerSlot","text":"<p>Associates the widget with an inventory container by specifying the slot index. e.g. player inventory.</p> Java / KubeJS <pre><code>var player = ...;\nslotWidget.setContainerSlot(player.getInventory(), 2); // bind the player inventory of 2 index.\n</code></pre>"},{"location":"en/ldlib/ui/widget/Slot/#sethandlerslot","title":"setHandlerSlot","text":"<p>Configures the widget to use an item transfer handler with the specified slot index. </p>"},{"location":"en/ldlib/ui/widget/Slot/#java","title":"Java","text":"<p>For Java User !!!</p> <p>If you want to use the handler of <code>ItemStackHandler</code>(from forge) or <code>Storage&lt;ItemVariant&gt;</code>(from fabric), you need one more line. Because Forge and Fabric has different APIs, you need to convert the handler into the LDLib one, which can be found in <code>ItemTransferHelperImpl</code>.</p> ForgeFabric <pre><code>var itemHandler = ...;\nvar itemTransfer = ItemTransferHelperImpl.toItemTransfer(itemHandler);\n</code></pre> <pre><code>var storage = ...;\nvar itemTransfer = ItemTransferHelperImpl.toItemTransfer(storage);\n</code></pre>"},{"location":"en/ldlib/ui/widget/Slot/#kubejs","title":"KubeJS","text":"<p>KubeJS user do not need to do such mess. We have already convert them into a item transfer internal already.</p> KubeJS <pre><code>slotWidget.setHandlerSlot(itemTransfer, 0);\n</code></pre>"},{"location":"en/ldlib/ui/widget/Slot/#setitem","title":"setItem","text":"<p>Set the internal itemstack with/without notify.</p> Java / KubeJS <pre><code>slotWidget.setItem(itemstack); // it will also trigger the listen you set\nslotWidget.setItem(itemstack, false); // it wont trigger the listen\n</code></pre>"},{"location":"en/ldlib/ui/widget/Slot/#getitem","title":"getItem","text":"<p>Get the internal itemstack stored.</p> Java / KubeJS <pre><code>var itemstack = slotWidget.getItem();\n</code></pre>"},{"location":"en/ldlib/ui/widget/Slot/#setchangelistener","title":"setChangeListener","text":"<p>Configures additional slot location information, such as whether it belongs to the player container or hotbar. It will affect the shift move behaviour.</p> JavaKubeJS <pre><code>slotWidget.setChangeListener(() -&gt; {\n    var last = slotWidget.getLastItem();\n    var current = slotWidget.getItem();\n});\n</code></pre> <pre><code>slotWidget.setChangeListener(() =&gt; {\n    let last = slotWidget.getLastItem();\n    let current = slotWidget.getItem();\n});\n</code></pre>"},{"location":"en/ldlib/ui/widget/Slot/#canputstack","title":"canPutStack","text":"<p>Whether can put stack into the slot.</p> Java / KubeJS <pre><code>slotWidget.canPutStack(true);\n</code></pre>"},{"location":"en/ldlib/ui/widget/Slot/#cantakestack","title":"canTakeStack","text":"<p>Whether can take stack from the slot.</p> Java / KubeJS <pre><code>slotWidget.canTakeStack(true);\n</code></pre>"},{"location":"en/ldlib/ui/widget/Slot/#setlocationinfo","title":"setLocationInfo","text":"<p>Configures additional slot location information, such as whether it belongs to the player container or hotbar. It will affect the shift move behaviour.</p> Java / KubeJS <pre><code>slotWidget.setLocationInfo(true, false); // (isPlayerContainer isPlayerHotBar)\n</code></pre>"},{"location":"en/ldlib/ui/widget/Switch/","title":"SwitchWidget","text":""},{"location":"en/ldlib/ui/widget/Switch/#switchwidget","title":"SwitchWidget","text":"<p>The <code>SwitchWidget</code> is a toggle button that switches between an ON and OFF state. It supports custom textures, event callbacks, and dynamic state updates.</p>"},{"location":"en/ldlib/ui/widget/Switch/#features","title":"Features","text":"<ul> <li>Toggle button behavior \u2013 Click to switch between ON and OFF.</li> <li>Event handling \u2013 Fires callbacks when the switch state changes.</li> </ul>"},{"location":"en/ldlib/ui/widget/Switch/#properties","title":"Properties","text":"Field Type Description <code>isPressed</code> <code>boolean</code> (default: false) Current switch state."},{"location":"en/ldlib/ui/widget/Switch/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/widget/Switch/#setpressed","title":"setPressed","text":"<p>Sets the ON/OFF state of the switch.</p> Java / KubeJS <pre><code>switchWidget.setPressed(true); // Turns ON\n</code></pre> <ul> <li>Triggers UI updates and event callbacks.</li> </ul>"},{"location":"en/ldlib/ui/widget/Switch/#setonpresscallback","title":"setOnPressCallback","text":"<p>Registers a callback when the switch is clicked.</p> JavaKubeJS <pre><code>switchWidget.setOnPressCallback((clickData, state) -&gt; {\n    System.out.println(\"Switch is now: \" + state);\n});\n</code></pre> <pre><code>switchWidget.setOnPressCallback((clickData, state) =&gt; {\n    console.log(\"Switch is now: \" + state);\n});\n</code></pre>"},{"location":"en/ldlib/ui/widget/Switch/#setsupplier","title":"setSupplier","text":"<p>Automatically syncs with an external state.</p> JavaKubeJS <pre><code>switchWidget.setSupplier(() -&gt; getCurrentState()); // bool\n</code></pre> <pre><code>switchWidget.setSupplier(() =&gt; getCurrentState()); // bool\n</code></pre> <ul> <li>Updates dynamically when <code>getCurrentState()</code> changes.</li> </ul>"},{"location":"en/ldlib/ui/widget/Tank/","title":"TankWidget","text":""},{"location":"en/ldlib/ui/widget/Tank/#tankwidget","title":"TankWidget","text":"<p>The <code>TankWidget</code> represents a fluid slot widget within a container GUI. It displays a fluid in a designated tank and supports fluid interactions such as filling and emptying. In addition, it integrates with external systems (JEI/REI/EMI) to show fluid ingredient details and provides configurable options for hover overlays, tooltips, and click behavior.</p>"},{"location":"en/ldlib/ui/widget/Tank/#basic-properties","title":"Basic Properties","text":"Field Description fluidTank The fluid storage or transfer handler associated with this widget tank The index of the fluid tank being represented showAmount Determines whether the fluid amount is displayed allowClickFilled Controls whether clicking the slot when filled triggers container-filling behavior allowClickDrained Controls whether clicking the slot when empty triggers container-emptying behavior drawHoverOverlay Indicates if a hover overlay should be drawn when the mouse is over the widget drawHoverTips Indicates if hover tooltips should be displayed fillDirection The direction in which the fluid fill is rendered (e.g. DOWN_TO_UP) lastFluidInTank Last fluid stored in the tank lastTankCapacity Last tank capacity"},{"location":"en/ldlib/ui/widget/Tank/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/widget/Tank/#setfluidtank-ifluidstorage","title":"setFluidTank (IFluidStorage)","text":"<p>Associates the widget with a fluid storage and sets the tank index to 0.</p> Java / KubeJS <pre><code>tankWidget.setFluidTank(fluidStorage);\n</code></pre>"},{"location":"en/ldlib/ui/widget/Tank/#setfluidtank-ifluidtransfer-int","title":"setFluidTank (IFluidTransfer, int)","text":"<p>Associates the widget with a fluid transfer handler and specifies the tank index.</p> Java / KubeJS <pre><code>tankWidget.setFluidTank(fluidTransfer, 1);\n</code></pre>"},{"location":"en/ldlib/ui/widget/Tank/#setfluid","title":"setFluid","text":"<p>Set the internal fluidstack with/without notify.</p> Java / KubeJS <pre><code>tankWidget.setFluid(fluidstack); // it will also trigger the listen you set\ntankWidget.setFluid(fluidstack, false); // it wont trigger the listen\n</code></pre>"},{"location":"en/ldlib/ui/widget/Tank/#getfluid","title":"getFluid","text":"<p>Get the internal fluidstack stored.</p> Java / KubeJS <pre><code>var fluidstack = tankWidget.getFluid();\n</code></pre>"},{"location":"en/ldlib/ui/widget/Tank/#setchangelistener","title":"setChangeListener","text":"<p>Configures additional slot location information, such as whether it belongs to the player container or hotbar. It will affect the shift move behaviour.</p> JavaKubeJS <pre><code>tankWidget.setChangeListener(() -&gt; {\n    var last = tankWidget.getLastFluidInTank();\n    var current = tankWidget.getFluid();\n});\n</code></pre> <pre><code>slotWidget.setChangeListener(() =&gt; {\n    let last = tankWidget.getLastFluidInTank();\n    let current = tankWidget.getFluid();\n});\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextField/","title":"TextFieldWidget","text":""},{"location":"en/ldlib/ui/widget/TextField/#textfieldwidget","title":"TextFieldWidget","text":"Your browser does not support video.    <p>The <code>TextFieldWidget</code> provides an editable text field for GUI interfaces. It supports dynamic text updates via a supplier and responder, validation through custom validators, and configurable properties such as maximum string length, border style, and text color.</p>"},{"location":"en/ldlib/ui/widget/TextField/#basic-properties","title":"Basic Properties","text":"Field Description currentString The current text displayed by the text field maxStringLength Maximum allowed length for the text isBordered Determines whether the text field has a border textColor The color of the text (modifiable via setter) supplier A supplier for dynamic text updates textResponder A responder that handles text changes wheelDur Duration (or step value) used for mouse wheel adjustments"},{"location":"en/ldlib/ui/widget/TextField/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/widget/TextField/#settextsupplier","title":"setTextSupplier","text":"<p>Sets the supplier used to update the text dynamically.</p> Java / KubeJS <pre><code>textFieldWidget.setTextSupplier(() -&gt; \"Dynamic Text\");\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextField/#settextresponder","title":"setTextResponder","text":"<p>Sets the responder to be called when the text changes.</p> Java / KubeJS <pre><code>textFieldWidget.setTextResponder(newText -&gt; {\n    // Handle text change\n});\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextField/#setbordered","title":"setBordered","text":"<p>Configures whether the text field should display a border.</p> Java / KubeJS <pre><code>textFieldWidget.setBordered(true);\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextField/#settextcolor","title":"setTextColor","text":"<p>Sets the text color for the text field.</p> Java / KubeJS <pre><code>textFieldWidget.setTextColor(0xffffff);\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextField/#setmaxstringlength","title":"setMaxStringLength","text":"<p>Sets the maximum number of characters allowed in the text field.</p> Java / KubeJS <pre><code>textFieldWidget.setMaxStringLength(100);\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextField/#setvalidator","title":"setValidator","text":"<p>Assigns a custom validator function to control and sanitize text input.</p> Java / KubeJS <pre><code>textFieldWidget.setValidator(text -&gt; text.trim());\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextField/#setcompoundtagonly","title":"setCompoundTagOnly","text":"<p>Restricts input to valid compound tags. Displays a tooltip indicating the restriction.</p> Java / KubeJS <pre><code>textFieldWidget.setCompoundTagOnly();\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextField/#setresourcelocationonly","title":"setResourceLocationOnly","text":"<p>Restricts input to valid resource locations. Displays a tooltip indicating the restriction.</p> Java / KubeJS <pre><code>textFieldWidget.setResourceLocationOnly();\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextField/#setnumbersonly","title":"setNumbersOnly","text":"<p>Restricts input to numeric values. Overloads are available for different numeric types.</p> JavaKubeJS <pre><code>textFieldWidget.setNumbersOnly(0, 100); // int\ntextFieldWidget.setNumbersOnly(0.0f, 1.0f); // float\n</code></pre> <pre><code>textFieldWidget.setNumbersOnlyInt(0, 100); // int\ntextFieldWidget.setNumbersOnlyFloat(0, 100); // float\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextField/#setwheeldur","title":"setWheelDur","text":"<p>Sets the wheel duration (step value) for adjusting numbers via mouse wheel or dragging.</p> Java / KubeJS <pre><code>textFieldWidget.setWheelDur(1);\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextTexture/","title":"TextTextureWidget","text":""},{"location":"en/ldlib/ui/widget/TextTexture/#texttexturewidget","title":"TextTextureWidget","text":"<p><code>TextTextureWidget</code> is an advanced text widget compared with <code>LabelWidget</code>. It wrapper an internal <code>TextTexture</code>, therefore, you can set the all text rendering properties by it.</p>"},{"location":"en/ldlib/ui/widget/TextTexture/#basic-properties","title":"Basic Properties","text":"Field Description lastComponent The last component text displayed  <code>read only</code> textTexture Internal <code>TextTexture</code> <code>read only</code>"},{"location":"en/ldlib/ui/widget/TextTexture/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/widget/TextTexture/#texturestyle","title":"textureStyle","text":"<p>Modifies the style of the internal text texture. see <code>TextTexture</code> for more details.</p> JavaKubeJS <pre><code>textTextureWidget.textureStyle(texture -&gt; {\n    texture.setType(TextType.ROLL);\n    texture.setRollSpeed(0.5);\n});\n</code></pre> <pre><code>textTextureWidget.textureStyle(texture =&gt; {\n    texture.setType(TextType.ROLL);\n    texture.setRollSpeed(0.5);\n});\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextTexture/#settext","title":"<code>setText</code>","text":"<p>Sets the text using a string.</p> Java / KubeJS <pre><code>textTextureWidget.setText(\"Hello World\");\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextTexture/#settext-setcomponent","title":"<code>setText</code> / <code>setComponent</code>","text":"<p>Sets the text using a Component.</p> JavaKubeJS <pre><code>textTextureWidget.setText(Component.literal(\"Hello World\"));\n</code></pre> <pre><code>textTextureWidget.setComponent(\"....\");\n</code></pre>"},{"location":"en/ldlib/ui/widget/TextTexture/#settext-settextprovider","title":"<code>setText / setTextProvider</code>","text":"<p>Sets the text using a Supplier.</p> JavaKubeJS <pre><code>textTextureWidget.setText(() -&gt; \"dynamic text\");\n</code></pre> <pre><code>textTextureWidget.setTextProvider(() =&gt; Component.string(\"dynamic text\"));\n</code></pre>"},{"location":"en/ldlib/ui/widget/WidgetGroup/","title":"WidgetGroup","text":""},{"location":"en/ldlib/ui/widget/WidgetGroup/#widgetgroup","title":"WidgetGroup","text":"<p> <code>WidgetGroup</code></p> <p><code>WidgetGroup</code> is a container which can add child widgets. Widget inherints from <code>WidgetGroup</code> can add child widgets as well. </p> <p>Note</p> <p>We will add a  <code>WidgetGroup</code> for all widget inherints from it.</p>"},{"location":"en/ldlib/ui/widget/WidgetGroup/#basic-properties","title":"Basic properties","text":"<p>All properties can be accessed via Java / KubeJS.</p> Field Description <code>widgets</code> all child widgets <code>layout</code> layout of child widgets <code>layoutPadding</code> padding offset JavaKubeJS <pre><code>for (var child in group.widgets) {\n\n}\n</code></pre> <pre><code>for (let child of group.widgets) {\n\n}\n</code></pre> <p>Warning</p> <p>DO NOT add widget to the <code>group.widgets</code> directly!! please check below methods.</p>"},{"location":"en/ldlib/ui/widget/WidgetGroup/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/widget/WidgetGroup/#addwidgets","title":"<code>addWidgets()</code>","text":"<p>Add child widgets to it in order.</p> Java / KubeJS <pre><code>var button = ...;\nvar label = ...;\ngroup.addWidgets(button, label);\n</code></pre>"},{"location":"en/ldlib/ui/widget/WidgetGroup/#removewidget-clearallwidgets","title":"<code>removeWidget() / clearAllWidgets()</code>","text":"<p>Remove child widget from it.</p> Java / KubeJS <pre><code>var child = group.getFirstWidgetById(\"button_id\");\ngroup.removeWidget(child);\ngroup.clearAllWidget();\n</code></pre>"},{"location":"en/ldlib/ui/widget/WidgetGroup/#waittoadded-waittoremoved","title":"<code>waitToAdded() / waitToRemoved()</code>","text":"<p>Basically equals to the <code>addWidgets()</code> and <code>removeWidget()</code>. However, these two methods is useful for iteration and multi-thread. It handles widget in the next tick (in main thread).</p>"},{"location":"en/ldlib/ui/widget/progress/","title":"ProgressWidget","text":""},{"location":"en/ldlib/ui/widget/progress/#progresswidget","title":"ProgressWidget","text":"Your browser does not support video.    <p>The <code>ProgressWidget</code> is a UI component that visually represents progress using a progress bar. It can be used in various contexts, such as tracking crafting progress, energy levels, or other dynamically changing values.</p>"},{"location":"en/ldlib/ui/widget/progress/#features","title":"Features","text":"<ul> <li>Customizable progress texture \u2013 Define how the progress bar looks.</li> <li>Dynamic progress updates \u2013 Uses a <code>DoubleSupplier</code> to fetch real-time progress.</li> </ul>"},{"location":"en/ldlib/ui/widget/progress/#properties","title":"Properties","text":"Field Type Description <code>lastProgressValue</code> <code>double</code> Stores the last recorded progress value."},{"location":"en/ldlib/ui/widget/progress/#apis","title":"APIs","text":""},{"location":"en/ldlib/ui/widget/progress/#setprogresssupplier","title":"setProgressSupplier","text":"<p>Sets a progress supplier from 0 to 1.</p> JavaKubeJS <pre><code>progressWidget.setProgressSupplier(() -&gt; 0.3);\n</code></pre> <pre><code>progressWidget.setProgressSupplier(() =&gt; 0.3);\n</code></pre>"},{"location":"en/ldlib/ui/widget/progress/#setdynamichovertips","title":"setDynamicHoverTips","text":"<p>Sets a dynamic hovertips based on the progress value.</p> JavaKubeJS <pre><code>progressWidget.setDynamicHoverTips(progress -&gt; \"current progress is %.f%\".format(progress * 100));\n</code></pre> <pre><code>progressWidget.setDynamicHoverTips(progress =&gt; `current progress is ${progress * 100}%` );\n</code></pre>"},{"location":"en/ldlib2/","title":"Introduction","text":""},{"location":"en/ldlib2/#introduction","title":"Introduction","text":"<p> Since 2.0.0 </p> <p>LDLib2 is a complete rewrite of the original LDLib, redesigned from the ground up to support modern versions of Minecraft. It provides advanced, high-level solutions across many areas of mod development, significantly reducing development complexity and long-term maintenance cost.</p> <p>LDLib2 features a large, well-structured codebase that offers robust infrastructure for UI systems\uff0c shader, model rendering, data synchronization and persistence, and in-game visual editors, enabling developers to build complex systems more efficiently.</p> <p> Join our Discord </p> <p> LDLib2 Repository</p>"},{"location":"en/ldlib2/#key-differences-from-ldlib","title":"\ud83d\udca1 Key Differences from LDLib","text":"<ul> <li>Fully redesigned architecture All core systems have been rewritten to align with the internal structure of modern Minecraft versions, resulting in cleaner and more reliable code.</li> <li>Comprehensive documentation LDLib2 includes detailed documentation, comments, and example code, addressing LDLib\u2019s long-standing issues of unclear and difficult-to-read implementations.</li> <li>Removal of legacy systems Many outdated or unused frameworks have been removed, making LDLib2 more lightweight and easier to maintain.</li> <li>Improved mod compatibility Provides more stable and stable integration for mainstream mods such as JEI, KubeJS, and EMI, etc.</li> </ul>"},{"location":"en/ldlib2/#core-modules","title":"Core Modules","text":"<ul> <li>Data Synchronization and Persistence </li> <li>LDLib2 UI </li> <li>Shaders</li> <li>Model Rendering</li> <li>In-game Editor</li> </ul>"},{"location":"en/ldlib2/java_integration/","title":"Java Integration","text":""},{"location":"en/ldlib2/java_integration/#java-integration","title":"Java Integration","text":"<p> Since 2.0.0 </p>"},{"location":"en/ldlib2/java_integration/#maven","title":"maven","text":"<p>You can find the latest version from our maven.</p> <p></p> <pre><code>repositories {\n    // LDLib2\n    maven { url = \"https://maven.firstdark.dev/snapshots\" } \n}\n\ndependencies {\n    // LDLib2\n    implementation(\"com.lowdragmc.ldlib2:ldlib2-neoforge-${minecraft_version}:${ldlib2_version}:all\") { transitive = false }\n    compileOnly(\"org.appliedenergistics.yoga:yoga:1.0.0\")   \n}\n</code></pre>"},{"location":"en/ldlib2/java_integration/#idea-plugin-ldlib-dev-tool","title":"IDEA Plugin - LDLib Dev Tool","text":"<p>If you are going to develop with LDLib2, we strongly recommend you to install our IDEA Plugin LDLib Dev Tool.  The plugin has:</p> <ul> <li>code highlight</li> <li>syntax check</li> <li>cdoe jumping</li> <li>auto complete</li> <li>others</li> </ul> <p>which greatly assist you in utilizing features of LDLib2. Especially, all the annotations of LDLib2 have been supported for use.</p>"},{"location":"en/ldlib2/java_integration/#ldlibplugin","title":"LDLibPlugin","text":"<p>You can create a LDLibPlugin by using <code>ILDLibPlugin</code> and <code>@LDLibPlugin</code> </p><pre><code>@LDLibPlugin\npublic class MyLDLibPlugin implements ILDLibPlugin {\n    public void onLoad() {\n        // do your register or setup for LDLib2 here.\n    }\n}\n</code></pre><p></p>"},{"location":"en/ldlib2/sync/","title":"Introduction","text":""},{"location":"en/ldlib2/sync/#introduction","title":"Introduction","text":"<p> Since 2.0.0 </p> <p>One of the most repetitive and error-prone tasks in Minecraft mod development is handling data synchronization between server and client, as well as data persistence.</p> <p>Whether you are working with: - Block Entities - Entities - Screens / GUIs - Any object that you want </p> <p>...you will always face the same three questions:</p> <ol> <li>When should the data be synchronized? (per tick\uff1fon change\uff1fopen gui\uff1f)</li> <li>What data should be synchronized? (which fields should be handled?)</li> <li>How should it be serialized or saved? (nbt io?)</li> </ol> <p>Why is this such a problem?</p> <p>Although synchronization and persistence are not inherently difficult,  writing them cleanly usually requires a large amount of boilerplate code:  </p> <ul> <li>Repeated NBT read/write logic  </li> <li>Manual networking packets  </li> <li>Duplicate sync logic spread across classes  </li> <li>Easily desynchronized client/server states  </li> <li>Hard-to-read and hard-to-maintain code  </li> <li>Performance issues caused by unnecessary sync calls</li> </ul>"},{"location":"en/ldlib2/sync/#the-limitations-of-mojangs-codec-system","title":"The Limitations of Mojang\u2019s Codec System","text":"<p>Modern Minecraft introduces the <code>Codec</code> and <code>StreamCodec</code> systems, which greatly simplify data structure definition.</p> <p>However:</p> <p>Codec helps with format, but not with syncing</p> <p>To actually use Codec in a mod, you still need to:</p> <ul> <li>Manually define codec structures  </li> <li>Write encode/decode logic  </li> <li>Explicitly trigger synchronization  </li> <li>Manage packets  </li> <li>Dispatch updates to the client  </li> </ul> <p>Codec reduces formatting pain, but does not reduce the amount of sync/persistence code.</p>"},{"location":"en/ldlib2/sync/#simplifying-synchronization-and-persistence","title":"Simplifying synchronization and persistence","text":"<p>To solve these long-standing issues, LDLib2 provides an annotation-based data management framework that:</p> <ul> <li>Automatically synchronizes data between <code>server</code> and <code>client</code>.</li> <li>Automatically handles persistence for any classes.</li> <li>Detects changes and syncs only what is needed.</li> <li>Offloads serialization to background threads (multi-core friendly).</li> <li>Works declaratively\u2014just annotate fields, and you\u2019re done. </li> </ul> <p>The goal is simple:</p> <p>Core idea: You should not write sync or serialization code manually</p> <p>Declare what a field is \u2014 LDLib2 handles how it is synced and saved.</p> <p>Below is a minimal example showing how much code you would normally write between <code>Vanilla (forge)</code> and <code>LDLib2</code>. </p> <p>(click the tab to switch code)</p> \u274cVanilla / Forge-style Implementation\u2705 With LDLib2 <pre><code>public class ExampleBE extends BlockEntity {\n\n    private int energy = 0;\n    private String owner = \"\";\n\n    @Override\n    public void saveAdditional(CompoundTag tag) {\n        super.saveAdditional(tag);\n        tag.putInt(\"Energy\", energy);\n        tag.putString(\"Owner\", owner);\n    }\n\n    @Override\n    public void load(CompoundTag tag) {\n        super.load(tag);\n        energy = tag.getInt(\"Energy\");\n        owner = tag.getString(\"Owner\");\n    }\n\n    @Override\n    public CompoundTag getUpdateTag() {\n        CompoundTag tag = new CompoundTag();\n        saveAdditional(tag);\n        return tag;\n    }\n\n    @Override\n    public void onDataPacket(Connection net, ClientboundBlockEntityDataPacket pkt) {\n        load(pkt.getTag());\n    }\n\n    protected void syncAndSave() {\n        if (!level.isClientSide) {\n            setChanged();\n            level.sendBlockUpdated(worldPosition, getBlockState(), getBlockState(), 3);\n        }\n    }\n\n    public void setEnergy(int newEnergy) {\n        if (this.energy != newEnergy) {\n            this.energy = newEnergy;\n            syncAndSave();\n        }\n    }\n\n    public void setOwner(String newOwner) {\n        if (this.energy != newOwner) {\n            this.energy = newOwner;\n            syncAndSave();\n        }\n    }\n}\n</code></pre> <pre><code>public class ExampleBE extends BlockEntity implements ISyncPersistRPCBlockEntity {\n    @Getter\n    private final FieldManagedStorage syncStorage = new FieldManagedStorage(this);\n\n    // your fields\n    @Persisted\n    @DescSynced\n    public int energy = 0;\n\n    @Persisted\n    @DescSynced\n    public String owner = \"\";\n}\n</code></pre> <p>As you can see from the comparison, the annotation-driven system provided by LDLib2 is dramatically simpler and far more expressive than the traditional vanilla or Forge-style approach.</p> <p>You do not need any additional boilerplate. Whenever <code>energy</code> or <code>owner</code> changes, LDLib2 will automatically handle:</p> <ul> <li>change detection  </li> <li>server \u2192 client synchronization  </li> <li>data persistence</li> </ul> <p>\u2026without requiring you to manually call any sync or save function.</p>"},{"location":"en/ldlib2/sync/#more-than-just-fewer-lines-of-code","title":"More Than Just Fewer Lines of Code","text":"<p>With the vanilla Forge workflow, if you want to optimize synchronization\u2014such as syncing only selected fields, or syncing only fields that have changed\u2014you often end up writing even more complex code:</p> <ul> <li>manual dirty-flag tracking  </li> <li>custom packet structures  </li> <li>explicit server/client handlers  </li> <li>duplicated read/write logic  </li> <li>separate persistence and sync systems  </li> <li>multiple layers of conditional logic  </li> </ul> <p>And if you want client \u2192 server synchronization, you must create and register your own networking packets.</p> <p>This leads to a lot of fragmentation and makes the codebase harder to maintain.</p>"},{"location":"en/ldlib2/sync/#ldlib2-provides-a-more-granular-and-modern-system","title":"LDLib2 Provides a More Granular and Modern System","text":"<p>In contrast, LDLib2\u2019s framework is fine-grained, declarative, and fully event-based.</p> <p>It provides:</p> <ul> <li>Automatic change detection   Only modified fields are synchronized.</li> <li>Selective synchronization   You can still manually request field-level sync if you need to.</li> <li>Automatic persistence   Mark any field with <code>@Persisted</code> and it is serialized automatically.</li> <li>Modern bidirectional RPC   Instead of writing packets, you can use LDLib2\u2019s built-in RPC event system for client \u2192 server or server \u2192 client data transfer.</li> <li>Background (asynchronous) serialization   Large or complex data can be serialized off the main thread.</li> <li>Clean, consistent structure   All sync and persistence logic is centralized and declarative.</li> </ul> <p>Because of this design, LDLib2\u2019s system is not only easier to use, but also more powerful, more scalable, and far easier to maintain.</p>"},{"location":"en/ldlib2/sync/#a-modern-approach-to-sync-persistence","title":"A Modern Approach to Sync &amp; Persistence","text":"<p>LDLib2 shifts the model from:</p> <p>\u201cManually synchronize and serialize data every time you use it.\u201d</p> <p>to:</p> <p>\u201cDefine your data once. LDLib2 takes care of the rest.\u201d</p> <p>This results in:</p> <ul> <li>less code  </li> <li>fewer bugs  </li> <li>better performance  </li> <li>a consistent cross-mod structure  </li> <li>easier debugging  </li> <li>better parallelism on modern CPUs  </li> </ul> <p>In the following pages, you will learn how to:</p> <ul> <li>use <code>@Persisted</code>, <code>@DescSynced</code>, and other annotations  </li> <li>manage custom data structures  </li> <li>create RPC events  </li> <li>perform manual (optional) fine-grained sync  </li> <li>integrate LDLib2 with BlockEntities, Entities, and GUI systems  </li> </ul> <p>LDLib2 aims to provide a complete, modern, and highly customizable synchronization framework suitable for almost any modding scenario.</p>"},{"location":"en/ldlib2/sync/#simplifying-codec-serialization","title":"Simplifying Codec &amp; Serialization","text":"<p>While the modern Codec and StreamCodec systems are undeniably powerful and bring a huge improvement to serialization in newer Minecraft versions, defining and using a Codec is still far from effortless. LDLib2 offers a simpler, annotation-driven approach.</p> \u274cVanilla / Forge-style Implementation\u2705 With LDLib2 <pre><code>public class MyObject implements INBTSerializable&lt;CompoundTag&gt; {\n    public final static Codec&lt;MyObject&gt; CODEC = RecordCodecBuilder.create(instance -&gt; instance.group(\n            ResourceLocation.CODEC.fieldOf(\"rl\").forGetter(MyObject::getResourceLocation),\n            Direction.CODEC.fieldOf(\"enum\").forGetter(MyObject::getEnumValue),\n            ItemStack.OPTIONAL_CODEC.fieldOf(\"item\").forGetter(MyObject::getItemstack)\n    ).apply(instance, MyObject::new));\n\n    private ResourceLocation resourceLocation = LDLib2.id(\"test\");\n    private Direction enumValue = Direction.NORTH;\n    private ItemStack itemstack = ItemStack.EMPTY;\n\n    public MyObject(ResourceLocation resourceLocation, Direction enumValue, ItemStack itemstack) {\n        this.resourceLocation = resourceLocation;\n        this.enumValue = enumValue;\n        this.itemstack = itemstack;\n    }\n\n    public ResourceLocation getResourceLocation() {\n        return resourceLocation;\n    }\n\n    public Direction getEnumValue() {\n        return enumValue;\n    }\n\n    public ItemStack getItemstack() {\n        return itemstack;\n    }\n\n    // for INBTSerializable\n    @Override\n    public CompoundTag serializeNBT(HolderLookup.Provider provider) {\n        var tag = new CompoundTag();\n        tag.putString(\"rl\", resourceLocation.toString());\n        tag.putString(\"enum\", enumValue.toString());\n        tag.put(\"item\", ItemStack.OPTIONAL_CODEC.encodeStart(provider.createSerializationContext(NbtOps.INSTANCE), itemstack).getOrThrow());\n        return tag;\n    }\n\n    @Override\n    public void deserializeNBT(HolderLookup.Provider provider, CompoundTag nbt) {\n        resourceLocation = ResourceLocation.parse(nbt.getString(\"rl\"));\n        enumValue = Direction.byName(nbt.getString(\"enum\"));\n        itemstack = ItemStack.OPTIONAL_CODEC.parse(provider.createSerializationContext(NbtOps.INSTANCE), nbt.get(\"item\")).getOrThrow();\n    }\n}\n</code></pre> <pre><code>public class MyObject implements IPersistedSerializable {\n    public final static Codec&lt;MyObject&gt; CODEC = PersistedParser.createCodec(MyObject::new);\n\n    @Persisted(key = \"rl\")\n    private ResourceLocation resourceLocation = LDLib2.id(\"test\");\n    @Persisted(key = \"enum\")\n    private Direction enumValue = Direction.NORTH;\n    @Persisted(key = \"item\")\n    private ItemStack itemstack = ItemStack.EMPTY;\n\n    // IPersistedSerializable is inherited from INBTSerializable you don't need to implement it manually\n}\n</code></pre>"},{"location":"en/ldlib2/sync/#why-this-is-better","title":"Why This Is Better","text":"<p>With vanilla/Forge Codec usage, you must:</p> <ul> <li>define every field in the codec  </li> <li>manually map getters  </li> <li>manage encode/decode errors</li> <li>cope with registry ops</li> </ul> <p>This leads to high boilerplate cost and maintenance difficulty.</p> <p>LDLib2's Advantage</p> <p>LDLib2 can automatically generate a full Codec for your class using </p><pre><code>PersistedParser.createCodec(MyObject::new)\n</code></pre> You no longer need to manually list each field or define how they are encoded.<p></p> <p>As long as a field is annotated with <code>@Persisted</code>, LDLib2 includes it in the generated Codec.</p>"},{"location":"en/ldlib2/sync/#full-nbt-support-no-extra-code-required","title":"Full NBT Support (No Extra Code Required)","text":"<p>By implementing <code>IPersistedSerializable</code>, your class gains:</p> <ul> <li>cope with registry ops</li> <li>automatic NBT serialization  </li> <li>automatic NBT deserialization  </li> <li>full compatibility with any system expecting <code>INBTSerializable</code> </li> </ul>"},{"location":"en/ldlib2/sync/PersistedParser/","title":"PersistedParser","text":""},{"location":"en/ldlib2/sync/PersistedParser/#persistedparser","title":"PersistedParser","text":"<p>PersistedParser is a tool class to serialize and deserialize the object fields with <code>@Persisted</code> or <code>@Configurable</code> annotation.</p>"},{"location":"en/ldlib2/sync/PersistedParser/#serialization","title":"Serialization","text":"<pre><code>@EqualsAndHashCode\npublic class TestData implements IPersistedSerializable {\n    @Persisted\n    private float numberFloat = 0.0f;\n    @Configurable\n    private boolean booleanValue = false;\n    @Persisted(key = \"key\")\n    private String stringValue = \"default\";\n\n    public TestData(float initialValue) {\n        this.numberFloat = initialValue;\n    }\n}\n\nvar instance = new TestData(100f);\nvar output = PersistedParser.serialize(JsonOps.INSTANCE, instance, provider).result().get();\nSystem.out.println(output);\nvar newInstance = new TestData(0f);\nvar data = PersistedParser.deserialize(JsonOps.INSTANCE, output, newInstance, provider);\nSystem.out.println(newInstance.equals(instance));\n</code></pre> <p>Console log should be</p> <pre><code>{\n    \"numberFloat\": 100,\n    \"booleanValue\": false,\n    \"stringValue\": \"default\",\n}\ntrue\n</code></pre>"},{"location":"en/ldlib2/sync/PersistedParser/#create-codec","title":"Create Codec","text":"<p>Another useful tool provided by the PersistedParser is to create a Codec based on annotations.</p> <pre><code> public class MyObject implements IPersistedSerializable {\n    public final static Codec&lt;MyObject&gt; CODEC = PersistedParser.createCodec(MyObject::new);\n\n    @Persisted(key = \"rl\")\n    private ResourceLocation resourceLocation = LDLib2.id(\"test\");\n    @Persisted(key = \"enum\")\n    private Direction enumValue = Direction.NORTH;\n    @Persisted(key = \"item\")\n    private ItemStack itemstack = ItemStack.EMPTY;\n}\n</code></pre> <p>equals to </p> <pre><code>public class MyObject {\n    public final static Codec&lt;MyObject&gt; CODEC = RecordCodecBuilder.create(instance -&gt; instance.group(\n            ResourceLocation.CODEC.fieldOf(\"rl\").forGetter(MyObject::getResourceLocation),\n            Direction.CODEC.fieldOf(\"enum\").forGetter(MyObject::getEnumValue),\n            ItemStack.OPTIONAL_CODEC.fieldOf(\"item\").forGetter(MyObject::getItemstack)\n    ).apply(instance, MyObject::new));\n\n    private ResourceLocation resourceLocation = LDLib2.id(\"test\");\n    private Direction enumValue = Direction.NORTH;\n    private ItemStack itemstack = ItemStack.EMPTY;\n\n    public MyObject(ResourceLocation resourceLocation, Direction enumValue, ItemStack itemstack) {\n        this.resourceLocation = resourceLocation;\n        this.enumValue = enumValue;\n        this.itemstack = itemstack;\n    }\n\n    public ResourceLocation getResourceLocation() {\n        return resourceLocation;\n    }\n\n    public Direction getEnumValue() {\n        return enumValue;\n    }\n\n    public ItemStack getItemstack() {\n        return itemstack;\n    }\n}\n</code></pre>"},{"location":"en/ldlib2/sync/annotations/","title":"Anotations","text":""},{"location":"en/ldlib2/sync/annotations/#anotations","title":"Anotations","text":"<p> Since 2.1.0 </p> <p>We show all anotations and their usage in this page.</p> <p>LDLib Dev Tool</p> <p></p> <p>If you are going to develop with LDLib2, we strongly recommend you to install our IDEA Plugin LDLib Dev Tool.  The plugin has:</p> <ul> <li>code highlight</li> <li>syntax check</li> <li>cdoe jumping</li> <li>auto complete</li> <li>others</li> </ul> <p>which greatly assist you in utilizing features of LDLib2. Especially, all the annotations of LDLib2 have been supported for use.</p>"},{"location":"en/ldlib2/sync/annotations/#common-annotations","title":"Common Annotations","text":""},{"location":"en/ldlib2/sync/annotations/#descsynced","title":"<code>@DescSynced</code>","text":"<p>Annotate a field, the value of this field (server side) should be synced to the client side (specifically, <code>remote</code>)</p> <pre><code>@DescSynced\nint a;\n\n@DescSynced\nprivate ItemStack b = ItemStack.EMPTY;\n\n@DescSynced\nprivate List&lt;ResourceLocation&gt; c = new ArrayList&lt;&gt;();\n</code></pre>"},{"location":"en/ldlib2/sync/annotations/#persisted","title":"<code>@Persisted</code>","text":"<p>Annotate a field, the value of this field (server side) will be written/read to/from BlockEntities' nbt. </p> <p><code>String key()</code> represent tag name in nbt. default -- use field name instead.</p> <pre><code>@Persisted(key = \"fluidAmount\")\nint value = 100;\n@Persisted\nboolean isWater = true;\n</code></pre> <p>its nbt/json looks as below: </p><pre><code>{\n  \"fluidAmount\": 100,\n  \"isWater\": true\n}\n</code></pre><p></p> <p><code>boolean subPersisted()</code> If true, it will wrap the field's internal value based on its <code>non-null</code> instance.</p> <p>It is very useful for <code>final</code> instance which doesn't allow new instance creation. If the filed set <code>subPersisted = true</code>, LDLib2 will do:</p> <ul> <li>if the field inherits from <code>INBTSerializable&lt;?&gt;</code>, it will try to use its api for serialization.</li> <li>otherwise, it will serialize the field's internal values and wrap it as a map.</li> </ul> <pre><code>@Persisted(subPersisted = true) // @Persisted is also fine here, because INBTSerializable is also supported as a read-only field.\nprivate final INBTSerializable&lt;CompoundTag&gt; stackHandler = new ItemStackHandler(5);\n@Persisted(subPersisted = true)\nprivate final TestContainer testContainer = new TestContainer();\n\npublic static class TestContainer {\n    @Persisted\n    private Vector3f vector3fValue = new Vector3f(0, 0, 0);\n    @Persisted\n    private int[] intArray = new int[]{1, 2, 3};\n}\n</code></pre> <p>its nbt/json looks as below: </p><pre><code>{\n    \"stackHandler\": {\n        \"Size\": 5,\n        \"Items\": [],\n    },\n    \"testContainer\": {\n        \"vector3fValue\": [0, 0, 0],\n        \"intArray\": [1, 2, 3],\n    }\n}\n</code></pre><p></p>"},{"location":"en/ldlib2/sync/annotations/#lazymanaged","title":"<code>@LazyManaged</code>","text":"<p>An annotation that marks a field as being managed lazily. This means that the field will only be marked as dirty manually.automatically.  This annotation is useful for fields that are not updated frequently, or for fields that are updated in a batch.</p> <pre><code>@DescSynced\n@Persisted\nint a;\n\n@DescSynced \n@Persisted\n@LayzManaged\nint b;\n\npublic void setA(int value) {\n    this.a = value;  // will be sync/persist automatically, in general\n}\n\npublic void setB(int value) {\n    this.b = value;\n    markDirty(\"b\"); // mannually notify chagned\n}\n</code></pre>"},{"location":"en/ldlib2/sync/annotations/#readonlymanaged","title":"<code>@ReadOnlyManaged</code>","text":"<p>This annotation is used to mark a read-only field that is managed by the user. </p> <p><code>read-only</code> types (e.g. <code>IManaged</code> and <code>INBTSerializable&lt;?&gt;</code>) requires the field to be non-null and the field instance won't be changed (a final field). </p> <p>What are <code>read-only</code> types?</p> <p><code>read-only</code> types refer to fields which are always non-null and immutable, and not sure how to create a new instance of this type. More details can be found in Types Support.</p> <p>Because we don't know how to create a new instance for these types. In this case, you can use this annotation and provide methods to store a unique id from server with <code>serializeMethod()</code> and create a new instance at the client with <code>deserializeMethod()</code>.</p> <p>Furthermore, you can provide a method to self-control whether the field has changed with <code>onDirtyMethod()</code>.</p> <ul> <li><code>onDirtyMethod</code>: specify a method for customize dirty checking. return whether it has changed.     <pre><code>boolean methodName();\n</code></pre></li> <li><code>serializeMethod</code>: return a unique id (<code>Tag</code>) of given instance.     <pre><code>Tag methodName(@Nonnull T obj);\n</code></pre></li> <li><code>deserializeMethod</code>: create an instance via given uid.     <pre><code>T methodName(@Nonnull Tag tag)\n</code></pre></li> </ul> <p>Synchronization Process (Persistence is similar)</p> <pre><code>flowchart LR\n\n    A[Start: Check read-only field] --&gt; B{UID == previous snapshot?}\n\n    %% Step 1\n    B -- No --&gt; C[Mark field as dirty&lt;br/&gt;Store latest snapshot] --&gt; D[Sync UID + Value&lt;br/&gt;Notify remote update]\n    B -- Yes --&gt; E{Value dirty?}\n\n    %% Step 2\n    E -- No --&gt; Z[End]\n    E -- Yes --&gt; F{Has onDirtyMethod?}\n\n    F -- Yes --&gt; G[Use custom method&lt;br/&gt;to check dirty]\n    F -- No --&gt; H[Use registered read-only type&lt;br/&gt;to check dirty]\n\n    %% Step 3\n    G --&gt; I[Field is dirty] --&gt; D\n    H --&gt; I\n\n    %% Remote side\n    D --&gt; R[Remote receives update] --&gt; S{UID equal?}\n\n    %% Step 4\n    S -- No --&gt; T[Create new instance&lt;br/&gt;via deserializeMethod] --&gt; U[Update value via read-only type] --&gt; Z\n    S -- Yes --&gt; U --&gt; Z</code></pre> <ol> <li>To check if a <code>read-only</code> field has internal changes, LDLib2 will first check if unique id is equal to previous snapshot. <ul> <li>If <code>not</code>, mark this field as dirty, and store the latest snapshot.</li> <li>If <code>true</code>, go to step 2.</li> </ul> </li> <li>Check if the the value is dirty compared with previous snapshot.<ul> <li>if <code>onDirtyMethod</code> is not set, LDLib2 will check dirty according to the registered <code>read-only</code> type.</li> <li>if <code>true</code>, use customized method to check if dirty.</li> </ul> </li> <li>If the field is dirty. LDLib2 will sync both uid and value data and ask remote (client) to update value.</li> <li>While the remote receive the changes, it will check uid first. <ul> <li>if not equal, create a new instance based on <code>deserializeMethod</code> first.</li> <li>then update value based on registered <code>read-only</code> type.</li> </ul> </li> </ol> <p>Example</p> <pre><code>@Persisted\n@DescSync\n@ReadOnlyManaged(serializeMethod = \"testGroupSerialize\", deserializeMethod = \"testGroupDeserialize\")\nprivate final List&lt;TestGroup&gt; groupList = new ArrayList&lt;&gt;();\n\npublic static class TestGroup implements IPersistedSerializable {\n    @Persisted\n    private Range rangeValue = Range.of(0, 1);\n    @Persisted\n    private Direction enumValue = Direction.NORTH;\n    @Persisted\n    private Vector3i vector3iValue = new Vector3i(0, 0, 0);\n}\n\npublic IntTag testGroupSerialize(List&lt;TestGroup&gt; groups) {\n    return IntTag.valueOf(groups.size());\n}\n\npublic List&lt;TestGroup&gt; testGroupDeserialize(IntTag tag) {\n    var groups = new ArrayList&lt;TestGroup&gt;();\n    for (int i = 0; i &lt; tag.getAsInt(); i++) {\n        groups.add(new TestGroup());\n    }\n    return groups;\n}\n</code></pre> <p>Note</p> <p>In this example, <code>onDirtyMethod</code> is unncessary. Because <code>TestGroup</code> inherits from <code>IPersistedSerializable</code>, which also inherits from <code>INBTSerializable&lt;?&gt;</code>. Therefore, it is a supported <code>read-only</code> type.</p>"},{"location":"en/ldlib2/sync/annotations/#rpcmethod","title":"<code>@RPCMethod</code>","text":"<p>Annotate a method, you can send RPC packet between server and remote. You are free to define the parameters of the methods long as the parameters support sync, and send rpc anywhere in your class. It is useful to spread an event (<code>c-&gt;s</code> / <code>s-&gt;c</code>).</p> <p>Note</p> <p>if the <code>RPCSender</code> is defined as your first parameter of your method. LDLib2 will provide the sender information.</p> <p>Make sure that all args match the parameters of annotated method.</p> <pre><code>@RPCMethod\npublic void rpcTestA(RPCSender sender, String message) {\n    if (sender.isServer()) {\n        LDLib2.LOGGER.info(\"Received RPC from server: {}\", message);\n    } else {\n        LDLib2.LOGGER.info(\"Received RPC from client: {}\", message);\n    }\n}\n\n@RPCMethod\npublic void rpcTestB(ItemStack item) {\n    LDLib2.LOGGER.info(\"Received RPC: {}\", item);\n}\n\n// methods to send rpc\npublic void sendMsgToPlayer(ServerPlayer player, String msg) {\n    rpcToServer(player, \"rpcTestA\", msg)\n}\n\npublic void sendMsgToAllTrackingPlayers(ServerPlayer player, String msg) {\n    rpcToTracking(\"rpcTestA\", msg)\n}\n\npublic void sendMsgToServer(ItemStack item) {\n    rpcToServer(\"rpcTestB\", item)\n}\n</code></pre> <ul> <li><code>rpcToTracking</code>: send to all remote players if this chunk is loaded(tracked) in their remotes.</li> <li><code>rpcToPlayer</code>: send to a specfic player</li> <li><code>rpcToServer</code>: send to server.</li> </ul> <p></p><pre><code>@RPCMethod\npublic void rpcTest(String msg) {\n    if (level.isClient) { // receive \n        LDLib2.LOGGER.info(\"Received RPC from server: {}\", message);\n    } else { // send\n        rpcToTracking(\"rpcTest\", msg)\n    }\n}\n</code></pre> In this example, you can send and receive msg within one method, which is a neat method.<p></p>"},{"location":"en/ldlib2/sync/annotations/#updatelistener","title":"<code>@UpdateListener</code>","text":"<p>Use this annotation to add a listener of sync receiving on the remote side.</p> <p>Specifies the name of the method to be called (remote side) when the annotated field is updated from the server.</p> <p>The first parameter is the old value, and the second parameter is the new value.</p> <pre><code>@DescSynced\n@UpdateListener(methodName = \"onIntValueChanged\")\nprivate int intValue = 10;\n\nprivate void onIntValueChanged(int oldValue, int newValue) {\n    LDLib2.LOGGER.info(\"Int value changed from {} to {}\", oldValue, newValue);\n}\n</code></pre>"},{"location":"en/ldlib2/sync/annotations/#conditionalsynced","title":"<code>@ConditionalSynced</code>","text":"<p>In general, all fields annotated with <code>@DescSynced</code> will be synced if chhanged.  However, you may want to control whether to sync, e.g., conditional sync.</p> <p>LDLib2 provide this annotation allow you to fine-grained control whether the field should be synced.</p> <pre><code>@Configurable\n@ConditionalSynced(methodName = \"shouldSync\")\nint intField = 10;\n\npublic boolean shouldSync(int value) {\n    return value &gt; 0;\n}\n</code></pre>"},{"location":"en/ldlib2/sync/annotations/#skippersistedvalue","title":"<code>@SkipPersistedValue</code>","text":"<p>In general, all fields annotated with <code>@Persisted</code> will be serialized during persistence.  However, you may want to skip serialization, e.g., reduce output size, skip unchanged value, etc.</p> <p>LDLib2 provide this annotation allow you to fine-grained control whether the field should be serialized.</p> <pre><code>@Persisted\nint intField = 10;\n\n@SkipPersistedValue(field = \"intField\")\npublic boolean skipIntFieldPersisted(int value) {\n    // 10 is the initial value of this class, there is no need to store it.\n    return value == 10;\n}\n</code></pre>"},{"location":"en/ldlib2/sync/annotations/#exclusive-to-blockentity","title":"Exclusive to <code>BlockEntity</code>","text":"<p>Note</p> <p>These annotations are designed specially for <code>BlockEntity</code>, check Manage BlockEntity before using them.</p>"},{"location":"en/ldlib2/sync/annotations/#dropsaved","title":"<code>@DropSaved</code>","text":"<p>Sometimes, you want to store the field values into the drop item while breaking the block. This annotation is used to mark a field to be saved to the drop item. However, it also require additional code work before using it. </p><pre><code>public class MyBlock extends Block {\n    @Override\n    public void setPlacedBy(Level level, BlockPos pos, BlockState state, @Nullable LivingEntity placer, ItemStack stack) {\n        if (!level.isClientSide) {\n            if (level.getBlockEntity(pos) instanceof IPersistManagedHolder persistManagedHolder) {\n                // you can use other DataComponents if you want.\n                Optional.ofNullable(stack.get(DataComponents.CUSTOM_DATA)).ifPresent(customData -&gt; {\n                    persistManagedHolder.loadManagedPersistentData(customData.copyTag());\n                });\n            }\n        }\n    }\n\n    @Override\n    protected List&lt;ItemStack&gt; getDrops(BlockState state, LootParams.Builder params) {\n        var opt = Optional.ofNullable(params.getOptionalParameter(LootContextParams.BLOCK_ENTITY));\n        if (opt.isPresent() &amp;&amp; opt.get() instanceof IPersistManagedHolder persistManagedHolder) {\n            var drop = new ItemStack(this);\n            var tag = new CompoundTag();\n            persistManagedHolder.saveManagedPersistentData(tag, true);\n            drop.set(DataComponents.CUSTOM_DATA, CustomData.of(tag));\n            // you can move this part to LootTable if you want.\n            return List.of(drop);\n        }\n        return super.getDrops(state, params);\n    }\n\n    @Override\n    public ItemStack getCloneItemStack(BlockState state, HitResult target, LevelReader level, BlockPos pos, Player player) {\n        // if you want to clone an item with drop data, don't forget it\n        if (level.getBlockEntity(pos) instanceof IPersistManagedHolder persistManagedHolder) {\n            var clone = new ItemStack(this);\n            var tag = new CompoundTag();\n            persistManagedHolder.saveManagedPersistentData(tag, true);\n            clone.set(DataComponents.CUSTOM_DATA, CustomData.of(tag));\n            return clone;\n        }\n        return super.getCloneItemStack(state, target, level, pos, player);\n    }\n}\n\npublic class MyBlockEntity extends BlockEntity implements ISyncPersistRPCBlockEntity {\n    @Persisted\n    private int intValue = 10;\n    @Persisted\n    @DropSaved\n    private ItemStack itemStack = ItemStack.EMPTY;\n}\n</code></pre> After the above setup, the value of <code>itemStack</code> in the MyBlockEntity will be stored in the itemstack while breaking and clone. And the value stored in the itemstack will be resumed after placement.<p></p>"},{"location":"en/ldlib2/sync/annotations/#requirererender","title":"<code>@RequireRerender</code>","text":"<p>When the annotated fields updated (synced from server) will schedule chunk rendering update. To use this feature, your BlockEntity must inherit from the <code>IBlockEntityManaged</code>.</p> <p></p><pre><code>public class MyBlockEntity extends BlockEntity implements ISyncPersistRPCBlockEntity {\n    @Persisted\n    @DescSync\n    @RequireRerender\n    private int color = -1;\n}\n</code></pre> it's actually equals to  <pre><code>public class MyBlockEntity extends BlockEntity implements ISyncPersistRPCBlockEntity {\n    @Persisted\n    @DescSync\n    private int color = -1;\n\n    public MyBlockEntity(BlockPos pos, BlockState state) {\n        super(...)\n        ...\n        addSyncUpdateListener(\"color\", this::onColorUpdated); // add a listener\n    }\n\n    private Consumer&lt;Object&gt; onColorUpdated(ManagedKey managedKey, Object currentValue) {\n        return newValue -&gt; scheduleRenderUpdate();\n    }\n\n    public void scheduleRenderUpdate() {\n        var level = getLevel();\n        if (level != null) {\n            if (level.isClientSide) {\n                var state = getBlockState();\n                level.sendBlockUpdated(getBlockPos(), state, state, 1 &lt;&lt; 3); // notify chunk rerender\n            }\n        }\n    }\n}\n</code></pre><p></p>"},{"location":"en/ldlib2/sync/blockentity/","title":"Manage BlockEntity","text":""},{"location":"en/ldlib2/sync/blockentity/#manage-blockentity","title":"Manage BlockEntity","text":"<p> Since 2.1.0 </p> <p>By implementing <code>ISyncPersistRPCBlockEntity</code>, you are able to delegate all synchronization and persistence code to LDLib2.  You don't need any additional code, just setup <code>syncStorage</code> and annotations.</p> <pre><code>public class MyBlockEntity extends BlockEntity implements ISyncPersistRPCBlockEntity {\n    @Getter\n    private final FieldManagedStorage syncStorage = new FieldManagedStorage(this);\n\n    @Persisted\n    @DescSynced\n    @UpdateListener(methodName = \"onIntValueChanged\")\n    private int intValue = 10;\n    @Persisted\n    @DescSynced\n    @DropSaved\n    @RequireRerender\n    private ItemStack itemStack = ItemStack.EMPTY;\n\n    public MyBlockEntity(BlockPos pWorldPosition, BlockState pBlockState) {\n        super(...);\n    }\n\n    private void onIntValueChanged(int oldValue, int newValue) {\n        LDLib2.LOGGER.info(\"Int value changed from {} to {}\", oldValue, newValue);\n    }\n\n    @RPCMethod\n    public void rpcMsg(String msg) {\n    if (level.isClient) { // receive \n        LDLib2.LOGGER.info(\"Received RPC from server: {}\", message);\n    } else { // send\n        rpcToTracking(\"rpcMsg\", msg)\n    }\n}\n</code></pre> <p>Note</p> <p>Actually, <code>ISyncPersistRPCBlockEntity</code> is consisted of <code>ISyncBlockEntity</code>, <code>IRPCBlockEntity</code>, <code>IPersistManagedHolder</code>, <code>IBlockEntityManaged</code>. You can choose partial of them if nonly few features are necessary or you want to fine-grained control.</p> <p>Warning</p> <p>If you have <code>useAsyncThread()</code> enabled (return ture by default). You have to be careful of thread safe issue. For example, <code>notifyPersistence()</code> will be triggered in a thread. In general, you don't need to worry it, LDLib2 will handle all cases.</p>"},{"location":"en/ldlib2/sync/rpc_packet/","title":"RPC Packet","text":""},{"location":"en/ldlib2/sync/rpc_packet/#rpc-packet","title":"RPC Packet","text":"<p>In vanilla or Forge-based mod development, maintaining custom network packets is often tedious. You typically need to maintain boilerplate networking code:</p> <ul> <li>Define packet classes</li> <li>Register them manually</li> <li>Handle serialization and deserialization</li> </ul> <p>To simplify this process, LDLib2 introduces an annotation-based RPC system using <code>@RPCPacket</code>.</p> <p>With <code>@RPCPacket</code>, you can declare a static method ANYWHERE in your codebase and treat it as a network packet handler. The annotated method itself becomes the packet\u2019s execution target, and its parameters represent the data transferred between client and server.</p> <ul> <li><code>@RPCPacket(\"id\")</code>: Registers the method as an RPC handler with a unique identifier.</li> <li><code>RPCSender</code> (optional): If declared as the first parameter, LDLib2 injects sender-side information, allowing you to distinguish whether the </li> <li>Method parameters: All parameters (except RPCSender) are automatically serialized and transferred. call is executed on the client or the server. </li> </ul> <p>Note</p> <p>The types of parameters should be supoorted in the Types Support.</p> <p>RPCPacketDistributor Provides utility methods to send RPC calls to the server, all players, or specific targets.</p> <pre><code>// annotate your packet method anywhere you want\n@RPCPacket(\"rpcPacketTest\")\npublic static void rpcPacketTest(RPCSender sender, String message, boolean message2) {\n    if (sender.isServer()) {\n        LDLib2.LOGGER.info(\"Received RPC packet from server: {}, {}\", message, message2);\n    } else {\n        LDLib2.LOGGER.info(\"Received RPC packet from client: {}, {}\", message, message2);\n    }\n}\n\n// send pacet to the remote/server \nRPCPacketDistributor.rpcToServer(\"rpcPacketTest\", \"Hello from client!\", true)\nRPCPacketDistributor.rpcToAllPlayers(\"rpcPacketTest\", \"Hello from server!\", false)\n</code></pre>"},{"location":"en/ldlib2/sync/types_support/","title":"Types Support","text":""},{"location":"en/ldlib2/sync/types_support/#types-support","title":"Types Support","text":"<p> Since 2.0.0 </p> <p>LDLib2 has provided massive types support for synchronization and persistence already. </p>"},{"location":"en/ldlib2/sync/types_support/#builtin-supports","title":"Builtin Supports","text":"<p>Note</p> <p>Check github to get the latest support list.</p> <ul> <li>native types in java (number, boolean, string, enum, etc)</li> </ul> Type(s) Priority Read-only <code>int</code> / <code>Integer</code> <code>-1</code> - <code>long</code> / <code>Long</code> <code>-1</code> - <code>float</code> / <code>Float</code> <code>-1</code> - <code>double</code> / <code>Double</code> <code>-1</code> - <code>boolean</code> / <code>Boolean</code> <code>-1</code> - <code>byte</code> / <code>Byte</code> <code>-1</code> - <code>short</code> / <code>Short</code> <code>-1</code> - <code>char</code> / <code>Character</code> <code>-1</code> - <code>String</code> <code>-1</code> - <code>Enum&lt;?&gt;</code> <code>-1</code> - <code>Number</code> <code>1000</code> - <code>UUID</code> <code>100</code> - <code>T[]</code> <code>-1</code> depeends on <code>T</code> <code>Collection&lt;?&gt;</code> <code>-1</code> \u2705 <ul> <li>types in minecraft (Block, Item, Fluid, etc)</li> </ul> Type(s) Priority Read-only <code>Block</code> <code>100</code> - <code>Item</code> <code>100</code> - <code>Fluid</code> <code>100</code> - <code>EntityType&lt;?&gt;</code> <code>100</code> - <code>BlockEntityType&lt;?&gt;</code> <code>100</code> - <code>BlockState</code> <code>100</code> - <code>ResourceLocation</code> <code>100</code> - <code>AABB</code> <code>1000</code> - <code>BlockPos</code> <code>1000</code> - <code>FluidStack</code> <code>1000</code> - <code>ItemStack</code> <code>1000</code> - <code>RecipeHolder&lt;?&gt;</code> <code>1000</code> - <code>Tag</code> <code>2000</code> - <code>Component</code> <code>2000</code> - <code>INBTSerializable&lt;?&gt;</code> <code>2000</code> \u2705 <ul> <li>types in LDLib2 or others.</li> </ul> Type(s) Priority Read-only <code>UIEvent</code> <code>100</code> - <code>Position</code> <code>100</code> - <code>Size</code> <code>100</code> - <code>Pivot</code> <code>100</code> - <code>Range</code> <code>100</code> - <code>Vector3f</code> <code>1000</code> - <code>Vector4f</code> <code>1000</code> - <code>Vector2f</code> <code>1000</code> - <code>Vector2i</code> <code>1000</code> - <code>Quaternionf</code> <code>1000</code> - <code>IGuiTexture</code> <code>1000</code> - <code>IRenderer</code> <code>1000</code> - <code>IResourcePath</code> <code>1000</code> - <code>IManaged</code> <code>1500</code> \u2705"},{"location":"en/ldlib2/sync/types_support/#add-custom-type-support","title":"Add Custom Type Support","text":"<p>To add a support of a new type, you need to register an <code>IAccessor&lt;TYPE&gt;</code> of this type. All types can be divided into two group, <code>direct</code> and <code>read-only</code>.</p> <p>Important</p> <ul> <li><code>direct</code> refer to the type that can be null, and there is known method to create a new instance of this type during management life cycle.</li> <li><code>read-only</code> refer to the type that can not be null and immutable during management life cycle. (e.g. INBTSerializable&lt;?&gt; amd Collection&lt;?&gt;). All modification should be done by its APIs.</li> </ul> <p>You can register accessor by using <code>AccessorRegistries.registerAccessor</code>. In general, you can register your accessors anywhere you want, while we'd recommend to do it in the LDLibPlugin#onLoad.</p>"},{"location":"en/ldlib2/sync/types_support/#register-for-a-direct-type","title":"Register for a direct type","text":"<p>You can use <code>CustomDirectAccessor</code> to register new type easily.</p> <p>What is Mark?</p> <p>Mark is a snapshot during management life cycle. LDLib2 will generate mark for current value and caompare it later to determine whether it has changes. If Mark is not defined. It will store current value as mark. It works if the type's internal values are immutable. (e.g. UUID, ResoruceLocation). Otherwise, you'd better set a way to obtain mark.</p> Method Optional Note <code>codec</code> Required Provide a codec for persistence <code>streamCodec</code> Required Provide a StreamCodec for synchronization <code>customMark</code> Optional Provide functions to get and compare marks <code>copyMark</code> Optional Copy the mark from the value. This will use the <code>Objects#equals(Object, Object)</code> to compare the mark. Make sure the object supports <code>Object#equals(Object)</code>. <code>codecMark</code> Optional This will use the <code>JavaOps</code> to generate the mark based on current value. <pre><code>AccessorRegistries.registerAccessor(CustomDirectAccessor.builder(Quaternionf.class)\n    .codec(ExtraCodecs.QUATERNIONF)\n    .streamCodec(ByteBufCodecs.QUATERNIONF)\n    .copyMark(Quaternionf::new)\n    .build());\n\nAccessorRegistries.registerAccessor(CustomDirectAccessor.builder(ItemStack.class)\n    .codec(ItemStack.OPTIONAL_CODEC)\n    .streamCodec(ItemStack.OPTIONAL_STREAM_CODEC)\n    .customMark(ItemStack::copy, ItemStack::matches)\n    .build());\n</code></pre>"},{"location":"en/ldlib2/sync/types_support/#register-for-a-read-only-type","title":"Register for a read-only type","text":"<p>In general, you don't really need it. Cuz, you can make your own class to inherite from <code>INBTSerializable</code>. If you do need it, please implement <code>IReadOnlyAccessor&lt;TYPE&gt;</code> and register it, check code comments for more usage details .</p>"},{"location":"en/ldlib2/ui/","title":"Introduction","text":""},{"location":"en/ldlib2/ui/#introduction","title":"Introduction","text":"<p> Since 2.1.0 </p> <p>LDLib2 provides powerful UI library based on the <code>yoga</code> layout engine.  If you are struggling with GUI development, LDLib2 is definitely one of your best choice. Compared with the LDLib, LDLib2 has undergone a complete refactoring:</p> <ul> <li>modern UI layout system</li> <li>modern UI event system</li> <li>CSS-like stylesheet system</li> <li>data binding + rpc event</li> <li>massive plug-and-play components</li> <li>xml support + in-game UI visual editor</li> <li>xei / kjs supports</li> <li>completed document and usage examples</li> </ul>"},{"location":"en/ldlib2/ui/#lets-see-what-we-can-do-with-ldlib2","title":"Let's see what we can do with LDLib2","text":""},{"location":"en/ldlib2/ui/editor/","title":"UI Editor","text":""},{"location":"en/ldlib2/ui/editor/#ui-editor","title":"UI Editor","text":"<p> Since 2.1.5 </p> <p>Warning</p> <p>This command can only be used under the <code>single player</code> world.</p> <p>LDLib2 provides a visual editor to support UI creatiom. Use command to open the UI Editor.</p> <pre><code>/ldlib2_ui_editor\n</code></pre> <p>The UI Editor supports two ways of creating UIs through visualization:</p> <ul> <li><code>UI XML</code></li> <li><code>UI Template</code></li> </ul>"},{"location":"en/ldlib2/ui/editor/#ui-xml","title":"UI XML","text":"<p>Click <code>File \u2192 New \u2192 UI XML File</code> to create a new UI XML file. You can also click <code>Open</code> to load an existing XML file.</p> <p>Once opened, you can edit the XML and see a real-time preview of your UI directly in the editor. For more xml details, check UI Xml</p> <p>Tip</p> <p>You can also edit the XML file using an external IDE (such as VS Code or IntelliJ IDEA). The preview will automatically update when you save your changes.</p>"},{"location":"en/ldlib2/ui/editor/#ui-template","title":"UI Template","text":"<p>A UI Template is similar to UI XML and is used to define UI content (including styles and the component tree).</p> <p>The key differences are:</p> <ul> <li>UI Templates can be edited visually using the UI Editor.</li> <li>A saved UI Template can be reused as a template component in other UI XML files or UI Templates.</li> </ul> <p>Unlike UI XML files, UI Templates are managed by LDLib2\u2019s resource system. To create one, use the Resource Panel:</p> <p>Steps:</p> <ol> <li>Select the UI resource category.</li> <li>Choose or create a resource provider.</li> <li>Right-click and create a UI Template, then double-click it to enter edit mode.</li> </ol>"},{"location":"en/ldlib2/ui/editor/#edit-your-template","title":"Edit your Template","text":"<p>After opening a UI Template, you will see the following editor interface:</p> <ol> <li> <p>Style Configurator    Edit built-in styles, add or remove external stylesheets, and inspect applied styles.</p> </li> <li> <p>UI Tree    Displays the full UI hierarchy.    You can create or remove components via the context menu, select multiple elements, or drag to reorder the hierarchy.</p> </li> <li> <p>Element Configurator    Shows configurable properties of the currently selected element.</p> </li> <li> <p>Preview    Provides a real-time preview of your UI.</p> </li> </ol> <p>Using the UI Editor, you can configure layout, styles, and other settings visually. If you understand the concepts introduced in the Preliminary section, the editor should be intuitive to use. For components with special configuration options, refer to their individual documentation pages.</p>"},{"location":"en/ldlib2/ui/editor/#load-ui-template-and-setup","title":"Load UI Template and setup","text":"<p>There are two methods to load and use your template for your UI.</p> <ol> <li>you could also move it to your assets and loaed it by a <code>ResourceLoaction</code>.</li> <li>if the resrouce is under the ldlib2 folder, you can right click the resource to obtain the resource path and load it.</li> </ol> JavaKubeJS <pre><code>@Override\npublic ModularUI createUI(Player player) {\n    var ui = Optional.ofNullable(UIResource.INSTANCE.getResourceInstance()\n            // resource location based\n            .getResource(new FilePath(ResourceLoaction.parse(\"ldlib2:resources/examples/example_layout.ui.nbt\"))))\n\n            // file based\n            //.getResource(new FilePath(new File(LDLib2.getAssetsDir(), \"ldlib2/resources/examples/example_layout.ui.nbt\"))) // LDLib2.getAssetsDir() = \".minecraft/ldlib2/assets\"\n\n            .map(UITemplate::createUI)\n            .orElseGet(UI::empty);\n\n    // find elemetns and do data bindings or logic setup here\n    var buttons = ui.select(\".button_container &gt; button\").toList(); // by selector\n    var container = ui.selectRegex(\"container\").findFirst().orElseThrow(); // by id regex\n\n    return ModularUI.of(ui, player);\n}\n</code></pre> <pre><code>function createUIFromUIResource(path) {\n    return UIResource.INSTANCE.getResourceInstance().getResource(path).createUI();\n}\n\nfunction createUI(player) {\n    // file based\n    let ui = createUIFromUIResource(\"file(./ldlib2/assets/ldlib2/resources/global/modern_styles.ui.nbt)\")\n\n    // resource location based\n    // let ui = createUIFromUIResource(\"file(ldlib2:resources/global/modern_styles.ui.nbt)\")\n\n    // find elemetns and do data bindings or logic setup here\n    let buttons = ui.select(\".button_container &gt; button\").toList(); // by selector\n    let container = ui.selectRegex(\"container\").findFirst().orElseThrow(); // by id regex\n\n    return ModularUI.of(ui, player)\n}\n</code></pre>"},{"location":"en/ldlib2/ui/editor/#loading-event","title":"Loading Event","text":"<p>A saved UI Template only defines the visual structure and styles \u2014 it does not include runtime logic by default. In most cases, you load the template and then manually attach handlers or bindings in code.</p> <p>However, if you want to reuse the same UI in different contexts, repeating the same setup logic every time becomes tedious.</p> <p>To address this, LDLib2 provides a hook event that lets you inject logic when the UI Template calls <code>createUI()</code>, so you can configure the returned <code>UI</code> automatically during creation.</p> <pre><code>@SubscribeEvent\npublic static void onUICreated(UITemplate.CreateUI event) {\n    var template = event.template;\n    var ui = event.ui;\n    // do initialization here\n}\n</code></pre>"},{"location":"en/ldlib2/ui/editor/#ui-simulation","title":"UI Simulation","text":"<p>Click the green Play button at the top of the editor to enter simulation mode. This allows you to interact with the UI and verify its behavior.</p>"},{"location":"en/ldlib2/ui/factory/","title":"UI Factory","text":""},{"location":"en/ldlib2/ui/factory/#ui-factory","title":"UI Factory","text":""},{"location":"en/ldlib2/ui/getting_start/","title":"Getting Started","text":""},{"location":"en/ldlib2/ui/getting_start/#getting-started","title":"Getting Started","text":"<p> Since 2.1.0 </p> <p>In this section, we will give you some examples step by step.</p>"},{"location":"en/ldlib2/ui/getting_start/#tutorial-1-create-and-display-a-modularui-in-your-screen","title":"Tutorial 1: create and display a <code>ModularUI</code> in your screen","text":"<p>Let's start with a simple UI. A <code>ModularUI</code> acts as the runtime manager for your UI \u2014 handling lifecycle, rendering, and interactions for all elements you define.  It takes a <code>UI</code> instance and optionally a <code>Player</code> as inputs. Check ModularUI page for more details.</p> <pre><code>private static ModularUI createModularUI() {\n    // create a root element\n    var root = new UIElement();\n    root.addChildren(\n            // add a label to display text\n            new Label().setText(\"My First UI\"),\n            // add a button with text\n            new Button().setText(\"Click Me!\"),\n            // add an element to display an image based on a resource location\n            new UIElement().layout(layout -&gt; layout.width(80).height(80))\n                    .style(style -&gt; style.background(\n                            SpriteTexture.of(\"ldlib2:textures/gui/icon.png\"))\n                    )\n    ).style(style -&gt; style.background(Sprites.BORDER)); // set a background for the root element\n    // create a UI\n    var ui = UI.of(root);\n    // return a modular UI for runtime instance\n    return ModularUI.of(ui);\n}\n</code></pre> <p>Next, we need to display our UI. Unlike most UI libraries that force you to use a dedicated screen class, LDLib2 provides a universal solution for rendering and interacting with a <code>ModularUI</code> inside any screen you choose. This means you can create and initialize a <code>ModularUI</code> during the screen\u2019s initialization stage, as shown below.</p> <pre><code>@OnlyIn(Dist.CLIENT)\npublic class MyScreen extends Screen {\n    // .....\n\n    // initial\n    @Override\n    public void init() {\n        super.init();\n        var modularUI = createModularUI();\n        modularUI.setScreenAndInit(this);\n        this.addRenderableWidget(modularUI.getWidget());\n    }\n\n    // .....\n}\n</code></pre> <p>Quick Test</p> <p>If you dont want to cope with the code of the <code>screen</code> and display. We also provide the <code>ModularUIScreen</code> for you.  Check screen and menu page for more details.</p> <pre><code>public static void openScreenUI() {\n    var modularUI = createModularUI();\n    minecraft.setScreen(new ModularUIScreen(modularUI, Component.empty()));\n}\n</code></pre>"},{"location":"en/ldlib2/ui/getting_start/#tutorial-2-better-layout-and-style","title":"Tutorial 2: better layout and style","text":"<p>Fine, it works \u2014 but the layout and styling are still not ideal. For example, we want to add padding to the root element, introduce some spacing between components, and center-align the label. Thanks to the yoga, we do need to cope with layout code. Check layout page for more details. Let\u2019s improve the UI by refining its layout and style. </p> <pre><code>private static ModularUI createModularUI() {\n    // create a root element\n    var root = new UIElement();\n    root.addChildren(\n            // add a label to display text\n            new Label().setText(\"My First UI\")\n                    // center align text\n                    .textStyle(textStyle -&gt; textStyle.textAlignHorizontal(Horizontal.CENTER)),\n            // add a button with text\n            new Button().setText(\"Click Me!\"),\n            // add an element to display an image based on a resource location\n            new UIElement().layout(layout -&gt; layout.width(80).height(80))\n                    .style(style -&gt; style.background(\n                            SpriteTexture.of(\"ldlib2:textures/gui/icon.png\"))\n                    )\n    ).style(style -&gt; style.background(Sprites.BORDER)); // set a background for the root element\n    // set padding and gap for children elements\n    root.layout(layout -&gt; layout.paddingAll(7).gapAll(5));\n    // create a UI\n    var ui = UI.of(root);\n    // return a modular UI for runtime instance\n    return ModularUI.of(ui);\n}\n</code></pre>"},{"location":"en/ldlib2/ui/getting_start/#tutorial-3-component-interaction-and-ui-events","title":"Tutorial 3: component interaction and UI events","text":"<p>Let's see how to interact with components. Here we take the button as examples, <code>setOnClick()</code> is provided by the button. We introduce two buttons that rotate an image by \u00b145\u00b0.</p> <pre><code>private static ModularUI createModularUI() {\n    // create a root element\n    var root = new UIElement();\n    // add an element to display an image based on a resource location\n    var image = new UIElement().layout(layout -&gt; layout.width(80).height(80))\n            .style(style -&gt; style.background(\n                    SpriteTexture.of(\"ldlib2:textures/gui/icon.png\"))\n            );\n    root.addChildren(\n            // add a label to display text\n            new Label().setText(\"Interaction\")\n                    // center align text\n                    .textStyle(textStyle -&gt; textStyle.textAlignHorizontal(Horizontal.CENTER)),\n            image,\n            // add a container with the row flex direction\n            new UIElement().layout(layout -&gt; layout.flexDirection(YogaFlexDirection.ROW)).addChildren(\n                    // a button to rotate the image -45\u00b0\n                    new Button().setText(\"-45\u00b0\")\n                            .setOnClick(e -&gt; image.transform(transform -&gt; \n                                    transform.rotation(transform.rotation()-45))),\n                    new UIElement().layout(layout -&gt; layout.flex(1)), // occupies the remaining space\n                    // a button to rotate the image 45\u00b0\n                    new Button().setText(\"+45\u00b0\")\n                            .setOnClick(e -&gt; image.transform(transform -&gt; \n                                    transform.rotation(transform.rotation() + 45)))\n            )\n    ).style(style -&gt; style.background(Sprites.BORDER)); // set a background for the root element\n    // set padding and gap for children elements\n    root.layout(layout -&gt; layout.paddingAll(7).gapAll(5));\n    // create a UI\n    var ui = UI.of(root);\n    // return a modular UI for runtime instance\n    return ModularUI.of(ui);\n}\n</code></pre> <p>In the previous step, we used <code>Button#setOnClick()</code> to handle interactions. While this is convenient, it is only an API method only provided by the Button component.</p> <p>LDLib2 itself exposes a complete and flexible UI event system.  Any UIElement can listen to input events such as mouse clicks, hover, command, lifecycle, drag, focus, keyboard input, etc. Check event page for more details.</p> <p>By combining a basic UIElement with event listeners and styles, you can implement fully custom interactive components\u2014including buttons.</p> <pre><code>private static ModularUI createModularUI() {\n    // create a root element\n    var root = new UIElement();\n    // add an element to display an image based on a resource location\n    var image = new UIElement().layout(layout -&gt; layout.width(80).height(80))\n            .style(style -&gt; style.background(\n                    SpriteTexture.of(\"ldlib2:textures/gui/icon.png\"))\n            );\n    root.addChildren(\n            // add a label to display text\n            new Label().setText(\"UI Event\")\n                    // center align text\n                    .textStyle(textStyle -&gt; textStyle.textAlignHorizontal(Horizontal.CENTER)),\n            image,\n            // add a container with the row flex direction\n            new UIElement().layout(layout -&gt; layout.flexDirection(YogaFlexDirection.ROW)).addChildren(\n                    // implement the button by using ui events\n                    new UIElement().addChild(new Label().setText(\"-45\u00b0\").textStyle(textStyle -&gt; textStyle.adaptiveWidth(true)))\n                            .layout(layout -&gt; layout.justifyItems(YogaJustify.CENTER).paddingHorizontal(3))\n                            .style(style -&gt; style.background(Sprites.BORDER1))\n                            .addEventListener(UIEvents.MOUSE_DOWN, e -&gt; image.transform(transform -&gt;\n                                    transform.rotation(transform.rotation()-45)))\n                            .addEventListener(UIEvents.MOUSE_ENTER, e -&gt;\n                                    e.currentElement.style(style -&gt; style.background(Sprites.BORDER1_DARK)), true)\n                            .addEventListener(UIEvents.MOUSE_LEAVE, e -&gt;\n                                    e.currentElement.style(style -&gt; style.background(Sprites.BORDER1)), true),\n                    new UIElement().layout(layout -&gt; layout.flex(1)), // occupies the remaining space\n                    // a button to rotate the image 45\u00b0\n                    new Button().setText(\"+45\u00b0\")\n                            .setOnClick(e -&gt; image.transform(transform -&gt;\n                                    transform.rotation(transform.rotation() + 45)))\n            )\n    ).style(style -&gt; style.background(Sprites.BORDER)); // set a background for the root element\n    // set padding and gap for children elements\n    root.layout(layout -&gt; layout.paddingAll(7).gapAll(5));\n    // create a UI\n    var ui = UI.of(root);\n    // return a modular UI for runtime instance\n    return ModularUI.of(ui);\n}\n</code></pre>"},{"location":"en/ldlib2/ui/getting_start/#tutorial-4-ui-stylesheet","title":"Tutorial 4: UI stylesheet","text":"<p>In Tutorial 2, we improved the layout and visual appearance by configuring layout and style directly in code. While this works well, inline layout and style definitions can quickly become verbose and harder to maintain as the UI grows.</p> <p>To address this, LDLib2 introduces a stylesheet system called <code>LSS</code> (LDLib2 StyleSheet). LSS allows you to describe layout and style properties in a declarative, CSS-like way, separating visual design from UI structure. Check stylesheet page for more details.</p> <p>In the examples below, we reimplement the layout and style logic from Step 3 using LSS:</p> <ul> <li>Example 1 demonstrates LSS bindings directly on UI elements</li> <li>Example 2 shows how to define a standalone stylesheet and apply it to the UI</li> </ul> example 1example 2 <pre><code>private static ModularUI createModularUI() {\n    var root = new UIElement();\n    root.addChildren(\n            new Label().setText(\"LSS example\")\n                    .lss(\"horizontal-align\", \"center\"),\n            new Button().setText(\"Click Me!\"),\n            new UIElement()\n                    .lss(\"width\", 80)\n                    .lss(\"height\", 80)\n                    .lss(\"background\", \"sprite(ldlib2:textures/gui/icon.png)\")\n    );\n    root.lss(\"background\", \"built-in(ui-gdp:BORDER)\");\n    root.lss(\"padding-all\", 7);\n    root.lss(\"gap-all\", 5);\n    var ui = UI.of(root);\n    return ModularUI.of(ui);\n}\n</code></pre> <pre><code>private static ModularUI createModularUI() {\n    // set root with an ID\n    var root = new UIElement().setId(\"root\");\n    root.addChildren(\n            new Label().setText(\"LSS example\"),\n            new Button().setText(\"Click Me!\"),\n            // set the element with a class\n            new UIElement().addClass(\"image\")\n    );\n    var lss = \"\"\"\n        // id selector\n        #root {\n            background: built-in(ui-gdp:BORDER);\n            padding-all: 7;\n            gap-all: 5;\n        }\n\n        // class selector\n        .image {\n            width: 80;\n            height: 80;\n            background: sprite(ldlib2:textures/gui/icon.png);\n        }\n\n        // element selector\n        #root label {\n            horizontal-align: center;\n        }\n        \"\"\";\n    var stylesheet = Stylesheet.parse(lss);\n    // add stylesheets to ui\n    var ui = UI.of(root, stylesheet);\n    return ModularUI.of(ui);\n}\n</code></pre> <p>Built-in Stylesheets</p> <p>In addition to custom LSS definitions, LDLib2 also provides several built-in stylesheet themes that cover most common UI components:</p> <ul> <li><code>StylesheetManager.GDP</code></li> <li><code>StylesheetManager.MC</code></li> <li><code>StylesheetManager.MODERN</code></li> </ul> <p>These built-in stylesheets allow you to apply a consistent visual style to an entire UI with minimal setup. You can access and manage them through the <code>StylesheetManager</code>, which acts as a central registry for all available stylesheet packs. </p> <pre><code>private static ModularUI createModularUI() {\n    var root = new UIElement();\n    root.layout(layout -&gt; layout.width(100));\n    root.addChildren(\n            new Label().setText(\"Stylesheets\"),\n            new Button().setText(\"Click Me!\"),\n            new ProgressBar().setProgress(0.5f).label(label -&gt; label.setText(\"Progress\")),\n            new Toggle().setText(\"Toggle\"),\n            new TextField().setText(\"Text Field\"),\n            new UIElement().layout(layout -&gt; layout.setFlexDirection(YogaFlexDirection.ROW)).addChildren(\n                    new ItemSlot().setItem(Items.APPLE.getDefaultInstance()),\n                    new FluidSlot().setFluid(new FluidStack(Fluids.WATER, 1000))\n            ),\n            // list all stylesheets\n            new Selector&lt;ResourceLocation&gt;()\n                    .setSelected(StylesheetManager.GDP, false)\n                    .setCandidates(StylesheetManager.INSTANCE.getAllPackStylesheets().stream().toList())\n                    .setOnValueChanged(selected -&gt; {\n                        // switch to the selected stylesheet\n                        var mui = root.getModularUI();\n                        if (mui != null) {\n                            mui.getStyleEngine().clearAllStylesheets();\n                            mui.getStyleEngine().addStylesheet(StylesheetManager.INSTANCE.getStylesheetSafe(selected));\n                        }\n                    })\n    );\n    root.addClass(\"panel_bg\");\n    // use GDP stylesheets by default\n    var ui = UI.of(root, StylesheetManager.INSTANCE.getStylesheetSafe(StylesheetManager.GDP)));\n    return ModularUI.of(ui);\n}\n</code></pre>"},{"location":"en/ldlib2/ui/getting_start/#tutorial-5-data-bindings","title":"Tutorial 5: data bindings","text":"<p>LDLib2 provides built-in data binding support for most data-driven UI components. This allows UI elements to stay in sync with underlying data without manual update logic. The binding system is based on <code>IObserver&lt;T&gt;</code> and <code>IDataProvider&lt;T&gt;</code>.  Check data bindings page for more details.</p> <p>In this example:</p> <ul> <li>A shared AtomicInteger acts as the single source of truth</li> <li>Buttons modify the value directly</li> <li>The TextField updates the value through an observer</li> <li>Labels and the progress bar automatically refresh when the data changes</li> </ul> <pre><code>private static ModularUI createModularUI() {\n    // a value holder\n    var valueHolder = new AtomicInteger(0);\n\n    var root = new UIElement();\n    root.addChildren(\n            new Label().setText(\"Data Bindings\")\n                    .textStyle(textStyle -&gt; textStyle.textAlignHorizontal(Horizontal.CENTER)),\n            new UIElement().layout(layout -&gt; layout.flexDirection(YogaFlexDirection.ROW)).addChildren(\n                    // button to decrease the value\n                    new Button().setText(\"-\")\n                            .setOnClick(e -&gt; {\n                                if (valueHolder.get() &gt; 0) {\n                                    valueHolder.decrementAndGet();\n                                }\n                            }),\n                    new TextField()\n                            .setNumbersOnlyInt(0, 100)\n                            .setValue(String.valueOf(valueHolder.get()))\n                            // bind an Observer to update the value holder\n                            .bindObserver(value -&gt; valueHolder.set(Integer.parseInt(value)))\n                            // bind a DataSource to notify the value changes\n                            .bindDataSource(SupplierDataSource.of(() -&gt; String.valueOf(valueHolder.get())))\n                            .layout(layout -&gt; layout.flex(1)),\n                    // button to increase the value\n                    new Button().setText(\"+\")\n                            .setOnClick(e -&gt; {\n                                if (valueHolder.get() &lt; 100) {\n                                    valueHolder.incrementAndGet();\n                                }\n                            })\n            ),\n            // bind a DataSource to notify the value changes for label and progress bar\n            new Label().bindDataSource(SupplierDataSource.of(() -&gt; Component.literal(\"Binding: \").append(String.valueOf(valueHolder.get())))),\n            new ProgressBar()\n                    .setProgress(valueHolder.get() / 100f)\n                    .bindDataSource(SupplierDataSource.of(() -&gt; valueHolder.get() / 100f))\n                    .label(label -&gt; label.bindDataSource(SupplierDataSource.of(() -&gt; Component.literal(\"Progress: \").append(String.valueOf(valueHolder.get())))))\n    ).style(style -&gt; style.background(Sprites.BORDER));\n    root.layout(layout -&gt; layout.width(100).paddingAll(7).gapAll(5));\n    return ModularUI.of(UI.of(root));\n}\n</code></pre>"},{"location":"en/ldlib2/ui/getting_start/#tutorial-6-modularui-for-menu","title":"Tutorial 6: <code>ModularUI</code> for Menu","text":"<p>In the previous tutorials, we focused on rendering\u3000<code>ModularUI</code> inside client-side screens. This works well for purely visual or client-only interfaces.</p> <p>However, most real-world GUIs in Minecraft are server\u2013client synchronized. When a GUI involves gameplay logic or persistent data, the server must stay authoritative. In vanilla Minecraft, this is handled through a <code>Menu</code>, which manages synchronization between the server and client.</p> <p>Unlike UI libraries that only support client-side rendering, LDLib2 provides first-class support for server-backed Menus. You can use <code>ModularUI</code> directly with a Menu, and no additional networking or synchronization code is required.</p> <p>Let's create a simple Menu-based UI that displays the player\u2019s inventory.</p> <pre><code>private static ModularUI createModularUI(Player player) {\n    var root = new UIElement();\n    root.addChildren(\n            new Label().setText(\"Menu UI\"),\n            // add player invotry \n            new InventorySlots()\n    ).addClass(\"panel_bg\");\n\n    var ui = UI.of(root, StylesheetManager.INSTANCE.getStylesheetSafe(StylesheetManager.GDP));\n    // pass the player to the Modular UI\n    return ModularUI.of(ui, player);\n}\n</code></pre> <p>You have to create a <code>ModularUI</code> with a <code>Player</code>, which is necessary for the menu-based UI. Besides, not only the screen, you should also init the <code>ModularUI</code> for your <code>Menu</code> as well:</p> <ul> <li>The initialization should be done after creation and before writing the extra data buffer.</li> <li>Don't forget to set a correct image size of your screen if necessary.</li> </ul> <pre><code>public class MyContainerMenu extends AbstractContainerMenu {\n    // you can do initialization in the constructor\n    public MyContainerMenu(...) {\n        super(...)\n\n        var modularUI = createModularUI(player)\n        // we have added mixin to make the AbstractContainerMenu implementing the interface\n        if (this instanceof IModularUIHolderMenu holder) {\n            holder.setModularUI(modularUI);\n        }\n    }\n\n    // .....\n}\n\npublic class MyContainerScreen extends AbstractContainerScreen&lt;MyContainerMenu&gt; {\n    @Override\n    public void init() {\n        // the modular widget has already added + init by events\n        this.imageWidth = (int) getMenu().getModularUI().getWidth();\n        this.imageHeight = (int) getMenu().getModularUI().getHeight();\n        super.init();\n    }\n\n    // .....\n}\n</code></pre> <p>Quick Test</p> <p>To use and open a menu-based UI, you need to register your own <code>MenuType</code>, LDLib2 also provide the <code>ModularUIContainerScreen</code> and <code>ModularUIContainerMenu</code> to help you set this up quickly. Check screen and menu page for more details. </p> <p>Alternatively, you can get started even faster by using the provided factories. They allow you to create menu-based UIs for blocks, items, or players with minimal setup\u2014without dealing with manual registration or boilerplate code. In this case, we use the <code>PlayerUIMenuType</code> for quick demo.</p> <pre><code>public static final ResourceLocation UI_ID = LDLib2.id(\"unique_id\");\n\n// register your ui somewhere, e.g. during your mod initialization.\npublic static void registerPlayerUI() {\n    PlayerUIMenuType.register(UI_ID, ignored -&gt; player -&gt; createModularUI(player));\n}\n\npublic static void openMenuUI(Player player) {\n    PlayerUIMenuType.openUI(player, UI_ID);\n}\n</code></pre>"},{"location":"en/ldlib2/ui/getting_start/#tutorial-7-communication-between-screen-and-menu","title":"Tutorial 7: communication between Screen and Menu","text":"<p>While the <code>InventorySlots</code> works out of the box, they are pre-packaged built-in components. In real projects, you often need more control over how data and events flow between the client-side screen and the server-side menu.</p> <p>ModularUI provides full support for <code>data bindings</code> and <code>event dispatch</code> across client and server. This allows UI interactions on the client to safely trigger logic on the server, and server-side state changes to automatically update the UI.  Check data bindings page for more details. </p> <p>Here, we focus on practical patterns to help you get started quickly. </p> <pre><code>// represents data on the server\nprivate final ItemStackHandler itemHandler = new ItemStackHandler(2);\nprivate final FluidTank fluidTank = new FluidTank(2000);\nprivate boolean bool = true;\nprivate String string = \"hello\";\nprivate float number = 0.5f;\n\nprivate static ModularUI createModularUI(Player player) {\n    // create a root element\n    var root = new UIElement();\n    root.addChildren(\n            // add a label to display text\n            new Label().setText(\"Data Between Screen and Menu\"),\n            // bind storage to slots\n            new UIElement().addChildren(\n                    new ItemSlot().bind(itemHandler, 0),\n                    new ItemSlot().bind(new ItemHandlerSlot(itemHandler, 1).setCanTake(p -&gt; false)),\n                    new FluidSlot().bind(fluidTank, 0)\n            ).layout(l -&gt; l.gapAll(2).flexDirection(YogaFlexDirection.ROW)),\n            // bind value to the components\n            new UIElement().addChildren(\n                    new Switch().bind(DataBindingBuilder.bool(() -&gt; bool, value -&gt; bool = value).build()),\n                    new TextField().bind(DataBindingBuilder.string(() -&gt; string, value -&gt; string = value).build()),\n                    new Scroller.Horizontal().bind(DataBindingBuilder.floatVal(() -&gt; number, value -&gt; number = value).build()),\n                    // read-only (s-&gt;c), always get data from the server and display on the client\n                    new Label().bind(DataBindingBuilder.componentS2C(() -&gt; Component.literal(\"s-&gt;c only: \")\n                            .append(Component.literal(String.valueOf(bool)).withStyle(ChatFormatting.AQUA)).append(\" \")\n                            .append(Component.literal(string).withStyle(ChatFormatting.RED)).append(\" \")\n                            .append(Component.literal(\"%.2f\".formatted(number)).withStyle(ChatFormatting.YELLOW)))\n                            .build())\n            ).layout(l -&gt; l.gapAll(2)),\n            // trigger ui events on the server side\n            new Button().addServerEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n                if (fluidTank.getFluid().getFluid() == Fluids.WATER) {\n                    fluidTank.setFluid(new FluidStack(Fluids.LAVA, 1000));\n                } else {\n                    fluidTank.setFluid(new FluidStack(Fluids.WATER, 1000));\n                }\n            }),\n            // you could also use button.setOnServerClick(e -&gt; { ... })\n            new InventorySlots()\n    );\n    root.addClass(\"panel_bg\");\n\n    // pass the player to the Modular UI\n    return ModularUI.of(UI.of(root, StylesheetManager.INSTANCE.getStylesheetSafe(StylesheetManager.MODERN)), player);\n}\n</code></pre>"},{"location":"en/ldlib2/ui/getting_start/#ending","title":"Ending","text":"<p>This is far from over. Why not give the powerful UI editor a try?</p>"},{"location":"en/ldlib2/ui/kjs_support/","title":"KubeJS Integration","text":""},{"location":"en/ldlib2/ui/kjs_support/#kubejs-integration","title":"KubeJS Integration","text":""},{"location":"en/ldlib2/ui/xei_support/","title":"XEI Integration","text":""},{"location":"en/ldlib2/ui/xei_support/#xei-integration","title":"XEI Integration","text":""},{"location":"en/ldlib2/ui/xml/","title":"UI Xml","text":""},{"location":"en/ldlib2/ui/xml/#ui-xml","title":"UI Xml","text":"<p> Since 2.1.6 </p> <p>LDLib2 allows you to define UIs using XML, including both styles and the component tree. This provides a workflow similar to HTML (H5) UI development, making UI structure clear and declarative.</p> <p>A minimal UI XML template looks like this:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;ldlib2-ui xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n           xsi:noNamespaceSchemaLocation=\"https://raw.githubusercontent.com/Low-Drag-MC/LDLib2/refs/heads/1.21/ldlib2-ui.xsd\"&gt;\n    &lt;stylesheet location=\"ldlib2:lss/mc.lss\"/&gt;\n    &lt;style&gt;\n        .half-button {\n            width: 50%\n        }\n    &lt;/style&gt;\n    &lt;root class=\"panel_bg\" style=\"width: 150; height: 300\"&gt;\n        &lt;button text=\"click me!\"/&gt;\n        &lt;button class=\"half-button\" text=\"half\"/&gt;\n    &lt;/root&gt;\n&lt;/ldlib2-ui&gt;\n</code></pre> <p>The attribute <code>xsi:noNamespaceSchemaLocation</code> points to the XSD schema provided by LDLib2. When editing the XML in VS Code, IntelliJ IDEA, or other IDEs, the schema enables:</p> <ul> <li>Syntax highlighting</li> <li>Validation and error checking</li> <li>Auto-completion and suggestions</li> </ul>"},{"location":"en/ldlib2/ui/xml/#load-ui-xml-and-setup","title":"Load UI Xml and setup","text":"<p>You can load and use a UI XML file in the following way:</p> JavaKubeJS <pre><code>var xml = XmlUtils.loadXml(ResourceLocation.parse(\"ldlib2:tuto.xml\"));\nif (xml != null) {\n    var ui = UI.of(xml);\n\n    // find elemetns and do data bindings or logic setup here\n    var buttons = ui.select(\".button_container &gt; button\").toList(); // by selector\n    var container = ui.selectRegex(\"container\").findFirst().orElseThrow(); // by id regex\n}\n</code></pre> <pre><code>let xml = XmlUtils.loadXml(ResourceLocation.parse(\"ldlib2:tuto.xml\"));\nif (xml != null) {\n    let ui = UI.of(xml);\n\n    // find elemetns and do data bindings or logic setup here\n    let buttons = ui.select(\".button_container &gt; button\").toList(); // by selector\n    let container = ui.selectRegex(\"container\").findFirst().orElseThrow(); // by id regex\n}\n</code></pre> <p>Info</p> <p><code>XmlUtils</code>also provides other ways to load XML documents, such as from strings or input streams. Choose the method that best fits your use case.</p>"},{"location":"en/ldlib2/ui/xml/#xml-syntax-overview","title":"XML Syntax Overview","text":"<p>LDLib2 UI XML uses a declarative syntax to describe both the UI structure and its styles, similar to HTML + CSS.</p> <p>At the top level, the <code>&lt;ldlib2-ui&gt;</code> root defines a complete UI document. Inside it, you can describe styles, external stylesheets, and the component tree.</p>"},{"location":"en/ldlib2/ui/xml/#stylesheet","title":"Stylesheet","text":"<p>Note</p> <p>Read LSS page before reading this chapter.</p> <p>You can reference external LSS files using the <code>&lt;stylesheet&gt;</code> tag:</p> <pre><code>&lt;stylesheet location=\"ldlib2:lss/mc.lss\"/&gt;\n</code></pre> <p>This allows you to reuse shared styles or let resource packs override UI appearance globally.</p>"},{"location":"en/ldlib2/ui/xml/#embedded-styles","title":"Embedded Styles","text":"<p>Inline styles can be defined inside a <code>&lt;style&gt;</code> block using LSS (LDLib Style Sheet) syntax:</p> <pre><code>&lt;style&gt;\n    label:host {\n        vertical-align: center;\n        horizontal-align: center;\n    }\n    .flex-1 {\n        flex: 1;\n    }\n    .bg {\n        background: sprite(ldlib2:textures/gui/icon.png)\n    }\n&lt;/style&gt;\n</code></pre>"},{"location":"en/ldlib2/ui/xml/#inline-style-attribute","title":"Inline Style Attribute","text":"<p>For quick adjustments, styles can also be set directly on elements:</p> <pre><code>&lt;button style=\"height: 30; align-items: center;\"/&gt;\n</code></pre> <p>Inline styles have higher priority than stylesheet rules.</p>"},{"location":"en/ldlib2/ui/xml/#component-tree","title":"Component Tree","text":"<p>The UI layout is described as a tree of elements under <code>&lt;root&gt;</code>. Each XML node maps to a UI component, and nesting defines parent\u2013child relationships.</p> <p>Attributes are used to configure component properties, while child nodes define structure.</p> <p>In short:</p> <ul> <li><code>&lt;stylesheet&gt;</code> \u2192 load external styles</li> <li><code>&lt;style&gt;</code> \u2192 define embedded styles</li> <li><code>style</code> attribute \u2192 inline styles</li> <li>XML hierarchy \u2192 UI component tree</li> </ul> <p>This makes UI definitions clear, readable, and easy to maintain.</p>"},{"location":"en/ldlib2/ui/components/element/","title":"UIElement","text":""},{"location":"en/ldlib2/ui/components/element/#uielement","title":"UIElement","text":"<p> Since 2.1.0 </p> <p><code>UIElement</code> is the most fundamental and commonly used UI component in LDLib2. All UI components inherit from it.</p> <p>Conceptually, it is similar to the <code>&lt;div/&gt;</code> element in HTML: a general-purpose container that can be styled, laid out, and extended with behaviors.</p> <p>Because of that, everything introduced in this page also applies to all other UI components in LDLib2\u2014so please make sure to read it carefully.</p>"},{"location":"en/ldlib2/ui/components/element/#usages","title":"Usages","text":"JavaKubeJS <pre><code>var element = new UIElement();\nelement.style(style -&gt; style.background(MCSprites.RECT));\nelement.layout(layout -&gt; layout.width(40).height(40));\nelement.setFocusable(true)\nelement.addEventListener(UIEvents.MOUSE_DOWN, e -&gt; e.currentElement.focus());\nroot.addChild(element);\n</code></pre> <pre><code>let element = new UIElement();\nelement.style(style =&gt; style.background(MCSprites.RECT));\nelement.layout(layout =&gt; layout.width(40).height(40));\nelement.setFocusable(true)\nelement.addEventListener(UIEvents.MOUSE_DOWN, e =&gt; e.currentElement.focus());\nroot.addChild(element);\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#xml","title":"Xml","text":"<pre><code>&lt;element id=\"my_id\" class=\"class1 class2\" focusable=\"false\" visible=\"true\" active=\"true\" style=\"background: #fff; width: 50\"&gt;\n    &lt;!-- add children here --&gt;\n    &lt;button text=\"click me!\"/&gt;\n    &lt;inventory-slots/&gt;\n&lt;/element&gt;\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#styles","title":"Styles","text":"<p>Layout</p> <p>layout attributes are actually styles as well.</p> <p>UIElement styles (include layouts) can be accessed as below:</p> JavaKubeJS <pre><code>element.style(style -&gt; style.background(...));\nelement.layout(layout -&gt; layout.width(...));\nelement.getStyle().background(...);\nelement.getLayout().width(...);\n</code></pre> <pre><code>element.style(style -=&gt; style.background(...));\nelement.layout(layout =&gt; layout.width(...));\nelement.getStyle().background(...);\nelement.getLayout().width(...);\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#layout-properties","title":"Layout Properties","text":"<p>You'd better read Layout before using.</p>"},{"location":"en/ldlib2/ui/components/element/#display","title":"<p>display</p>","text":"<p>Controls whether the element participates in layout. <code>FLEX</code> enables normal layout, <code>NONE</code> removes the element from layout calculation. <code>CONTENTS</code> doesn't affect layout but render its children.</p> JavaLSS <pre><code>layout.display(YogaDisplay.FLEX);\nelement.setDisplay(false); // equals to layout.display(YogaDisplay.NONE);\n</code></pre> <pre><code>element {\n    display: flex;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#layout-direction","title":"<p>layout-direction</p>","text":"<p>Sets the layout direction. Usually inherited from parent.</p> JavaLSS <pre><code>layout.layoutDirection(YogaDirection.LTR);\n</code></pre> <pre><code>element {\n    layout-direction: ltr;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#flex-basis","title":"<p>flex-basis</p>","text":"<p>Sets the initial main size before flex grow/shrink. Supports point, percent, and auto.</p> JavaLSS <pre><code>layout.flexBasis(1);\n</code></pre> <pre><code>element {\n    flex-basis: 1;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#flex","title":"<p>flex</p>","text":"<p>Makes the element flexible along the main axis.</p> JavaLSS <pre><code>layout.flex(1);\n</code></pre> <pre><code>element {\n    flex: 1;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#flex-grow","title":"<p>flex-grow</p>","text":"<p>Controls how much the element grows when extra space is available.</p> JavaLSS <pre><code>layout.flexGrow(1);\n</code></pre> <pre><code>element {\n    flex-grow: 1;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#flex-shrink","title":"<p>flex-shrink</p>","text":"<p>Controls how much the element shrinks when space is insufficient.</p> JavaLSS <pre><code>layout.flexShrink(1);\n</code></pre> <pre><code>element {\n    flex-shrink: 1;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#flex-direction","title":"<p>flex-direction</p>","text":"<p>Defines the main axis direction, e.g. <code>ROW</code> or <code>COLUMN</code>.</p> JavaLSS <pre><code>layout.flexDirection(YogaFlexDirection.ROW);\n</code></pre> <pre><code>element {\n    flex-direction: row;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#flex-wrap","title":"<p>flex-wrap</p>","text":"<p>Controls whether children wrap into multiple lines.</p> JavaLSS <pre><code>layout.flexWrap(YogaWrap.WRAP);\n</code></pre> <pre><code>element {\n    flex-wrap: wrap;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#position","title":"<p>position</p>","text":"<p>Sets positioning mode. <code>RELATIVE</code> participates in layout, <code>ABSOLUTE</code> does not affect siblings.</p> JavaLSS <pre><code>layout.position(YogaPositionType.ABSOLUTE);\n</code></pre> <pre><code>element {\n    position: absolute;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#top-right-bottom-left-start-end-horizontal-vertical-all","title":"<p>top / right / bottom / left / start / end / horizontal / vertical / all</p>","text":"<p>Offsets used when <code>position</code> is <code>RELATIVE</code> or <code>ABSOLUTE</code>.</p> JavaLSS <pre><code>layout.top(10);\nlayout.leftPercent(30); // 30%\nlayout.allAuto()\n</code></pre> <pre><code>element {\n    top: 10;\n    left: 30%;\n    all: auto;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#margin-","title":"<p>margin-*</p>","text":"<p><code>*</code>: top / right / bottom / left / start / end / horizontal / vertical / all</p> <p>Sets outer spacing around the element.</p> JavaLSS <pre><code>layout.marginTop(5);\nlayout.marginAll(3);\n</code></pre> <pre><code>element {\n    margin-top: 5;\n    margin-all: 3;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#padding-","title":"<p>padding-*</p>","text":"<p><code>*</code>: top / right / bottom / left / start / end / horizontal / vertical / all</p> <p>Sets inner spacing between border and content.</p> JavaLSS <pre><code>layout.paddingLeft(8);\n</code></pre> <pre><code>element {\n    padding-left: 8;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#gap-","title":"<p>gap-*</p>","text":"<p><code>*</code>: top / right / bottom / left / start / end / horizontal / vertical / all</p> <p>Sets spacing between children in flex layouts.</p> JavaLSS <pre><code>layout.rowGap(6);\n</code></pre> <pre><code>element {\n    row-gap: 6;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#width","title":"<p>width</p>","text":"<p>Sets element width. Supports point, percent, and auto modes.</p> JavaLSS <pre><code>layout.width(100);\nlayout.widthPercent(20); // 20%\n</code></pre> <pre><code>element {\n    width: 100;\n    width: 20%;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#height","title":"<p>height</p>","text":"<p>Sets element height. Supports point, percent, and auto modes.</p> JavaLSS <pre><code>layout.height(50);\n</code></pre> <pre><code>element {\n    height: 50;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#min-width-min-height","title":"<p>min-width / min-height</p>","text":"<p>Sets the minimum size constraint.</p> JavaLSS <pre><code>layout.minWidth(20);\n</code></pre> <pre><code>element {\n    min-width: 20;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#max-width-max-height","title":"<p>max-width / max-height</p>","text":"<p>Sets the maximum size constraint.</p> JavaLSS <pre><code>layout.maxHeight(200);\n</code></pre> <pre><code>element {\n    max-height: 200;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#aspect-rate","title":"<p>aspect-rate</p>","text":"<p>Locks width\u2013height ratio. Useful for square or icon elements.</p> JavaLSS <pre><code>layout.aspectRate(1);\n</code></pre> <pre><code>element {\n    aspect-rate: 1;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#overflow","title":"<p>overflow</p>","text":"<p>Controls how overflowing content is handled. If 'hidden', the content beyond the boundary will be hidden.</p> JavaLSS <pre><code>layout.overflow(YogaOverflow.HIDDEN);\nelement.setOverflowVisible(false); // equals to layout.overflow(YogaOverflow.HIDDEN);\n</code></pre> <pre><code>element {\n    overflow: hidden;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#align-items","title":"<p>align-items</p>","text":"<p>Aligns children along the cross axis (container property).</p> JavaLSS <pre><code>layout.alignItems(YogaAlign.CENTER);\n</code></pre> <pre><code>element {\n    align-items: center;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#justify-content","title":"<p>justify-content</p>","text":"<p>Aligns children along the main axis (container property).</p> JavaLSS <pre><code>layout.justifyContent(YogaJustify.CENTER);\n</code></pre> <pre><code>element {\n    justify-content: center;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#align-self","title":"<p>align-self</p>","text":"<p>Overrides cross-axis alignment for a single element.</p> JavaLSS <pre><code>layout.alignSelf(YogaAlign.CENTER);\n</code></pre> <pre><code>element {\n    align-self: center;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#align-content","title":"<p>align-content</p>","text":"<p>Aligns wrapped lines when <code>flex-wrap</code> is enabled.</p> JavaLSS <pre><code>layout.alignContent(YogaAlign.CENTER);\n</code></pre> <pre><code>element {\n    align-content: center;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#basic-properties","title":"Basic Properties","text":""},{"location":"en/ldlib2/ui/components/element/#background","title":"<p>background</p>","text":"<p>Sets the background rendering of below the element, such as color, rect, image.</p> JavaLSS <pre><code>layout.background(MCSprites.BORDER);\n</code></pre> <p>Check Texture in LSS for lss supports.</p> <pre><code>element {\n    background: #FFF;\n    background: rect(#2ff, 3);\n    background: sprite(ldlib2:textures/gui/icon.png);\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#overlay","title":"<p>overlay</p>","text":"<p>Controls overlay rendering drawn above the element content.</p> JavaLSS <pre><code>layout.overlay(...);\n</code></pre> <p>Check Texture in LSS for lss supports.</p> <pre><code>element {\n    overlay: #FFF;\n    overlay: rect(#2ff, 3);\n    overlay: sprite(ldlib2:textures/gui/icon.png);\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#tooltips","title":"<p>tooltips</p>","text":"<p>Defines tooltip content displayed when hovering the element.</p> JavaLSS <pre><code>layout.tooltips(\"tips.0\"\uff0c \"tips.1\");\nlayout.appendTooltips(\"tips.2\");\n</code></pre> <pre><code>element {\n    tooltips: this is my tooltips;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#z-index","title":"<p>z-index</p>","text":"<p>Controls the stacking order of the element. Higher values appear above lower ones.</p> JavaLSS <pre><code>layout.zIndex(1);\n</code></pre> <pre><code>element {\n    z-index: 1;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#opacity","title":"<p>opacity</p>","text":"<p>Sets the transparency level of the element. <code>0</code> is fully transparent, <code>1</code> is fully opaque.</p> JavaLSS <pre><code>layout.opacity(0.8f);\n</code></pre> <pre><code>element {\n    opacity: 0.8;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#overflow-clip","title":"<p>overflow-clip</p>","text":"<p>If element's overflow is set <code>hidden</code>, clips elements rendering based on given texture's red channel. </p> <p></p>      Your browser does not support video.      <p></p> JavaLSS <pre><code>layout.overflowClip(true);\n</code></pre> <p>Check Texture in LSS for lss supports.</p> <pre><code>element {\n    overflow-clip: sprite(ldlib2:textures/gui/icon.png);\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#transform-2d","title":"<p>transform-2d</p>","text":"<p>Applies 2D transformations such as translate, scale, or rotate.</p> JavaLSS <pre><code>layout.transform2D(Transform2D.identity().scale(0.5f));\nelement.transform(transform -&gt; transform.translate(10, 0))\n</code></pre> <pre><code>element {\n    transform: translate(10, 20) rotate(45) scale(2\uff0c 2) pivot(0.5, 0.5);\n    transform: translateX(10) scale(0.5);\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#transition","title":"<p>transition</p>","text":"<p>Defines animated transitions between property changes.</p> <p></p>      Your browser does not support video.      <p></p> JavaLSS <pre><code>layout.transition(new Transition(Map.of(YogaProperties.HEIGHT, new Animation(1, 0, Eases.LINEAR))));\n</code></pre> <pre><code>element {\n    transition: width 1;\n    transition: background 0.8 quad_in_out,\n                transform 0.3;\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#states","title":"States","text":""},{"location":"en/ldlib2/ui/components/element/#isvisible","title":"<code>isVisible</code>","text":"<p>When <code>isVisible</code> is set to <code>false</code>, the element and all of its children will no longer be rendered. Unlike <code>display: NONE</code>, this does not affect layout calculation. Elements with <code>isVisible = false</code> are also excluded from hit-testing, so many UI events (such as clicks) will not be triggered.</p>"},{"location":"en/ldlib2/ui/components/element/#isactive","title":"<code>isActive</code>","text":"<p>When <code>isActive</code> is set to <code>false</code>, the element may lose its interactive behavior\u2014for example, buttons can no longer be clicked\u2014and the element will no longer receive <code>tick</code> events.</p> <p>Note</p> <p>When <code>isActive</code> is set to <code>false</code>, a <code>__disabled__</code> class is automatically added to the element. You can use the following LSS selectors to style active and inactive states:</p> <pre><code>selector.__disabled__ {\n}\n\nselector:not(.__disabled__) {\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#focusable","title":"<code>focusable</code>","text":"<p>Elements are <code>focusable: false</code> by default. Some components, such as <code>TextField</code>, are focusable by design, but you can still manually change an element\u2019s focusable state. Only when <code>focusable</code> is set to <code>true</code> can an element be focused via <code>focus()</code> or by mouse interaction.</p> <p>Note</p> <p>When an element is in the <code>focused</code> state, a <code>__focused__</code> class is automatically added. You can style focused and unfocused states using the following LSS selectors:</p> <pre><code>selector.__focused__ {\n}\n\nselector:not(.__focused__) {\n}\n</code></pre>"},{"location":"en/ldlib2/ui/components/element/#isinternalui","title":"<code>isInternalUI</code>","text":"<p>This is a special state that indicates whether an element is an internal part of a component. For example, a <code>button</code> contains an internal <code>text</code> element used for rendering its label.</p> <p>Semantically, internal elements are not allowed to be added, removed, or reordered directly. However, you can still edit their styles and manage their child elements via the editor or XML. In the editor, internal elements are displayed in gray in the hierarchy view.</p> <p>In XML, you can access internal elements using the <code>&lt;internal index=\"...\"/&gt;</code> tag, where <code>index</code> specifies which internal element to reference:</p> <pre><code>&lt;button&gt;\n    &lt;!-- obtain the internal text component here --&gt;\n    &lt;internal index=\"0\"&gt;\n    &lt;/internal&gt;\n&lt;/button&gt;\n</code></pre> <p>In LSS, you can use :host and :internal to explicitly target host or internal elements. By default, selectors match both unless constrained. </p><pre><code>button &gt; text {\n}\n\nbutton &gt; text:internal {\n}\n\nbutton &gt; text:host {\n}\n</code></pre><p></p>"},{"location":"en/ldlib2/ui/components/element/#fields","title":"Fields","text":"<p>Only public or protected fields that are externally observable or configurable are listed.</p> Name Type Access Description <code>layoutNode</code> <code>YogaNode</code> protected (getter) Underlying Yoga node used for layout calculation. <code>modularUI</code> <code>ModularUI</code> private (getter) The <code>ModularUI</code> instance this element belongs to. <code>id</code> <code>String</code> private (getter/setter) Element ID, used by selectors and queries. <code>classes</code> <code>Set&lt;String&gt;</code> private (getter) CSS-like class list applied to this element. <code>styleBag</code> <code>StyleBag</code> private (getter) Stores resolved style candidates and computed styles. <code>styles</code> <code>List&lt;Style&gt;</code> private (getter) Inline styles attached to this element. <code>layoutStyle</code> <code>LayoutStyle</code> private (getter) Layout-related style wrapper (Yoga-based). <code>style</code> <code>BasicStyle</code> private (getter) Basic visual styles (background, opacity, zIndex, etc.). <code>isVisible</code> <code>boolean</code> private (getter/setter) Whether the element is visible. <code>isActive</code> <code>boolean</code> private (getter/setter) Whether the element participates in logic and events. <code>focusable</code> <code>boolean</code> private (getter/setter) Whether the element can receive focus. <code>isInternalUI</code> <code>boolean</code> private (getter) Marks internal (component-owned) elements."},{"location":"en/ldlib2/ui/components/element/#methods","title":"Methods","text":""},{"location":"en/ldlib2/ui/components/element/#layout-geometry","title":"Layout &amp; Geometry","text":"Method Signature Description <code>getLayout()</code> <code>LayoutStyle</code> Returns the layout style controller. <code>layout(...)</code> <code>UIElement layout(Consumer&lt;LayoutStyle&gt;)</code> Modify layout properties fluently. <code>node(...)</code> <code>UIElement node(Consumer&lt;YogaNode&gt;)</code> Directly modify the underlying Yoga node. <code>getPositionX()</code> <code>float</code> Absolute X position on screen. <code>getPositionY()</code> <code>float</code> Absolute Y position on screen. <code>getSizeWidth()</code> <code>float</code> Computed width of the element. <code>getSizeHeight()</code> <code>float</code> Computed height of the element. <code>getContentX()</code> <code>float</code> X position of content area (excluding border &amp; padding). <code>getContentY()</code> <code>float</code> Y position of content area. <code>getContentWidth()</code> <code>float</code> Width of content area. <code>getContentHeight()</code> <code>float</code> Height of content area. <code>adaptPositionToScreen()</code> <code>void</code> Adjusts position to stay within screen bounds. <code>adaptPositionToElement(...)</code> <code>void</code> Adjusts position to stay inside another element."},{"location":"en/ldlib2/ui/components/element/#tree-structure","title":"Tree Structure","text":"Method Signature Description <code>getParent()</code> <code>UIElement</code> Returns parent element, or <code>null</code>. <code>getChildren()</code> <code>List&lt;UIElement&gt;</code> Returns an unmodifiable list of children. <code>addChild(...)</code> <code>UIElement addChild(UIElement)</code> Adds a child element. <code>addChildren(...)</code> <code>UIElement addChildren(UIElement...)</code> Adds multiple children. <code>removeChild(...)</code> <code>boolean removeChild(UIElement)</code> Removes a child element. <code>removeSelf()</code> <code>boolean</code> Removes this element from its parent. <code>clearAllChildren()</code> <code>void</code> Removes all children. <code>isAncestorOf(...)</code> <code>boolean</code> Checks if this element is an ancestor of another. <code>getStructurePath()</code> <code>ImmutableList&lt;UIElement&gt;</code> Path from root to this element."},{"location":"en/ldlib2/ui/components/element/#style-classes","title":"Style &amp; Classes","text":"Method Signature Description <code>style(...)</code> <code>UIElement style(Consumer&lt;BasicStyle&gt;)</code> Modify inline visual styles. <code>lss(...)</code> <code>UIElement lss(String, Object)</code> Apply a stylesheet-style property programmatically. <code>addClass(...)</code> <code>UIElement addClass(String)</code> Adds a CSS-like class. <code>removeClass(...)</code> <code>UIElement removeClass(String)</code> Removes a class. <code>hasClass(...)</code> <code>boolean</code> Checks if the class exists. <code>transform(...)</code> <code>UIElement transform(Consumer&lt;Transform2D&gt;)</code> Applies a 2D transform. <code>animation()</code> <code>StyleAnimation</code> Starts a style animation targeting this element. <code>animation(a -&gt; {})</code> <code>StyleAnimation</code> Starts a style animation targeting this element. (always works, when the <code>ModularUI</code> valid)"},{"location":"en/ldlib2/ui/components/element/#focus-interaction","title":"Focus &amp; Interaction","text":"Method Signature Description <code>focus()</code> <code>void</code> Requests focus for this element. <code>blur()</code> <code>void</code> Clears focus if this element is focused. <code>isFocused()</code> <code>boolean</code> Returns true if this element is focused. <code>isHover()</code> <code>boolean</code> Returns true if mouse is directly over this element. <code>isSelfOrChildHover()</code> <code>boolean</code> Returns true if a slef or child is hovered. <code>startDrag(...)</code> <code>DragHandler</code> Starts a drag operation."},{"location":"en/ldlib2/ui/components/element/#events","title":"Events","text":"Method Signature Description <code>addEventListener(...)</code> <code>UIElement addEventListener(String, UIEventListener)</code> Registers a bubble-phase event listener. <code>addEventListener(..., true)</code> <code>UIElement addEventListener(String, UIEventListener, boolean)</code> Registers a capture-phase listener. <code>removeEventListener(...)</code> <code>void</code> Removes an event listener. <code>stopInteractionEventsPropagation()</code> <code>UIElement</code> Stops mouse &amp; drag event propagation."},{"location":"en/ldlib2/ui/components/element/#clientserver-sync-rpc","title":"Client\u2013Server Sync &amp; RPC","text":"Method Signature Description <code>addSyncValue(...)</code> <code>UIElement</code> Registers a synced value. <code>removeSyncValue(...)</code> <code>UIElement</code> Unregisters a synced value. <code>addRPCEvent(...)</code> <code>UIElement</code> Registers an RPC event. <code>sendEvent(...)</code> <code>void</code> Sends an RPC event to server. <code>sendEvent(..., callback)</code> <code>&lt;T&gt; void</code> Sends an RPC event with response callback."},{"location":"en/ldlib2/ui/components/element/#rendering","title":"Rendering","text":"Method Signature Description <code>isDisplayed()</code> <code>boolean</code> Returns true if display is not <code>NONE</code>."},{"location":"en/ldlib2/ui/preliminary/","title":"Basics","text":""},{"location":"en/ldlib2/ui/preliminary/#basics","title":"Basics","text":"<p> Since 2.1.0 </p> <p>LDLib2 UI follows ideas similar to Web UI, UI Toolkits, and fluent-style APIs. All UI objects are built from a single base type called <code>UIElement</code>. Different behaviors and visual appearances are achieved by composing elements with layout, styles, and events.</p> <p>If you have read the Getting Started guide, you may have noticed that LDLib2 UI is highly flexible and modular.</p> <p>Below is a list of core pages you may want to explore next. Each page focuses on a specific aspect of the UI system.</p> Topic Description ModularUI Learn how the <code>ModularUI</code> works. Layout Learn how UI layout works using Yoga-based flexbox rules. Events Understand the UI event system, including dispatching and bubbling. Stylesheet Use LSS to define styles declaratively and apply themes consistently. Data Bindings Bind UI components to data sources with automatic updates. Screen &amp; Menu Integrate ModularUI with client screens and server-backed menus."},{"location":"en/ldlib2/ui/preliminary/data_bindings/","title":"Data Bindings and RPCEvent","text":""},{"location":"en/ldlib2/ui/preliminary/data_bindings/#data-bindings-and-rpcevent","title":"Data Bindings and RPCEvent","text":"<p> Since 2.1.5 </p> <p>Before learning Data Bindings and RPCEvent, it is important to understand the relationship between UI components and data.</p>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#data-bindings-on-the-client-side","title":"Data bindings on the client side","text":"<p>If a UI component is data-driven, its role in the data model usually falls into one of the following categories:</p> <ul> <li>Data consumer: passively receives data and renders it.</li> <li>Data producer: produces data that may change (pure producers are rare in practice).</li> <li>Data consumer + producer: both displays data and modifies it.</li> </ul>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#data-consumer-with-idataconsumert","title":"Data consumer with <code>IDataConsumer&lt;T&gt;</code>","text":"<p>Components that passively receive data implement the <code>IDataConsumer&lt;T&gt;</code> interface, such as <code>Label</code> and <code>ProgressBar</code>.</p> <p>This interface allows you to bind an <code>IDataProvider&lt;T&gt;</code>, which is responsible for supplying updated data values.</p> <p>This is useful when you want to display dynamic text or changing progress values.</p> JavaKubeJS <pre><code>var valueHolder = new AtomicInteger(0);\n// bind a DataSource to notify the value changes for label and progress bar\nnew Label().bindDataSource(SupplierDataSource.of(() -&gt; \n    Component.literal(\"Binding: \").append(String.valueOf(valueHolder.get())))),\nnew ProgressBar()\n        .bindDataSource(SupplierDataSource.of(() -&gt; valueHolder.get() / 100f))\n        .label(label -&gt; label.bindDataSource(SupplierDataSource.of(() -&gt; \n            Component.literal(\"Progress: \").append(String.valueOf(valueHolder.get())))))\n</code></pre> <pre><code>let valueHolder = {\n    \"value\": 0\n}\n// bind a DataSource to notify the value changes for label and progress bar\nnew Label().bindDataSource(SupplierDataSource.of(() =&gt; `Binding: ${valueHolder.value}`)),\nnew ProgressBar()\n    .bindDataSource(SupplierDataSource.of(() =&gt; valueHolder.value / 100))\n    .label(label =&gt; label.bindDataSource(SupplierDataSource.of(() =&gt; `Progress: ${valueHolder.value}`)))\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#data-producer-with-iobservablet","title":"Data producer with <code>IObservable&lt;T&gt;</code>","text":"<p>Components that produce changeable data implement the <code>IObservable&lt;T&gt;</code> interface. Most data-driven components fall into this category, such as <code>Toggle</code>, <code>TextField</code>, <code>Selector</code></p> <p>This interface allows you to bind an <code>IObserver&lt;T&gt;</code>, which is notified whenever the component\u2019s value changes.</p> <p>For example, to observe changes from a <code>TextField</code>:</p> JavaKubeJS <pre><code>var valueHolder = new AtomicInteger(0);\n// bind a Observer to observe the value changes of the text-field\nnew TextField()\n    .setNumbersOnlyInt(0, 100)\n    .setValue(String.valueOf(valueHolder.get()))\n    // bind an Observer to update the value holder\n    .bindObserver(value -&gt; valueHolder.set(Integer.parseInt(value)))\n    // actually, equal to setTextResponder\n    //.setTextResponder(value -&gt; valueHolder.set(Integer.parseInt(value)))\n</code></pre> <pre><code>let valueHolder = {\n    \"value\": 0\n}\n// bind a Observer to observe the value changes of the text-field\nnew TextField()\n    .setNumbersOnlyInt(0, 100)\n    .setValue(valueHolder.value)\n    // bind an Observer to update the value holder\n    .bindObserver(value =&gt; valueHolder.value = int(value))\n    // actually, equal to setTextResponder\n    //.setTextResponder(value =&gt; valueHolder.value = int(value))\n</code></pre> <p>Note</p> <p>Components such as <code>Toggle</code>, <code>Selector</code>, and <code>TextField</code> support both <code>IDataConsumer&lt;T&gt;</code> and <code>IObservable&lt;T&gt;</code>, because they are responsible for displaying data and modifying it at the same time.</p>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#data-bindings-between-client-and-server","title":"Data Bindings Between Client and Server","text":"<p>If your UI works only on the client, <code>IDataConsumer&lt;T&gt;</code> and <code>IObservable&lt;T&gt;</code> are usually sufficient. They cover most needs for observing and updating local data.</p> <p>However, many UIs are container-based UIs, where the actual data is stored on the server. In this case, you typically want:</p> <ul> <li>To display server-side data in client UI components.</li> <li>To sync changes made on the client UI back to the server.</li> </ul> <p>This is known as bidirectional data binding</p> <pre><code>sequenceDiagram\n  autonumber\n  Server-&gt;&gt;Client UI: Sync initial data (if s-&gt;c allowed)\n  Note right of Client UI: Initialize UI state\n  Server-&gt;&gt;Server: Detect server-side data change\n  Server-&gt;&gt;Client UI: Sync updated data (if s-&gt;c allowed)\n  Note right of Client UI: Update UI display\n\n  Client UI-&gt;&gt;Client UI: UI interaction changes value\n  Client UI-&gt;&gt;Server: Sync changed data (if c-&gt;s allowed)\n  Note left of Server: Apply server-side update\n</code></pre> <p>This may sound complex, but LDLib2 fully abstracts this process. </p>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#using-databindingbuildert","title":"Using <code>DataBindingBuilder&lt;T&gt;</code>","text":"<p>With <code>DataBindingBuilder&lt;T&gt;</code>, you do not need to write any synchronization logic yourself. You only describe:</p> <ul> <li>Where the data is stored</li> <li>How to read it</li> <li>How to apply updates</li> </ul>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#simple-bidirectional-binding","title":"Simple Bidirectional Binding","text":"JavaKubeJS <pre><code>// Server-side values\n// boolean bool = true;\n// String string = \"hello\";\n// ItemStack item = new ItemStack(Items.APPLE);\n\nnew Switch()\n    .bind(DataBindingBuilder.bool(() -&gt; bool, value -&gt; bool = value).build());\n\nnew TextField()\n    .bind(DataBindingBuilder.string(() -&gt; string, value -&gt; string = value).build());\n\nnew ItemSlot()\n    .bind(DataBindingBuilder.itemStack(() -&gt; item, stack -&gt; item = stack).build());\n</code></pre> <pre><code>// Server-side values\n// let bool = true;\n// let string = \"hello\";\n// let item = new ItemStack(Items.APPLE);\n\nnew Switch()\n    .bind(DataBindingBuilder.bool(() =&gt; bool, v =&gt; bool = v).build());\n\nnew TextField()\n    .bind(DataBindingBuilder.string(() =&gt; string, v =&gt; string = v).build());\n\nnew ItemSlot()\n    .bind(DataBindingBuilder.itemStack(() =&gt; item, v =&gt; item = v).build());\n</code></pre> <p>For example, in:</p> <pre><code>DataBindingBuilder.bool(() -&gt; bool, value -&gt; bool = value).build()\n</code></pre> <ul> <li>The first lambda defines how the server provides data to the client.</li> <li>The second lambda defines how client changes update server data.</li> </ul>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#one-way-binding-server-client-only","title":"One-Way Binding (Server \u2192 Client Only)","text":"<p>Sometimes, you do not want client-side changes to affect the server, such as with <code>Label</code>, which is display-only.</p> <p>LDLib2 allows you to explicitly control sync strategies.</p> SyncStrategy Overview <ul> <li><code>NONE</code> No synchronization at all.</li> <li><code>CHANGED_PERIODIC</code> Sync only when data changes (default: once per tick).</li> <li><code>ALWAYS</code> Force sync every tick, even if unchanged (use with caution).</li> </ul> JavaKubeJS <pre><code>// Block client -&gt; server updates\nnew Label().bind(\n    DataBindingBuilder.component(() -&gt; Component.literal(data), c -&gt; {})\n        .c2sStrategy(SyncStrategy.NONE)\n        .build()\n);\n\n// Shorthand for server -&gt; client only\nnew Label().bind(\n    DataBindingBuilder.componentS2C(() -&gt; Component.literal(data)).build()\n);\n</code></pre> <pre><code>// Block client -&gt; server updates\nnew Label().bind(\n    DataBindingBuilder.component(() =&gt; data, c =&gt; {})\n        .c2sStrategy(\"NONE\")\n        .build()\n);\n\n// Shorthand for server -&gt; client only\nnew Label().bind(\n    DataBindingBuilder.componentS2C(() =&gt; data).build()\n);\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#custom-ibindingt","title":"Custom <code>IBinding&lt;T&gt;</code>","text":"<p><code>DataBindingBuilder&lt;T&gt;</code> provides built-in bindings for common data types. For custom types (for example, <code>int[]</code>), you can create your own binding.</p> <pre><code>// Server-side value\n// int[] data = new int[]{1, 2, 3};\n\nnew BindableValue&lt;int[]&gt;().bind(\n    DataBindingBuilder.create(\n        () -&gt; data,\n        v -&gt; data = v\n    ).build()\n);\n</code></pre> <p>Warning</p> <p>Not all types are supported by default. See Type Support. Unsupported types require a custom type accessor.</p> <p>If a type is read-only (see Type Support):</p> <ul> <li>The getter must return a stable, non-null instance.</li> <li>You have to define the type and initial value.</li> </ul> <p>Example with <code>INBTSerializable</code>:</p> <pre><code>// Server-side value\n// INBTSerializable&lt;CompoundTag&gt; data = ...;\n\nnew BindableValue&lt;INBTSerializable&gt;().bind(\n    DataBindingBuilder.create(\n        () -&gt; data,\n        v -&gt; {\n            // Instance already updated, just react here\n        }\n    )\n    .initialValue(data).syncType(INBTSerializable.class)\n    .build()\n);\n</code></pre> <p>This ensures correct synchronization and avoids ambiguity for read-only objects.</p>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#getter-and-setter-on-the-client","title":"<code>Getter</code> and <code>Setter</code> on the client","text":"<p>You may be wondering why we only define getter and setter logic on the server side, but not on the client side.</p> <p>This is because all components that support the bind method inherit from <code>IBindable&lt;T&gt;</code>. For these components, LDLib2 automatically sets up the corresponding client-side getter and setter logic for data synchronization.</p> <p>In most cases, this default behavior is sufficient and requires no additional configuration.</p> <p>However, if you want full control over how the client processes incoming data, or what data it sends back to the server, you can manually define your own client-side getter and setter logic.</p> JavaKubeJS <pre><code>// Server-side value\n// Block data = ...;\n\nvar label = new Label();\nnew BindableValue&lt;Block&gt;().bind(\n    DataBindingBuilder.blockS2C(() -&gt; data)\n        .remoteSetter(block -&gt; label.setText(block.getDescriptionId())).build()\n);\n</code></pre> <pre><code>// Server-side value\n// Block data = ...;\n\nlet label = new Label();\nnew BindableValue().bind(\n    DataBindingBuilder.blockS2C(() =&gt; data)\n        .remoteSetter(block =&gt; label.setText(block.getDescriptionId())).build()\n);\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#all-in-one-bindableuielementt","title":"All in one - <code>BindableUIElement&lt;T&gt;</code>","text":"<p>You may have already noticed that almost all data-driven components\u2014such as <code>TextArea</code>, <code>SearchComponent</code>, <code>Switch</code>, and others\u2014are built on top of <code>BindableUIElement&lt;T&gt;</code>. <code>BindableUIElement&lt;T&gt;</code> is a wrapped UI element that implements all of the following interfaces: This means it can both display data and produce data changes, while supporting client\u2013server synchronization.</p> Info <p><code>BindableValue&lt;T&gt;</code> is actually a utill component, and set <code>dispaly: CONTENTS;</code>, which means it wont affect layout during it';s lifestyle.</p> <p>If you want to implement your own UI component and support bidirectional data binding between the client and server, you can simply extend this class. For components that do not implement <code>IBindable&lt;T&gt;</code>\u2014such as the base <code>UIElement</code>\u2014you can still achieve data bindings by attaching a <code>BindableValue&lt;T&gt;</code> internally. The example below shows how to sync server-side data to the client and use it to control an element\u2019s width:</p> JavaKubeJS <pre><code>// Server-side value\n// var widthOnTheServer = 100f;\n\nvar element = new UIElement();\nelement.addChildren(\n    new BindableValue&lt;Float&gt;().bind(DataBindingBuilder.floatS2C(() -&gt; widthOnTheServer)\n        .remoteSetter(width -&gt; element.getLayout().width(width))\n        .build())\n);\n</code></pre> <pre><code>// Server-side value\n// let widthOnTheServer = 100;\n\nlet element = new UIElement();\nelement.addChildren(\n    new BindableValue().bind(DataBindingBuilder.floatS2C(() =&gt; widthOnTheServer)\n        .remoteSetter(width =&gt; element.getLayout().width(width))\n        .build())\n);\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#complex-usage-examples","title":"Complex usage examples","text":"<p>Ok, let's do one more complicated exmaple, let's bind a list of <code>String</code> stored at the server for a <code>Selector</code> (as candidates ). </p><pre><code>// method 1, we sync String[]\n// represent value stored on the server\n// var candidates = new ArrayList&lt;&gt;(List.of(\"a\", \"b\", \"c\", \"d\"));\n\nvar selector1 = new Selector&lt;String&gt;();\nselector1.addChild(\n    // a placeholder element value to sync candidates, it won't affect layout\n    new BindableValue&lt;String[]&gt;().bind(DataBindingBuilder.create(\n            () -&gt; candidates.toArray(String[]::new), Consumers.nop())\n            .c2sStrategy(SyncStrategy.NONE) // only s -&gt; c\n            .remoteSetter(candidates -&gt; {\n                selector1.setCandidates(Arrays.stream(candidates).toList());\n            })\n            .build()\n    )\n);\n\n// method 2, we sync List&lt;String&gt;\n// represent value stored on the server and client\n// var candidates = new ArrayList&lt;&gt;(List.of(\"a\", \"b\", \"c\", \"d\"));\n\nvar selector2 = new Selector&lt;String&gt;();\n// because the List is a readonly value for ldlib2 sync system. you have to obtain the real type of List&lt;String&gt;\nType type = new TypeToken&lt;List&lt;String&gt;&gt;(){}.getType();\nselector2.addChild(\n    // a placeholder element value to sync candidates, it won't affect layout\n    new BindableValue&lt;List&lt;String&gt;&gt;().bind(DataBindingBuilder.create(\n            () -&gt; candidates, Consumers.nop())\n            .syncType(type)\n            .initialValue(candidates)\n            .c2sStrategy(SyncStrategy.NONE) // only s -&gt; c\n            .remoteSetter(selector2::setCandidates)\n            .build()\n    )\n);\n\nroot.addChildren(selector1, selector2);\n</code></pre> If you understand the two approaches shown in this code, you have essentially mastered data binding.<p></p> <ul> <li>Method 1 synchronizes a <code>String[]</code>, which is straightforward and works as expected.</li> <li>Method 2 synchronizes a <code>List&lt;String&gt;</code>. Since <code>Collection&lt;T&gt;</code> is treated as a read-only type in LDLib2, you must explicitly provide an <code>initialValue</code> and specify the actual type (including generics).</li> </ul> <p>This ensures the binding system can correctly identify and track the data.</p>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#ui-rpcevent","title":"UI RPCEvent","text":"<p>At first glance, the data binding system seems to handle most synchronization needs, but in practice, this is not always the case.</p> <p>For example, if you want to execute server-side logic when a user clicks a button, data bindings are clearly not suitable.</p> <p>Now consider a more complex scenario: binding a <code>FluidSlot</code> to a server-side <code>IFluidHandler</code>. This may appear possible with data bindings. If it is used only for server-to-client display, it works fine. However, once interaction is involved, bidirectional synchronization becomes dangerous.</p> <p>If the client is allowed to modify the value, it can easily send malicious packets to manipulate the server-side <code>IFluidHandler</code>.</p> The correct approach is <ul> <li>Use server-to-client data bindings for display only</li> <li>Send client interactions (such as clicking a <code>FluidSlot</code>) to the server</li> <li>Handle the interaction on the server</li> <li>If the server state changes, synchronize it back to the client via data bindings</li> </ul> <p>In short, we need a mechanism to send interaction data between client and server. This mechanism is called <code>UI RPCEvent</code>.</p> <p>Taking a button as an example, if you have read the UI Event section, you already know that UI events can be sent to the server and trigger logic. Internally, this is implemented using <code>RPCEvent</code>.</p> <pre><code>// trigger ui event on the server\nvar button = new UIElement().addServerEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    // do something on the server\n});\n</code></pre> <pre><code>// equivalent implementation using RPCEvent\n\nvar clickEvent = RPCEventBuilder.simple(UIEvent.class, event -&gt; {\n    // do something on the server\n});\n\nnew UIElement().addEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    e.currentElement.sendEvent(clickEvent, e);\n}).addRPCEvent(clickEvent);\n</code></pre> <p>You can use <code>RPCEventBuilder</code> to construct an <code>RPCEvent</code> and send data to the server when needed.</p> <p>Note</p> <p>When sending RPC events, the parameters passed to <code>sendEvent</code> must exactly match the parameters defined in the <code>RPCEventBuilder</code>, including their order and types, and don't forget to <code>addRPCEvent</code> them.  Otherwise, the event will not be dispatched correctly.</p>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#rpcevent-with-return","title":"RPCEvent with return","text":"<p>Sometimes you may want to send a request to the server to query data, and expect the server to return a result. For example, to ask the server to perform an addition and return the result, you can define it like this:</p> <pre><code>var queryAdd = RPCEventBuilder.simple(int.class, int.class, int.class, (a, b) -&gt; {\n    // calculate the result and return on the server\n    return a + b;\n});\n\nnew UIElement().addEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    e.currentElement.&lt;Integer&gt;sendEvent(queryAdd, result -&gt; {\n        // receive the result on the client\n        assert result == 2;\n    }, 1, 2);\n}).addRPCEvent(queryAdd);\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/data_bindings/#send-event-to-the-client","title":"Send event to the client","text":"<p>In practice, UI RPC events are designed primarily for client \u2192 server communication, with optional responses sent back to the client. This matches most real-world use cases, where the server owns the data and logic, and the client only sends interaction requests.</p> <p>LDLib2 therefore does not provide a dedicated UI-level API for server \u2192 client RPC events.</p> <p>However, if you really need to actively send events from the server to the client, you can achieve this by using the generic RPC Packet system.</p> <p>Below is an example showing how the server sends an RPC packet to clients, and how the client locates and operates on a specific UI element.</p> <pre><code>var element = new UIElement().setId(\"my_element\");\n\n// annotate your packet method anywhere you want\n@RPCPacket(\"rpcEventToClient\")\npublic static void rpcPacketTest(RPCSender sender, String message, boolean message2) {\n    if (sender.isRemote()) {\n        var player = Minecraft.getInstance().player;\n        if (player != null &amp;&amp; player.containerMenu instanceof IModularUIHolderMenu uiHolderMenu) {\n            uiHolderMenu.getModularUI().select(\"#my_element\").findFirst().ifPresent(element -&gt; {\n                // do something on the client side with your element.\n            });\n        } \n    }\n}\n\n// send pacet to the remote/server \nRPCPacketDistributor.rpcToAllPlayers(\"rpcEventToClient\", \"Hello from server!\", false)\n</code></pre> <p>This approach gives you full control over server-initiated client logic, while keeping the UI RPC system simple and focused on interaction-driven workflows.</p> <p>Tip</p> <p>When using <code>FluidSlot</code> with container bindings, the implementation already uses server \u2192 client (s\u2192c) read-only data syncing combined with RPC events for interactions.</p> <p>You don\u2019t need to handle sync strategies yourself. The <code>FluidSlot.bind(...)</code> implementation is also a good reference for learning how data syncing and RPC-based interactions work together.</p>"},{"location":"en/ldlib2/ui/preliminary/event/","title":"Event","text":""},{"location":"en/ldlib2/ui/preliminary/event/#event","title":"Event","text":"<p> Since 2.1.0 </p> <p>LDLib2 UI provides events that communicate user actions or notifications to UI elements. The event system shares the same terminology and event naming as HTML events.</p>"},{"location":"en/ldlib2/ui/preliminary/event/#dispatch-events","title":"Dispatch events","text":"<p>The event system listens for events that come from the ModularUI or mannually triggers, then uses the <code>UIEventDispatcher</code> to dispatch those events to UI elements. The event dispatcher determines an appropriate dispatching strategy for each event it sends. Once determined, the dispatcher executes the strategy.</p>"},{"location":"en/ldlib2/ui/preliminary/event/#event-propagation","title":"Event propagation","text":"<p>Each event phase has its own dispatch behavior. The behavior of each event type breaks down into two stages:</p> <ul> <li><code>Capture Phase</code>: Events sent to elements during the capture-down phase.</li> <li><code>Bubbles Phase</code>: Events sent to elements during the bubble-up phase.</li> </ul> <p>After the event dispatcher selects the event <code>target</code>, it computes the propagation path of the event. The propagation path is an ordered list of UI elements that receive the event. The propagation path occurs in the following order:</p> <ol> <li>The path starts at the root of the UI element tree and descends towards the <code>target</code>. This is the capture-down phase.</li> <li>The event target receives the event.</li> <li>The event then ascends the tree towards the root. This is the bubble-up phase.</li> </ol> Propagation path <p>Most event are sent to all elements along the propagation path. Some event skip the bubble-up phase, and some event are sent to the event target only.</p>"},{"location":"en/ldlib2/ui/preliminary/event/#event-target","title":"Event target","text":"<p>As a <code>UIEvent</code> travels along the propagation path, <code>UIEvent.currentElement</code> is updated to the element that is currently handling the event. This makes it easy to know \u201cwhich element is running my listener right now\u201d.</p> <p>Within an event listener, LDLib2 distinguishes two important element references:</p> <ul> <li><code>UIEvent.target</code>: the element where the event originated (the dispatch target).</li> <li><code>UIEvent.relatedTarget</code>(Optional): the other element may be involved in some events.</li> <li><code>UIEvent.currentElement</code>: the element whose listener is currently being executed.</li> </ul> <p><code>target</code> is determined before dispatch begins and does not change during propagation. <code>currentElement</code> changes as the dispatcher moves through the tree (capture \u2192 target \u2192 bubble).</p>"},{"location":"en/ldlib2/ui/preliminary/event/#stopping-propagation","title":"Stopping propagation","text":"<p>LDLib2 provides two levels of cancellation:</p> <ul> <li> <p><code>event.stopPropagation()</code>   Stops the event from reaching later elements and later phases (capture/bubble will cease).</p> </li> <li> <p><code>event.stopImmediatePropagation()</code>   Stops other listeners on the current element from running, and also stops further propagation.</p> </li> </ul>"},{"location":"en/ldlib2/ui/preliminary/event/#register-event-listeners","title":"Register event listeners","text":"<p>LDLib2 uses a DOM-like event model: events travel through the UI tree and a listener can be registered for either:</p> <ul> <li>Bubble phase (default)</li> <li>Capture phase (set <code>useCapture = true</code>)</li> </ul> <p>Use <code>addEventListener(eventType, listener)</code> to register a bubble-phase listener:</p> JavaKubeJS <pre><code>var root = new UIElement().setId(\"root\");\nvar button = new UIElement().setId(\"button\");\nroot.addChild(button);\n\n// UIEvents.CLICK == \"mouseClick\"\nbutton.addEventListener(UIEvents.CLICK, e -&gt; {\n    LDLib2.LOGGER.info(\"Bubble listener: current={}, target={}\",\n            e.currentElement.getId(), e.target.getId());\n});\n</code></pre> <pre><code>let root = new UIElement().setId(\"root\");\nlet button = new UIElement().setId(\"button\");\nroot.addChild(button);\n\n// UIEvents.CLICK == \"mouseClick\"\nbutton.addEventListener(UIEvents.CLICK, e =&gt; {\n    console.log(`Bubble listener: current=${e.currentElement.getId()}, target=${e.target.getId()}`);\n});\n</code></pre> <p>To register a capture-phase listener, pass true as the third argument:</p> JavaKubeJS <pre><code>root.addEventListener(UIEvents.CLICK, e -&gt; {\n    LDLib2.LOGGER.info(\"Capture: current={}, target={}\",\n            e.currentElement.getId(), e.target.getId());\n}, true);\n</code></pre> <pre><code>root.addEventListener(UIEvents.CLICK, e =&gt; {\n    console.log(`Capture: current=${e.currentElement.getId()}, target=${e.target.getId()}`);\n}, true);\n</code></pre> <p>We also provide method allow you to listen events on the <code>server</code>. Events are triggered on the client-side and sync to the server. Not all events support server listeners, check Event reference below.</p> JavaKubeJS <pre><code>root.addServerEventListener(UIEvents.CLICK, e -&gt; {\n    LDLib2.LOGGER.info(\"Triggered on the server\";\n});\n</code></pre> <pre><code>root.addServerEventListener(UIEvents.CLICK, e =&gt; {\n    console.log(\"Triggered on the server\");\n});\n</code></pre> <p>To remove a listener, call <code>removeEventListener(...)</code>. Make sure the useCapture flag matches how the listener was registered:</p> JavaKubeJS <pre><code>UIEventListener onClick = e -&gt; LDLib2.LOGGER.info(\"clicked!\");\n\nbutton.addEventListener(UIEvents.CLICK, onClick);       // bubble\nroot.addEventListener(UIEvents.CLICK, onClick, true);   // capture\n\nbutton.removeEventListener(UIEvents.CLICK, onClick);          // remove bubble listener\nroot.removeEventListener(UIEvents.CLICK, onClick, true);      // remove capture listener\n</code></pre> <pre><code>let onClick = UIEventListener.creatre(e =&gt; LDLib2.LOGGER.info(\"clicked!\"));\n\nbutton.addEventListener(UIEvents.CLICK, onClick);       // bubble\nroot.addEventListener(UIEvents.CLICK, onClick, true);   // capture\n\nbutton.removeEventListener(UIEvents.CLICK, onClick);          // remove bubble listener\nroot.removeEventListener(UIEvents.CLICK, onClick, true);      // remove capture listener\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/event/#event-reference","title":"Event reference","text":"<p>LDLib2 raises an event when a user interacts with and changes the state of elements. The event design is similar to the Event interface for HTML elements.</p> <p>Event types fit into a hierarchy based on the <code>UIEvent.class</code>. Each event family implements an interface that defines the common characteristics of all events of the same family.</p> <p>Here, we list common events available for all ui elemetns below. Select any of the event types listed below for more information on the event, and links to the API documentation.</p> <p>Note</p> <p>We'd recommend to use <code>UIEvents.xxx</code> instead of an event type string.</p>"},{"location":"en/ldlib2/ui/preliminary/event/#mouse-events","title":"Mouse Events","text":"<p>Mouse Events are most used events. Event sent after a handler starts capturing the mouse.</p> Event Description Capture down Bubbles up Support Server <code>mouseDown</code> Fired when the user presses a mouse button. \u2705 \u2705 \u2705 <code>mouseUp</code> Fired when the user releases a mouse button. \u2705 \u2705 \u2705 <code>mouseClick</code> Fired when the user clicks a mouse button (press + release). \u2705 \u2705 \u2705 <code>doubleClick</code> Fired when the user double-clicks a mouse button. \u2705 \u2705 \u2705 <code>mouseMove</code> Fired when the mouse moves over the element. \u2705 \u2705 \u2705 <code>mouseEnter</code> Fired when the mouse enters an element or one of its descendants. \u2705 \u274c \u2705 <code>mouseLeave</code> Fired when the mouse leaves an element or one of its descendants. \u2705 \u274c \u2705 <code>mouseWheel</code> Fired when the user scrolls the mouse wheel. \u2705 \u2705 \u2705 Field Description Supported Event <code>x</code> mouse position x All <code>y</code> mouse position y All <code>button</code> mouse button code (0 - left, 1 - right, 2 - middle, others...) <code>mouseDown</code> <code>mouseUp</code> <code>mouseClick</code> <code>doubleClick</code> <code>deltaX</code> scroll delta x <code>mouseWheel</code> <code>deltaY</code> scroll delta y <code>mouseWheel</code> <p>Usage</p> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.DOUBLE_CLICK, e -&gt; {\n    LDLib2.LOGGER.info(\"double click {} with button {}\", e.target, e.button)\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.DOUBLE_CLICK, e =&gt; {\n    console.log(`double click ${e.target} with button ${e.button}`)\n});\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/event/#drag-and-drop-events","title":"Drag and Drop Events","text":"<p>Drag and drop events are dispatched during drag operations. These events are client-side only and will not be sent to the server.</p> Event Description Capture down Bubbles up Support Server <code>dragEnter</code> Fired when the pointer enters an element during a drag operation. \u2705 \u274c \u274c <code>dragLeave</code> Fired when the pointer leaves an element during a drag operation. \u2705 \u274c \u274c <code>dragUpdate</code> Fired when the pointer moves over an element during dragging. \u2705 \u2705 \u274c <code>dragSourceUpdate</code> Fired on the drag source while dragging. \u2705 \u274c \u274c <code>dragPerform</code> Fired when the dragged object is released over an element. \u2705 \u274c \u274c <code>dragEnd</code> Fired on the drag source when the drag operation ends. \u2705 \u274c \u274c Field Description Supported Event <code>x</code> mouse position x All <code>y</code> mouse position y All <code>relatedTarget</code> If the relatedTarget is not null, it means the new element entered. <code>dragLeave</code> <code>deltaX</code> dragging delta x All <code>deltaY</code> dragging delta y All <code>dragStartX</code> start position x before dragging All <code>dragStartY</code> start position y before dragging All <code>dragHandler</code> DragHandler is used to handle drag events. All <p>All drag events will only be triggered after the drag is started <code>startDrag</code>. The drag and drop lifecycle is as follows:</p> <ol> <li>To trigger dragging, for example, in mouse events, you can call <code>startDrag</code>.</li> <li>do something with drag events, <code>dragEnter</code>, <code>dragLeave</code>, <code>dragUpdate</code>, and <code>dragSourceUpdate</code> (if th drag source is defined).</li> <li>When the drag is finished, trigger <code>dragPerform</code>, and <code>dragEnd</code> (if th drag source is defined)</li> </ol> <p>Method: <code>DragHandler.startDrag(Object draggingObject, IGuiTexture dragTexture, UIElement dragSource)</code></p> <p>Parameters:</p> <ul> <li><code>draggingObject</code>: the object being dragged; can be of any type to represent the drag payload</li> <li><code>dragTexture</code>: used to visually represent the drag operation</li> <li><code>dragSource</code>: the <code>UIElement</code> that acts as the source of the drag operation</li> </ul> <p>Note</p> <p><code>dragSourceUpdate</code> and <code>dragEnd</code> are only dispatched to the drag source.</p> <p>You could also start a drag by using <code>UIElement.startDrag</code> which can help you pass the <code>dragSource</code> directly.</p> <p>Usage</p> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    // start drag when the mouse down\n    elem.startDrag(null, null);\n});\nelem.addEventListener(UIEvents.DRAG_SOURCE_UPDATE, e -&gt; {\n    LDLib2.LOGGER.info(\"{} dragged ({}, {})\", e.target, e.deltaX, e.deltaY)\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.MOUSE_DOWN, e =&gt; {\n    // start drag when the mouse down\n    elem.startDrag(null, null);\n});\nelem.addEventListener(UIEvents.DRAG_SOURCE_UPDATE, e =&gt; {\n    copnsole.log(`${e.target} dragged (${e.deltaX}, ${e.deltaY})`)\n});\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/event/#focus-events","title":"Focus Events","text":"<p>Focus events are dispatched when <code>focusable</code> elements gain or lose focus.</p> Event Description Capture down Bubbles up Support Server <code>focusIn</code> Fired when an element is about to gain focus. \u2705 \u274c \u274c <code>focus</code> Fired after an element has gained focus. \u2705 \u274c \u2705 <code>focusOut</code> Fired when an element is about to lose focus. \u2705 \u274c \u274c <code>blur</code> Fired after an element has lost focus. \u2705 \u274c \u2705 Field Description Supported Event <code>relatedTarget</code> For <code>focusIn</code> and <code>focus</code>, refers to last focused element.  For <code>focusOut</code> and <code>blur</code>, refers to last focused element. All <p>Note</p> <ul> <li><code>focusIn</code> and <code>focusOut</code> are not sent to the server.</li> <li><code>relatedTarget</code> indicates the element losing or gaining focus.</li> </ul> <p>Usage</p> JavaKubeJS <pre><code>elem.setFocusable(true)\nelem.addEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    // request focus\n    elem.focus();\n});\nelem.addEventListener(UIEvents.FOCUS, e -&gt; {\n    LDLib2.LOGGER.info(\"{} gained the focus\", elem);\n});\n</code></pre> <pre><code>elem.setFocusable(true)\nelem.addEventListener(UIEvents.MOUSE_DOWN, e =&gt; {\n    // request focus\n    elem.focus();\n});\nelem.addEventListener(UIEvents.FOCUS, e =&gt; {\n    console.log(`${elem} gained the focus`);\n});\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/event/#keyboard-events","title":"Keyboard Events","text":"<p>Keyboard events are dispatched to the element that currently has focus.</p> Event Description Capture down Bubbles up Support Server <code>keyDown</code> Fired when the user presses a key on the keyboard. \u2705 \u2705 \u2705 <code>keyUp</code> Fired when the user releases a key on the keyboard. \u2705 \u2705 \u2705 Field Description Supported Event <code>keyCode</code> key code All <code>scanCode</code> sccan code All <code>modifiers</code> modifiers All <p>Usage</p> JavaKubeJS <pre><code>elem.setFocusable(true)\nelem.addEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    // request focus\n    elem.focus();\n});\nelem.addEventListener(UIEvents.KEY_DOWN, e -&gt; {\n    LDLib2.LOGGER.info(\"key {} pressed\", e.keyCode);\n});\n</code></pre> <pre><code>elem.setFocusable(true)\nelem.addEventListener(UIEvents.MOUSE_DOWN, e =&gt; {\n    // request focus\n    elem.focus();\n});\nelem.addEventListener(UIEvents.KEY_DOWN, e =&gt; {\n    console.log(`key ${e.keyCode} pressed`)\n});\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/event/#text-input-events","title":"Text Input Events","text":"<p>Text input events are used for character-level input, such as typing into text fields, which also dispatched to the element that currently has focus.</p> Event Description Capture down Bubbles up Support Server <code>charTyped</code> Fired when a character is input into an element. \u274c \u274c \u2705 Field Description Supported Event <code>codePoint</code> code point All <code>modifiers</code> modifiers All <p>Usage</p> JavaKubeJS <pre><code>elem.setFocusable(true)\nelem.addEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    // request focus\n    elem.focus();\n});\nelem.addEventListener(UIEvents.CHAR_TYPED, e -&gt; {\n    LDLib2.LOGGER.info(\"key {} pressed\", e.codePoint);\n});\n</code></pre> <pre><code>elem.setFocusable(true)\nelem.addEventListener(UIEvents.MOUSE_DOWN, e =&gt; {\n    // request focus\n    elem.focus();\n});\nelem.addEventListener(UIEvents.CHAR_TYPED, e =&gt; {\n    console.log(`key ${e.codePoint} pressed`)\n});\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/event/#hover-tooltip-events","title":"Hover Tooltip Events","text":"<p>Hover tooltip events are dispatched when dynamic tooltip information needs to be shown.</p> Event Description Capture down Bubbles up Support Server <code>hoverTooltips</code> Fired to provide hover tooltip content for an element. \u274c \u274c \u274c Field Description Supported Event <code>hoverTooltips</code> Set your hover tooltips to display All <p>TooltipComponent</p> <p> <code>hoverTooltips</code> allow you to append a <code>TooltipComponent</code> after text components. You could append a LDLib2 UI into the tooltip by using <code>ModularUITooltipComponent</code>.</p> <p>Usage</p> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.HOVER_TOOLTIPS, e -&gt; {\n    e.hoverTooltips = HoverTooltips.empty()\n        // add text tooltips\n        .append(Component.literal(\"Hello\"), Component.literal(\"World\"))\n        // add a image\n        .tooltipComponent(new ModularUITooltipComponent(new UIElement().layout(layout -&gt; {\n            layout.width(100).height(100);\n        }).style(style -&gt; style.background(SpriteTexture.of(\"ldlib2:textures/gui/icon.png\")))));\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.HOVER_TOOLTIPS, e =&gt; {\n    e.hoverTooltips = HoverTooltips.empty()\n        // add text tooltips\n        .append(\"Hello\", \"World\");\n        // add a image\n        .tooltipComponent(new ModularUITooltipComponent(new UIElement().layout(layout =&gt; {\n            layout.width(100).height(100);\n        }).style(style =&gt; style.background(SpriteTexture.of(\"ldlib2:textures/gui/icon.png\")))));\n});\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/event/#command-events","title":"Command Events","text":"<p>Command events are used to handle high-level UI commands (e.g. copy, paste, select all). They follow a validation \u2192 execution flow. To claim a command during <code>validateCommand</code>, call <code>UIEvent.stopPropagation()</code>.</p> Event Description Capture down Bubbles up Support Server <code>validateCommand</code> Fired to check whether an element can handle a command. \u274c \u274c \u274c <code>executeCommand</code> Fired when a command is executed on an element. \u274c \u274c \u274c Field Description Supported Event <code>keyCode</code> key code All <code>scanCode</code> sccan code All <code>modifiers</code> modifiers All <code>command</code> command All <p>Commands</p> Command Description <code>copy</code> ctrl + c <code>cut</code> ctrl + x <code>paste</code> ctrl + v <code>select-all</code> ctrl + a <code>undo</code> ctrl + z <code>redo</code> ctrl + y / ctrl + shift + z <code>find</code> ctrl + f <code>save</code> ctrl + s <p>Note</p> <p>If a command input is detected. A command event will be sent to the <code>focus</code> element first (if exists). If it doesn't be consumed, it will be sent to the UI tree elements until an element cconsumes it.</p> <p>Usage</p> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.VALIDATE_COMMAND, e -&gt; {\n    if (CommandEvents.COPY.equals(event.command)) {\n        // notify cosnuming\n        event.stopPropagation();\n    }\n});\n\nelem.addEventListener(UIEvents.EXECUTE_COMMAND, e -&gt; {\n    if (CommandEvents.COPY.equals(event.command)) {\n        ClipboardManager.copyDirect(\"data\");\n    }\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.VALIDATE_COMMAND, e =&gt; {\n    if (CommandEvents.COPY == event.command) {\n        // notify cosnuming\n        event.stopPropagation();\n    }\n});\n\nelem.addEventListener(UIEvents.EXECUTE_COMMAND, e =&gt; {\n    if (CommandEvents.COPY == event.command) {\n        ClipboardManager.copyDirect(\"data\");\n    }\n});\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/event/#layout-events","title":"Layout Events","text":"<p>Layout events are dispatched when the layout state of an element changes.</p> Event Description Capture down Bubbles up Support Server <code>layoutChanged</code> Fired when the yoga layout of an element changes. \u274c \u274c \u274c <p>Usage</p> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.LAYOUT_CHANGED, e -&gt; {\n    LDLib2.LOGGER.info(\"{} layout changed\", e.target)\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.LAYOUT_CHANGED, e =&gt; {\n    console.log(`${e.target} layout changed`)\n});\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/event/#lifecycle-events","title":"Lifecycle Events","text":"<p>Lifecycle events describe changes to an element\u2019s presence in the UI tree.</p> Event Description Capture down Bubbles up Support Server <code>added</code> Fired when the element is added to the UI tree. \u274c \u274c \u274c <code>removed</code> Fired when the element is removed from the UI tree. \u274c \u274c \u274c <code>muiChanged</code> Fired when the element\u2019s <code>ModularUI</code> instance changes. \u274c \u274c \u274c <p>Note</p> <p><code>removed</code> will be sent not only the element removing but also UI closing. You could use this event to disponse resource.</p> <p>Usage</p> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.REMOVED, e -&gt; {\n    // release resource here for safe\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.REMOVED, e =&gt; {\n    // release resource here for safe\n});\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/event/#tick-event","title":"Tick Event","text":"<p>The tick event is dispatched once per game tick while the element is active and visible.</p> Event Description Capture down Bubbles up Support Server <code>tick</code> Fired every tick when the element is active and displayed. \u274c \u274c \u2705 <p>Note</p> <ul> <li><code>tick</code> is not sent to the server automatically.</li> <li>You may still listen to it on the server side if needed.</li> </ul> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.TICK, e -&gt; {\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.TICK, e =&gt; {\n});\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/layout/","title":"Layout","text":""},{"location":"en/ldlib2/ui/preliminary/layout/#layout","title":"Layout","text":"<p> Since 2.1.0 </p> <p>Info</p> <p>Grid layout support will be introduced into Yoga in the future.</p> <p>LDLib2 UI layout is built on top of the Yoga layout engine.</p> <p>Yoga is an embeddable layout system used in popular UI frameworks such as React Native. It is not a UI framework and does not perform any rendering. Its sole responsibility is calculating the size and position of elements.</p> <p>LDLib2 adopts a FlexBox-based layout model, which allows you to describe complex UI structures in a flexible and predictable way.</p>"},{"location":"en/ldlib2/ui/preliminary/layout/#setting-layout-properties","title":"Setting Layout Properties","text":"<p>Each <code>UIElement</code> owns a layout object backed by Yoga. You can configure layout properties in multiple ways, depending on your preference and use case.</p> <p>In addition to the examples below, layout properties can also be defined through LSS (LDLib Style Sheet), which is especially useful for separating layout logic from UI structure.</p> JavaKubeJS <pre><code>var element = new UIElement();\n\n// Set layout directly\nelement.getLayout()\n        .flexDirection(YogaFlexDirection.ROW)\n        .width(150)\n        .heightPercent(100)\n        .marginAll(10)\n        .paddingAll(10);\n\n// Set layout using a chaining lambda\nelement.layout(layout -&gt; layout\n        .flexDirection(YogaFlexDirection.ROW)\n        .width(150)\n        .heightPercent(100)\n        .marginAll(10)\n        .paddingAll(10)\n);\n\n// Set layout via stylesheet (LSS)\nelement.lss(\"flex-direction\", \"row\");\nelement.lss(\"width\", 150);\nelement.lss(\"height-percent\", 100);\nelement.lss(\"margin-all\", 10);\nelement.lss(\"padding-all\", 10);\n</code></pre> <pre><code>let element = new UIElement();\n\n// Set layout directly\nelement.getLayout()\n        .flexDirection(YogaFlexDirection.ROW)\n        .width(150)\n        .heightPercent(100)\n        .marginAll(10)\n        .paddingAll(10);\n\n// Set layout using a chaining lambda\nelement.layout(layout -&gt; layout\n        .flexDirection(YogaFlexDirection.ROW)\n        .width(150)\n        .heightPercent(100)\n        .marginAll(10)\n        .paddingAll(10)\n);\n\n// Set layout via stylesheet (LSS)\nelement.lss(\"flex-direction\", \"row\");\nelement.lss(\"width\", 150);\nelement.lss(\"height-percent\", 100);\nelement.lss(\"margin-all\", 10);\nelement.lss(\"padding-all\", 10);\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/layout/#learning-flex-layout","title":"Learning Flex Layout","text":"<p>Info</p> <p>If you are already familiar with Flexbox, Yoga layout should feel very intuitive. If not, we recommend reading the official Yoga documentation for a complete explanation.</p> <p>For a lighter introduction, this chapter focuses on the most commonly used Flex concepts in LDLib2 UI.</p>"},{"location":"en/ldlib2/ui/preliminary/layout/#ui-elements-and-hierarchy","title":"UI Elements and Hierarchy","text":"<p>In LDLib2 UI, the interface is composed of UI elements (<code>UIElement</code>).</p> <ul> <li>A UI element represents a visual container such as a panel, button, text field, or image.</li> <li>UI elements can contain other UI elements, forming a UI hierarchy (also referred to as a layout tree).</li> </ul> <p>Complex interfaces are built by combining multiple UI elements into nested hierarchies, with layout and styling rules applied at different levels.</p> <pre><code>flowchart LR\n  R([UIElement])\n\n  R --- A([UIElement])\n  A --- A1([Label])\n  A --- A2([Toggle])\n  A --- A3([Slider])\n\n  R --- B([UIElement])\n  B --- B1([Label])\n  B --- B2([Toggle])\n\n  linkStyle 0,1,2,3,4,5,6 stroke:#9aa3ab,stroke-width:2px,stroke-dasharray:6 4;</code></pre>"},{"location":"en/ldlib2/ui/preliminary/layout/#positioning-ui-elements","title":"Positioning UI Elements","text":"<p>When designing a UI layout, think of each screen as a collection of rectangular containers arranged horizontally or vertically.</p> <p>Break down the layout into logical sections, then refine each section using child containers to organize content.</p>"},{"location":"en/ldlib2/ui/preliminary/layout/#positioning-modes","title":"Positioning Modes","text":"<p>Yoga supports two primary positioning modes:</p>"},{"location":"en/ldlib2/ui/preliminary/layout/#relative-positioning-default","title":"Relative positioning (default)","text":"<p>Elements participate in the Flexbox layout of their parent container.</p> <ul> <li>Child elements are arranged according to the parent\u2019s Flex Direction</li> <li>Element size and position respond dynamically to:<ul> <li>Parent layout rules (padding, alignment, spacing)</li> <li>The element\u2019s own size constraints (width, height, min/max size)</li> </ul> </li> </ul> <p>If layout constraints conflict, the layout engine resolves them automatically. For example, an element wider than its container may overflow.</p>"},{"location":"en/ldlib2/ui/preliminary/layout/#absolute-positioning","title":"Absolute positioning","text":"<p>Elements are positioned relative to their parent container, but do not participate in Flexbox layout calculations.</p> <ul> <li>Flex properties such as Grow, Shrink, or alignment are ignored</li> <li>Elements may overlap other content</li> <li>Position is controlled using offsets such as <code>Top</code>, <code>Right</code>, <code>Bottom</code>, and <code>Left</code></li> </ul> On the top, the blue ui element has a Relative position, with the parent element using Flex Direction: Row as the Flex setting. On the bottom, the blue ui element uses Absolute position and ignores the parent element\u2019s Flexbox rules."},{"location":"en/ldlib2/ui/preliminary/layout/#size-settings","title":"Size Settings","text":"<p>UI elements are containers by default.</p> <ul> <li>Without explicit size rules, an element may expand to fill available space or collapse to the size of its content</li> <li><code>Width</code> and <code>Height</code> define the element\u2019s base size</li> <li><code>Min</code> and <code>Max</code> values limit how much an element can grow or shrink</li> <li>if you set an <code>Aspect Rate</code>, one dimension will be decided by the other one</li> <li><code>Overflow</code> controls the clipping of an element\u2019s content. The default value is <code>visible</code>, which means the element\u2019s content isn\u2019t clipped to the element\u2019s bounds. If you set overflow to hidden, the element\u2019s content is clipped to the element\u2019s content bounds.</li> <li>Sizes can be expressed in pixels or percentages</li> </ul> <p>These size rules interact with Flexbox settings to determine the final layout.</p> Size settings for a UI element."},{"location":"en/ldlib2/ui/preliminary/layout/#flex-settings","title":"Flex Settings","text":"<p>Flex settings affect how elements grow or shrink when using Relative positioning. It\u2019s recommended that you experiment with elements to understand their behavior firsthand.</p>"},{"location":"en/ldlib2/ui/preliminary/layout/#flex-basis","title":"Flex Basis","text":"<p>Defines the initial size of an element before Grow or Shrink is applied.</p>"},{"location":"en/ldlib2/ui/preliminary/layout/#flex-grow","title":"Flex Grow","text":"<ul> <li><code>Flex Grow &gt; 0</code> allows the element to expand and take available space</li> <li>Higher values receive a larger share of free space</li> <li><code>Flex Grow = 0</code> prevents expansion beyond the base size</li> </ul>"},{"location":"en/ldlib2/ui/preliminary/layout/#flex-shrink","title":"Flex Shrink","text":"<ul> <li><code>Flex Shrink &gt; 0</code> allows the element to shrink when space is limited</li> <li><code>Flex Shrink = 0</code> prevents shrinking and may cause overflow</li> </ul> <p>Elements with fixed pixel sizes do not respond to Grow or Shrink.</p> Basis, Grow, and Shrink settings. <p>The above example shows how Basis works with the Grow and Shrink options:</p> <ol> <li>The green element with a Basis of 80% occupies 80 percent of the available space.</li> <li>Setting the Grow to 1 allows the green element to expand to the entire space.</li> <li>With a yellow element added, the elements overflow the space. The green element returns to occupying 80 percent of the space.</li> <li>A Shrink setting of 1 makes the green element shrink to fit the yellow element.</li> </ol> <p>Here, both elements have a Shrink value of 1. They shrink equally to fit in the available space.</p>"},{"location":"en/ldlib2/ui/preliminary/layout/#flex","title":"Flex","text":"<p><code>Flex = 1</code> equals to <code>Flex Grow = 1</code> and <code>Flex Shrink = 1</code>, which is used to set <code>Flex Grow</code> and <code>Flex Shrink</code> at the same time.</p>      In this example, we assume the root container <code>width: 200px</code>.      The right most element set <code>width: 50%</code>. Therefore, the left space is 100px for the left most and middle elements. According to the <code>flex</code> of them, they divided the remaining space in a <code>2:1</code> ratio."},{"location":"en/ldlib2/ui/preliminary/layout/#how-element-size-is-calculated","title":"\ud83d\udca1 How element size is calculated","text":"<p>When using Relative positioning, the layout engine determines element size in this order:</p> <ol> <li>Compute base size from <code>Width</code> and <code>Height</code></li> <li>Check whether the parent container has extra space or overflow</li> <li>Distribute extra space using <code>Flex Grow</code></li> <li>Reduce size using <code>Flex Shrink</code> if space is insufficient</li> <li>Apply constraints such as <code>Min/Max</code> size and <code>Flex Basis</code></li> <li>Apply the final resolved size</li> </ol>"},{"location":"en/ldlib2/ui/preliminary/layout/#flex-direction-and-flex-wrapping","title":"Flex Direction and Flex Wrapping","text":"<ul> <li><code>Flex Direction</code> controls whether child elements are laid out in rows or columns</li> <li><code>Flex Wrap</code> controls whether elements stay on a single line or wrap onto additional rows or columns</li> </ul> <p>Child elements follow the order defined in the UI hierarchy.</p>      Parent and child UI element using Relative positioning and different Direction and Wrap combinations."},{"location":"en/ldlib2/ui/preliminary/layout/#alignment","title":"Alignment","text":"<p>Alignment settings control how child elements are positioned within a container.</p>"},{"location":"en/ldlib2/ui/preliminary/layout/#align-items","title":"Align Items","text":"<p>Aligns elements along the cross-axis (perpendicular to the Flex Direction):</p>"},{"location":"en/ldlib2/ui/preliminary/layout/#justify-content","title":"Justify Content","text":"<p>Controls spacing along the main axis:</p> <p>Flex Grow and Shrink values influence how space is distributed.</p>"},{"location":"en/ldlib2/ui/preliminary/layout/#align-self","title":"Align Self","text":"<p>Allows an individual element to override the parent\u2019s alignment rules.</p>"},{"location":"en/ldlib2/ui/preliminary/layout/#align-content","title":"Align Content","text":"<p>Controls how multiple rows or columns of flex items are aligned along the cross axis.</p> <p>Note</p> <p><code>Align Content</code> only takes effect when:</p> <ul> <li>The container allows wrapping (<code>flex-wrap: wrap</code>)</li> <li>There are multiple lines of children</li> </ul>      Align and Justify settings applied to a parent element with a Direction set to Row; note that other position and sizing options can affect the final output."},{"location":"en/ldlib2/ui/preliminary/layout/#margin-and-padding","title":"Margin and Padding","text":"<p>LDLib2 UI follows a box model similar to CSS:</p> <ul> <li>Content: the element\u2019s actual content</li> <li>Padding: space between content and border</li> <li>Border: optional boundary around the element, (avoid use it).</li> <li>Margin: space outside the element, separating it from others</li> </ul>      A UI element with defined Size, Margin, Border, and Padding settings; elements with a fixed Width or Height can overflow the space."},{"location":"en/ldlib2/ui/preliminary/modularui/","title":"ModularUI","text":""},{"location":"en/ldlib2/ui/preliminary/modularui/#modularui","title":"ModularUI","text":"<p> Since 2.1.0 </p> <p>This page introduces the core concepts of the LDLib2 UI system. At runtime, LDLib2 uses a class called <code>ModularUI</code> to manage the entire UI tree. <code>ModularUI</code> is responsible for:</p> <ul> <li>Managing the UI lifecycle</li> <li>Handling input events</li> <li>Applying styles and stylesheets</li> <li>Coordinating rendering</li> <li>Synchronizing data between client and server (when used with Menus)</li> </ul> <p>In short, <code>ModularUI</code> is the central controller of a UI instance.</p>"},{"location":"en/ldlib2/ui/preliminary/modularui/#how-modularui-works","title":"How <code>ModularUI</code> Works","text":"<p>The following diagram shows how <code>ModularUI</code> connects Minecraft systems with the UI tree: </p><pre><code>flowchart LR\n    Screen[\"Screen&lt;br/&gt;(Mouse / Keyboard Input)\"]\n    Menu[\"Menu&lt;br/&gt;(Server Data)\"]\n\n    %% internal structure\n    subgraph ModularUI[\"ModularUI\"]\n        direction TB\n        UITree[\"UI Tree\"]\n        Style[\"Style Engine&lt;br/&gt;(LSS / Stylesheets)\"]\n        Events[\"Event System&lt;br/&gt;(Dispatch / Bubble)\"]\n        Render[\"Renderer&lt;br/&gt;(Draw Commands)\"]\n        Bindings[\"Data Binding&lt;br/&gt;(C&lt;--&gt;S)\"]\n\n        UITree &lt;--&gt; Style\n        UITree &lt;--&gt; Events\n        UITree &lt;--&gt; Render\n        UITree &lt;--&gt; Bindings\n    end\n\n    %% external connections\n    Screen --&gt;|Input Events| ModularUI\n    Menu --&gt;|Data Sync| ModularUI\n    ModularUI --&gt;|Render Output| Screen\n    ModularUI --&gt;|Data Sync / RPC Event| Menu</code></pre><p></p>"},{"location":"en/ldlib2/ui/preliminary/modularui/#modularui-apis","title":"<code>ModularUI</code> APIs","text":"<p>There are two methods to create a <code>ModualrUI</code>:</p> <ul> <li><code>ModularUI.of(ui)</code></li> <li><code>ModularUI.of(ui, player)</code></li> </ul> <p>To create a simple <code>client-side</code> only UI, the first one is enough.</p> <p>The second one requires a <code>Player</code> as input, which is NECESSARY if your UI is a <code>menu-based</code> UI and requires data synchronization between client and server. </p>"},{"location":"en/ldlib2/ui/preliminary/modularui/#general-apis","title":"General APIs","text":"Method Description <code>shouldCloseOnEsc()</code> Whether the UI should close when pressing <code>ESC</code>. <code>shouldCloseOnKeyInventory()</code> Whether the UI should close when pressing the Inventory key (default: <code>E</code>). <code>getTickCounter()</code> Returns how many ticks this <code>ModularUI</code> instance has been active. <code>getWidget()</code> Returns the widget instance used by the Minecraft <code>Screen</code>. <code>getAllElements()</code> Returns an unmodifiable list of all UI elements in the UI tree."},{"location":"en/ldlib2/ui/preliminary/modularui/#element-query-apis-by-id","title":"Element Query APIs (By ID)","text":"Method Description <code>getElementById(String id)</code> Finds and returns the first UI element with the given ID, or <code>null</code> if not found. <code>getElementsById(String id)</code> Returns all UI elements with the given ID. <code>hasElementWithId(String id)</code> Checks whether at least one element with the given ID exists. <code>getElementCountById(String id)</code> Returns the number of elements with the given ID. <code>getAllElementsById()</code> Returns a copy of the internal mapping from ID to UI elements."},{"location":"en/ldlib2/ui/preliminary/modularui/#element-query-apis-regex-pattern","title":"Element Query APIs (Regex &amp; Pattern)","text":"Method Description <code>getElementByIdRegex(String pattern)</code> Finds the first element whose ID matches the given regex pattern. <code>getElementsByIdRegex(String pattern)</code> Finds all elements whose IDs match the given regex pattern. <code>getElementByIdPattern(Pattern pattern)</code> Same as above, but uses a precompiled <code>Pattern</code> for better performance. <code>getElementsByIdPattern(Pattern pattern)</code> Returns all elements matching a precompiled regex pattern."},{"location":"en/ldlib2/ui/preliminary/modularui/#element-query-apis-partial-matching","title":"Element Query APIs (Partial Matching)","text":"Method Description <code>getElementsByIdContains(String substring)</code> Finds all elements whose IDs contain the given substring. <code>getElementsByIdStartsWith(String prefix)</code> Finds all elements whose IDs start with the given prefix. <code>getElementsByIdEndsWith(String suffix)</code> Finds all elements whose IDs end with the given suffix."},{"location":"en/ldlib2/ui/preliminary/modularui/#element-query-apis-by-type","title":"Element Query APIs (By Type)","text":"Method Description <code>getElementsByType(Class&lt;T&gt; type)</code> Returns all UI elements of the given type. <code>getAllElementsByType()</code> Returns a copy of the internal mapping from element type to UI elements. <p>Note</p> <p>All query methods return copies of internal collections when applicable. Returned lists are safe to modify and will not affect the internal UI tree.</p>"},{"location":"en/ldlib2/ui/preliminary/modularui/#debug-your-ui","title":"Debug your UI","text":"<p>During development, the UI tree may not always behave as expected, and it can be difficult to understand what is going wrong.</p> <p>You can press <code>F3</code> to enable UI debug mode. When debug mode is active, LDLib2 displays helpful information directly on the screen.</p>"},{"location":"en/ldlib2/ui/preliminary/screen_and_menu/","title":"Screen and Menu","text":""},{"location":"en/ldlib2/ui/preliminary/screen_and_menu/#screen-and-menu","title":"Screen and Menu","text":""},{"location":"en/ldlib2/ui/preliminary/stylesheet/","title":"StyleSheet","text":""},{"location":"en/ldlib2/ui/preliminary/stylesheet/#stylesheet","title":"StyleSheet","text":"<p>You can style your UI with a <code>LDLib Style Sheet</code> (LSS). LSS files are text files inspired by CSS from HTML. USS syntax is the same as CSS syntax, but USS includes overrides and customizations to work better with LDLib2 UI.</p> <p>LSS allows you to separate presentation from logic, making UI code cleaner and easier to maintain.</p>"},{"location":"en/ldlib2/ui/preliminary/stylesheet/#what-is-a-style-in-ldlib2","title":"What Is a Style in LDLib2","text":"<p>Before introducing LSS itself, it is important to understand what a Style means in LDLib2 and how styles work internally.</p> <p>If you are familiar with CSS, these concepts should feel natural.</p> <p>A Style in LDLib2 refers to any visual or layout-related configuration that affects how a UI element is rendered, and is not related to server-side logic. Examples include:</p> <ul> <li><code>layout</code> (size, position, flex behavior)</li> <li><code>background</code></li> <li><code>font-size</code>, <code>alignment</code>, and more</li> </ul> <p>In fact, the <code>layout</code> system you already know is itself a type of Style.</p> <p>Each <code>UIElement</code> may define multiple styles, and a single style property can have multiple candidate values coming from different sources.</p> <p>Internally, every UI element maintains a StyleBag, which:</p> <ul> <li>Stores all style values applied to the element</li> <li>Resolves conflicts between styles</li> <li>Computes the final effective style used for rendering</li> </ul> <p>The final style is determined by priority, not by application order.</p>"},{"location":"en/ldlib2/ui/preliminary/stylesheet/#style-origin-and-priority","title":"Style Origin and Priority","text":"<p>Every style value has a StyleOrigin, which defines where the style comes from and how strong it is.</p> StyleOrigin <pre><code>public enum StyleOrigin {\n    /**\n     * Default style defined by the UI component itself\n     */\n    DEFAULT(0),\n\n    /**\n     * Style defined in an external stylesheet (LSS)\n     */\n    STYLESHEET(2),\n\n    /**\n     * Inline style set directly in code\n     */\n    INLINE(3),\n\n    /**\n     * Style applied by animations\n     */\n    ANIMATION(4),\n\n    /**\n     * Important style that overrides all others\n     */\n    IMPORTANT(5);\n}\n</code></pre> <p>Styles with a higher priority override styles with a lower priority:</p> <p><code>DEFAULT</code> &lt; <code>STYLESHEET</code> &lt; <code>INLINE</code> &lt; <code>ANIMATION</code> &lt; <code>IMPORTANT</code></p> <p>This design ensures that:</p> <ul> <li>Components have sensible defaults</li> <li>Stylesheets define the global look</li> <li>Inline styles can override stylesheets</li> <li>Animations can temporarily override visuals</li> <li><code>IMPORTANT</code> styles always win</li> </ul>"},{"location":"en/ldlib2/ui/preliminary/stylesheet/#customizable-styles","title":"Customizable Styles","text":"<p>LDLib2 provides multiple ways to customize UI styles. You can freely mix these approaches depending on your needs.</p> <p>Note</p> <p>In this page, we won't introduce all supported styles and their behaviour. Each UI component documents the styles it supports on its own wiki page.</p> <p>Each UI component exposes the <code>Style</code> objects it supports, allowing you to configure styles directly through code.</p> <p>For example, in <code>layout</code>, both <code>#layout(...)</code> and <code>#getLayout()</code> are based on the same underlying <code>Style</code> system. <code>layout</code> is a shared style available on all UI Elements.</p> <p>In addition, some components provide their own specialized styles. For instance, <code>Button</code> exposes a <code>buttonStyle(...)</code> API for configuring button-specific visual properties.</p>"},{"location":"en/ldlib2/ui/preliminary/stylesheet/#customizing-styles-via-code","title":"Customizing Styles via Code","text":"<p>There are many methods to set styles.</p> JavaKubeJS <pre><code>var button = new Button();\n\n// direct call\nbutton.getStyle()\n    // set background texture\n    .background(SpriteTexture.of(\"photon:textures/icon.png\"));\n    // set tooltips\n    .tooltips(\"This is my tooltips\")\n    // set opacity\n    .opacity(0.5);\n\n// chain call, return button itself for chain calls\nbutton.buttonStyle(style -&gt; {}).style(style -&gt; style\n    .background(SpriteTexture.of(\"photon:textures/icon.png\"));\n    .tooltips(\"This is my tooltips\")\n    .opacity(0.5)\n);\n\n// lss text\nbutton.lss(\"background\", \"sprite(ldlib2:textures/gui/icon.png)\");\nbutton.lss(\"tooltips\", \"This is my tooltips\");\nbutton.lss(\"opacity\", 0.5);\n</code></pre> <pre><code>let button = new Button();\n\n// direct call\nbutton.getStyle()\n    // set background texture\n    .background(SpriteTexture.of(\"photon:textures/icon.png\"));\n    // set tooltips\n    .tooltips(\"This is my tooltips\")\n    // set opacity\n    .opacity(0.5);\n\n // chain call, return button itself for chain calls\nbutton.buttonStyle(style =&gt; {}).style(style =&gt; style\n    .background(SpriteTexture.of(\"photon:textures/icon.png\"));\n    .tooltips(\"This is my tooltips\")\n    .opacity(0.5)\n);\n\n// lss text\nbutton.lss(\"background\", \"sprite(ldlib2:textures/gui/icon.png)\");\nbutton.lss(\"tooltips\", \"This is my tooltips\");\nbutton.lss(\"opacity\", 0.5);\n</code></pre> <p>All of the methods above can be used to set styles, but they are not equivalent.</p> <ul> <li>Using <code>getStyle()</code> or <code>style(...)</code> sets styles with the <code>INLINE</code> origin by default.</li> <li>Using <code>lss(...)</code> sets styles with the <code>STYLESHEET</code> origin by default.</li> </ul> <p>If you want to assign styles using these APIs with a different <code>StyleOrigin</code>, you can explicitly specify the origin when applying the style, as shown below:</p> JavaKubeJS <pre><code>Style.pipeline(StyleOrigin.IMPORTANT, button.getStyle(), style -&gt; style\n    .tooltips(\"This is my tooltips\")\n);\n\n// lss text\nbutton.lss(\"tooltips\", \"This is my tooltips\", StyleOrigin.DEFAULT);\n</code></pre> <pre><code>Style.pipeline(\"IMPORTANT\", button.getStyle(), style =&gt; style\n    .tooltips(\"This is my tooltips\")\n);\n\n// lss text\nbutton.lss(\"tooltips\", \"This is my tooltips\", \"DEFAULT\");\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/stylesheet/#customizing-styles-via-stylesheet","title":"Customizing Styles via stylesheet","text":"<p>Although styling UI elements directly in code is convenient, it quickly becomes tedious and repetitive when your project involves a large amount of UI design.</p> <p>In particular:</p> <ul> <li>Applying the same styles to many UI elements requires repeated code.</li> <li>Updating a shared style (for example, changing a background texture) may require modifying every related UI element manually.</li> </ul> <p>More importantly, if you want your UI styles to be customizable by players\u2014for example, allowing styles to be overridden via resource packs\u2014managing styles purely in code becomes impractical.</p> <p>Using stylesheets (LSS) allows you to:</p> <ul> <li>Centralize and reuse styles across multiple UI elements.</li> <li>Modify the appearance of the entire UI from a single place.</li> <li>Expose UI styling to resource packs for easy customization.</li> </ul> <p>For these reasons, stylesheets are the recommended way to manage and unify UI styles for big project.</p>"},{"location":"en/ldlib2/ui/preliminary/stylesheet/#syntax","title":"Syntax","text":"<p>If you are familiar with CSS, you will be very familiar with the syntax of LSS.</p> <p>A LSS consists of the following:</p> <ul> <li>Style rules that include a <code>selector</code> and a <code>declaration block</code>.</li> <li>Selectors that identify which ui element the style rule affects.</li> <li>A declaration block, inside curly braces, that has one or more style declarations. Each style declaration has a property and a value. Each style declaration ends with a semi-colon.</li> </ul> <p>Style matching with rules</p> <p>The following is the general syntax of a style rule:</p> <pre><code>selector {\n    property1: value;\n    property2: value;\n}\n</code></pre> <p>When you define a stylesheet, you can apply it to the ui tree. Selectors match against elements to resolve which properties apply from the LSS. If a selector matches an element, the style declarations apply to the element.</p> <p>For example, the following rule matches any <code>Button</code> object: </p><pre><code>button {\n  base-background: built-in(ui-mc:RECT_BORDER);\n  hover-background: built-in(ui-mc:RECT_3);\n  pressed-background: built-in(ui-mc:RECT_3) color(#dddddd);\n  padding-all: 3;\n  height: 16;\n}\n</code></pre><p></p> <p>Supported selector types LSS supports several types of simple and complex selectors that match elements based on different criteria, such as the following:</p> <ul> <li>Component type name</li> <li>An assigned <code>id</code></li> <li>A list of LSS <code>classes</code></li> <li>The element\u2019s position in the ui tree and its relationship to other elements</li> </ul> <p>If an element matches more than one selector, LSS applies the styles from whichever selector takes precedence.</p> <p>LSS supports a set of simple selectors that are analogous, but not identical, to simple selectors in CSS. The following table provides a quick reference of LSS simple selectors.</p> Selector type Syntax Matches Component selector <code>type {...}</code> Elements of a specific component type.  (e.g. <code>button</code>, <code>text-field</code>, <code>toogle</code>) Class selector <code>.class {...}</code> Elements with an assigned LSS class.  (e.g. <code>.__focused__</code>) ID selector <code>#root {...}</code> Elements with an assigned <code>id</code>.  (e.g. <code>#root</code>) Universal selector <code>* {...}</code> Any elements. <p>LSS supports a subset of CSS complex selectors. The following table provides a quick reference of LSS complex selectors.</p> Selector type Syntax Matches Not selector <code>:not(selector) {...}</code> Elements that not match the selector. Host selector <code>selector:host {...}</code> Elements that must be the <code>host</code>. Internal selector <code>selector:internal {...}</code> Elements that must be the <code>internal</code>. Descendant selector <code>selector1 selector2 {...}</code> Elements that are the descendant of another element in the ui tree. Child selector <code>selector1 &gt; selector2 {...}</code> Elements that are the children of another element in the ui tree. Multiple selector <code>selector1, selector2 {...}</code> Elements that match all the simple selectors. <p><code>Host</code> and <code>Internal</code> Element</p> <p>A UI tree can contain both host elements and internal elements.</p> <p>Using <code>button</code> as an example:</p> <ul> <li>The <code>button</code> itself is a host element. It is a component that you create and interact with directly.</li> <li>Internally, a <code>button</code> contains other UI elements, such as a <code>text</code> used to render its label.</li> </ul> <p></p> <p>These internal elements are part of the component\u2019s implementation and are called internal elements, which cannot be removed from the UI tree and diplayed in gray.</p> <p>You normally don\u2019t need to create or manage them manually, but they still exist in the UI tree and can participate in layout, styling, and event propagation.</p> <p>This distinction allows LDLib2 components to be both composable and customizable, while keeping their internal structure encapsulated.</p> supported characters <ul> <li>Must begin with a letter (<code>A\u2013Z</code> or <code>a\u2013z</code>) or an underscore (<code>_</code>).</li> <li>Can contain letters, digits (<code>0\u20139</code>), hyphens (<code>-</code>), and underscores (<code>_</code>).</li> <li>Selectors are case-sensitive. For example, myClass and MyClass are different.</li> <li>Selectors can\u2019t start with a digit or a hyphen followed by a digit (for example, <code>.1class</code> or <code>.-1class</code>).</li> </ul> <p>Quiz</p> <p>What kind of elements will be selected here? </p><pre><code>button:host :not(.my_label#my_id &gt; text:internal) &gt; .my_class:host, text-field {\n    // ...\n}\n</code></pre><p></p> Answer <ol> <li> <p>All <code>text-field</code> elements, regardless of their position in the UI tree.</p> </li> <li> <p>Host elements with the class <code>my_class</code>, with the following constraints:</p> <ul> <li>The element must be a host element.</li> <li>Its direct parent must not be an internal <code>text</code> element whose parent is an element with <code>my_label</code> class and with the ID <code>my_id</code>.</li> <li>The element must have a host <code>button</code> ancestor somewhere above it in the UI tree.</li> </ul> </li> </ol>"},{"location":"en/ldlib2/ui/preliminary/stylesheet/#apply-stylesheet","title":"Apply stylesheet","text":"<p>To apply your stylesheets, you can append them during <code>UI</code> creation.</p> JavaKubeJS <pre><code>private static ModularUI createModularUI() {\n    // set root with an ID\n    var root = new UIElement().setId(\"root\");\n    root.addChildren(\n            new Label().setText(\"LSS example\"),\n            new Button().setText(\"Click Me!\"),\n            // set the element with a class\n            new UIElement().addClass(\"image\")\n    );\n    var lss = \"\"\"\n        // id selector\n        #root {\n            background: built-in(ui-gdp:BORDER);\n            padding-all: 7;\n            gap-all: 5;\n        }\n\n        // class selector\n        .image {\n            width: 80;\n            height: 80;\n            background: sprite(ldlib2:textures/gui/icon.png);\n        }\n\n        // element selector\n        #root label {\n            horizontal-align: center;\n        }\n        \"\"\";\n    var stylesheet = Stylesheet.parse(lss);\n    // add stylesheets to ui\n    var ui = UI.of(root, stylesheet);\n    return ModularUI.of(ui);\n}\n</code></pre> <pre><code>function createModularUI() {\n    // set root with an ID\n    let root = new UIElement().setId(\"root\");\n    root.addChildren(\n            new Label().setText(\"LSS example\"),\n            new Button().setText(\"Click Me!\"),\n            // set the element with a class\n            new UIElement().addClass(\"image\")\n    );\n    let lss = `\n        // id selector\n        #root {\n            background: built-in(ui-gdp:BORDER);\n            padding-all: 7;\n            gap-all: 5;\n        }\n\n        // class selector\n        .image {\n            width: 80;\n            height: 80;\n            background: sprite(ldlib2:textures/gui/icon.png);\n        }\n\n        // element selector\n        #root label {\n            horizontal-align: center;\n        }\n    `;\n    let stylesheet = Stylesheet.parse(lss);\n    // add stylesheets to ui\n    let ui = UI.of(root, stylesheet);\n    return ModularUI.of(ui);\n}\n</code></pre> <p>You could also modify stylesheets at runtime.</p> JavaKubeJS <pre><code>var mui = elem.getModularUI();\nif (mui != null) {\n    mui.getStyleEngine().addStylesheet(stylesheet);\n}\n</code></pre> <pre><code>let mui = elem.getModularUI();\nif (mui != null) {\n    mui.getStyleEngine().addStylesheet(stylesheet);\n}\n</code></pre>"},{"location":"en/ldlib2/ui/preliminary/stylesheet/#builtin-stylesheets","title":"Builtin Stylesheets","text":"<p>LDLib2 provides three builtin stylesheets <code>gdp</code>, <code>mc</code>, and <code>modern</code>, allows you to  switch themes flexibly. <code>gdp</code> is the default stylesheet while using LDLib2 components.</p> <p>You can use <code>StylesheetManager</code> to access all registered stylesheets.</p> JavaKubeJS <pre><code>private static ModularUI createModularUI() {\n    // ...\n    var stylesheet = StylesheetManager.INSTANCE.getStylesheetSafe(StylesheetManager.MC)\n    return ModularUI.of(UI.of(root, stylesheet));\n}\n</code></pre> <pre><code>function createModularUI() {\n    // ...\n    let stylesheet = StylesheetManager.INSTANCE.getStylesheetSafe(StylesheetManager.MC)\n    return ModularUI.of(UI.of(root, stylesheet));\n}\n</code></pre> <p>All three builtin stylesheets as below:</p>      GDP           MC           MODERN"},{"location":"en/ldlib2/ui/preliminary/stylesheet/#stylesheets-from-resourcepack","title":"Stylesheets from resourcepack","text":"<p>Note</p> <p></p> <p>Don't foget <code>F3 + T</code> to reload resource after modification at runtime.</p> <p>In practice, stylesheets can be added or overridden via resource packs. By placing your <code>LSS</code> files in the designated path, <code>StylesheetManager</code> will automatically discover and register them at runtime while reload resources.</p> <p>You should place your stylesheets under the path of <code>.assets/&lt;namespace&gt;/lss/&lt;name&gt;.lss</code>.</p> <p>After register, you are able to access them by using <code>StylesheetManager</code>.</p> JavaKubeJS <pre><code>// replace &lt;namespace&gt; and &lt;name&gt; with your own.\nStylesheetManager.INSTANCE.getStylesheetSafe(\n    ResourceLocation.parse(\"&lt;namespace&gt;:lss/&lt;name&gt;.lss\")\n);\n</code></pre> <pre><code>// replace &lt;namespace&gt; and &lt;name&gt; with your own.\nStylesheetManager.INSTANCE.getStylesheetSafe(\n    \"&lt;namespace&gt;:lss/&lt;name&gt;.lss\"\n);\n</code></pre>"},{"location":"en/ldlib2/ui/textures/","title":"IGuiTexture","text":""},{"location":"en/ldlib2/ui/textures/#iguitexture","title":"IGuiTexture","text":""},{"location":"en/ldlib2/ui/textures/lss/","title":"Texture in LSS","text":""},{"location":"en/ldlib2/ui/textures/lss/#texture-in-lss","title":"Texture in LSS","text":"<p> Since 2.1.4 </p> <p>In LDLib2, many visual styles (such as <code>background</code>) accept a texture value. Texture values in LSS are string-based expressions that describe how a texture is created and optionally transformed.</p> <p>This system is flexible and composable, allowing you to build complex visuals using a concise syntax.</p>"},{"location":"en/ldlib2/ui/textures/lss/#supported-texture-types","title":"Supported Texture Types","text":""},{"location":"en/ldlib2/ui/textures/lss/#empty-texture","title":"Empty Texture","text":"<pre><code>background: empty;\n</code></pre> <p>or an empty string:</p> <pre><code>background: ;\n</code></pre> <p>This results in no texture being rendered.</p>"},{"location":"en/ldlib2/ui/textures/lss/#solid-color","title":"Solid Color","text":"<p>If the value can be parsed as a color, it will be treated as a color rectangle:</p> <pre><code>background: #1F00FFFF; /* #AARRGGBB */\nbackground: #FF00FF; //* #RRGGBB */\nbackground: #FFF; /* #RGB */\nbackground: rgba(255, 0, 0, 128);\nbackground: rgb(255, 123, 0);\n</code></pre>"},{"location":"en/ldlib2/ui/textures/lss/#sprite","title":"<code>sprite(...)</code>","text":"<p>Uses a sprite from a texture atlas or resource location.</p> <pre><code>background: sprite(ldlib2:textures/gui/icon.png);\n</code></pre> <p>Advanced usage:</p> <pre><code>background: sprite(\n    ldlib2:textures/gui/icon.png,\n    0, 0, 16, 16,          /* sprite region (optional) */\n    2, 2, 2, 2,            /* border (opional) */\n    #FFFFFF                /* color tint (optional) */\n);\n</code></pre>"},{"location":"en/ldlib2/ui/textures/lss/#icon","title":"<code>icon(...)</code>","text":"<p>Uses a registered icon texture.</p> <pre><code>background: icon(check);\nbackground: icon(modid, check);\n</code></pre>"},{"location":"en/ldlib2/ui/textures/lss/#rect-sdf","title":"<code>rect(...)</code> / <code>sdf(...)</code>","text":"<p>Creates an SDF-based rectangle texture.</p> <pre><code>background: rect(#FF0000);\nbackground: rect(#FF0000, 4);\nbackground: rect(#FF0000, 4 4 4 4, 2, #FFFFFF);\n</code></pre> <p>Arguments:</p> <ol> <li>Fill color</li> <li>Corner radius (single value or 4 values) (optional)</li> <li>Stroke width (optional)</li> <li>Border color (optional)</li> </ol>"},{"location":"en/ldlib2/ui/textures/lss/#border","title":"<code>border(...)</code>","text":"<p>Creates a simple colored border.</p> <pre><code>background: border(2, #00FF00); \n</code></pre>"},{"location":"en/ldlib2/ui/textures/lss/#group","title":"<code>group(...)</code>","text":"<p>Combines multiple textures into a single group.</p> <pre><code>background: group(\n    sprite(ldlib2:textures/gui/bg.png),\n    rect(#FFFFFF, 2)\n);\n</code></pre>"},{"location":"en/ldlib2/ui/textures/lss/#shader","title":"<code>shader(...)</code>","text":"<p>Uses a custom shader texture.</p> <pre><code>background: shader(ldlib2:fbm);\n</code></pre>"},{"location":"en/ldlib2/ui/textures/lss/#resource-based-textures","title":"Resource-based Textures","text":"<p>If the function name matches a registered resource provider type, it will be resolved automatically:</p> <pre><code>background: builtin(ui-gdp:BORDER);\nbackground: file(\"&lt;namespace&gt;:&lt;path&gt;\");\n</code></pre> <p>This allows integration with LDLib2\u2019s resource system.</p>"},{"location":"en/ldlib2/ui/textures/lss/#texture-transforms","title":"Texture Transforms","text":"<p>After the main texture, you can apply transform functions.</p>"},{"location":"en/ldlib2/ui/textures/lss/#scale","title":"Scale","text":"<pre><code>background: sprite(...) scale(2);\nbackground: sprite(...) scale(2, 1);\n</code></pre>"},{"location":"en/ldlib2/ui/textures/lss/#rotate","title":"Rotate","text":"<pre><code>background: sprite(...) rotate(45);\n</code></pre>"},{"location":"en/ldlib2/ui/textures/lss/#translate","title":"Translate","text":"<pre><code>background: sprite(...) translate(4, 8);\n</code></pre>"},{"location":"en/ldlib2/ui/textures/lss/#color-override","title":"Color Override","text":"<pre><code>background: sprite(...) color(#FFAA00);\nbackground: sprite(...) color(255, 255, 0, 0);\n</code></pre> <p>This tints the texture using the given color.</p> <p>In summary, LSS texture values let you:</p> <ul> <li>Define textures declaratively</li> <li>Chain transforms in a readable way</li> <li>Reuse and override visuals efficiently</li> </ul> <p>This makes UI styling both powerful and resource-pack friendly.</p>"},{"location":"en/multiblocked2/","title":"Introduction","text":""},{"location":"en/multiblocked2/#introduction","title":"Introduction","text":"<p>Multiblocked2 (mbd2) is the more powerful visual custom machine/multi-block structure mod after mbd1(multiblocked). Mbd2 is an extremely flexible yet vanilla-esque multiblock mod, that embraces aspects of MultiblockTweaker and Modular Machinery.</p> <p>Original project can be found here: Multiblocked</p> <p> Discord: Join our Discord</p> <p> Github:  Multiblocked2 Repository</p>"},{"location":"en/multiblocked2/#compatibility","title":"Compatibility","text":"<p>Built-in</p> <ul> <li>Item</li> <li>Item Durability</li> <li>Fluid</li> <li>Forge energy</li> <li>Entity</li> </ul> <p>GTCEU</p> <ul> <li>Energy</li> </ul> <p>Botania</p> <ul> <li>mana</li> </ul> <p>Mekanism</p> <ul> <li>Heat</li> <li>Gas</li> <li>Slurry</li> <li>Pigment</li> <li>Infusion</li> </ul> <p>Create</p> <ul> <li>Stress</li> <li>RPM</li> </ul> <p>PneumaticCraft</p> <ul> <li>pressure</li> <li>heat</li> </ul> <p>Embers</p> <ul> <li>ember</li> </ul> <p>Nature's aura</p> <ul> <li>aura</li> </ul>"},{"location":"en/multiblocked2/#whats-new","title":"What's new","text":""},{"location":"en/multiblocked2/#demo","title":"Demo","text":"<p>Demo: A fire pedestal burn coals to emi fire and light surroundings. Just imagine how amazing it is to create such a cool machine without writing a single line of code!</p>"},{"location":"en/multiblocked2/#new-editor","title":"New Editor","text":"<p>New editor: more powerful, more modern and easier to use. mbd2 helps you work without code, provides a unity-like game design engine, more efficient customization of your machine.</p>"},{"location":"en/multiblocked2/#logic-node-graph","title":"Logic Node Graph","text":"<p>Node Graph: The node graph is a brand-new way to configure event logic. You no longer need KubeJS to define complex functionality. If you're a user of Blender or Shader Graph, you're going to love this new feature.</p> <p>MBD2 allows you to listen to various machine events through the node graph and set up a wide range of execution logic, giving you immense creative power.</p>"},{"location":"en/multiblocked2/java_integration/","title":"Java Integration","text":""},{"location":"en/multiblocked2/java_integration/#java-integration","title":"Java Integration","text":"<p>You can find the latest version from our maven. </p><pre><code>repositories{\n    maven {\n        name \"firstdarkdev\"\n        url \"https://maven.firstdark.dev/snapshots\"\n    }\n}\n\ndependencies {\n    implementation fg.deobf(\"com.lowdragmc.ldlib:ldlib-forge-{minecraft_version}:{latest_version}\") { transitive = false }\n    implementation fg.deobf(\"com.lowdragmc.multiblocked2:Multiblocked2:{minecraft_version}-{latest_version}\") { transitive = false }\n}\n</code></pre><p></p>"},{"location":"en/multiblocked2/java_integration/#multiblocked2-registry-event","title":"Multiblocked2 Registry Event","text":"<p>Multiblocked2 provides a Forge event (<code>MBDRegistryEvent</code>) for registries.</p> <pre><code>public class MBDEvents {\n\n    @SubscribeEvent\n    public void onRegisterMachine(MBDRegistryEvent.Machine event) {\n        System.out.println(\"Registering machine\");\n    }\n\n    @SubscribeEvent\n    public void onRegisterRecipeType(MBDRegistryEvent.MBDRecipeType event) {\n        System.out.println(\"Registering recipe type\");\n    }\n\n    // other events....\n}\n\npublic void modInit() {\n    IEventBus eventBus = FMLJavaModLoadingContext.get().getModEventBus();\n    eventBus.register(new MBDEvents());\n}\n</code></pre>"},{"location":"en/multiblocked2/java_integration/#register-machines-via-java-code","title":"Register machines via Java Code","text":"<p>Instead of place projecs files under the <code>.minecraft/assets/ldlib/mbd2/machine_type</code> directly, there are two ways to register machines via code.</p>"},{"location":"en/multiblocked2/java_integration/#1-create-and-register-machines-via-raw-code","title":"1. Create and register machines via raw code","text":"<pre><code>@SubscribeEvent\npublic void onRegisterMachine(MBDRegistryEvent.Machine event) {\n    var renderer = new IModelRenderer(MBD2.id(\"block/pedestal\"));\n    event.register(MBDMachineDefinition.builder()\n            .id(MBD2.id(\"test_machine\"))\n                    .rootState(MachineState.builder()\n                            .name(\"base\")\n                            .renderer(renderer)\n                            .shape(Shapes.block())\n                            .lightLevel(0)\n                            .build())\n            .blockProperties(ConfigBlockProperties.builder().build())\n            .itemProperties(ConfigItemProperties.builder().build())\n            .build());\n}\n</code></pre>"},{"location":"en/multiblocked2/java_integration/#2-register-project-files-from-your-mod-resource-assets","title":"2. Register project files from your mod resource assets","text":"<p>For example, you have such projects in your resource assets like this.</p> <p></p>"},{"location":"en/multiblocked2/java_integration/#register-machine-project","title":"Register Machine Project","text":"<p>event.registerFromResource(<code>mod class</code>, <code>project type</code>, <code>project resource</code>)</p> <p>Available <code>project types</code> are below:</p> <ul> <li>single machine project: <code>single_machine</code></li> <li>multiblock machine project: <code>multiblock</code></li> <li>create kinematic machien project: <code>create_machine</code></li> </ul> <pre><code>@SubscribeEvent\npublic void onRegisterMachine(MBDRegistryEvent.Machine event) {\n    event.registerFromResource(this.getClass(), \"single_machine\", \"mbd2/machine/machine_project_file.sm\");\n}\n</code></pre>"},{"location":"en/multiblocked2/java_integration/#register-recipe-type-project","title":"Register Recipe Type Project","text":"<p>event.registerFromResource(<code>mod class</code>, <code>project resource</code>)</p> <pre><code>@SubscribeEvent\npublic void onRegisterRecipeType(MBDRegistryEvent.MBDRecipeType event) {\n    event.registerFromResource(this.getClass(), \"mbd2/recipe_type/recipe_type_file.rt\");\n}\n</code></pre>"},{"location":"en/multiblocked2/KubeJS/event/","title":"Events","text":""},{"location":"en/multiblocked2/KubeJS/event/#events","title":"Events","text":"<p>All events can be found here:</p> <ul> <li><code>MBDStartupEvents</code></li> <li><code>MBDServerEvents</code></li> <li><code>MBDClientEvents</code></li> </ul>"},{"location":"en/multiblocked2/KubeJS/event/#registry-events","title":"Registry Events","text":"<p>W.I.P</p>"},{"location":"en/multiblocked2/KubeJS/event/#machine-events","title":"Machine Events","text":"<p>Check <code>MBDServerEvents</code> and <code>MBDClientEvents</code> for all available machien events.</p> <p>Because events will be posted to the Forge Event Handler as well. We wrap it with a KubeJS Event. So the actually event instance are shown here. Please check it for detials of fields and methods.</p> <p>This is an example of using it. </p><pre><code>MBDMachineEvents.onOpenUI(\"mbd2:machine_id\", e =&gt; {\n    let event = e.event; // NOTE! you have to use it to get the actual event instance.\n    let machine = event.machine;\n    let machienID = machine.getDefinition().id();\n    console.log(\"Open UI!! id: \" + machienID)\n})\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/proxy_recipetype/","title":"Customize Proxy RecipeTypes Transfer","text":""},{"location":"en/multiblocked2/KubeJS/proxy_recipetype/#customize-proxy-recipetypes-transfer","title":"Customize Proxy RecipeTypes Transfer","text":"<p><code>Proxy Recipetype</code> in mbd2 doesn't always work very well. For example, if some recipes contain input types that mbd2 does not know, they cannot be translated.</p> <p>Furthermore, ppl may want to filter some recipes, or modify the duration, inputs, etc.  We provide an event <code>onTransferProxyRecipe</code> to allow you to take over the transfer processing. </p><pre><code>MBDRecipeTypeEvents.onTransferProxyRecipe(\"mbd2:recipe_type_id\", e =&gt; {\n    let event = e.event;\n    const {recipeType, proxyTypeId, proxyType, proxyRecipeId, proxyRecipe} = event;\n\n    // make sure the recipe type is correct\n    if (proxyTypeId === \"create:haunting\") {\n        let input = proxyRecipe.getIngredients()[0]; // we assume the ingredients has and only has one item.\n        let output = proxyRecipe.getResultItem(null);\n        console.log(\"input: \", input);\n        console.log(\"output: \", output);\n        // convert it into a mbd2 recipe\n        var recipe = recipeType.recipeBuilder() // same as create recipe via kjs event\n            .id(proxyRecipeId + \"_mbd2\")\n            .duration(400)\n            .inputItems(input)\n            .outputItems(output)\n            .chance(0)\n            .inputFluids(\"water 1000\")\n            .chance(1)\n            .buildMBDRecipe();\n\n        // If you want to skip this recipe\n        // event.mbdRecipe = null;\n        // set the result\n        event.mbdRecipe = recipe;\n    }\n})\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/recipe/","title":"Recipe Creation","text":""},{"location":"en/multiblocked2/KubeJS/recipe/#recipe-creation","title":"Recipe Creation","text":"<p>Add recipes to the recipe type (<code>id = mbd2:blender</code>).</p> <pre><code>// server script\nServerEvents.recipes((event) =&gt; {\n    // add recipes here\n    event.recipes.mbd2.blender()\n        // recipe id is optional, but we recommend to set a unique id\n        .id(\"mbd2:recipe_id\")\n        // duration in tick\n        .duration(400)\n        // hight priority will be handled first\n        .priority(-1)\n        // mark this recipe as a fuel recipe\n        .isFuel(true)\n        // item\n        .inputItems(\"minecraft:apple\", \"4x minecraft:oak_log\")\n        .outputItems(\"4x minecraft:apple\")\n        // item durability\n        .inputItemsDurability(\"16x flint_and_steel\") // 16x refer to the durability value\n        .outputItemsDurability(\"16x flint_and_steel\") // 16x refer to the durability value\n        // fluid\n        .inputFluids(\"water 1000\")\n        .outputFluids(\"lava 2000\")\n        // entity\n        .inputEntities(\"4x minecraft:pig\")\n        .outputEntities(\"4x minecraft:pig\")\n        // forge energy\n        .inputFE(1000)\n        .outputFE(2000)\n        // create stress\n        .inputStress(1024)\n        .outputStress(2048)\n        .inputRPM(4)\n        .outputRPM(4)\n        // botaina mana\n        .inputMana(100)\n        .outputMana(200)\n        // natures aura\n        .inputAura(50)\n        .outputAura(50)\n        // mek heat\n        .inputHeat(100)\n        .outputHeat(200)\n        // gtm eu\n        .inputEU(100)\n        .outputEU(200)\n        // mek chemicals\n        .inputGases(\"100x mekanism:hydrogen\")\n        .outputGases(\"200x mekanism:oxygen\")\n            // .inputInfusions(...) \n            // .outputInfusions(...) \n            // .inputSlurries(...)\n            // .outputSlurries(...)\n            // .inputPigments(...)\n            // .outputPigments(...)\n        // ember\n        .inputEmber(256)\n        .outputEmber(256)\n        // pnc pressure / air\n        .inputPNCPressure(10)\n        .outputPNCPressure(10)\n        .inputPNCAir(40)\n        .outputPNCAir(40)\n        // pnc heat\n        .inputPNCHeat(100)\n        .outputPNCHeat(200)\n        // per tick (consume / generate per tick)\n        .perTick(builder =&gt; builder\n            .inputFluids(\"10x lava\") \n        )\n        // chance\n        .chance(0.5, builder =&gt; builder\n            .inputFluids(\"10x lava\")\n        )\n        // tier chance boost (the final chance = chance + tierChanceBoost * machineLevel)\n        .tierChanceBoost(0.1, builder =&gt; builder\n            .inputFluids(\"10x lava\")\n        )\n        // slot name (ingredient can only be consumed/filled from given slot name (trait name))\n        .slotName(\"input_tank\", builder =&gt; builder\n            .inputFluids(\"10x lava\")\n        )\n        // ui name (ingredient displays in the xei recipe ui (widget id) by a given ui name)\n        .uiName(\"input_tank\", builder =&gt; builder\n            .inputFluids(\"10x lava\")\n        )\n        // builtin condtions\n        .dimension(\"minecraft:overworld\") // dimension id\n        .biome(\"minecraft:plains\") // biome id\n        .machineLevel(2) // min machine level\n        .positionY(-10, 64) // min y, max y\n        .raining(0.5, 1) // min level, max level\n        .thundering(0.5, 1) // min level, max level\n        .blocksInStructure(0, 100, \"minecraft:stone\") // min count, max count, blocks\n        .dayTime(true) // is day\n        .light(0, 15, 0, 15, true) // min sky light, max sky light, min block light, max block light, can see sky\n        .redstoneSignal(7, 15) // min signal, max signal\n        // mod conditions\n        .rotationCondition(4, 16, 256, 1024) // min RPM, max RPM, min stress, max stress\n        .mekTemperatureCondition(0, 250) // min temperatue,  max temperatue\n        .pncTemperatureCondition(0, 256) // min temperatue,  max temperatue\n        .pncPressureCondition(false, 10, 16) // is air, min value (air / pressure), max value (air / pressure)\n        // custom data\n        .addData(\"key\", '{\"temperature\": 32}')\n        .addDataString(\"key\", \"value\")\n        .addDataNumber(\"key\", 32)\n        .addDataBoolean(\"key\", true)\n})\n</code></pre> <p>More apis and details can be found here: MBDRecipeSchema</p>"},{"location":"en/multiblocked2/KubeJS/trait/","title":"Interact with Traits","text":""},{"location":"en/multiblocked2/KubeJS/trait/#interact-with-traits","title":"Interact with Traits","text":"<p>You can obtain machine trait by name.</p> <pre><code>// reuturn the first match trait.\nlet trait = machine.getTraitByName(\"item item_trait\") \n\nlet allTraits = machine.additionalTraits;\n</code></pre>"},{"location":"en/multiblocked2/KubeJS/trait/#trait-apis","title":"Trait APIs","text":""},{"location":"en/multiblocked2/KubeJS/trait/#item","title":"Item","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"item_trait\") \nlet storage = trait.storage;\nlet stored = storage.getStackInSlot(0);\nstorage.insertItem(0, \"16x apple\", true) // index, item stack, simulate\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/trait/#fluid","title":"Fluid","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"fluid_trait\") \nlet storages = trait.storages;\nlet stored = storages[0].getFluid();\nstorages[0].setFluid(0, \"water 1000\")\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/trait/#forge-energy","title":"Forge Energy","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"forge_energy_trait\") \nlet storage = trait.storage;\nlet stored = storage.getEnergyStored();\nlet maxStored = storage.getMaxEnergyStored();\nstorage.receiveEnergy(1024, false) // fe, simulate\nstorage.extractEnergy(1024, false) // fe, simulate\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/trait/#botania-mana","title":"Botania Mana","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"botania_mana_trait\") \nlet storage = trait.storage;\nlet stored = storage.getCurrentMana();\nstorage.receiveMana(1024) // input mana\nstorage.receiveMana(-1024) // output mana\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/trait/#create-rpm-stress","title":"Create rpm / stress","text":""},{"location":"en/multiblocked2/KubeJS/trait/#let-trait-machinegettraitbynamecreate_trait-let-available_stress-traitgetmachinegetholderscheduleworkingrpm4-false-rpm-simulate-let-available_stress-traitgetmachinegetholderscheduleworking256-false-stress-simulate","title":"<pre><code>let trait = machine.getTraitByName(\"create_trait\") \nlet available_stress = trait.getMachine().getHolder().scheduleWorkingRPM(4, false) // rpm, simulate\nlet available_stress = trait.getMachine().getHolder().scheduleWorking(256, false) // stress, simulate\n</code></pre>","text":""},{"location":"en/multiblocked2/KubeJS/trait/#ember","title":"Ember","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"ember_trait\") \nlet storage = trait.storage;\nlet stored = storage.getEmber();\nlet capacity = storage.getEmberCapacity();\nstorage.addAmount(1024, false) // ember, simulate\nstorage.removeAmount(1024, false) // ember, simulate\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/trait/#gtm-energy","title":"GTM energy","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"gtm_energy_trait\") \nlet container = trait.container;\nlet stored = container.getEnergyStored();\nlet capacity = container.getEnergyCapacity();\ncontainer.changeEnergy(1024) // energyToAdd\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/trait/#mek-chemical","title":"Mek Chemical","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"mek_chemical_trait\") \nlet storages = trait.storages;\nlet stored = storages[0].getStack();\nstorages[0].setStack(stored) // did not check how to create a chemical instance via kjs\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/trait/#mek-heat","title":"Mek Heat","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"mek_heat_trait\") \nlet container = trait.container;\nlet stored = container.getTemperature(0); // capacitor\nlet stocapacityred = container.getHeatCapacity(0); // capacitor\ncontainer.handleHeat(0, 1000) // capacitor, transfer value\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/trait/#pnc-pressure-air","title":"PNC Pressure / Air","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"pnc_pressure_trait\") \nlet handler = trait.handler;\nlet stored = handler.getAir();\nlet maxPressure = handler.maxPressure();\nhandler.addAir(16); // added air\nhandler.setPressure(4) // addAir(((int) (pressure * getVolume())) - getAir());\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/trait/#pnc-heat","title":"PNC heat","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"pnc_heat_trait\") \nlet handler = trait.handler;\nlet temp = handler.getTemperature();\nlet cap = handler.getThermalCapacity();\nhandler.setTemperature(300); // temperature\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/ui/","title":"UI","text":""},{"location":"en/multiblocked2/KubeJS/ui/#ui","title":"UI","text":"<p>You might have used mbd2\u2019s visual editor to create the UI, but you may have noticed that apart from the trait widget, the other widgets don't really work. This is because we haven't set up the UI logic, such as what should happen when a button is pressed. As mentioned in the Ldlbib UI, we recommend using the UI Editor to create and edit the UI layout, and using <code>KubeJS</code> / <code>NodeGraph (W.I.P)</code> to set up the interaction logic.</p> <p>Here, we implement a simple, UI-based manual lava filling machine.</p> <p>Note</p> <p>Example can be download here! </p> <p>Put it under the <code>.minecraft</code> folder.</p> <p>First, we configure the machine to have one item trait and one fluid trait, and prepare our UI:</p> <ol> <li>A UI corresponding to the trait.</li> <li>Two <code>buttons</code> corresponding to the filling directions.</li> <li>A <code>TextTexture</code> to display the amount of fluid in the tank.</li> </ol> <p></p> <p>Once you have everything set up, opening the machine's UI should look like this:</p> <p></p>"},{"location":"en/multiblocked2/KubeJS/ui/#kubejs-control","title":"KubeJS Control","text":"<p>Next, we use KubeJS to add interaction logic to the UI. We provide an event <code>MBDMachineEvents.onUI</code> for you to setup the root widget. This event is triggered after <code>MBDMachineEvents.onOpenUI</code> and everything is prepared except the logic.</p> <pre><code>MBDMachineEvents.onUI(\"mbd2:kjs_ui_test\", e =&gt; {\n    const { machine, root } = e.event;\n    const slot = root.getFirstWidgetById(\"ui:item_slot_0\") // SlotWidget\n    const tank = root.getFirstWidgetById(\"ui:fluid_tank_0\") // FluidTankWidget\n    const fill_button = root.getFirstWidgetById(\"fill_button\") // Button\n    const drain_button = root.getFirstWidgetById(\"drain_button\") // Button\n    const label = root.getFirstWidgetById(\"tank_label\") // TextWidget\n\n    // Set label to display fluid amount\n    label.setTextProvider(() =&gt; Component.string(tank.fluid.amount + \"mB\"))\n\n    // on button click\n    fill_button.setOnPressCallback(clickData =&gt; {\n        if (clickData.isRemote) {\n            // trigger on the remote side\n            // because everything is synced from server to client. you can do nothing on the remote side\n        } else {\n            var stored = slot.item\n            // check if a lava bucket is stored\n            if (stored &amp;&amp; stored.id === \"minecraft:lava_bucket\") {\n                // check if there is enough space in the tank\n                if (tank.lastTankCapacity - tank.fluid.amount &gt;= 1000) {\n                    // remove the lava bucket\n                    slot.item = { item: \"minecraft:bucket\", count: 1 }\n                    // add 1000mB of lava to the tank\n                    tank.fluid = { fluid: \"minecraft:lava\", amount: tank.fluid.amount + 1000 }\n                }\n            }\n        }\n    })\n\n    drain_button.setOnPressCallback(clickData =&gt; {\n        if (!clickData.isRemote) {\n            // check if there is lava in the tank\n            if (tank.fluid.amount &gt;= 1000 &amp;&amp; slot.item.id === \"minecraft:bucket\") {\n                // remove 1000mB of lava from the tank\n                tank.fluid = { fluid: \"minecraft:lava\", amount: tank.fluid.amount - 1000 }\n                // add a lava bucket\n                slot.item = { item: \"minecraft:lava_bucket\", count: 1 }\n            }\n        }\n    })\n\n})\n</code></pre> <p>Let's see our final result!</p>      Your browser does not support video.    <p>We only use four widgets here (<code>TextTexture</code>, <code>Button</code>, <code>Slot</code>, and <code>Tank</code>). For more details about other widgets please check pages.</p>"},{"location":"en/multiblocked2/KubeJS/ui/#display-parts-trait-ui-in-the-controller-display-controllers-trait-ui-in-the-part","title":"Display part's trait ui in the Controller / Display controller's trait ui in the Part","text":"<p>MBD2 supports proxy capabilities, allowing you to use a part to proxy the capabilities of a controller. However, you might also want to display the UI of a trait defined in the controller within the part, or vice versa\u2014display a trait from a part in the controller\u2019s UI. This is possible, but it requires some additional setup.</p> <p>For example, suppose your part has an item trait named <code>item_slot</code> with only one slot. Its UI ID would be <code>ui:item_slot_0</code>. To display it in the controller\u2019s UI, you need to manually add an item slot widget to the controller UI and set its ID to <code>part:item_slot@ui:item_slot_0</code>.</p> <p>Similarly, let\u2019s say your controller has a PneumaticCraft air trait named <code>air_handler</code>. To display it in the part's UI, you need to manually add a progress bar widget (you can also temporarily add a trait to auto-generate the UI, then remove the trait), and set the widget's ID to <code>controller:air_handler@ui:air_handler</code>.</p>"},{"location":"en/multiblocked2/KubeJS/upgrade_system/","title":"Dynamic recipe on the fly","text":""},{"location":"en/multiblocked2/KubeJS/upgrade_system/#dynamic-recipe-on-the-fly","title":"Dynamic recipe on the fly","text":""},{"location":"en/multiblocked2/KubeJS/upgrade_system/#upgrade-system","title":"Upgrade System","text":"<p>Credit: @yellowcake3d  For anyone in the future seeking for a way to make this sorta upgrade system, here's what I have, which is quite practically mostly from mierno, but instead I ended up using the <code>getTraitByName</code> and also had to turn on the \"Always modify recipe\" checkmark in the mbd editor </p><pre><code>MBDMachineEvents.onBeforeRecipeModify('mbd2:high_pressure_electrolyzer', (event) =&gt; {\n    const mbdEvent = event.getEvent();\n    const { machine, recipe } = mbdEvent;\n\n    let itemTrait = machine.getTraitByName(\"item_slot\");\n    if (itemTrait == null) return;\n    let storage = itemTrait.storage;\n    let upgradeCount = storage.getStackInSlot(0).count;\n\n    //parallel recipe modifiers, the more upgrades in the upgrade slot, the more recipes processed in parallel\n    let parallelRecipe = machine.applyParallel(recipe, upgradeCount);\n    let copyRecipe = parallelRecipe.copy();\n    //speed modifier, makes recipe go 1% faster every new upgrade installed\n    let reductionFactor = Math.max(1 - 0.01 * upgradeCount, 0.1);\n    copyRecipe.duration = Math.ceil(recipe.duration * reductionFactor);\n\n    mbdEvent.setRecipe(copyRecipe);\n});\n</code></pre><p></p>"},{"location":"en/multiblocked2/KubeJS/upgrade_system/#create-dynamic-recipes-via-kubejs-recipe-builder","title":"Create dynamic recipes via KubeJS recipe builder","text":"<p>You can dynamically modify recipes by using the <code>onBeforeRecipeModify</code> event to apply a modifier and replace the original recipe. In most cases, this approach is sufficient.  However, there are times when you may want more flexibility\u2014such as removing, replacing, or appending ingredients. To support this, we offer an alternative method that allows you to define recipes in a way similar to KJS recipe events.  </p><pre><code>MBDMachineEvents.onBeforeRecipeModify('machine:id', (event) =&gt; {\n    const mbdEvent = event.getEvent();\n    const { machine, recipe } = mbdEvent;\n\n    // creat an empty builder\n    // let newEmptyRecipeBuilder = recipe.recipeType.recipeBuilder();\n    // create a builder with current recipe\n    let builder = recipe.toBuilder();\n\n    builder.duration(412) // modify duration\n    builder.inputItems(\"apple\") // append ingredient\n\n    let fluidCap = MBDRegistries.RECIPE_CAPABILITIES.get(\"fluid\")\n    builder.removeOutputs(fluidCap) // remove all output fluid ingredients\n\n    let newRecipe = builder.buildMBDRecipe();\n    mbdEvent.setRecipe(newRecipe );\n});\n</code></pre><p></p>"},{"location":"en/photon2/","title":"Introduction","text":""},{"location":"en/photon2/#introduction","title":"Introduction","text":"<p> Since 2.0.0 </p> <p>Warning</p> <p>This Wiki is only available for Photon <code>2.x</code>. For <code>1.x</code>, check this link</p>"},{"location":"en/photon2/#overview","title":"Overview","text":"<p>Photon2 is a powerful Minecraft VFX creation mod inspired by Unity\u2019s particle system. It brings modern, flexible, and highly customizable visual effects into Minecraft, making it possible to design stunning in-game VFX with a workflow familiar to Unity developers.</p>"},{"location":"en/photon2/#key-features","title":"Key Features","text":"<ul> <li>\ud83d\ude80 Unity-like Particle System: 90%+ feature parity with Unity, including particles, trails, partial line rendering, and more</li> <li>\ud83d\uddbc Visual FX Editor: Built-in FX Editor with real-time preview and intuitive controls</li> <li>\ud83e\udde9 Flexible Resource Management: Custom materials, meshes, textures, curves, noise, and more</li> <li>\u26a1 Advanced Rendering: GPU instancing, custom shaders, HDR/bloom effects, pixel-art style</li> <li>\ud83d\udca1 Programmable &amp; Extensible: Custom shader material support, build up your own rendering pipeline</li> <li>\ud83e\uddd1\u200d\ud83d\udcbb Developer Friendly: Easily transferable skills for Unity users; clear and open extension points</li> </ul>"},{"location":"en/photon2/#getting-started","title":"Getting Started","text":"<ul> <li> <p>Photon2 is recommended for users with some Unity or VFX experience.   If you know Unity\u2019s particle system, you\u2019ll find Photon2 intuitive.   Beginners should check out Unity or VFX basics first.</p> </li> <li> <p>Photon2 focuses on effect creation\u2014not usage logic.   Use commands or code to bind effects to entities, blocks, or your own lifecycle manager.</p> </li> <li> <p>Supports advanced rendering and effects   Such as custom shaders, HDR glow, Fresnel, mesh-based particle animations, and intersection highlights.</p> </li> </ul>"},{"location":"en/photon2/#quick-start","title":"Quick Start","text":"<ol> <li>Enter a creative mode world and run <code>/photon_editor</code> to launch the editor</li> <li>Create a new FX project and start experimenting with particle effects</li> <li>Export FX files and apply them via command or your own triggers</li> <li>Explore advanced features: custom shaders, mesh-based animation, depth-based highlights, and more</li> </ol> <p>For details, see: Getting Started, Shader Guide, Advanced Tips</p>"},{"location":"en/photon2/#community-support","title":"Community &amp; Support","text":"<ul> <li>GitHub: Submit issues or feature requests</li> <li>Discord: Join our community</li> <li>Feedback &amp; Docs Contributions: Open for issues, PRs, and community input!</li> </ul>"},{"location":"en/photon2/commands/","title":"Commands","text":""},{"location":"en/photon2/commands/#commands","title":"Commands","text":"<p> Since 2.0.0 </p> <p>Photon2 does not manage when, where, or how VFX are used. While Photon provides some built-in commands, these are primarily for testing purposes.</p>"},{"location":"en/photon2/commands/#basic-commands","title":"\u2728 Basic Commands","text":"Command Description <code>/photon particle_editor</code> Open the visual particle editor <code>/photon_client clear_particles</code> Remove all Photon particles <code>/photon_client clear_fx_cache</code> Clear FX cache (run after changing .fx files)"},{"location":"en/photon2/commands/#fx-binding-emitting","title":"\ud83d\udce6 FX Binding &amp; Emitting","text":"<p>Photon2 lets you bind effects to blocks or entities, or emit them at specific positions with full parameter control.</p>"},{"location":"en/photon2/commands/#command-format","title":"Command Format","text":"<pre><code>/photon fx &lt;fxFile&gt; &lt;type&gt; ... [offset] [rotation] [scale] [delay] [force death] [allow multi] ...\n</code></pre> <ul> <li><code>&lt;fxFile&gt;</code>: Resource location of the FX file (e.g., <code>mod_id:filename</code> for <code>assets/mod_id/fx/filename.fx</code>)</li> <li><code>&lt;type&gt;</code>: <code>block</code> or <code>entity</code></li> <li>See parameter table below for details</li> </ul> Parameter Required Default Description fxFile Yes - FX file resource name, e.g. <code>photon:fire</code> type Yes - <code>block</code> or <code>entity</code> offset No 0 0 0 Position offset (x y z) rotation No 0 0 0 Rotation (Euler angles: x y z) scale No 1 1 1 Scale (x y z) delay No 0 Emit delay (ticks) force death No false Immediately remove all particles if the target becomes invalid allow multi No false Allow multiple effects with the same name to be bound to the same object"},{"location":"en/photon2/commands/#bind-fx-to-a-block","title":"\ud83d\udfe6 Bind FX to a Block","text":"<p>Format:</p> <pre><code>/photon fx &lt;fxFile&gt; block &lt;position(x y z)&gt; [offset] [rotation] [scale] [delay] [force death] [allow multi] [check state]\n</code></pre> <ul> <li><code>position</code>: Required, block coordinates (x y z)</li> <li><code>check state</code>: If <code>false</code> (default), effect is removed if the block changes. If <code>true</code>, also removed if the blockstate changes.</li> </ul> <p>Example:</p> <pre><code>/photon fx photon:fire block ~ ~ ~ 0 0 0 0 0 0 1 1 1 0 false false false\n</code></pre>"},{"location":"en/photon2/commands/#bind-fx-to-entities","title":"\ud83d\udfe9 Bind FX to Entities","text":"<p>Format:</p> <pre><code>/photon fx &lt;fxFile&gt; entity &lt;entities(selector)&gt; [offset] [rotation] [scale] [delay] [force death] [allow multi] [auto rotation]\n</code></pre> <ul> <li><code>entities</code>: Required, entity selector</li> <li> <p><code>auto rotation</code>:</p> </li> <li> <p><code>none</code> (default): No rotation</p> </li> <li><code>forward</code>: Forward direction</li> <li><code>look</code>: Head look direction</li> <li><code>xrot</code>: Body rotation direction</li> </ul> <p>Example:</p> <pre><code>/photon fx photon:fire entity @e[type=minecraft:minecart, distance=..1] 0 0.5 0 0 0 0 1 1 1 0 false false look\n</code></pre>"},{"location":"en/photon2/commands/#remove-fx-commands","title":"\u274c Remove FX Commands","text":"Command Format Example <code>/photon fx remove block &lt;position(x y z)&gt; [force] [location]</code> <code>/photon fx remove block ~ ~ ~ true</code> <code>/photon fx remove entity &lt;entities(selector)&gt; [force] [location]</code> <code>/photon fx remove entity @e[type=pig]</code> <ul> <li><code>force</code>: Remove all particles immediately if the object becomes invalid (<code>true</code>), or wait for natural death (<code>false</code>)</li> <li><code>location</code>: Specify FX resource location (optional)</li> </ul>"},{"location":"en/photon2/commands/#parameter-notes-tips","title":"\ud83d\udccb Parameter Notes &amp; Tips","text":"<ul> <li>Position, rotation, and scale are always three numbers (x y z)</li> <li>FX file path is usually <code>assets/&lt;mod_id&gt;/fx/your_fx_name.fx</code></li> <li>After changing any .fx file, always run <code>/photon_client clear_fx_cache</code> to refresh!</li> </ul>"},{"location":"en/photon2/commands/#advanced-usage-examples","title":"\ud83c\udf08 Advanced Usage Examples","text":"<p>Bind an effect to your feet</p> <p><code>shell     /photon fx photon:smoke block ~ ~-1 ~</code></p> <p>Bind explosion FX to all pigs nearby</p> <p><code>shell     /photon fx photon:explosion entity @e[type=minecraft:pig, distance=..10]</code></p>"},{"location":"en/photon2/resourcepack/","title":"Resource Pack Integration","text":""},{"location":"en/photon2/resourcepack/#resource-pack-integration","title":"Resource Pack Integration","text":"<p>FX created with Photon2 are stored in:</p> <pre><code>.minecraft/ldlib2/assets/...\n</code></pre> <p>You may want to bundle these FX files into a resource pack or mod for distribution. To do this, you must move all required files into your own <code>assets/</code> directory.</p>"},{"location":"en/photon2/resourcepack/#required-files","title":"\ud83d\udcc2 Required Files","text":"<ul> <li>FX Files</li> <li>Resources (materials, gradients, colors, etc.)</li> <li>Other Resources (textures, models, shaders, etc.)</li> </ul>"},{"location":"en/photon2/resourcepack/#1-fx-files","title":"1\ufe0f\u20e3 FX Files","text":"<p>Exported FX files must be placed under:</p> <pre><code>assets/&lt;namespace&gt;/fx/\n</code></pre>"},{"location":"en/photon2/resourcepack/#2-resources","title":"2\ufe0f\u20e3 Resources","text":"<p>Minecraft resource naming rules</p> <p>Minecraft does not allow uppercase letters, spaces, or non-English characters in file paths. Before moving files, ensure all names follow the Minecraft Resource Naming rules.</p> <p>All FX resource dependencies (materials, gradients, colors, etc.) must be moved from:</p> <pre><code>.minecraft/ldlib2/assets/ldlib2/resources/global/xxxx.material.nbt\n</code></pre> <p>to:</p> <pre><code>assets/ldlib2/resources/global/xxxx.material.nbt\n</code></pre>"},{"location":"en/photon2/resourcepack/#3-other-resources","title":"3\ufe0f\u20e3 Other Resources","text":"<p>Materials and meshes often reference additional assets such as:</p> <ul> <li>Textures</li> <li>Models</li> <li>Shaders</li> </ul> <p>These must also be moved to their corresponding folders under your <code>assets/</code> directory.</p>"},{"location":"en/photon2/resourcepack/#recommended-migration-method","title":"\ud83d\udca1 Recommended Migration Method","text":"<p>Info</p> <p>The easiest and most error-proof method is to copy everything under:</p> <pre><code>.minecraft/ldlib2/assets/...\n</code></pre> <p>into:</p> <pre><code>assets/...\n</code></pre> <p>This ensures all dependencies are preserved and your FX works correctly after packaging.</p>"},{"location":"en/photon2/Java%20Integration/","title":"Basic Information","text":""},{"location":"en/photon2/Java%20Integration/#basic-information","title":"Basic Information","text":"<p> Since 2.0.4 </p>"},{"location":"en/photon2/Java%20Integration/#development-maven","title":"Development Maven","text":"<pre><code>repositories {\n    maven { url = \"https://maven.firstdark.dev/snapshots\" } // LDLib2, Photon2\n}\n\ndependencies {\n    // LDLib2\n    implementation(\"com.lowdragmc.ldlib2:ldlib2-neoforge-${minecraft_version}:${ldlib2_version}:all\") { transitive = false }\n    compileOnly(\"org.appliedenergistics.yoga:yoga:1.0.0\")\n\n    // Photon2\n    implementation(\"com.lowdragmc.photon:photon-neoforge-${minecraft_version}:${photon2_version}\") { transitive = false }\n}\n</code></pre>"},{"location":"en/photon2/Java%20Integration/#latest-version","title":"latest version","text":""},{"location":"en/photon2/Java%20Integration/#how-to-load-and-use-the-effect-files","title":"How to load and use the effect files?","text":"<pre><code>FX fx = FXHelper.getFX(ResourceLocation.parse(\"photon:fire\"));\n// bind it to a block\nnew BlockEffectExecutor(fx, level, pos).start();\n// bind it to an entity\nnew EntityEffectExecutor(fx, level, entity, AutoRotate.NONE).start();\n</code></pre>"},{"location":"en/photon2/Java%20Integration/#implement-your-ownieffectexecutor-to-manage-the-lifecycle-of-your-photon-effects","title":"Implement your own<code>IEffectExecutor</code> to manage the lifecycle of your photon effects.","text":"<p>Sometimes, you wanna control the effect you have with additional logic. You can implement the <code>IEffectExecutor</code> and do what you want. </p> IEffectExecutorExampleExecutor <pre><code>public interface IEffectExecutor {\n\n    Level getLevel();\n\n    /**\n     * update each FX objects during their duration, per tick. Execute low frequency logic here.\n     * &lt;br&gt;\n     * e.g., kill particle\n     * @param fxObject fx object\n     */\n    default void updateFXObjectTick(IFXObject fxObject) {\n    }\n\n    /**\n     * update each FX objects during rendering, per frame. Execute high frequency logic here.\n     * &lt;br&gt;\n     * e.g., update emitter position, rotation, scale\n     * @param fxObject fx object\n     * @param partialTicks partialTicks\n     */\n    default void updateFXObjectFrame(IFXObject fxObject, float partialTicks) {\n\n    }\n\n    default RandomSource getRandomSource() {\n        return getLevel().random;\n    }\n}\n</code></pre> <pre><code>public class ExampleExecutor extends IEffectExecutor {\n    public final FX fx;\n    @Getter\n    public final Level level;\n    // runtime\n    @Nullable\n    private FXRuntime fxRuntime;\n\n    public ExampleExecutor(FX fx, Level level) {\n        this.fx = fx;\n        this.level = level;\n    }\n\n    public void emit() {\n        kill();\n        fxRuntime = fx.createRuntime(); // (1)\n        fxRuntime.emmit(this);\n    }\n\n    public void kill() {\n        if (fxRuntime == null) return;\n        fxRuntime.destory(true);\n        fxRuntime = null;\n    }\n}\n</code></pre> <ol> <li>if you want to modify config data. use <code>fx.createRuntime(true)</code> instead.</li> </ol> <p>Check ExampleExecutor to see how it works. </p><pre><code>FX fx = FXHelper.getFX(ResourceLocation.parse(\"photon:fire\"));\nvar executor = new ExampleExecutor(fx, level);\nexecutor.emit();\n</code></pre><p></p>"},{"location":"en/photon2/Materials/","title":"Introduction","text":""},{"location":"en/photon2/Materials/#introduction","title":"Introduction","text":"<p> Since 2.0.0 </p> <p>The Materials system provides a flexible and extensible framework for handling rendering materials in particle systems. It offers various material types with different rendering capabilities, from simple textures to complex custom shaders with HDR support and advanced effects:</p> <ul> <li>Texture Material</li> <li>Sprite Material</li> <li>Custom Shader Material</li> </ul>"},{"location":"en/photon2/Materials/#universal-configuration","title":"Universal Configuration","text":"<p>All materials share the following settings:</p> Property Type Description Default <code>material</code> <code>IMaterial</code> The specific material implementation Built-in circle texture <code>blendMode</code> <code>BlendMode</code> Controls how particles blend with the background - <code>cull</code> <code>boolean</code> Enable/disable face culling <code>true</code> <code>depthTest</code> <code>boolean</code> Enable/disable depth testing <code>true</code> <code>depthMask</code> <code>boolean</code> Enable/disable depth buffer writing <code>false</code> Texture MaterialSprite MaterialCustom Shader Material <p><code>Texture Material</code> is the most common type, designed for texture-based rendering. It supports custom textures, HDR color processing, pixel-art mode, and more. This makes it the most versatile material choice in the particle system.</p> <p>Configuration parameters:</p> Property Type Description <code>Texture</code> <code>ResourceLocation</code> Path to the texture file <code>Discard Threshold</code> <code>float</code> Alpha discard threshold <code>HDR</code> <code>Vector4f</code> HDR color vector <code>HDR Mode</code> <code>HDRMode</code> HDR blending mode <code>Pixel Art.bits</code> <code>int</code> Pixel art bit depth <p><code>Sprite Material</code> allows you to access Minecraft\u2019s registered particle textures.</p> <p>The most powerful material type, allowing you to fully control rendering, set custom samplers/uniforms, and even access particle data. In fact, all material types can be implemented via a custom shader.</p> <p>For more info, see Custom Shader Material.</p>"},{"location":"en/photon2/Materials/#special-material-block_atlas","title":"Special Material: <code>block_atlas</code>","text":"<p>What is the Block Atlas?</p> <p>See the official wiki: Block Atlas </p> <p></p> <p>The built-in <code>block_atlas</code> material is essentially a Texture Material that lets FX access Minecraft's block atlas texture.</p> <p>It\u2019s especially useful when rendering particles in model mode with <code>useBlockUV</code> enabled \u2014 the UVs can directly access the required block textures from the atlas.  </p> <p>You can also pass the block atlas as a sampler in a Custom Shader Material (see the sampler page for details).</p>"},{"location":"en/photon2/Materials/CustomShaderMaterial/","title":"Preliminary","text":""},{"location":"en/photon2/Materials/CustomShaderMaterial/#preliminary","title":"Preliminary","text":"<p> Since 2.0.0 </p> <p><code>Custom Shader Material</code> lets you fully control how rendering is performed. Photon2 allows you to write materials using Minecraft Core Shaders.  </p> <p>Warning</p> <p>This wiki is not a shader programming tutorial and will not teach Minecraft shader basics. Please refer to the linked resources below for shader knowledge.</p>"},{"location":"en/photon2/Materials/CustomShaderMaterial/#related-links","title":"\ud83d\udcda Related Links","text":"<ul> <li>Minecraft Shaders</li> <li>Minecraft Shaders (Google Doc)</li> <li>Minecraft Shaders (GitHub Wiki)</li> <li>Post-processing Shaders</li> <li>Learn OpenGL</li> </ul> <p>Photon2 and LDLib2 extend Vanilla Minecraft Shader via ExtendedShader. This extension adds:</p> <ul> <li>Geometry shader (<code>attach</code>) support</li> <li>Extra samplers and uniforms</li> </ul> <p>For details, see the ExtendedShader page.</p> <p></p>"},{"location":"en/photon2/Materials/CustomShaderMaterial/#how-to-use","title":"How to Use","text":"<ul> <li>Click <code>Select Shader</code> to choose your shader JSON.  </li> <li>Or specify the shader by its resource location.</li> <li>After modifying your shader, click <code>Reload Shader</code> to recompile and reload.</li> </ul> <p>Shader Path Requirement</p> <p>Minecraft requires all shader files (GLSL + JSON) to be placed in: </p><pre><code>assets/&lt;namespace&gt;/shaders/core/\n</code></pre><p></p>"},{"location":"en/photon2/Materials/CustomShaderMaterial/#shader-settings","title":"Shader Settings","text":"<p>The Shader Settings panel displays all custom (non-built-in) samplers and uniforms. You can edit them directly via the Inspector.</p>"},{"location":"en/photon2/Materials/CustomShaderMaterial/#sampler-curve-sampler-gradient","title":"Sampler Curve / Sampler Gradient","text":"<p>Photon2 lets you pass a Curve or Gradient to the shader. They are encoded into a 128\u00d7128 sampler so you can sample them in the shader to get values.</p> <p>For details, see ExtendedShader.</p>"},{"location":"en/photon2/Materials/CustomShaderMaterial/AdditionalGPUData/","title":"Additional GPU Data","text":""},{"location":"en/photon2/Materials/CustomShaderMaterial/AdditionalGPUData/#additional-gpu-data","title":"Additional GPU Data","text":"<p> Since 2.0.0 </p> <p>Photon2 lets you send extra per-particle vertex attributes to the GPU \u2014 such as <code>age</code>, <code>T</code>, or velocity.  </p> <p>Note: - This feature requires GPU Instance mode. - Currently supported only for Particle Emitters (support for other FX objects will come later). - Modifying vanilla vertex formats is difficult and sending large amounts of per-vertex data is inefficient, hence this separate system.</p>"},{"location":"en/photon2/Materials/CustomShaderMaterial/AdditionalGPUData/#particle-emitter","title":"Particle Emitter","text":"<p>In the <code>Particle Emitter</code> Inspector, enable Additional GPU Data and select the data fields you need.</p>"},{"location":"en/photon2/Materials/CustomShaderMaterial/AdditionalGPUData/#supported-data-types","title":"Supported Data Types","text":"Data Type Description <code>Random</code> <code>float</code> Random value form [0, 1)   <code>since 2.1.3</code> <code>T</code> <code>float</code> Normalized lifetime: <code>age / lifetime</code> <code>Age</code> <code>float</code> Particle age <code>LifeTime</code> <code>float</code> Particle lifetime <code>Position (local)</code> <code>vec3</code> Particle local position <code>Velocity</code> <code>vec3</code> Particle velocity <code>isCollided</code> <code>float</code> <code>1</code> = collided, <code>0</code> = not yet <code>Emitter T</code> <code>float</code> Emitter normalized lifetime <code>Emitter Age</code> <code>float</code> Emitter age <code>Emitter Position</code> <code>vec3</code> Emitter world position <code>Emitter Velocity</code> <code>vec3</code> Emitter velocity"},{"location":"en/photon2/Materials/CustomShaderMaterial/AdditionalGPUData/#shader-setup","title":"\ud83d\udee0 Shader Setup","text":"<p>Extra attributes are appended sequentially after the default vertex layout in the vertex shader (vsh).  </p> <p>\u26a0 Warning: - Always place new attribute declarations after <code>#moj_import &lt;photon:particle.glsl&gt;</code>. - GPU &amp; driver behavior may vary; sequential layouts may not always be reliable \u2014 use <code>layout(location = x)</code> to explicitly bind attributes when needed.</p> <p>Example: If you enable <code>T</code> and <code>Velocity</code>, add them to your shader:</p> <pre><code>#version 330 core\n\n#moj_import &lt;photon:particle.glsl&gt;\n\nin float T;\nin vec3 velocity;\n\n/*\nlayout(location = 9) in float T;       // Explicit location binding\nlayout(location = 10) in vec3 velocity;\n*/\n\nvoid main() {\n    // Use the extra attributes here...\n}\n</code></pre> <p>\u2705 Pro tip: Keep your layout indices organized \u2014 mismatches between the emitter\u2019s attribute order and shader declarations can cause rendering glitches or incorrect values.</p>"},{"location":"en/photon2/Materials/CustomShaderMaterial/ExtendedShader/","title":"ExtendedShader","text":""},{"location":"en/photon2/Materials/CustomShaderMaterial/ExtendedShader/#extendedshader","title":"ExtendedShader","text":"<p> Since 2.0.0 </p> <p>Before reading this page, make sure you understand Minecraft Core Shader.</p> <p>Photon2 and LDLib2 extend vanilla shaders with ExtendedShader, adding:</p> <ul> <li>Geometry shader (<code>attach</code>) support  </li> <li>Extra samplers and uniforms</li> </ul>"},{"location":"en/photon2/Materials/CustomShaderMaterial/ExtendedShader/#how-to-use","title":"\ud83d\udce6 How to Use","text":"<p>ExtendedShader JSON is almost the same as Vanilla. Here\u2019s an example using <code>Texture Material</code>.</p> hdr_particle.jsonparticle.vshhdr_particle.fsh <pre><code>{\n    \"vertex\": \"photon:particle\",\n    /*\n        \"geometry\": \"&lt;namespace&gt;:&lt;name&gt;.gsh\" // (1)\n    */\n    \"fragment\": \"photon:hdr_particle\",\n    \"samplers\": [\n        { \"name\": \"Sampler2\" },\n        // custom samplers\n        { \"name\": \"Texture\" }\n    ],\n    \"uniforms\": [\n        { \"name\": \"ModelViewMat\", \"type\": \"matrix4x4\", \"count\": 16, \"values\": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1] },\n        { \"name\": \"ProjMat\", \"type\": \"matrix4x4\", \"count\": 16, \"values\": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1] },\n        { \"name\": \"ColorModulator\", \"type\": \"float\", \"count\": 4, \"values\": [1,1,1,1] },\n        { \"name\": \"FogStart\", \"type\": \"float\", \"count\": 1, \"values\": [0.0] },\n        { \"name\": \"FogEnd\", \"type\": \"float\", \"count\": 1, \"values\": [1.0] },\n        { \"name\": \"FogColor\", \"type\": \"float\", \"count\": 4, \"values\": [0,0,0,0] },\n        { \"name\": \"FogShape\", \"type\": \"int\", \"count\": 1, \"values\": [0] },\n        // custom uniforms\n        { \"name\": \"DiscardThreshold\", \"type\": \"float\", \"count\": 1, \"values\": [0.01] },\n        { \"name\": \"HDR\", \"type\": \"float\", \"count\": 4, \"values\": [0,0,0,1] },\n        { \"name\": \"HDRMode\", \"type\": \"int\", \"count\": 1, \"values\": [0] }\n    ]\n}\n</code></pre> <ol> <li>Attach geometry shader if needed.</li> </ol> <pre><code>// have to use 330+\n#version 330 core\n\n#moj_import &lt;fog.glsl&gt;\n// Photon2 vertex helper\n#moj_import &lt;photon:particle.glsl&gt; \n\nuniform sampler2D Sampler2;\nuniform mat4 ModelViewMat;\nuniform mat4 ProjMat;\nuniform int FogShape;\n\nout float vertexDistance;\nout vec2 texCoord0;\nout vec4 vertexColor;\n\nvoid main() {\n    ParticleData data = getParticleData();\n    gl_Position = ProjMat * ModelViewMat * vec4(data.Position, 1.0);\n    vertexDistance = fog_distance(data.Position, FogShape);\n    texCoord0 = data.UV;\n    vertexColor = data.Color * texelFetch(Sampler2, data.LightUV / 16, 0);\n}\n</code></pre> <pre><code>#version 150\n#moj_import &lt;fog.glsl&gt;\n\nuniform sampler2D Texture;\nuniform vec4 ColorModulator;\nuniform float FogStart;\nuniform float FogEnd;\nuniform vec4 FogColor;\nuniform float DiscardThreshold;\nuniform vec4 HDR;\nuniform int HDRMode;\nuniform float Bits;\n\nin float vertexDistance;\nin vec2 texCoord0;\nin vec4 vertexColor;\n\nout vec4 fragColor;\n\nvoid main() {\n    float bits = max(Bits, 1.0);\n    vec2 uv = (floor(texCoord0 * bits) + 0.5) / bits;\n    vec4 color = texture(Texture, uv) * vertexColor * ColorModulator;\n\n    if (color.a &lt; DiscardThreshold) discard;\n\n    if (HDRMode == 0) {\n        color.rgb += HDR.a * HDR.rgb;\n    } else {\n        color.rgb *= HDR.a * HDR.rgb;\n    }\n\n    fragColor = linear_fog(color, vertexDistance, FogStart, FogEnd, FogColor);\n}\n</code></pre> <p>Difference from vanilla particle shader:</p> <ul> <li>In <code>vsh</code>, use <code>#moj_import &lt;photon:particle.glsl&gt;</code> and <code>getParticleData()</code> to fetch vertex data.</li> <li>In <code>fsh</code>, added HDR color output.</li> </ul>"},{"location":"en/photon2/Materials/CustomShaderMaterial/ExtendedShader/#handle-vertex-data","title":"\ud83c\udfaf Handle Vertex Data","text":"<p>Different FX objects and renderer settings (e.g., GPU Instance, Additional GPU Data) can change vertex type and layout.  </p> <p>Photon2 provides a helper library that, through macros, automatically parses and converts input vertex data into an accessible format.  </p> <p>More info: Vertex Format</p> <pre><code>// Requires GLSL version 330+\n#version 330 core\n\n/*\nstruct ParticleData {\n    vec3 Position;\n    vec4 Color;\n    vec2 UV;\n    ivec2 LightUV;\n    vec3 Normal;\n};\n\nParticleData getParticleData() {\n    // (1)\n}\n*/\n\nvoid main() {\n    ParticleData data = getParticleData();\n    vec3 position = data.Position;\n    vec4 color = data.Color;\n    vec2 uv = data.UV;\n    ivec2 lightUV = data.LightUV;\n    vec3 normal = data.Normal;\n}\n</code></pre> <ol> <li>Internal Implementation, check Vertex Format for details.</li> </ol> <p>Implementation Details</p> <p>In vertex shader:</p> <ol> <li>Ensure <code>#version</code> is 330 or higher.</li> <li>Import Photon2 vertex library: <code>#moj_import &lt;photon:particle.glsl&gt;</code></li> <li>Access data via <code>getParticleData()</code> \u2014 no need to handle internal layouts manually.</li> <li>Photon2 supports passing extra GPU vertex data (e.g., particle lifetime, velocity). See: Additional GPU Data</li> </ol>"},{"location":"en/photon2/Materials/CustomShaderMaterial/ExtendedShader/#extended-samplers","title":"\ud83c\udfa8 Extended Samplers","text":"<p>Photon2 provides extra built-in samplers beyond vanilla. When declared in JSON, these samplers won\u2019t appear in the Inspector.</p> Sampler Name Description Preview <code>Sampler2</code> Light Map <code>SamplerSceneColor</code> World Color <code>SamplerSceneDepth</code> World Depth <code>SamplerCurve</code> Curve Sampler - <code>SamplerGradient</code> Gradient Sampler -"},{"location":"en/photon2/Materials/CustomShaderMaterial/ExtendedShader/#samplercurve-samplergradient","title":"\ud83d\udcc8 SamplerCurve / SamplerGradient","text":"<p>Special samplers, active only if a Curve or Gradient is assigned. Photon2 encodes them into a 128\u00d7128 texture for sampling in shader.</p> <pre><code>#moj_import &lt;photon:particle_utils.glsl&gt;\n/* internal implementation\nconst float INV_TEX_SIZE = 1.0 / 128.0;\nconst float MAX_U = 1.0 - 0.5 * INV_TEX_SIZE;\n\nfloat getCurveValue(sampler2D curveTexture, int curveIndex, float x) {\n    return texture(curveTexture, vec2(clamp(x, 0.0, MAX_U), (float(curveIndex) + 0.5) * INV_TEX_SIZE)).r;\n}\n\nvec4 getGradientValue(sampler2D gradientTexture, int gradientIndex, float x) {\n    return texture(gradientTexture, vec2(clamp(x, 0.0, MAX_U), (float(gradientIndex) + 0.5) * INV_TEX_SIZE));\n}\n*/\n\nuniform sampler2D SamplerCurve;\nuniform sampler2D SamplerGradient;\n\nvoid main() {\n    float value = getCurveValue(SamplerCurve, 0, x);\n    vec4 color = getGradientValue(SamplerGradient, 0, x);\n}\n</code></pre> <p>Use:</p> <ul> <li>Import helpers:</li> </ul> <pre><code>#moj_import &lt;photon:particle_utils.glsl&gt;\n</code></pre> <ul> <li>Call <code>getCurveValue()</code> and <code>getGradientValue()</code> to retrieve values.</li> </ul>"},{"location":"en/photon2/Materials/CustomShaderMaterial/ExtendedShader/#extended-uniforms","title":"\ud83d\udee0 Extended Uniforms","text":"<p>Photon2 adds more built-in uniforms on top of vanilla core shaders.</p>"},{"location":"en/photon2/Materials/CustomShaderMaterial/ExtendedShader/#vanilla-built-in-uniforms","title":"\ud83d\udccb Vanilla Built-in Uniforms","text":"Name Type Description <code>ModelViewMat</code> mat4 Model-view matrix <code>ProjMat</code> mat4 Orthographic projection matrix (width=window, height=window, near=0.1, far=1000) <code>ScreenSize</code> vec2 Framebuffer width &amp; height (pixels) <code>ColorModulator</code> vec4 Final color multiplier <code>FogColor</code> vec4 Fog color &amp; density (alpha = density) <code>FogStart</code> float Fog start distance <code>FogEnd</code> float Fog end distance <code>FogShape</code> int Fog mode <code>GameTime</code> float Normalized day time (0\u20131, loops every 20min) <code>GlintAlpha</code> float Glint strength (0\u20131)"},{"location":"en/photon2/Materials/CustomShaderMaterial/ExtendedShader/#photon2-built-in-uniforms","title":"\ud83d\udccb Photon2 Built-in Uniforms","text":"Name Type Description <code>U_CameraPosition</code> vec3 Camera world position <code>U_InverseProjectionMatrix</code> mat4 Precomputed inverse <code>ProjMat</code> <code>U_InverseViewMatrix</code> mat4 Precomputed inverse <code>ModelViewMat</code> <code>U_ViewPort</code> vec4 ViewPort(x, y, w, h) <code>since 2.1.3.a</code>"},{"location":"en/photon2/Materials/CustomShaderMaterial/VertexFormat/","title":"Vertex Format","text":""},{"location":"en/photon2/Materials/CustomShaderMaterial/VertexFormat/#vertex-format","title":"Vertex Format","text":"<p> Since 2.0.0 </p> <p>Note: In most cases, you don\u2019t need to understand this section \u2014 Photon2 handles vertex layouts automatically. But for curious users or those with special shader needs, here\u2019s how Photon2 processes different vertex layouts and unifies them for materials.</p> <p>Photon2 supports three vertex layouts:</p> <ul> <li>Vanilla layout</li> <li>Particle Instance</li> <li>Particle Model Instance</li> </ul>"},{"location":"en/photon2/Materials/CustomShaderMaterial/VertexFormat/#vanilla-layout","title":"\ud83d\udcc4 Vanilla Layout","text":"<p>Default format used when no special GPU settings are enabled.</p> <pre><code>in vec3 Position;\nin vec4 Color;\nin vec2 UV0;\nin ivec2 UV2;\nin vec3 Normal;\n\nstruct ParticleData {\n    vec3 Position;\n    vec4 Color;\n    vec2 UV;\n    ivec2 LightUV;\n    vec3 Normal;\n};\n\nParticleData getParticleData() {\n    ParticleData data;\n    data.Position = Position;\n    data.Color = Color;\n    data.UV = UV0;\n    data.LightUV = UV2;\n    data.Normal = Normal;\n    return data;\n}\n</code></pre>"},{"location":"en/photon2/Materials/CustomShaderMaterial/VertexFormat/#particle-instance","title":"\ud83d\ude80 Particle Instance","text":"<p>Used when GPU Instance is enabled in the particle emitter. Add the following macro to the shader:</p> <pre><code>#define PARTICLE_INSTANCE\n</code></pre> <pre><code>#ifdef PARTICLE_INSTANCE\nlayout(location = 0) in vec3 aPos;\nlayout(location = 1) in vec3 iPos;\nlayout(location = 2) in vec2 iSize;\nlayout(location = 3) in vec3 iScale;\nlayout(location = 4) in vec4 iRot;\nlayout(location = 5) in vec4 iColor;\nlayout(location = 6) in vec4 iUV;\nlayout(location = 7) in int iLight;\n\nstruct ParticleData {\n    vec3 Position;\n    vec4 Color;\n    vec2 UV;\n    ivec2 LightUV;\n    vec3 Normal;\n};\n\nmat3 quatToMat(vec4 q) {\n    float x2 = q.x + q.x, y2 = q.y + q.y, z2 = q.z + q.z;\n    float xx = q.x * x2, yy = q.y * y2, zz = q.z * z2;\n    float xy = q.x * y2, xz = q.x * z2, yz = q.y * z2;\n    float wx = q.w * x2, wy = q.w * y2, wz = q.w * z2;\n\n    return mat3(\n        1 - (yy + zz), xy + wz, xz - wy,\n        xy - wz, 1 - (xx + zz), yz + wx,\n        xz + wy, yz - wx, 1 - (xx + yy)\n    );\n}\n\nParticleData getParticleData() {\n    ParticleData data;\n    mat3 rotMat = quatToMat(iRot);\n    data.Position = (rotMat * vec3(aPos.xy * iSize, aPos.z)) * iScale + iPos;\n    data.Color = iColor;\n    data.UV = mix(iUV.xy, iUV.zw, aPos.xy * 0.5 + 0.5);\n    data.LightUV = ivec2((iLight &gt;&gt; 16) &amp; 0xFFFF, iLight &amp; 0xFFFF);\n    data.Normal = normalize(rotMat * vec3(0, 0, 1));\n    return data;\n}\n#endif\n</code></pre>"},{"location":"en/photon2/Materials/CustomShaderMaterial/VertexFormat/#particle-model-instance","title":"\ud83c\udfd7 Particle Model Instance","text":"<p>Used when model mode is enabled in the emitter and GPU Instance is active. Add the following macro to the shader:</p> <pre><code>#define PARTICLE_MODEL_INSTANCE\n</code></pre> <pre><code>#ifdef PARTICLE_MODEL_INSTANCE\nlayout(location = 0) in vec3 aPos;\nlayout(location = 1) in vec2 aUV;\nlayout(location = 2) in vec3 aNormal;\nlayout(location = 3) in float aBrightness;\nlayout(location = 4) in vec3 iPos;\nlayout(location = 5) in vec3 iScale;\nlayout(location = 6) in vec4 iRot;\nlayout(location = 7) in vec4 iColor;\nlayout(location = 8) in int iLight;\n\nstruct ParticleData {\n    vec3 Position;\n    vec4 Color;\n    vec2 UV;\n    ivec2 LightUV;\n    vec3 Normal;\n};\n\nmat3 quatToMat(vec4 q) {\n    float x2 = q.x + q.x, y2 = q.y + q.y, z2 = q.z + q.z;\n    float xx = q.x * x2, yy = q.y * y2, zz = q.z * z2;\n    float xy = q.x * y2, xz = q.x * z2, yz = q.y * z2;\n    float wx = q.w * x2, wy = q.w * y2, wz = q.w * z2;\n\n    return mat3(\n        1 - (yy + zz), xy + wz, xz - wy,\n        xy - wz, 1 - (xx + zz), yz + wx,\n        xz + wy, yz - wx, 1 - (xx + yy)\n    );\n}\n\nParticleData getParticleData() {\n    ParticleData data;\n    mat3 rotMat = quatToMat(iRot);\n    vec3 centeredPos = aPos - vec3(0.5); // Centered\n    data.Position = (rotMat * (centeredPos * iScale)) + iPos;\n    data.Color = vec4(iColor.rgb * aBrightness, iColor.a);\n    data.UV = aUV;\n    data.LightUV = ivec2((iLight &gt;&gt; 16) &amp; 0xFFFF, iLight &amp; 0xFFFF);\n    data.Normal = normalize(rotMat * aNormal);\n    return data;\n}\n#endif\n</code></pre>"},{"location":"zh/","title":"LowDragMC","text":""},{"location":"zh/#lowdragmc","title":"LowDragMC","text":"<p>\u9879\u76ee\u7b80\u4ecb</p> <p></p> <p>LowDragMC \u5e76\u975e\u4e00\u4e2a\u6d3b\u8dc3\u7684\u56e2\u961f\uff0c\u800c\u662f\u4e00\u4e2a\u6c47\u96c6\u4e86\u5404\u79cd\u6709\u8da3\u6a21\u7ec4\u9879\u76ee\u7684\u96c6\u5408\u3002</p> <p>\u8fd9\u4e9b\u9879\u76ee\u7684\u552f\u4e00\u7ef4\u62a4\u8005\u662f KilaBash :) </p> <p> \u52a0\u5165\u6211\u4eec\u7684 Discord </p> <p> GitHub \u4ed3\u5e93 </p> <p>\u672c\u8d28\u4e0a\uff0c\u8fd9\u91cc\u66f4\u50cf\u662f\u6211\u672c\u4eba\u548c\u8bb8\u591a\u4f18\u79c0\u5f00\u53d1\u8005\u72ec\u7acb\u9879\u76ee\u7684\u4e00\u4e2a\u67a2\u7ebd\uff0c\u800c\u975e\u4e00\u4e2a\u7ed3\u6784\u4e25\u5bc6\u7684\u56e2\u961f\u3002</p> <p>\u6211\u4eec\u81f4\u529b\u4e8e\u5f00\u53d1\u5bcc\u6709\u521b\u610f\u7684\u6a21\u7ec4\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u81ea\u5b9a\u4e49\u80fd\u529b\uff0c\u5e76\u7279\u522b\u5173\u6ce8\u6280\u672f\u548c\u6e32\u67d3\u65b9\u9762\u3002</p>"},{"location":"zh/#_1","title":"\u6211\u4eec\u7684\u6a21\u7ec4\u5217\u8868:","text":"<ol> <li>LDLib</li> <li>LDLib2 (1.21+)</li> <li>Multiblocked &amp; Multiblocked2</li> <li>Photon &amp; Photon2</li> <li>Shimmer </li> </ol> <p>\u5982\u679c\u60a8\u9047\u5230\u4efb\u4f55\u95ee\u9898\uff0c\u6b22\u8fce\u968f\u65f6\u63d0\u4ea4 Issue\u3002</p> <p>\u5982\u679c\u60a8\u559c\u6b22\u6211\u4eec\u7684\u9879\u76ee\uff0c\u975e\u5e38\u6b22\u8fce\u901a\u8fc7 PR \u505a\u51fa\u8d21\u732e\uff01\ud83d\ude80</p>"},{"location":"zh/ldlib/","title":"LDLib \u7b80\u4ecb","text":""},{"location":"zh/ldlib/#ldlib","title":"LDLib \u7b80\u4ecb","text":"<p>LDLib \u662f\u4e00\u4e2a\u7528\u4e8e\u81ea\u5b9a\u4e49\u6e32\u67d3\u548c\u6a21\u5757\u5316 GUI \u7684\u5e93\u6a21\u7ec4\u3002</p> <p>LDLib \u63d0\u4f9b\u4e86\u591a\u79cd\u6e32\u67d3\u5668\u4ee5\u53ca\u6a21\u5757\u5316\u7684 GUI \u6846\u67b6\uff0c\u5305\u62ec\u81ea\u53d1\u5149\u7eb9\u7406\u652f\u6301\u3001\u81ea\u5b9a\u4e49\u7740\u8272\u5668\u548c\u7c92\u5b50\u7cfb\u7edf\u3002</p> <p> Discord\uff1a\u52a0\u5165\u6211\u4eec\u7684 Discord</p> <p> GitHub\uff1aLDLib \u4ee3\u7801\u4ed3\u5e93</p>"},{"location":"zh/ldlib/#ldlib2","title":"\u8fc1\u79fb\u81f3 LDLib2","text":"<p>LDLib2 \u662f\u539f\u59cb LDLib \u7684\u5b8c\u5168\u91cd\u5199\u7248\u672c\uff0c\u4ece\u5e95\u5c42\u91cd\u65b0\u8bbe\u8ba1\u4ee5\u652f\u6301\u73b0\u4ee3\u7248\u672c Minecraft <code>1.21+</code>\u3002</p>"},{"location":"zh/ldlib/java_integration/","title":"Java \u96c6\u6210","text":""},{"location":"zh/ldlib/java_integration/#java","title":"Java \u96c6\u6210","text":"<p>\u60a8\u53ef\u4ee5\u4ece\u6211\u4eec\u7684 maven \u4ed3\u5e93\u627e\u5230\u6700\u65b0\u7248\u672c\u3002</p> <pre><code>repositories{\n    maven {\n        name \"firstdarkdev\"\n        url \"https://maven.firstdark.dev/snapshots\"\n    }\n}\n</code></pre> ForgeFabricArchitectury-Common <pre><code>dependencies {\n    implementation fg.deobf(\"com.lowdragmc.ldlib:ldlib-forge-{minecraft_version}:{latest_version}\") { transitive = false }\n}\n</code></pre> <pre><code>dependencies {\n    modImplementation(\"com.lowdragmc.ldlib:ldlib-fabric-{minecraft_version}:{latest_version}\") { transitive = false }\n}\n</code></pre> <pre><code>dependencies {\n    modCompileOnly(\"com.lowdragmc.ldlib:ldlib-common-{minecraft_version}:{latest_version}\")\n}\n</code></pre>"},{"location":"zh/ldlib/SyncData/","title":"Introduction and Setup","text":""},{"location":"zh/ldlib/SyncData/#introduction-and-setup","title":"Introduction and Setup","text":"<p>Developers always feel annoying while maintain the data synchronization between the <code>Remote</code> and <code>Server</code>, as well as the data persistence. In general, dev has to write massive code about the serialization and network packet handling.</p> <p>INSTEAD: LDLib provides a powerful sync/persisted system based on annotation. You can easily handle all sync/persisted logic for your <code>BlockEntity</code> without any addional code.</p>"},{"location":"zh/ldlib/SyncData/#setup","title":"Setup","text":"<p>To use SyncData system for your blockentity, you can make your class implement <code>IManagedBlockEntity</code> and <code>IManaged</code>.</p>"},{"location":"zh/ldlib/SyncData/#iasyncautosyncblockentity","title":"<code>IAsyncAutoSyncBlockEntity</code>","text":"<p>I suggest you use <code>IAsyncAutoSyncBlockEntity</code> instead of <code>IManagedBlockEntity</code>, whihc allow you to ignore <code>markDirty</code>, everything will be done by SyncData system, you no need to care about anything else.</p> <p></p><pre><code>public class MyBlockEntity extends BlockEntity implements IAsyncAutoSyncBlockEntity, IAutoPersistBlockEntity, IManaged {\n    protected static final ManagedFieldHolder MANAGED_FIELD_HOLDER = new ManagedFieldHolder(MyBlockEntity.class);\n    private final FieldManagedStorage syncStorage = new FieldManagedStorage(this);\n\n    @Override\n    public ManagedFieldHolder getFieldHolder() {\n        return MANAGED_FIELD_HOLDER;\n    }\n\n    @Override\n    public IManagedStorage getSyncStorage() {\n        return syncStorage;\n    }\n\n    @Override\n    public void onChanged() {\n        setChanged();\n    }\n\n    @Override\n    public IManagedStorage getRootStorage() {\n        return getSyncStorage();\n    }\n}\n</code></pre> Then you can enjoy the benefits of the SyncData System!!<p></p>"},{"location":"zh/ldlib/SyncData/#iautopersistblockentity","title":"<code>IAutoPersistBlockEntity</code>","text":"<p>If you want to persisted data to nbt via <code>@Persisted</code>, also implenet this interface. </p> <p>you can save <code>@DropSaved</code> fields to ItemStack: </p><pre><code>IAutoPersistBlockEntity.saveManagedPersistentData(tag, true);\n\n// for example, block clone\n@Override\npublic ItemStack getCloneItemStack(BlockGetter level, BlockPos pos, BlockState state) {\n    ItemStack itemStack = super.getCloneItemStack(level, pos, state);\n    if (getBlockEntity(level, pos) instanceof IAutoPersistBlockEntity dropSave) {\n        dropSave.saveManagedPersistentData(itemStack.getOrCreateTag(), true);\n    }\n    return itemStack;\n}\n</code></pre><p></p> <p>also lead from itemStack:</p> <pre><code>IAutoPersistBlockEntity.loadManagedPersistentData(tag);\n\n//for example, place a block\n@Override\npublic void setPlacedBy(Level pLevel, BlockPos pPos, BlockState pState, @Nullable LivingEntity player, ItemStack pStack) {\n    if (!pLevel.isClientSide) {\n        if (getBlockEntity(level, pos) instanceof IAutoPersistBlockEntity dropSave) {\n            CompoundTag tag = pStack.getTag();\n            if (tag != null) {\n                dropSave.loadManagedPersistentData(tag);\n            }\n        }\n    }\n}\n</code></pre>"},{"location":"zh/ldlib/SyncData/#listen-managed-field-changes","title":"Listen Managed Field Changes","text":"<p>Sometimes you need to listen for a field changes, such as scheduling render updates when a field is synchronized to the client. </p><pre><code>public class MyBlockEntity extends BlockEntity implements IAsyncAutoSyncBlockEntity, IAutoPersistBlockEntity, IManaged {\n    @Persisted\n    boolean shouldRenderOverlay;\n\n    public MyBlockEntity(.....) {\n        if (LDLib.isRemote()) {\n            addSyncUpdateListener(\"shouldRenderOverlay\", this::fieldUpdated);\n        }\n    }\n\n    protected void fieldUpdated(String fieldName, Object newValue, Object oldValue) {\n        scheduleRenderUpdate();\n    }\n}\n</code></pre><p></p>"},{"location":"zh/ldlib/SyncData/#using-persisted-fields-in-initialization-code","title":"Using <code>@Persisted</code> fields in initialization code","text":"<p>Loading those fields usually happens during the chunk load, which does not guarantee a safe environment to perform any additional operations.</p> <p>If the initialization logic needs to access the values of any <code>@Persisted</code> fields, it needs to be scheduled to happen on the next tick instead:</p> <pre><code>public void onLoad() {\n    if (!LDLib.isRemote()) {\n        getLevel().getServer().tell(new TickTask(0, this::initialize));\n    }\n}\n\npublic void initialize() {\n    // init code here\n}\n</code></pre>"},{"location":"zh/ldlib/SyncData/Anotations/","title":"Anotations","text":""},{"location":"zh/ldlib/SyncData/Anotations/#anotations","title":"Anotations","text":"<p>We show all anotations and their usage in this page.</p>"},{"location":"zh/ldlib/SyncData/Anotations/#descsynced","title":"<code>@DescSynced</code>","text":"<p>Annotate a field, the value of this field (server side) will be synced to the client side (specifically, <code>remote</code>)</p> <p>if field also be annotated with <code>@LazyManaged</code>, you need to manually tell him when to synchronize</p> <pre><code>@DescSynced\nint a;\n@DescSynced @LazyManaged\nint b;\n\npublic void setA(int newValue) {\n    a = newValue; // will be synced automatically, in general\n}\n\npublic void setB(int newValue) {\n    b = newValue;\n    markDirty(\"b\"); // mannually notify chagned\n}\n</code></pre>"},{"location":"zh/ldlib/SyncData/Anotations/#persisted","title":"<code>@Persisted</code>","text":"<p>Annotate a field, the value of this field (server side) will be written/read to/from BlockEntities' nbt. </p> <p>-<code>String key()</code> represent tag name in nbt. default -- use field name instead.</p> <p></p><pre><code>@Persisted(key = \"fluidAmount\")\nint value = 100;\n@Persisted\nboolean isWater = true;\n</code></pre> its nbt looks like<p></p> <pre><code>{\n  \"fluidAmount\": 100,\n  \"isWater\": true\n}\n</code></pre>"},{"location":"zh/ldlib/SyncData/Anotations/#dropsaved","title":"<code>@DropSaved</code>","text":"<p>Annotate a field, the value of this field will be saved to <code>Itemstack</code>'s nbt when you pick(clone) / harvest this block, and loaded from <code>ItemStack</code> when you place the block in the world.</p>"},{"location":"zh/ldlib/SyncData/Anotations/#rpcmethod","title":"<code>@RPCMethod</code>","text":"<p>Annotate a method, you can send RPC packet between different sides. You are free to define the parameters of the methodas long as the parameters support sync, and send rpc anywhere in your class.</p> <pre><code>public void update() {\n    if (!isRemote()) {\n        rpcToTracking(\"rpcLogic\", Direction.UP, 100);\n        rpcToPlayer(player, \"rpcLogic\", Direction.UP, 100);\n    } else {\n        rpcToServer(\"rpcLogic\", Direction.UP, 100);\n    }\n}\n\n@RPCMethod\npublic void rpcLogic(Direction value1, int value2) {\n    // do your logic\n    if (isRemote()) {\n        System.out.println(\"Recipe rpc from server\");\n    }\n    if (isRemote()) {\n        System.out.println(\"Recipe rpc from remote\");\n    }\n}\n</code></pre> <ul> <li><code>rpcToTracking</code>: send to all remote players if this blockentity is loaded(tracked) in their remotes.</li> <li><code>rpcToPlayer</code>: send to a specfic player</li> <li><code>rpcToServer</code>: send to server.</li> </ul>"},{"location":"zh/ldlib/SyncData/Anotations/#readonlymanaged","title":"<code>@ReadOnlyManaged</code>","text":"<p>Some class types do not support instance, and they must be <code>final</code> and cannot be changed. (e.g. class type with <code>ITagSerializable</code> is read only, they can be synchronized and persisted, but cannot modify their instance references). If you want this field not to be <code>finnal</code>, it may be <code>null</code>, and the instance may changed, you can use <code>@ReadOnlyManaged</code>.</p> <pre><code>@DescSynced\n@Persisted\n@ReadOnlyManaged(onDirtyMethod = \"onCoverDirty\", serializeMethod = \"serializeCoverUid\", deserializeMethod = \"deserializeCoverUid\")\nprivate CoverBehavior up, down, north, south, west, east;\n\nprivate boolean onCoverDirty(CoverBehavior coverBehavior) {\n    if (coverBehavior != null) {\n        for (IRef ref : coverBehavior.getSyncStorage().getNonLazyFields()) {\n            ref.update();\n        }\n        return coverBehavior.getSyncStorage().hasDirtyFields();\n    }\n    return false;\n}\n\nprivate CompoundTag serializeCoverUid(CoverBehavior coverBehavior) {\n    var uid = new CompoundTag();\n    uid.putString(\"id\", GTRegistries.COVERS.getKey(coverBehavior.coverDefinition).toString());\n    uid.putInt(\"side\", coverBehavior.attachedSide.ordinal());\n    return uid;\n}\n\nprivate CoverBehavior deserializeCoverUid(CompoundTag uid) {\n    var definitionId = new ResourceLocation(uid.getString(\"id\"));\n    var side = Direction.values()[uid.getInt(\"side\")];\n    var definition = GTRegistries.COVERS.get(definitionId);\n    if (definition != null) {\n        return definition.createCoverBehavior(this, side);\n    }\n    GTCEu.LOGGER.error(\"couldn't find cover definition {}\", definitionId);\n    throw new RuntimeException();\n}\n</code></pre> <p><code>onDirtyMethod</code>: if this field has changes.</p> <p><code>serializeMethod</code>: get a unique id of this field.</p> <p><code>deserializeMethod</code>: if field's unique id changed / set from <code>null</code> to instance. create a new instance for it.</p> <p>For example, <code>CoverBehavior</code> above is a calss inherit <code>IManaged</code>(so sync annotations in CoverBehavior also works). but it's constructor need to pass <code>BlockEntity</code> into it, so SyncData system couldn't help create its instance. we can use this way to address it.</p>"},{"location":"zh/ldlib/SyncData/type/","title":"Type Support","text":""},{"location":"zh/ldlib/SyncData/type/#type-support","title":"Type Support","text":"<p>Here we list all the classes with built-in support and how to add support to a class.</p>"},{"location":"zh/ldlib/SyncData/type/#built-in-supports","title":"Built-in Supports:","text":"<ul> <li><code>Primitive</code>: <code>int</code>, <code>boolean</code>, <code>Integer</code>, <code>String</code>, ...</li> <li><code>Enum</code></li> <li><code>NBT</code></li> <li><code>FriendlyBuf</code></li> <li><code>UUID</code></li> <li><code>ResourceLocation</code></li> <li><code>Component</code></li> <li><code>Recipe</code></li> <li><code>ItemStack</code></li> <li><code>FluidStack</code>(ldlib)</li> <li><code>BlockPos</code></li> <li><code>Size</code></li> <li><code>Position</code></li> <li><code>IGuiTexture</code></li> <li><code>Array</code>: T[] value.... (if T is support)</li> <li><code>Collection</code>: Set, List.... (if T is support)</li> <li><code>ITagSerializable</code>: if class inherits from <code>ITagSerializable</code> it can also be synced/persisted but it should be a <code>final</code> field.</li> <li><code>IManaged</code>: if class inherits from <code>IManaged</code> it can also be synced/persisted but it should be a <code>final</code> field. Besides, syndata annotations in Imanaged can also be handled.</li> </ul>"},{"location":"zh/ldlib/SyncData/type/#addtional-supports","title":"Addtional Supports:","text":"<p>The easiest way add support for a new class is to create an <code>Accessor</code>. </p><pre><code>public class GTRecipeAccessor extends CustomObjectAccessor&lt;GTRecipe&gt; {\n\n    public GTRecipeAccessor() {\n        super(GTRecipe.class, true); // field class, whether this accessor is available for its children class\n    }\n\n    @Override\n    public ITypedPayload&lt;?&gt; serialize(AccessorOp accessorOp, GTRecipe gtRecipe) {\n        FriendlyByteBuf serializedHolder = new FriendlyByteBuf(Unpooled.buffer());\n        serializedHolder.writeUtf(gtRecipe.id.toString());\n        GTRecipeSerializer.SERIALIZER.toNetwork(serializedHolder, gtRecipe);\n        return FriendlyBufPayload.of(serializedHolder);\n    }\n\n    @Override\n    public GTRecipe deserialize(AccessorOp accessorOp, ITypedPayload&lt;?&gt; payload) {\n        if (payload instanceof FriendlyBufPayload buffer) {\n            var id = new ResourceLocation(buffer.getPayload().readUtf());\n            return GTRecipeSerializer.SERIALIZER.fromNetwork(id, buffer.getPayload());\n        }\n        return null;\n    }\n}\n</code></pre> register accessors <pre><code>TypedPayloadRegistries.register(Class&lt;T&gt; clazz, Supplier&lt;T&gt; factory, IAccessor accessor, int priority)\n</code></pre> * <code>clazz</code>: payload class, Generally speaking, it is the same as the payload used in the accessor. The payload here is persisted only. You can use different payloads in the accessor and check for the correct type. * <code>factory</code>: payload instance * <code>accessor</code>: accessor * <code>priority</code>: priority (if this field can be handled by multi accessors)<p></p> <p>Forge: </p><pre><code>@LDLibPlugin\npublic class LDLibPlugin implements ILDLibPlugin {\n    @Override\n    public void onLoad() {\n        // in ldlib plugin\n        register(FriendlyBufPayload.class, FriendlyBufPayload::new, new GTRecipeAccessor(), 1000);\n    }\n}\n</code></pre><p></p> <p>Fabric: add an entrypoints: </p><pre><code>\"entrypoints\": {\n    \"ldlib_pugin\": [\n      \"com.gregtechceu.gtceu.integration.ldlib.fabric.LDLibPlugin\"\n    ],\n}\n</code></pre> <pre><code>public class LDLibPlugin implements ILDLibPlugin {\n    @Override\n    public void onLoad() {\n        // in ldlib plugin\n        register(FriendlyBufPayload.class, FriendlyBufPayload::new, new GTRecipeAccessor(), 1000);\n    }\n}\n</code></pre><p></p>"},{"location":"zh/ldlib/compass/","title":"Introduction","text":""},{"location":"zh/ldlib/compass/#introduction","title":"Introduction","text":"<p>Compass is a doucament system combine both ponder-like and quest book-like system.</p> <p>You can create separate compass system for your mods and projects.</p> <p>The compass is entirely file driven and requires no java code to be written.</p> <p>The compass file should be placed in <code>/assets/project_id/compass/...</code></p>"},{"location":"zh/ldlib/compass/#structure","title":"Structure","text":"<ul> <li><code>section</code>: The classification section in comapss, similar to the list on the left in quest. All configuration files are located at <code>/assets/project_id/compass/sections/..</code>.</li> <li><code>node</code>: The node in the section is similar to a task node in questbook, and there are relationship between the nodes. All configuration files are located at <code>/assets/project_id/compass/nodes/..</code>.</li> <li><code>page</code>: The node json file points to a page, edited using <code>xml</code>. All configuration files are located at <code>/assets/project_id/compass/pages/en_us/..</code>.</li> </ul>"},{"location":"zh/ldlib/compass/#section","title":"Section","text":"<p>The section configuration is as follows: </p><pre><code>{\n  \"button_texture\": {\n    \"type\": \"item\",\n    \"res\": \"minecraft:apple\"\n  },\n  \"priority\": 1,\n  \"background_texture\": {\n    \"type\": \"resource\",\n    \"res\": \"ldlib:textures/gui/icon.png\"\n  }\n}\n</code></pre><p></p> <ul> <li><code>priority</code>: The lower the priority, the higher in the list.</li> <li><code>section_id</code>: The unique identification id of a section is determined by the path to the configuration file. For example, if a section file is located at <code>assets/gtceu/compass/sections/my_section.json</code>, then its <code>section_id</code> should be <code>gtceu:my_section</code></li> </ul>"},{"location":"zh/ldlib/compass/#node","title":"Node","text":"<p>The section configuration is as follows: </p><pre><code>{\n  \"section\": \"ldlib:my_section\",\n  \"szie\": 24,\n  \"button_texture\": {\n    \"type\": \"item\",\n    \"res\": \"minecraft:black_wool\"\n  },\n  \"position\": [50, 50],\n  \"pre_nodes\": [\n    \"ldlib:my_node_2\"\n  ],\n  \"page\": \"ldlib:my_node\",\n  \"items\": [\n    \"minecraft:apple\",\n    \"minecraft:stone\"\n  ]\n}\n</code></pre><p></p> <ul> <li><code>section</code>: section id. It indicates which section the node belongs to.</li> <li><code>size</code>: size of the node in the section view. (default by 24)</li> <li><code>position</code>: the relative coordinates in the section view. The actual display position in the screen is calculated by compass automatically.</li> <li><code>pre_nodes</code>: it refers to its parent nods. the section view will show their relations by lines. And a quick link to these relevant nodes is shown on the right panel after you open the page view.</li> <li><code>items</code>: Pressing <code>[C]</code> when you're looking hover toolips at specifc items for a while will quickly open the compass system.</li> </ul>"},{"location":"zh/ldlib/compass/#page","title":"Page","text":"<p>Pages are configured using xml, you can learn it by reading the ttuto Compass XML. The comments detail the purpose of tags in xml.</p> <p><code>Localization</code>: You can localize xml files by placing them in different language folders. such as: </p> <ul> <li>en_us: <code>assets/ldlib/compass/pages/en_us/my_page.xml</code></li> <li>zh_cn: <code>assets/ldlib/compass/pages/zh_cmn/my_page.xml</code></li> </ul>"},{"location":"zh/ldlib/compass/#example","title":"Example","text":"<p>unzip it under the <code>.minecraft/ldlib/assets/...</code> example.zip</p>"},{"location":"zh/ldlib/compass/scene/","title":"Compass Scene","text":""},{"location":"zh/ldlib/compass/scene/#compass-scene","title":"Compass Scene","text":"<p>Compass Scene is inspired by the ponder. The difference is that you don't need to write code, and all scenes can be implemented through <code>xml</code>. This page details how to configure a scene.</p>"},{"location":"zh/ldlib/compass/scene/#compass","title":"<code>&lt;compass/&gt;</code>","text":"<p>Prepare your scene settings: * <code>scene</code>: only use the scene (disable the information above) * <code>height</code>: scene height * <code>zoom</code>: zoom intial value * <code>range</code>: plane range intial value * <code>draggable</code>: whether the scene is draggable * <code>scalable</code>: whether the scene is scalable * <code>camera</code>: camera mode, <code>perspective</code> or <code>ortho</code> * <code>yaw</code>: yad intial value * <code>tick-scene</code>: should the scene try to call objects' tick functions, such as blockentities, entities, particles. </p><pre><code>&lt;page&gt;\n    &lt;compass tick-scene=\"true\"&gt; \n    &lt;!-- scene=\"true\" height=\"250\" zoom=\"28\" range=\"5\" draggable=\"false\" scalable=\"false\" camera=\"perspective\" yaw=\"25\" tick-scene=\"false\" can also be set here--&gt;\n    &lt;/compass&gt;\n&lt;/page&gt;\n</code></pre><p></p>"},{"location":"zh/ldlib/compass/scene/#frame","title":"<code>&lt;frame/&gt;</code>","text":"<p>The compass scene consists of many <code>&lt;frame&gt;</code>. <code>&lt;frame&gt;</code> refers to a chapter/section of the scene animation.</p> <p>The user can jump back and forth between frames, but not to a specific moment of animation within the frame.</p> <p><code>&lt;description/&gt;</code>: Describes the frame, shows it on hover tooltips, and has the same syntax as the <code>&lt;text/&gt;</code> label. </p><pre><code>&lt;page&gt;\n    &lt;compass&gt;\n        &lt;frame&gt;\n            &lt;description&gt;F1&lt;/description&gt;\n            &lt;!--actions--&gt;\n        &lt;/frame&gt;\n        &lt;frame&gt;\n            &lt;description&gt;F2&lt;/description&gt;\n            &lt;!--actions--&gt;\n        &lt;/frame&gt;\n        &lt;frame&gt;\n            &lt;description&gt;F3&lt;/description&gt;\n            &lt;!--actions--&gt;\n        &lt;/frame&gt;\n    &lt;/compass&gt;\n&lt;/page&gt;\n</code></pre> <p></p>"},{"location":"zh/ldlib/compass/scene/#actions","title":"Actions","text":"<p>Actions are used under the <code>&lt;frame/&gt;</code> tag. There are two types of built-in actions <code>&lt;information/&gt;</code> and <code>&lt;scene/&gt;</code>. You can register custom actions via Java if you want.</p> <p>Actions are executed sequentially, and the next action is executed if and only if the last action is completed, but this can be adjusted using the following attributes, similar to ppt animation:  - delay: delay time after last action finish. (tick)  - start-before-last: start this action while the last one is performing. </p><pre><code>&lt;frame&gt;\n    &lt;information type=\"item\" url=\"minecraft:apple\"&gt;\n        &lt;style bold=\"true\" color=\"#ffff0000\"&gt;&lt;lang key=\"ldlib.author\"/&gt;&lt;/style&gt;\n    &lt;/information&gt;\n    &lt;scene delay=\"20\"&gt;\n        &lt;add pos=\"1 0 1\" block=\"minecraft:glass\"/&gt;\n    &lt;/scene&gt;\n    &lt;scene start-before-last=\"true\"&gt;\n        &lt;add pos=\"0 0 0\" block=\"minecraft:glass\"/&gt;\n    &lt;/scene&gt;\n&lt;/frame&gt;\n</code></pre> <p></p>"},{"location":"zh/ldlib/compass/scene/#information","title":"<code>&lt;information/&gt;</code>","text":"<p>Action information: display text and images on top </p><pre><code>&lt;information&gt;\n    &lt;style bold=\"true\" color=\"#ffff0000\"&gt;&lt;lang key=\"ldlib.author\"/&gt;&lt;/style&gt;\n&lt;/information&gt;\n&lt;information type=\"item\" url=\"minecraft:apple\"&gt;\n    item\n&lt;/information&gt;\n&lt;information type=\"resource\" url=\"ldlib:textures/gui/icon.png\"&gt;\n    image\n&lt;/information&gt;\n&lt;information type=\"shader\" url=\"ldlib:fbm\"&gt;\n    shader\n&lt;/information&gt;\n</code></pre><p></p>"},{"location":"zh/ldlib/compass/scene/#scene","title":"<code>&lt;scene/&gt;</code>","text":"<p>Action scene: Animate the scene. Notice that all the operations under the <code>&lt;scene/&gt;</code> are performing simultaneously. More than one <code>&lt;scene/&gt;</code> label should be used when the operation is sequential.</p> <p>Operations: <code>&lt;add/&gt;</code>, <code>&lt;remove/&gt;</code>, <code>&lt;modify/&gt;</code>, <code>&lt;add-entity/&gt;</code>, <code>&lt;modify-entity/&gt;</code>, <code>&lt;remoge-entity/&gt;</code>, <code>&lt;rotation/&gt;</code>, <code>&lt;highlight/&gt;</code>, <code>&lt;tooltip/&gt;</code></p>"},{"location":"zh/ldlib/compass/scene/#add","title":"<code>&lt;add/&gt;</code>","text":"<pre><code>&lt;!--add block to the scene with animation--&gt;\n&lt;add pos=\"0 0 0\" block=\"minecraft:glass\"/&gt;\n&lt;!--add block with properties--&gt;\n&lt;add pos=\"1 1 0\" block=\"minecraft:campfire\"&gt;\n    &lt;properties name=\"lit\" value=\"false\"/&gt;\n&lt;/add&gt;\n&lt;!--add block with nbt for blockentity--&gt;\n&lt;add pos=\"3 0 1\" block=\"minecraft:chest\"&gt;\n    &lt;nbt&gt;\n        {\n            Items: [\n                {\n                    Count: 63b,\n                    Slot: 0b,\n                    id: \"minecraft:coal_block\"\n                }\n            ]\n        }\n    &lt;/nbt&gt;\n&lt;/add&gt;\n&lt;!--offset: animation offset, duration: animation duration--&gt;\n&lt;add pos=\"0 1 0\" offset=\"3 1 0\" duration=\"40\" block=\"minecraft:glass\"/&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/scene/#remove","title":"<code>&lt;remove/&gt;</code>","text":"<pre><code>&lt;!--remove block from the scene with animation--&gt;\n&lt;remove pos=\"0 0 0\" offset=\"3 1 0\" duration=\"40\"/&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/scene/#modify","title":"<code>&lt;modify/&gt;</code>","text":"<pre><code>&lt;!--modify a block, its kinda similar to the add label but without animation --&gt;\n&lt;modify pos=\"1 1 0\" block=\"minecraft:campfire\"&gt;\n    &lt;properties name=\"lit\" value=\"true\"/&gt;\n    &lt;nbt&gt;\n        {\n        }\n    &lt;/nbt&gt;\n&lt;/modify&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/scene/#add-entity","title":"<code>&lt;add-entity/&gt;</code>","text":"<pre><code>&lt;!-- add entities by its type name. You have to allocate it an id, or a random id will be generated--&gt;\n&lt;add-entity pos=\"0 1 0\" type=\"minecraft:player\" id=\"12\"/&gt;\n&lt;!-- add entities with tag--&gt;\n&lt;add-entity pos=\"0.5 3 0.5\" type=\"minecraft:item\" id=\"2\"&gt;\n    &lt;nbt&gt;\n        {\n            Item: {\n                Count: 64b,\n                id: \"minecraft:spruce_door\"\n            }\n        }\n    &lt;/nbt&gt;\n&lt;/add-entity&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/scene/#remove-entity","title":"<code>&lt;remove-entity/&gt;</code>","text":"<pre><code>&lt;!-- remove entity by id--&gt;\n&lt;remove-entity id=\"12\" force=\"true\"/&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/scene/#modify-entity","title":"<code>&lt;modify-entity/&gt;</code>","text":"<pre><code>&lt;!-- modify entity's tag and position by id--&gt;\n&lt;modify-entity pos=\"3 0 3\" id=\"12\"&gt;\n    &lt;nbt&gt;\n        {\n            Inventory: [\n                {\n                    Count: 1b,\n                    Slot: 0b,\n                    id: \"minecraft:stone_sword\",\n                    tag: {\n                        Damage: 0\n                    }\n                }\n            ],\n            SelectedItemSlot: 0,\n            Rotation: [\n                -30f,\n                0f\n            ]\n        }\n    &lt;/nbt&gt;\n&lt;/modify-entity&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/scene/#rotation","title":"<code>&lt;rotation/&gt;</code>","text":"<pre><code>&lt;!--rotate the scene view--&gt;\n&lt;rotation degree=\"90\"/&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/scene/#hightlight","title":"<code>&lt;hightlight/&gt;</code>","text":"<pre><code>&lt;!--hightlight a block or a face of the block--&gt;\n&lt;highlight pos=\"0 0 0\" duration=\"70\"/&gt;\n&lt;highlight pos=\"0 0 0\" face=\"UP\" duration=\"70\"/&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/scene/#tooltip","title":"<code>&lt;tooltip/&gt;</code>","text":"<pre><code>&lt;!--Point to a location in the scene and provide a description--&gt;\n&lt;tooltip pos=\"1.5 1.5 0.5\" screen-offset=\"0.6 0.5\" duration = \"60\" item=\"minecraft:flint_and_steel\"&gt;\n    &lt;!--pos: position in the scene, screen-offset: description positon in the compass view--&gt;\n    lit = &lt;style color=\"0xff00ff00\"&gt;true&lt;/style&gt;\n&lt;/tooltip&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/scene/#example","title":"Example","text":"<p>Now lets review the compass structure:</p> <p></p> <p>Lets check how do the aboves actions look like!!</p> <p></p> <pre><code>&lt;page&gt;\n    &lt;compass tick-scene=\"true\"&gt; &lt;!-- scene=\"true\" height=\"250\" zoom=\"28\" range=\"5\" draggable=\"false\" scalable=\"false\" camera=\"perspective\" yaw=\"25\" tick-scene=\"false\" can also be set here--&gt;\n        &lt;!-- Frames divide the animation into different parts, similar to how the animation is segmented in a ponder. Frames are executed sequentially.--&gt;\n        &lt;frame&gt; &lt;!-- duration=\"-1\" delay=\"0\"--&gt;\n            &lt;description&gt;\n                &lt;!-- Describes the frame, shows it on hovertooltips, and has the same syntax as the text label--&gt;\n                section 1.\n            &lt;/description&gt;\n            &lt;!--actions--&gt;\n            &lt;!--Actions are executed sequentially, and the next action is executed if and only if the last action is completed, but this can be adjusted using the following attributes, similar to ppt animation.\n                delay=\"0\"\n                start-before-last=\"false\"\n            --&gt;\n\n            &lt;!--Action information: display text and images on top--&gt;\n            &lt;information type=\"item\" url=\"minecraft:apple\"&gt;\n                &lt;style bold=\"true\" color=\"#ffff0000\"&gt;&lt;lang key=\"ldlib.author\"/&gt;&lt;/style&gt;\n            &lt;/information&gt;\n\n            &lt;!--Action scene: Animate the scene. Notice that all the operations under the &lt;scene/&gt; are happening simultaneously. More than one &lt;scene/&gt; label should be used when the operation is sequential--&gt;\n            &lt;scene start-before-last=\"true\"&gt;\n                &lt;!--add block to the scene with animation--&gt;\n                &lt;add pos=\"0 0 0\" block=\"minecraft:glass\"/&gt;\n                &lt;!--add block with properties--&gt;\n                &lt;add pos=\"1 1 0\" block=\"minecraft:campfire\"&gt;\n                    &lt;properties name=\"lit\" value=\"false\"/&gt;\n                &lt;/add&gt;\n                &lt;!--add block with nbt for blockentity--&gt;\n                &lt;add pos=\"3 0 1\" block=\"minecraft:chest\"&gt;\n                    &lt;nbt&gt;\n                        {\n                            Items: [\n                                {\n                                    Count: 63b,\n                                    Slot: 0b,\n                                    id: \"minecraft:coal_block\"\n                                }\n                            ]\n                        }\n                    &lt;/nbt&gt;\n                &lt;/add&gt;\n                &lt;add pos=\"0 1 0\" offset=\"3 1 0\" duration=\"40\" block=\"minecraft:glass\"/&gt;\n                &lt;!--offset: animation offset, duration: animation duration--&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;!--modify a block, its kinda similar to the add label but without animation --&gt;\n                &lt;modify pos=\"1 1 0\" block=\"minecraft:campfire\"&gt;\n                    &lt;properties name=\"lit\" value=\"true\"/&gt;\n                &lt;/modify&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;!--remove block from the scene with animation--&gt;\n                &lt;remove pos=\"0 0 0\" offset=\"3 1 0\" duration=\"40\"/&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;!--Point to a location in the scene and provide a description--&gt;\n                &lt;tooltip pos=\"1.5 1.5 0.5\" screen-offset=\"0.6 0.5\" duration = \"60\" item=\"minecraft:flint_and_steel\"&gt;\n                    &lt;!--pos: position in the scene, screen-offset: description positon in the compass view--&gt;\n                    lit = &lt;style color=\"0xff00ff00\"&gt;true&lt;/style&gt;\n                &lt;/tooltip&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;!--hightlight a block or a face of the block--&gt;\n                &lt;highlight pos=\"0 0 0\" duration=\"70\"/&gt;\n                &lt;highlight pos=\"0 0 0\" face=\"UP\" duration=\"70\"/&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;!--rotate the scene view--&gt;\n                &lt;rotation degree=\"90\"/&gt;\n            &lt;/scene&gt;\n        &lt;/frame&gt;\n        &lt;frame&gt;\n            &lt;description&gt;\n                &lt;!-- Describes the frame, shows it on hovertooltips, and has the same syntax as the text label--&gt;\n                section 2.\n            &lt;/description&gt;\n            &lt;scene&gt;\n                &lt;!-- add entities by its type name. You have to allocate it an id, or a random id will be generated--&gt;\n                &lt;add-entity pos=\"0 1 0\" type=\"minecraft:player\" id=\"12\"/&gt;\n                &lt;!-- add entities with tag--&gt;\n                &lt;add-entity pos=\"0.5 3 0.5\" type=\"minecraft:item\" id=\"2\"&gt;\n                    &lt;nbt&gt;\n                        {\n                            Item: {\n                                Count: 64b,\n                                id: \"minecraft:spruce_door\"\n                            }\n                        }\n                    &lt;/nbt&gt;\n                &lt;/add-entity&gt;\n            &lt;/scene&gt;\n        &lt;/frame&gt;\n        &lt;frame delay=\"40\"&gt;\n            &lt;description&gt;\n                &lt;!-- Describes the frame, shows it on hovertooltips, and has the same syntax as the text label--&gt;\n                section 3.\n            &lt;/description&gt;\n            &lt;scene&gt;\n                &lt;!-- modify entity's tag and position by id--&gt;\n                &lt;modify-entity pos=\"3 0 3\" id=\"12\"&gt;\n                    &lt;nbt&gt;\n                        {\n                            Inventory: [\n                                {\n                                    Count: 1b,\n                                    Slot: 0b,\n                                    id: \"minecraft:stone_sword\",\n                                    tag: {\n                                        Damage: 0\n                                    }\n                                }\n                            ],\n                            SelectedItemSlot: 0,\n                            Rotation: [\n                                -30f,\n                                0f\n                            ]\n                        }\n                    &lt;/nbt&gt;\n                &lt;/modify-entity&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;rotation degree=\"180\"/&gt;\n                &lt;tooltip pos=\"3 0.7 3\" duration=\"60\" screen-offset=\"0.2 0.5\"&gt;\n                    Carry a sword to fight!\n                &lt;/tooltip&gt;\n            &lt;/scene&gt;\n            &lt;scene&gt;\n                &lt;!-- remove entity by id--&gt;\n                &lt;remove-entity id=\"12\" force=\"true\"/&gt;\n            &lt;/scene&gt;\n        &lt;/frame&gt;\n    &lt;/compass&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/xml/","title":"Compass XML","text":""},{"location":"zh/ldlib/compass/xml/#compass-xml","title":"Compass XML","text":"<p>We will breifly inllustrates labels in the xml.</p>"},{"location":"zh/ldlib/compass/xml/#generic-attributes","title":"generic attributes","text":"<pre><code>&lt;page&gt;\n  &lt;xxx top-margin=\"10\" bottom-margin=\"10\" left-margin=\"10\", right-margin=\"10\"&gt;\n  &lt;!--margin is a generic property that represents the amount of space reserved between the previous component and the next component. The default is 0.--&gt;\n  &lt;/xxx&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/xml/#header","title":"Header","text":"<pre><code>&lt;page&gt;\n    &lt;h1&gt;Title H1 &lt;lang key=\"ldlib.author\"/&gt;&lt;/h1&gt; &lt;!-- label &lt;lang/&gt; can be used to load text according to the lang key --&gt;\n    &lt;h2&gt;Title H2&lt;/h2&gt;\n    &lt;h3&gt;Title H3&lt;/h3&gt;\n    &lt;!-- attributes--&gt;\n    &lt;h1 space=\"2\" font-size=\"9\" isCenter=\"false\" isShadow=\"true\"&gt; &lt;!-- space: row spacing--&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/xml/#blank","title":"Blank","text":"<pre><code>&lt;page&gt;\n    &lt;br height=\"20\"/&gt; &lt;!--blank height--&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/xml/#text","title":"Text","text":"<pre><code>&lt;page&gt;\n    &lt;text&gt;\n        Lorem ipsum dolor sit amet, consectetur adipisicing elit,\n        &lt;style underlined=\"true\" link=\"ldlib:test_node2\"&gt;\n            link to node2\n        &lt;/style&gt;\n        &lt;style underlined=\"true\" url-link=\"https://github.com/Low-Drag-MC/LDLib-Architectury\"&gt;\n            link to url\n        &lt;/style&gt;\n        sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n        &lt;style color=\"#ffff0000\" hover-info=\"hover tooltips\"&gt;\n            Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi\n            ut aliquip ex ea commodo consequat.\n        &lt;/style&gt;\n        &lt;br/&gt;\n        Duis aute irure dolor in reprehenderit\n        in voluptate velit esse cillum dolore eu fugiat nulla pariatur.\n    &lt;/text&gt;\n    &lt;!-- attributes--&gt;\n    &lt;text space=\"2\" isCenter=\"false\"&gt;\n        &lt;br/&gt; &lt;!--new line--&gt;\n        &lt;lang key=\"ldlib.author\"/&gt; &lt;!-- used to load text according to the lang key --&gt;\n        &lt;style color=\"#ffffffff\" bold=\"false\" italic=\"false\" underlined=\"false\" strikethrough=\"false\" obfuscated=\"false\"&gt; \n            &lt;!--The style of the text in the range--&gt;\n        &lt;/style&gt;\n        &lt;style hover-info=\"hover tooltips\" link=\"ldlib:my_node_2\"&gt; \n            &lt;!--link will jump to the given node while click--&gt;\n        &lt;/style&gt;\n    &lt;/text&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/xml/#image","title":"Image","text":"<pre><code>&lt;page&gt;\n    &lt;image width=\"160\" height=\"40\" type=\"resource\" top-margin=\"10\" bottom-margin=\"10\" url=\"gtceu:textures/gt_logo_long.png\" hover-info=\"tooltips\"&gt;\n        &lt;!-- same as the text label here --&gt;\n        description of the image.\n    &lt;/image&gt;\n    &lt;image width=\"100\" height=\"100\" type=\"item\" item=\"minecraft:stone\"/&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/xml/#recipe","title":"Recipe","text":"<pre><code>&lt;page&gt;\n    &lt;recipe id=\"minecraft:barrel\"/&gt; &lt;!--recipe id--&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/xml/#ingredient","title":"Ingredient","text":"<pre><code>&lt;page&gt;\n    &lt;ingredient&gt;\n    &lt;item item=\"minecraft:stick\" count=\"3\"/&gt;\n    &lt;item tag=\"minecraft:ores\" forge-tag=\"forge:ores/gold\" fabric-tag=\"c:ores/gold\" count=\"64\"/&gt;\n    &lt;fluid fluid=\"minecraft:lava\" count=\"64000\"/&gt;\n    &lt;/ingredient&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/xml/#scene","title":"Scene","text":"<pre><code>&lt;page&gt;\n    &lt;scene height=\"300\"&gt; &lt;!-- draggable=\"false\" scalable=\"false\" zoom=\"6\" camera=\"perspective\"  yaw=\"25\"can also be set here--&gt;\n    &lt;page&gt;\n        &lt;block pos=\"0 0 0\" block=\"minecraft:glass\"/&gt;\n        &lt;block pos=\"1 0 0\" block=\"minecraft:dirt\" item-tips=\"true\"/&gt;\n        &lt;block pos=\"0 0 1\" block=\"minecraft:furnace\"&gt;hover info&lt;/block&gt;\n    &lt;/page&gt;\n         &lt;page&gt;\n        &lt;block pos=\"0 0 0\" block=\"minecraft:redstone\"/&gt;\n        &lt;block pos=\"1 0 0\" block=\"minecraft:wool\" item-tips=\"true\"/&gt;\n        &lt;block pos=\"0 0 1\" block=\"minecraft:grass\"&gt;hover info&lt;/block&gt;\n    &lt;/page&gt;\n    &lt;/scene&gt;\n&lt;/page&gt;\n</code></pre>"},{"location":"zh/ldlib/compass/xml/#storyline-scene","title":"Storyline Scene","text":"<p>Please refer to the page Compass Scene</p>"},{"location":"zh/ldlib/compass/xml/#useful-command-to-get-the-nbt-of-the-blockentityentity","title":"Useful command to get the nbt of the blockentity/entity.","text":"<p>It's inevitable that when you're writing a scene you'll come across some blocks/entities that require nbt to be set. </p> <p>while you can get it by <code>/data get block/entity</code> you can't copy it in the game.</p> <p>Ldlib provides a command to help you get the nbt of a block/entity in your game and copy it to the clipboard.</p> <p><code>/ldlib copy_block_tag [pos]</code> / <code>/ldlib copy_entity_tag [entity_selector]</code>: chat panel will show the tag when you execute this command. and you mouse click the <code>[Copy to clipboard]</code> in the chat panel to copy to the clipboard.</p>"},{"location":"zh/ldlib/ui/","title":"Introduction","text":""},{"location":"zh/ldlib/ui/#introduction","title":"Introduction","text":"<p>LDLib provides a wide range of ready-to-use components, allowing you to create GUI with advanced UI controls. Additionally, LDLib offers a visual editor, enabling you to design UIs without writing a single line of code.  </p> <p>We provide two methods for creating UI:  </p> <ol> <li>Java / KubeJS </li> <li>UI Editor </li> </ol> <p>Of course, you can also combine both methods. For example, you can use the <code>UI Editor</code> to design the UI and then use <code>Java</code> or <code>KubeJS</code> to add interaction logic\u2014which is our recommended approach.</p> <p>Refer to the Widgets to check all widgets in details.</p>"},{"location":"zh/ldlib/ui/code/","title":"Get Started","text":""},{"location":"zh/ldlib/ui/code/#get-started","title":"Get Started","text":"<p>Creating UI using <code>Java</code> and <code>KubeJS</code> is mostly the same. This page will introduce the basic workflow of creating and using a UI.  </p> <p>The entire UI creation and usage pipeline consists of the following steps:</p> <ol> <li> <p>Create UI widget and layout (1)</p> <ol> <li> Create <code>buttons</code> and <code>item slots</code>, set their positions...</li> </ol> </li> <li> <p>Bind UI functional logic (1)</p> <ol> <li> Add logic to be executed when a <code>button</code> is clicked, bind <code>inventory</code> to <code>item slots</code>...</li> </ol> </li> <li> <p>Display the UI (1)</p> <ol> <li> Open the <code>GUI</code> when <code>right-clicking</code> an item, open the <code>GUI</code> when <code>right-clicking</code> a block...</li> </ol> </li> </ol> <p>Technically, the <code>UI function binding</code> and <code>UI widget creation</code> processes happen simultaneously, as many controls provide constructors that bind functions at the same time.  </p> <p>On this page, we separate step 1 and step 2 in the code examples to provide a clearer understanding of how the <code>UI</code> works.</p>"},{"location":"zh/ldlib/ui/code/#create-ui-widgets-and-layout","title":"Create <code>UI</code> Widgets and Layout","text":"<p>Let's begin with a <code>WigetGroup</code>, which is a container of child widgtes. Therefore, we create a <code>WidgetGroup</code> as a root widget. Check all widgets <code>here</code>.</p> <p>Then, we add a <code>Label</code> and a <code>Button</code> into it.</p> JavaKubeJS <pre><code>public WidgetGroup createUI() {\n    // create a root container\n    var root = new WidgetGroup();\n    root.setSize(100, 100);\n    root.setBackground(ResourceBorderTexture.BORDERED_BACKGROUND);\n\n    // create a label and a button\n    var label = new LabelWidget();\n    label.setSelfPosition(20, 20);\n    label.setText(\"Hello, World!\");\n    var button = new ButtonWidget();\n    button.setSelfPosition(20, 60);\n    button.setSize(60, 20);\n    // prepare button textures\n    var backgroundImage = ResourceBorderTexture.BUTTON_COMMON;\n    var hoverImage = backgroundImage.copy().setColor(ColorPattern.CYAN.color);\n    var textAbove = new TextTexture(\"Click me!\");\n    button.setButtonTexture(backgroundImage, textAbove);\n    button.setClickedTexture(hoverImage, textAbove);\n\n    // add the label and button to the root container\n    root.addWidgets(label, button);\n    return root;\n}\n</code></pre> <pre><code>function createUI() {\n    // create a root container\n    let root = new WidgetGroup();\n    root.setSize(100, 100);\n    root.setBackground(ResourceBorderTexture.BORDERED_BACKGROUND);\n\n    // create a label and a button\n    let label = new LabelWidget();\n    label.setSelfPosition(20, 20);\n    label.setText(\"Hello, World!\");\n    let button = new ButtonWidget();\n    button.setSelfPosition(20, 60);\n    button.setSize(60, 20);\n    // prepare button textures\n    let backgroundImage = ResourceBorderTexture.BUTTON_COMMON;\n    let hoverImage = backgroundImage.copy().setColor(ColorPattern.CYAN.color);\n    let textAbove = new TextTexture(\"Click me!\");\n    button.setButtonTexture(backgroundImage, textAbove);\n    button.setClickedTexture(hoverImage, textAbove);\n\n    // add the label and button to the root container\n    root.addWidgets(label, button);\n    return root;\n}\n</code></pre>      Your browser does not support video."},{"location":"zh/ldlib/ui/code/#bind-ui-functional-logic","title":"Bind UI functional logic","text":"<p>After the creation of the ui, we should implement the logic of the ui. For example, we want to click the button to change the label text.</p> JavaKubeJS <pre><code>public WidgetGroup createUI() {\n    // creation of the ui\n    // ....\n\n    // click logic\n    AtomicInteger counter = new AtomicInteger(0);\n    button.setOnPressCallback(clickData -&gt; {\n        label.setText(\"Clicked \" + counter.incrementAndGet() + \" times!\");\n    });\n\n    return root;\n}\n</code></pre> <pre><code>function createUI() {\n    // creation of the ui\n    // ....\n\n    // click logic\n    let counter = 0;\n    button.setOnPressCallback(clickData =&gt; {\n        counter++;\n        label.setText(\"Clicked \" + counter + \" times!\");\n    });\n\n    return root;\n}\n</code></pre>      Your browser does not support video."},{"location":"zh/ldlib/ui/code/#display-the-ui","title":"Display the UI","text":"<p>Now, let's display the ui we create! We need to specify a <code>UI Factory</code> to display the ui, which maintains the lifecycle of the ui. </p> <p>There are four steps:</p> <ol> <li><code>open ui</code></li> <li><code>create UI in server side</code></li> <li><code>notify to open UI</code></li> <li><code>create UI in remote side</code></li> </ol> <pre><code>sequenceDiagram\n  autonumber\n  Note left of Server: 1. open UI\n  Note left of Server: 2. create UI in server side\n  Server-&gt;&gt;Remote: 3. notify to open UI\n  Note right of Remote: 4. create UI in remote side\n</code></pre> <p><code>UI Factory</code> will help handle the <code>step 3</code>. Therefore, user should define WHEN to trigger <code>step 1</code>, and WHAT to be createed in <code>step 2</code> and <code>step 4</code>. In general, the UI created on the server side and the remote side is the same in most cases.</p> <p>LDLib provides two built-in factories:</p> <ol> <li>Block Entity UI Factory</li> <li>Held Item UI Factory</li> </ol>"},{"location":"zh/ldlib/ui/code/#block-entity-ui-factory","title":"Block Entity UI Factory","text":"<p>This factory allows user to open the ui from a block.</p>"},{"location":"zh/ldlib/ui/code/#java","title":"Java","text":"<ol> <li> <p>Java user should implement <code>IUIHolder.Block</code> for your own <code>BlockEntity</code> and implement the method <code>createUI(Player entityPlayer)</code>.</p> </li> <li> <p>Call the method <code>BlockEntityUIFactory.INSTANCE.openUI()</code> when you want to open the ui.</p> </li> </ol>"},{"location":"zh/ldlib/ui/code/#kubejs","title":"KubeJS","text":"<p>KubeJS user can do the same thing in an easy way. User can even open the ui for the block (without entity), but less accessibility compared with Java.</p> <ol> <li>KubeJS user should use <code>LDLibUI.block(ui_name, e =&gt; {})</code> to create the ui by the given <code>ui_name</code>.</li> <li>Call the method <code>BlockUIFactory.INSTANCE.openUI(player, pos, ui_name)</code> when you want to open the ui.</li> </ol> JavaKubeJS <pre><code>public class TestBlockEntity extends BlockEntity implements IUIHolder {\n\n    public void onPlayerUse(Player player) {\n        // step 1 here.\n        if (player instanceof ServerPlayer serverPlayer) {\n            BlockEntityUIFactory.INSTANCE.openUI(this, serverPlayer);\n        }\n    }\n\n    private WidgetGroup createUI() {\n        // ....\n    }\n\n    @Override\n    public ModularUI createUI(Player entityPlayer) {\n        // step 2 and step 4 here \n        return new ModularUI(createUI(), this, entityPlayer);\n    }\n}\n</code></pre> <pre><code>// server script\n\nBlockEvents.rightClicked('test_block_ui', event =&gt; { \n    // step 1 here.\n    BlockUIFactory.INSTANCE.openUI(event.player, event.block.pos);\n})\n\nfunction createUI() {\n    // ....\n}\n\nLDLibUI.block(\"test_block_ui\", e =&gt; { \n    // step 2 and step 4 here \n\n    // let level = e.level\n    // let pos = e.pos\n    // let block = e.block\n    // let player = e.player\n\n    var ui = createUI();\n    e.success(ui);\n})\n</code></pre>"},{"location":"zh/ldlib/ui/code/#held-item-ui-factory","title":"Held Item UI Factory","text":"<p>This factory allows user to open the ui from the held item.</p>"},{"location":"zh/ldlib/ui/code/#java_1","title":"Java","text":"<ol> <li> <p>Java user should implement <code>IUIHolder.Item</code> for your own <code>Item</code> and implement the method <code>createUI(Player entityPlayer, HeldItemUIFactory.HeldItemHolder holder)</code>.</p> </li> <li> <p>Call the method <code>HeldItemUIFactory.INSTANCE.openUI()</code> when you want to open the ui.</p> </li> </ol>"},{"location":"zh/ldlib/ui/code/#kubejs_1","title":"KubeJS","text":"<p>KubeJS user can do the same thing in an easy way. User can even open the ui for the block (without entity), but less accessibility compared with Java.</p> <ol> <li>KubeJS user should use <code>LDLibUI.item(ui_name, e =&gt; {})</code> to create the ui by the given <code>ui_name</code>.</li> <li>Call the method <code>ItemUIFactory.INSTANCE.openUI(player, hand, ui_name)</code> when you want to open the ui.</li> </ol> JavaKubeJS <pre><code>public class TestItem implements IUIHolder.Item {\n    @Override\n    public InteractionResult useOn(UseOnContext context) {\n        // step 1 here.\n        if (context.getPlayer() instanceof ServerPlayer serverPlayer) {\n            HeldItemUIFactory.INSTANCE.openUI(serverPlayer, context.getHand());\n        }\n        return InteractionResult.SUCCESS;\n    }\n\n    private WidgetGroup createUI() {\n        // ....\n    }\n\n    @Override\n    public ModularUI createUI(Player entityPlayer, HeldItemUIFactory.HeldItemHolder holder) {\n        // step 2 and step 4\n        return new ModularUI(createUI(), holder, entityPlayer);\n    }\n}\n</code></pre> <pre><code>// server script\n\nItemEvents.firstRightClicked('minecraft:stick', event =&gt; {\n    // step 1 here.\n    ItemUIFactory.INSTANCE.openUI(event.player, event.hand, \"test_item_ui\");\n})\n\nfunction createUI() {\n    // ....\n}\n\nLDLibUI.item(\"test_item_ui\", e =&gt; {\n    // step 2 and step 4\n\n    // let player = e.player\n    // let hand = e.hand\n    // let held = e.held\n\n    var ui = createUI();\n    e.success(ui);\n})\n</code></pre>      Your browser does not support video."},{"location":"zh/ldlib/ui/code/load_ui_file/","title":"Load UI from file","text":""},{"location":"zh/ldlib/ui/code/load_ui_file/#load-ui-from-file","title":"Load UI from file","text":"<p>Through creating UI by code has more flexibility, using <code>UI Editor</code> instead is more intuitive and easy for novice. The ideal approach is to design the ui layout via the Editor and bind UI functional logic via code.</p> <p>before reading</p> <p>Make sure you has basic knowledge of how to create the ui via <code>UI Editor</code> and prepare a ui file for loading.</p> <p>Loading ui file is realy easy, just few lines code. We suppose you have a ui file with the location <code>.minecraft/ldlib/assets/ldlib/projects/ui/test_ui.ui</code>.</p> <p></p> <p>You can get a <code>creator</code> via the method <code>UIProject.loadUIFromFile(location)</code>. <code>creator</code> caches the resources to speed up the creation process which should be stored for the same project loading.</p> <p>Warning</p> <p><code>creator</code> may be null if the ui file counld not be loaded.</p> JavaKubeJS <pre><code>public WidgetGroup createUI() {\n    var creator = UIProject.loadUIFromFile(new ResourceLocation(\"ldlib:test_ui\"));\n    // creator caches the resources to speed up the creation process.\n    // you should better store it for the same project loading.\n    return creator.get();\n}\n</code></pre> <pre><code>function createUI() {\n    let creator = UIProject.loadUIFromFile(\"ldlib:test_ui\");\n    // creator caches the resources to speed up the creation process.\n    // you should better store it for the same project loading.\n    return creator.get();\n}\n</code></pre>"},{"location":"zh/ldlib/ui/code/load_ui_file/#bind-ui-functional-logic","title":"Bind UI functional logic","text":"<p>After loading the ui project, we should bind the functional logic for it. First, we should get the instance of the widget. LDLib provide two methods to obtain it:</p> <ol> <li><code>List&lt;Widget&gt; getWidgetsById(regex)</code>: Get all widgets based on a regex pattern and return all of them.</li> <li><code>Widget getFirstWidgetById(regex)</code>: Get all widgets based on a regex pattern and return the first one.</li> </ol> <p>Note</p> <p>Do not forget to assign an <code>id</code> to the widgets you need. </p> JavaKubeJS <pre><code>public WidgetGroup createUI() {\n    var creator = UIProject.loadUIFromFile(new ResourceLocation(\"ldlib:test_ui.ui\"));\n    // creator caches the resources to speed up the creation process.\n    // you should better store it for the same project loading.\n    var root = creator.get();\n\n    var button = root.getFirstWidgetById(\"button_id\");\n    if (button != null) {\n        button.setOnPressCallback(clickData -&gt; {\n            System.out.println(clickData.isShiftClick);\n        });\n    }\n\n    return root;\n}\n</code></pre> <pre><code>function createUI() {\n    let creator = UIProject.loadUIFromFile(\"ldlib:test_ui.ui\");\n    // creator caches the resources to speed up the creation process.\n    // you should better store it for the same project loading.\n    let root = creator.get();\n\n    let button = root.getFirstWidgetById(\"button_id\");\n    if (button != null) {\n        button.setOnPressCallback(clickData =&gt; {\n            console.log(clickData.isShiftClick);\n        });\n    }\n\n    return root;\n}\n</code></pre>"},{"location":"zh/ldlib/ui/textures/","title":"Preliminary","text":""},{"location":"zh/ldlib/ui/textures/#preliminary","title":"Preliminary","text":"<p><code>GUI Texture</code> is widely used for background setup, image dispaly, etc. LDLib provides lots of different textures. Textures have some generic functions.</p>"},{"location":"zh/ldlib/ui/textures/#basic-properties","title":"Basic Properties","text":"Field Description xOffset Horizontal offset yOffset Vertical offset scale Scale factor (default is 1) rotation Rotation angle in degrees"},{"location":"zh/ldlib/ui/textures/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/textures/#rotate","title":"rotate","text":"<p>Sets the rotation angle.</p> Java / KubeJS <pre><code>texture.rotate(45);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/#scale","title":"scale","text":"<p>Sets the scale factor.</p> Java / KubeJS <pre><code>texture.scale(1.5);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/#transform","title":"transform","text":"<p>Sets the horizontal and vertical offset.</p> Java / KubeJS <pre><code>texture.transform(10, 20);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/#copy","title":"copy","text":"<p>Creates a copy of the texture.</p> Java / KubeJS <pre><code>var copiedTexture = texture.copy();\n</code></pre>"},{"location":"zh/ldlib/ui/textures/animation/","title":"AnimationTexture","text":""},{"location":"zh/ldlib/ui/textures/animation/#animationtexture","title":"AnimationTexture","text":""},{"location":"zh/ldlib/ui/textures/animation/#basic-properties","title":"Basic Properties","text":"Field Description imageLocation The resource location for the image cellSize The size of each cell in the texture grid from The starting cell index for animation to The ending cell index for animation animation The animation speed value color The color overlay applied to the texture"},{"location":"zh/ldlib/ui/textures/animation/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/textures/animation/#settexture","title":"setTexture","text":"<p>Sets the texture</p> Java / KubeJS <pre><code>animationTexture.setTexture(\"ldlib:textures/gui/particles.png\");\n</code></pre>"},{"location":"zh/ldlib/ui/textures/animation/#setcellsize","title":"setCellSize","text":"<p>Sets the cell size. Refer to how many cells does the animation texture need to be divided into (side length).</p> Java / KubeJS <pre><code>animationTexture.setCellSize(8);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/animation/#setanimation","title":"setAnimation","text":"<p>Sets the animation range <code>from</code> which cell <code>to</code> which cell.</p> Java / KubeJS <pre><code>animationTexture.setAnimation(32, 44);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/animation/#setanimation_1","title":"setAnimation","text":"<p>Sets the animation speed. Tick time between cells.</p> Java / KubeJS <pre><code>animationTexture.setAnimation(1);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/animation/#setcolor","title":"setColor","text":"<p>Sets the texture color.</p> Java / KubeJS <pre><code>animationTexture.setColor(0xff000000);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/border/","title":"ColorBorderTexture","text":""},{"location":"zh/ldlib/ui/textures/border/#colorbordertexture","title":"ColorBorderTexture","text":""},{"location":"zh/ldlib/ui/textures/border/#basic-properties","title":"Basic Properties","text":"Field Description color The color applied to the border border The border width radiusLTInner Top-left inner corner radius radiusLBInner Bottom-left inner corner radius radiusRTInner Top-right inner corner radius radiusRBInner Bottom-right inner corner radius radiusLTOuter Top-left outer corner radius radiusLBOuter Bottom-left outer corner radius radiusRTOuter Top-right outer corner radius radiusRBOuter Bottom-right outer corner radius"},{"location":"zh/ldlib/ui/textures/border/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/textures/border/#setborder","title":"setBorder","text":"<p>Sets the border width.</p> Java / KubeJS <pre><code>colorBorderTexture.setBorder(5);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/border/#setcolor","title":"setColor","text":"<p>Sets the border color.</p> Java / KubeJS <pre><code>colorBorderTexture.setColor(0xff00ff);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/border/#setradius","title":"setRadius","text":"<p>Sets uniform inner and outer radii based on the provided radius and current border.</p> Java / KubeJS <pre><code>colorBorderTexture.setRadius(10);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/border/#setleftradius","title":"setLeftRadius","text":"<p>Sets the left-side radii for both inner and outer corners.</p> Java / KubeJS <pre><code>colorBorderTexture.setLeftRadius(8);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/border/#setrightradius","title":"setRightRadius","text":"<p>Sets the right-side radii for both inner and outer corners.</p> Java / KubeJS <pre><code>colorBorderTexture.setRightRadius(8);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/border/#settopradius","title":"setTopRadius","text":"<p>Sets the top-side radii for both inner and outer corners.</p> Java / KubeJS <pre><code>colorBorderTexture.setTopRadius(8);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/border/#setbottomradius","title":"setBottomRadius","text":"<p>Sets the bottom-side radii for both inner and outer corners.</p> Java / KubeJS <pre><code>colorBorderTexture.setBottomRadius(8);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/group/","title":"GuiTextureGroup","text":""},{"location":"zh/ldlib/ui/textures/group/#guitexturegroup","title":"GuiTextureGroup","text":""},{"location":"zh/ldlib/ui/textures/group/#basic-properties","title":"Basic Properties","text":"Field Description textures An array of textures used in the group"},{"location":"zh/ldlib/ui/textures/group/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/textures/group/#settextures","title":"setTextures","text":"<p>Sets the textures used in the group.</p> Java / KubeJS <pre><code>guiTextureGroup.setTextures(texture1, texture2);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/group/#setcolor","title":"setColor","text":"<p>Sets the color for all textures in the group.</p> Java / KubeJS <pre><code>guiTextureGroup.setColor(0xff00ff);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/itemstack/","title":"ItemStackTexture","text":""},{"location":"zh/ldlib/ui/textures/itemstack/#itemstacktexture","title":"ItemStackTexture","text":"<p><code>ItemStackTexture</code> will display items in a loop.</p>"},{"location":"zh/ldlib/ui/textures/itemstack/#basic-properties","title":"Basic Properties","text":"Field Description items Array of item stacks used by the texture color Color overlay applied to the item stack texture"},{"location":"zh/ldlib/ui/textures/itemstack/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/textures/itemstack/#setitems","title":"setItems","text":"<p>Sets the items.</p> Java / KubeJS <pre><code>itemStackTexture.setItems(item1, item2);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/itemstack/#setcolor","title":"setColor","text":"<p>Sets the color overlay for the item stack texture.</p> Java / KubeJS <pre><code>itemStackTexture.setColor(0xffff00ff);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/progress/","title":"ProgressTexture","text":""},{"location":"zh/ldlib/ui/textures/progress/#progresstexture","title":"ProgressTexture","text":"<p>The <code>ProgressTexture</code> is used to render a progress bar texture that fills according to a specified direction. It combines an empty and a filled texture area to visually represent progress.</p>"},{"location":"zh/ldlib/ui/textures/progress/#basic-properties","title":"Basic Properties","text":"Field Description fillDirection The direction in which the progress fills emptyBarArea Texture used for the empty portion of the progress bar filledBarArea Texture used for the filled portion of the progress bar progress The current progress value (0.0 to 1.0)"},{"location":"zh/ldlib/ui/textures/progress/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/textures/progress/#settexture","title":"setTexture","text":"<p>Sets the progress textures. <code>emptyBarArea</code> and <code>filledBarArea</code> can any type of the <code>GUi Texture</code>.</p> Java / KubeJS <pre><code>progressTexture.setTexture(emptyBarArea, filledBarArea);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/progress/#setprogress","title":"setProgress","text":"<p>Sets the progress value.</p> Java / KubeJS <pre><code>progressTexture.setProgress(0.75);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/progress/#setfilldirection","title":"setFillDirection","text":"<p>Sets the fill direction for the progress bar.</p> Java / KubeJS <pre><code>progressTexture.setFillDirection(ProgressTexture.FillDirection.RIGHT_TO_LEFT);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/rect/","title":"ColorRectTexture","text":""},{"location":"zh/ldlib/ui/textures/rect/#colorrecttexture","title":"ColorRectTexture","text":""},{"location":"zh/ldlib/ui/textures/rect/#basic-properties","title":"Basic Properties","text":"Field Description color The color applied to the rectangle radiusLT Top-left corner radius radiusLB Bottom-left corner radius radiusRT Top-right corner radius radiusRB Bottom-right corner radius"},{"location":"zh/ldlib/ui/textures/rect/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/textures/rect/#setradius","title":"setRadius","text":"<p>Sets a uniform radius for all corners.</p> Java / KubeJS <pre><code>colorRectTexture.setRadius(10);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/rect/#setleftradius","title":"setLeftRadius","text":"<p>Sets the left-side radii (top and bottom) for the rectangle.</p> Java / KubeJS <pre><code>colorRectTexture.setLeftRadius(8);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/rect/#setrightradius","title":"setRightRadius","text":"<p>Sets the right-side radii (top and bottom) for the rectangle.</p> Java / KubeJS <pre><code>colorRectTexture.setRightRadius(8);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/rect/#settopradius","title":"setTopRadius","text":"<p>Sets the top-side radii (left and right) for the rectangle.</p> Java / KubeJS <pre><code>colorRectTexture.setTopRadius(8);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/rect/#setbottomradius","title":"setBottomRadius","text":"<p>Sets the bottom-side radii (left and right) for the rectangle.</p> Java / KubeJS <pre><code>colorRectTexture.setBottomRadius(8);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/resource/","title":"ResourceTexture","text":""},{"location":"zh/ldlib/ui/textures/resource/#resourcetexture","title":"ResourceTexture","text":"<p>The <code>ResourceTexture</code> class extends <code>TransformTexture</code> to render textures based on a resource location. It supports configurable offsets, dimensions, and color overlays.</p>"},{"location":"zh/ldlib/ui/textures/resource/#basic-properties","title":"Basic Properties","text":"Field Description imageLocation The resource location of the texture image offsetX Horizontal offset of the texture (default is 0) offsetY Vertical offset of the texture (default is 0) imageWidth Width factor of the texture (default is 1) imageHeight Height factor of the texture (default is 1) color Color overlay applied to the texture (default is -1)"},{"location":"zh/ldlib/ui/textures/resource/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/textures/resource/#createtexture","title":"createTexture","text":"<p>Create a texture from a resource location.</p> Java / KubeJS <pre><code>// Using float parameters\nvar texture = new ResourceTexture(\"ldlib:textures/gui/icon.png\");\n</code></pre>"},{"location":"zh/ldlib/ui/textures/resource/#getsubtexture","title":"getSubTexture","text":"<p>Returns a sub-texture of the current texture.</p> Java / KubeJS <pre><code>// Using float parameters\nvar subTexture = resourceTexture.getSubTexture(0.2, 0.2, 0.5, 0.5);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/resourceborder/","title":"ResourceBorderTexture","text":""},{"location":"zh/ldlib/ui/textures/resourceborder/#resourcebordertexture","title":"ResourceBorderTexture","text":"<p>The <code>ResourceBorderTexture</code> class extends <code>ResourceTexture</code> to render textures with configurable borders. It calculates relative sizes for corners, edges, and the central area, enabling detailed customization for UI backgrounds and buttons.</p>"},{"location":"zh/ldlib/ui/textures/resourceborder/#basic-properties","title":"Basic Properties","text":"Field Description boderSize The size of the border corners imageSize The overall size of the texture image imageLocation The resource location of the texture image"},{"location":"zh/ldlib/ui/textures/resourceborder/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/textures/resourceborder/#setbodersize","title":"setBoderSize","text":"<p>Sets the size of the border corners.</p> Java / KubeJS <pre><code>resourceBorderTexture.setBoderSize(5, 5);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/resourceborder/#setimagesize","title":"setImageSize","text":"<p>Sets the overall size of the texture image.</p> Java / KubeJS <pre><code>resourceBorderTexture.setImageSize(200, 150);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/shader/","title":"ShaderTexture","text":""},{"location":"zh/ldlib/ui/textures/shader/#shadertexture","title":"ShaderTexture","text":"<p>The <code>ShaderTexture</code> class extends <code>TransformTexture</code> to render textures using custom shaders. It supports dynamic shader updates, setting uniform values, and binding textures for advanced visual effects. The class provides methods for creating shader-based textures from resource locations or raw shader code, along with caching and disposal mechanisms. </p> <p>IMPORTANT!!!</p> <p>If you are using raw shader, DO NOT forget to release the texture after using.</p>"},{"location":"zh/ldlib/ui/textures/shader/#basic-properties","title":"Basic Properties","text":"Field Description location The resource location of the shader resolution The shader resolution factor (affects the iResolution uniform) color Color overlay applied to the shader texture"},{"location":"zh/ldlib/ui/textures/shader/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/textures/shader/#dispose","title":"dispose","text":"<p>Dispose shader.</p> Java / KubeJS <pre><code>shaderTexture.dispose();\n</code></pre>"},{"location":"zh/ldlib/ui/textures/shader/#updateshader","title":"updateShader","text":"<p>Updates the shader using a new resource location.</p> Java / KubeJS <pre><code>shaderTexture.updateShader(new ResourceLocation(\"modid:shader\"));\n</code></pre>"},{"location":"zh/ldlib/ui/textures/shader/#updaterawshader","title":"updateRawShader","text":"<p>Updates the shader using raw shader code.</p> Java / KubeJS <pre><code>shaderTexture.updateRawShader(\"raw shader code\");\n</code></pre>"},{"location":"zh/ldlib/ui/textures/shader/#setuniformcache","title":"setUniformCache","text":"<p>Sets a uniform cache consumer to update additional shader uniforms.</p> Java / KubeJS <pre><code>shaderTexture.setUniformCache(cache -&gt; {\n    // Update additional uniforms as needed\n});\n</code></pre>"},{"location":"zh/ldlib/ui/textures/shader/#setresolution","title":"setResolution","text":"<p>Sets the resolution factor used in the shader.</p> Java / KubeJS <pre><code>shaderTexture.setResolution(2.5f);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/text/","title":"TextTexture","text":""},{"location":"zh/ldlib/ui/textures/text/#texttexture","title":"TextTexture","text":"<p>The <code>TextTexture</code> class extends <code>TransformTexture</code> to render text as a texture. It supports dynamic text updates through a supplier, configurable text styling (color, background color, drop shadow), and various text alignment or animation types (e.g. roll, hide). This class is primarily used to display formatted and localized text within GUI components.</p>"},{"location":"zh/ldlib/ui/textures/text/#basic-properties","title":"Basic Properties","text":"Field Description text The formatted text to display color The text color (modifiable via setter) backgroundColor The background color behind the text width The maximum width for wrapping the text rollSpeed The speed at which text rolls (for animated text types) dropShadow Whether a drop shadow is applied to the text type The text display type (e.g., NORMAL, ROLL, HIDE, LEFT, RIGHT) supplier A supplier for dynamic text updates"},{"location":"zh/ldlib/ui/textures/text/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/textures/text/#setsupplier","title":"setSupplier","text":"<p>Sets a supplier to provide dynamic text updates.</p> JavaKubeJS <pre><code>textTexture.setSupplier(() -&gt; \"Updated dynamic text\");\n</code></pre> <pre><code>textTexture.setSupplier(() =&gt; \"Updated dynamic text\");\n</code></pre>"},{"location":"zh/ldlib/ui/textures/text/#updatetext","title":"updateText","text":"<p>Updates the displayed text. This method is invoked automatically via the supplier or can be called directly.</p> Java / KubeJS <pre><code>textTexture.updateText(\"New Text Content\");\n</code></pre>"},{"location":"zh/ldlib/ui/textures/text/#setbackgroundcolor","title":"setBackgroundColor","text":"<p>Sets the background color behind the text.</p> Java / KubeJS <pre><code>textTexture.setBackgroundColor(0xffff0000);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/text/#setdropshadow","title":"setDropShadow","text":"<p>Enables or disables the drop shadow effect on the text.</p> Java / KubeJS <pre><code>textTexture.setDropShadow(true);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/text/#setwidth","title":"setWidth","text":"<p>Sets the maximum width for the text area. This method also recalculates text wrapping based on the new width.</p> Java / KubeJS <pre><code>textTexture.setWidth(100);\n</code></pre>"},{"location":"zh/ldlib/ui/textures/text/#settype","title":"setType","text":"<p>Sets the text display type (e.g., NORMAL, ROLL, LEFT_HIDE).</p> <p>TextType</p> <ul> <li><code>NORMAL</code>:  center, add new lines below</li> <li><code>HIDE</code>:  center, hide redundant words</li> <li><code>ROLL</code>:  center, hide redundant words, roll words while hover</li> <li><code>ROLL_ALWAYS</code>:  center always roll words while redundant</li> <li><code>LEFT</code>:  same as NOMAL but left align</li> <li><code>RIGHT</code>:  same as NORMAL but right aligh</li> <li><code>LEFT_HIDE</code>:  same as HIDE but left align</li> <li><code>LEFT_ROLL</code>:  same as ROLL but left align</li> <li><code>LEFT_ROLL_ALWAYS</code>:  same as ROLL_ALWAYS but let align</li> </ul> Java / KubeJS <pre><code>textTexture.setType(TextType.ROLL);\n</code></pre>"},{"location":"zh/ldlib/ui/ui_editor/","title":"Get Start","text":""},{"location":"zh/ldlib/ui/ui_editor/#get-start","title":"Get Start","text":"<p>The UI Editor is a powerful built-in visual editor provided by ldlib. You can use it to easily design your UI, use it in your own mods, or use it through Java / KubeJS.</p>"},{"location":"zh/ldlib/ui/ui_editor/#1-get-start","title":"1. Get Start","text":""},{"location":"zh/ldlib/ui/ui_editor/#how-to-open-the-ui-editor","title":"How to open the UI Editor","text":"<p>In general, you can open it by command<code>/ldlib ui_editor</code>, which will use <code>./minecraft/ldlib/..</code> as its workspace.</p> <p></p>"},{"location":"zh/ldlib/ui/ui_editor/#main-screen","title":"Main Screen","text":"<ol> <li>Menu: New/Save/Open UI projects. You can also import/export <code>Resources</code> here.</li> <li>Configurator: Basically all the setup happens here.</li> <li>Resources: available resources, e.g. <code>color</code>, <code>texture</code>, <code>lang entries</code>.</li> </ol>"},{"location":"zh/ldlib/ui/ui_editor/#create-a-new-project","title":"Create a new project","text":"<p>When you first use it, click it to create an empty UI project. (If you are making UI for MBD, select the MBD project)</p> <p></p> <p>No surprise, you'll see the follow case.</p> <p></p> <ol> <li>ToolBox: Contains all the available UI widgets(components).</li> <li>Root Widget: The whole project has one and only one root widget, which is created by the system and you cannot delete it.</li> </ol>"},{"location":"zh/ldlib/ui/ui_editor/#2-basic","title":"2. Basic","text":"<ol> <li>red frame are selected widgets.</li> <li>blue frame is the widget that mouse is hovering over it.</li> </ol>"},{"location":"zh/ldlib/ui/ui_editor/#multi-select","title":"Multi-Select","text":"<p>Press <code>ctrl</code> to multi-select / cancle-select widget.</p>"},{"location":"zh/ldlib/ui/ui_editor/#drag-selected-widgets","title":"Drag Selected Widgets","text":"<ol> <li>Hold down <code>alt</code> + <code>left-clicked</code>, if you see the arrows (all directions) then you can drag it.</li> <li>Anyway, you could also modify position by a configurator.</li> </ol>"},{"location":"zh/ldlib/ui/ui_editor/#scale-selected-widgets","title":"Scale Selected Widgets","text":"<ol> <li>Hold down <code>alt</code> + <code>right-clicked</code>, if you see the arrows (right bottom) then you can scale it.</li> <li>Anyway, you could also modify size by a configurator.</li> </ol>"},{"location":"zh/ldlib/ui/ui_editor/#add-a-widget","title":"Add a Widget","text":"<p>All widgets (except the Root) need to be added to a <code>father (parent)</code> widget that accepts it, and we call such <code>father (parent)</code> widget as <code>Group Type</code> widget (e.g. <code>Group</code>, <code>Tab Group</code>, <code>Scrollable Group</code>).</p> <p></p> <ol> <li>You can find all available widgets in the toolbox.</li> <li>Drag a widget into a <code>Group Type</code> widget. </li> <li>Rendering a green frame if such widget can accept it.</li> </ol>"},{"location":"zh/ldlib/ui/ui_editor/#move-widget-from-one-groug-to-another-group","title":"Move widget from one Groug to another Group","text":"<p>Sometimes you may want to modify the parent control. </p> <ol> <li>You can do this by the menu (right-clicking page) and cut/copy to the selected parent widget. </li> <li>A better way is to press the <code>shift</code>and move it into the new Group.</li> </ol> <p> Rendering a green frame if such widget can accept it.</p>"},{"location":"zh/ldlib/ui/ui_editor/#adjust-children-widgets-order","title":"Adjust Children Widgets Order","text":"<p>In general, all the <code>Group</code> widgets have a <code>children</code> tab in its configurator, showing all children, you can adjust their order by dragging.</p> <p></p>"},{"location":"zh/ldlib/ui/ui_editor/#menu","title":"Menu","text":"<p>Right-click the page to open the menu.</p> <p></p> <ol> <li>All operations will be performed on selected widgets.</li> <li>Basic operations</li> <li>Align: availabe when you select multi widgets.</li> </ol>"},{"location":"zh/ldlib/ui/ui_editor/group_widget/","title":"Group Widget","text":""},{"location":"zh/ldlib/ui/ui_editor/group_widget/#group-widget","title":"Group Widget","text":"<p><code>Group</code> refers to widgets to which can accept child widgets</p> <p>There are three built-in widgets so far: <code>Group</code>, <code>Scrollable Group</code>, and <code>Tab Group</code>.</p>"},{"location":"zh/ldlib/ui/ui_editor/group_widget/#group","title":"Group","text":"<p><code>Group</code> is the most common widget, <code>Transform</code> will be applied to its children, and deletion and copy of the group are also applied to its children.</p> <p>You can drag child's preview to adjust their order</p> <p> </p>"},{"location":"zh/ldlib/ui/ui_editor/group_widget/#scrollable-group","title":"Scrollable Group","text":"<p>Children in a <code>Scrollable Group</code> are hidden when they exceed the its size and allow users to scroll or drag groups to adjust the view.</p> <p></p> <p>The configurator has a lot of settings such as scroll bar styles, whether you can drag, etc. You can try them out yourself.</p>"},{"location":"zh/ldlib/ui/ui_editor/group_widget/#tab-group","title":"Tab Group","text":"<p>As the name implies, <code>Tab group</code> allows you to set multiple tabs, which you can switch between different group views.</p> <p></p>"},{"location":"zh/ldlib/ui/ui_editor/resource/","title":"Resources","text":""},{"location":"zh/ldlib/ui/ui_editor/resource/#resources","title":"Resources","text":"<p>The <code>UI Project</code> contains three built-in resources: <code>textures</code>, <code>colors</code> and <code>lang entries</code>. Resources are owned by projects and cannot be shared between projects.</p> <p>If you want the current project's resources to be available in other projects, you can <code>export</code> the resources first and then open other projects to <code>import</code> it.</p> <p></p>"},{"location":"zh/ldlib/ui/ui_editor/resource/#textrures","title":"Textrures","text":"<ol> <li>Stored textures.</li> <li>Add new textures, glad we support many types of textures so far :).</li> <li>It's worth noting that <code>empty</code> is a built-in texture and you can't delete it.</li> </ol>"},{"location":"zh/ldlib/ui/ui_editor/resource/#use-it","title":"Use it","text":"<p>When you open the configuration of a widget, you find that some where can accept the texture (e.g. background of Basic Info), and you can drag the texture in.</p> <p></p> <ol> <li>Drag texture.</li> <li>Rendering a green frame if it can accept this texture.</li> </ol> <p>NOTE: When you drag it to a widget, it replaces its background image by default.</p> <p></p>"},{"location":"zh/ldlib/ui/ui_editor/resource/#edit-texture","title":"Edit Texture","text":"<p>Right-click to open the menu and edit the selected texture.</p> <p> 1. Open its configurator. 2. Modify the texture type. In general you'd better not modify it, because switching type will not modify references of previous one. 3. Some textures provide a preview of the settings, and you can open the file selector by clicking on it. 4. You can scale, translate, and rotate the texture by setting its Transform.</p> <p>NOTE: You can use <code>GroupTexture</code> with transform to create a more complex texture.</p> <p> 1. Combine multi textures. 2. Add a new layer.</p> <p>NOTE: You can create an animation texture by setting the starting and ending of frames, and the interval time.</p> <p></p>"},{"location":"zh/ldlib/ui/ui_editor/resource/#colors","title":"Colors","text":""},{"location":"zh/ldlib/ui/ui_editor/resource/#use-it_1","title":"Use it","text":"<p>When you open a configuration, you find that some where can accept the number (e.g. color of the label widget), and you can drag the color in.</p> <p></p> <ol> <li>Drag color.</li> <li>Rendering a green frame if it can accept this color.</li> </ol> <p>NOTE: When you drag it to a widget, it replaces its background to a Color Texture by default.</p> <p></p>"},{"location":"zh/ldlib/ui/ui_editor/resource/#edit-color","title":"Edit Color","text":"<p>Right-click to open the menu and edit the selected color.</p> <p></p> <ol> <li>Pickup color (HSB mode), you can right click the pallete to swith mode.</li> <li>Preview.</li> <li>Modify by argb.</li> </ol>"},{"location":"zh/ldlib/ui/ui_editor/resource/#entries","title":"Entries","text":"<p>Enties stores key-value, which can be regard as a lang file.</p> <p>When you open a configuration, you find that some where can accept the number (e.g. color of the label widget), and you can drag the color in. You can fill in your localization data, and then export to the lang file directly (W.I.P)</p>"},{"location":"zh/ldlib/ui/ui_editor/resource/#use-it_2","title":"Use it","text":"<ol> <li>Drag entries.</li> <li>Rendering a green frame if it can accept a string.</li> </ol> <p>NOTE: When you drag it to a widget, it replaces its hover tooltips by default.</p> <p></p>"},{"location":"zh/ldlib/ui/ui_editor/resource/#edit-entries","title":"Edit Entries","text":"<p>Right-click to open the menu and edit its vaule.</p> <p></p> <ol> <li>Typing your text here.</li> </ol> <p>You can right-click to open the menu and rename its key.</p>"},{"location":"zh/ldlib/ui/widget/","title":"Preliminary","text":""},{"location":"zh/ldlib/ui/widget/#preliminary","title":"Preliminary","text":"<p>LDLib provides a wide range of widgets. You can review their functionalities and APIs on their respective pages. In this section, we introduce the fundamental concepts that underlie all widgets, ensuring you have a solid understanding of their common principles.</p> <p>All widgets inherit from the Widget class. As a result, they all share a set of universal APIs.</p>"},{"location":"zh/ldlib/ui/widget/#basic-properties","title":"Basic properties","text":"<p>All properties can be accessed via Java / KubeJS.</p> JavaKubeJS <pre><code>var id = widget.getId();\nvar pos = widget.getPosition();\nwidget.setSize(10, 32);\nwidget.setSlefPosition(10, 10);\n</code></pre> <pre><code>let id = widget.getId();\nlet pos = widget.position // getPosition() is also fine.\nwidget.setSize(10, 32);\nwidget.setSlefPosition(10, 10);\n</code></pre> Field Description <code>id</code> Widget id, it doesn't have to be unique\uff0cand can be empty. <code>selftPosition</code> Self position represents the relative local position in the parent widget <code>parentPosition</code> Parent widget's global position. <code>position</code> Global position in the window, which is computed by the self position and parent position. <code>size</code> Widget size, this property affect the rect collid dection, e.g. hover, click, etc. <code>isVisible</code> Whether the widget is visible, only affect rendering, logic is still working. <code>isActive</code> Whether the widget logic is working. <code>align</code> align position refer to the parent. <code>backgroundTexture</code> background texture. <code>hoverTexture</code> darw texture while mouse hover. <code>overlay</code> overlay texture above the background texture. <code>parent</code> parent widget. <code>align</code> align position refer to the parent. <p>about position</p> <p><code>Position</code> is an important concept. Check the image below: </p>"},{"location":"zh/ldlib/ui/widget/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/widget/#sethovertooltips","title":"<code>setHoverTooltips()</code>","text":"<p>Used to define the tooltips while the mouse hovered. It support both <code>string</code> and <code>component</code> as input.</p>      Your browser does not support video.    Java / KubeJS <pre><code>widget.setHoverTooltips(\"this is a button\");\n// widget.setHoverTooltips(\"line 1\", \"line2\");\n</code></pre> <p>Info</p> <p>LDLib provides massive different types of textures, choose what you want:). See <code>GUI Textures</code> to check supported textures.</p>"},{"location":"zh/ldlib/ui/widget/#setbackground","title":"<code>setBackground()</code>","text":"<p>Used to set the background texture of the widget. </p>"},{"location":"zh/ldlib/ui/widget/#sethovertexture","title":"<code>setHoverTexture()</code>","text":"<p>Used to set the hover texture of the widget.</p> Java / KubeJS <pre><code>widget.setBackground(new ResourceTexture(\"ldlib:textures/gui/icon.png\"));\n</code></pre>"},{"location":"zh/ldlib/ui/widget/#ismouseoverelement","title":"<code>isMouseOverElement()</code>","text":"<p>TO check whether the mouse over the widget.</p> Java / KubeJS <pre><code>widget.isMouseOverElement(mouseX, mouseY);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Button/","title":"ButtonWidget","text":""},{"location":"zh/ldlib/ui/widget/Button/#buttonwidget","title":"ButtonWidget","text":"<p>The ButtonWidget is a UI widget representing a clickable button in the GUI system</p>"},{"location":"zh/ldlib/ui/widget/Button/#basic-properties","title":"Basic properties","text":"<p>All properties can be accessed via Java / KubeJS.</p> Field Description <code>isClicked</code> is the button clicked currently"},{"location":"zh/ldlib/ui/widget/Button/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/widget/Button/#setbuttontexture","title":"<code>setButtonTexture()</code>","text":"<p>Equal to the <code>setBackground</code>.</p> Java / KubeJS <pre><code>button.setButtonTexture(ResourceBorderTexture.BUTTON_COMMON, new TextTexture(\"Button\"));\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Button/#setclickedtexture","title":"<code>setClickedTexture()</code>","text":"<p>Remove child widget from it.</p> Java / KubeJS <pre><code>button.setClickedTexture(ResourceBorderTexture.BUTTON_COMMON, new TextTexture(\"Clicked\"));\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Button/#setonpresscallback","title":"<code>setOnPressCallback()</code>","text":"<p>Used to bind functional logic.</p> <p><code>ClickData</code> provides mouse state information:</p> <ol> <li> <p><code>clickData.button</code>: mouse button id number.</p> button Description <code>0</code> left button <code>1</code> right button <code>2</code> middle button </li> <li> <p><code>clickData.isShiftClick</code>: is the shift key typed.</p> </li> <li><code>clickData.isCtrlClick</code>: is the ctrl key typed.</li> <li><code>clickData.isRemote</code>: is the remote enverionment.</li> </ol> JavaKubeJS <pre><code>button.setOnPressCallback(clickData -&gt; {\n    if (clickData.isRemote) { // can be used to check trigger side\n\n    }\n});\n</code></pre> <pre><code>button.setOnPressCallback(clickData =&gt; {\n    if (clickData.isRemote) { // can be used to check trigger side\n\n    }\n});\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Image/","title":"ImageWidget","text":""},{"location":"zh/ldlib/ui/widget/Image/#imagewidget","title":"ImageWidget","text":"<p><code>ImageWidget</code> is used to display images, which provided by a <code>GUI Texture</code>.</p>"},{"location":"zh/ldlib/ui/widget/Image/#basic-properties","title":"Basic Properties","text":"Field Description border The border width (range: -100 to 100) borderColor The color of the border"},{"location":"zh/ldlib/ui/widget/Image/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/widget/Image/#setimage","title":"setImage","text":"<p>Sets the image texture using a texture instance.</p> Java / KubeJS <pre><code>imageWidget.setImage(new ResourceTexture(\"ldlib:textures/gui/icon.png\"));\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Image/#setimage_1","title":"setImage","text":"<p>Sets the image texture using a supplier.</p> JavaKubeJS <pre><code>imageWidget.setImage(() -&gt; new ResourceTexture(\"ldlib:textures/gui/icon.png\"));\n</code></pre> <pre><code>imageWidget.setImage(() =&gt; new ResourceTexture(\"ldlib:textures/gui/icon.png\"));\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Image/#getimage","title":"getImage","text":"<p>Returns the current image texture.</p> Java / KubeJS <pre><code>var texture = imageWidget.getImage();\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Image/#setborder","title":"setBorder","text":"<p>Sets the border width and color.</p> Java / KubeJS <pre><code>imageWidget.setBorder(2, 0xFFFFFFFF); // ARGB\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Label/","title":"LabelWidget","text":""},{"location":"zh/ldlib/ui/widget/Label/#labelwidget","title":"LabelWidget","text":"<p><code>LabelWidget</code> is used to display text and component.</p> <p>Advanced Widget</p> <p><code>LabelWidget</code> is a light-weight widget to display text only. text height, align, ... are fixed. Therefore, we reconmend to use the <code>TextTextureWidget</code> instead, which provids advanced controll of text display.</p>"},{"location":"zh/ldlib/ui/widget/Label/#basic-properties","title":"Basic Properties","text":"Field Description <code>color</code> The text color as an integer <code>dropShadow</code> Indicates whether the drop shadow effect is enabled <code>lastTextValue</code> currently text <code>read only</code>"},{"location":"zh/ldlib/ui/widget/Label/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/widget/Label/#settext","title":"<code>setText()</code>","text":"<p>Updates the label text with a <code>string</code>.</p> Java / KubeJS <pre><code>label.setText(\"New Label Text\");\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Label/#setcomponent","title":"<code>setComponent()</code>","text":"<p>Same as <code>setText()</code> but support <code>component</code> as input</p>"},{"location":"zh/ldlib/ui/widget/Label/#settextprovider","title":"<code>setTextProvider()</code>","text":"<p>Configures a supplier to dynamically provide the label text. It will obtain the latest text per tick.</p> JavaKubeJS <pre><code>label.setTextProvider(() -&gt; \"Dynamic Text\");\n</code></pre> <pre><code>label.setTextProvider(() =&gt; \"Dynamic Text\");\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Label/#setcolor","title":"<code>setColor()</code>","text":"<p>Sets the text color. If a rich text component is already set, its style will be replaced accordingly.</p> Java / KubeJS <pre><code>label.setColor(0xFFFFFFFF); // ARGB\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Label/#setdropshadow","title":"<code>setDropShadow()</code>","text":"<p>Enables or disables the drop shadow effect for the label.</p> Java / KubeJS <pre><code>label.setDropShadow(true);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/PlantomSlot/","title":"PhantomSlotWidget","text":""},{"location":"zh/ldlib/ui/widget/PlantomSlot/#phantomslotwidget","title":"PhantomSlotWidget","text":"Your browser does not support video.    <p>The <code>PhantomSlotWidget</code> is a UI widget representing a \"phantom\" item slot, commonly used for ghost ingredient inputs in recipe configurations. Unlike regular slots, it does not interact with real inventories but allows setting, modifying, and clearing items for visual or configurational purposes.</p>"},{"location":"zh/ldlib/ui/widget/PlantomSlot/#features","title":"Features","text":"<ul> <li>Does not allow item taking or putting from real inventories.</li> <li>Supports setting items via UI clicks or API calls.</li> <li>Allows right-click clearing (<code>clearSlotOnRightClick</code>).</li> <li>Supports integration with JEI/EMI for ghost ingredient handling.</li> </ul>"},{"location":"zh/ldlib/ui/widget/PlantomSlot/#basic-properties","title":"Basic Properties","text":"Field Description <code>maxStackSize</code> Maximum allowed stack size in this phantom slot. <code>clearSlotOnRightClick</code> Whether right-clicking clears the slot."},{"location":"zh/ldlib/ui/widget/PlantomSlot/#apis","title":"APIs","text":"<p>It owns all APIs from <code>SlotWidget</code>, and you can get or set item by its APIs.</p>"},{"location":"zh/ldlib/ui/widget/PlantomSlot/#setclearslotonrightclick","title":"setClearSlotOnRightClick","text":"<p>Configures whether right-clicking on the slot clears its contents.</p> Java / KubeJS <pre><code>phantomSlot.setClearSlotOnRightClick(true);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/PlantomSlot/#setmaxstacksize","title":"setMaxStackSize","text":"<p>Sets the maximum allowed stack size in the phantom slot.</p> Java / KubeJS <pre><code>phantomSlot.setMaxStackSize(64);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/PlantomSlot/#mouse-interactions","title":"Mouse Interactions","text":"<p>Phantom slots handle different types of mouse interactions:</p> Mouse Action Effect Left-click on empty slot with an item Sets the item to the slot Left-click on filled slot with an item Replaces the item in the slot Right-click on filled slot Decreases stack size Shift + Click Adjusts stack size dynamically Right-click on empty slot Clears the slot (if <code>clearSlotOnRightClick</code> is enabled)"},{"location":"zh/ldlib/ui/widget/PlantomTank/","title":"PhantomTankWidget","text":""},{"location":"zh/ldlib/ui/widget/PlantomTank/#phantomtankwidget","title":"PhantomTankWidget","text":"Your browser does not support video.    <p>The <code>PhantomTankWidget</code> is a ghost fluid slot that allows setting fluid content without actual transfer mechanics. It's useful for defining recipe inputs or fluid placeholders.</p>"},{"location":"zh/ldlib/ui/widget/PlantomTank/#features","title":"Features","text":"<ul> <li>Phantom fluid storage \u2013 Doesn't actually consume or provide fluids.</li> <li>Supports drag-and-drop \u2013 Accepts fluid items from JEI, EMI, or REI.</li> <li>Custom event handling \u2013 Updates an external state when fluid changes.</li> </ul>"},{"location":"zh/ldlib/ui/widget/PlantomTank/#apis","title":"APIs","text":"<p>It owns all APIs from <code>TankWidget</code>, and you can get or set item by its APIs.</p>"},{"location":"zh/ldlib/ui/widget/PlantomTank/#setifluidstackupdater","title":"setIFluidStackUpdater","text":"<p>Registers a callback to track fluid changes.</p> JavaKubeJS <pre><code>phantomTank.setIFluidStackUpdater(fluid -&gt; {\n    System.out.println(\"New phantom fluid: \" + fluid);\n});\n</code></pre> <pre><code>phantomTank.setIFluidStackUpdater(fluid =&gt; {\n    console.log(\"New phantom fluid: \" + fluid);\n});\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Selector/","title":"SelectorWidget","text":""},{"location":"zh/ldlib/ui/widget/Selector/#selectorwidget","title":"SelectorWidget","text":"Your browser does not support video.    <p>The <code>SelectorWidget</code> is a dropdown-style selection widget that allows users to pick an option from a predefined list. It supports dynamically updating the selection list, displaying a configurable UI, and handling selection changes efficiently.</p>"},{"location":"zh/ldlib/ui/widget/Selector/#features","title":"Features","text":"<ul> <li>Dropdown selection \u2013 Expands to show available choices.</li> <li>Event handling \u2013 Fires callbacks when the selection changes.</li> </ul>"},{"location":"zh/ldlib/ui/widget/Selector/#properties","title":"Properties","text":"Field Type Description <code>currentValue</code> <code>String</code> Currently selected option."},{"location":"zh/ldlib/ui/widget/Selector/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/widget/Selector/#setcandidates","title":"setCandidates","text":"<p>Updates the list of selectable options.</p> JavaKubeJS <pre><code>selectorWidget.setCandidates(List.of(\"OptionA\", \"OptionB\", \"OptionC\"));\n</code></pre> <pre><code>selectorWidget.setCandidates([\"OptionA\", \"OptionB\", \"OptionC\"]);\n</code></pre> <ul> <li>Triggers a UI update to reflect the new options.</li> </ul>"},{"location":"zh/ldlib/ui/widget/Selector/#setvalue","title":"setValue","text":"<p>Sets the currently selected value.</p> Java / KubeJS <pre><code>selectorWidget.setValue(\"OptionA\");\n</code></pre> <ul> <li>If the value is not found in <code>candidates</code>, it remains unchanged.</li> </ul>"},{"location":"zh/ldlib/ui/widget/Selector/#setmaxcount","title":"setMaxCount","text":"<p>Defines how many options should be visible before scrolling.</p> Java / KubeJS <pre><code>selectorWidget.setMaxCount(3);\n</code></pre> <ul> <li>If there are more than <code>maxCount</code> options, a scrollbar is added.</li> </ul>"},{"location":"zh/ldlib/ui/widget/Selector/#setfontcolor","title":"setFontColor","text":"<p>Changes the color of option text.</p> Java / KubeJS <pre><code>selectorWidget.setFontColor(0xFFFFFF); // White text\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Selector/#setbuttonbackground","title":"setButtonBackground","text":"<p>Sets the background texture for the button area.</p> Java / KubeJS <pre><code>selectorWidget.setButtonBackground(myCustomTexture);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Selector/#setonchanged","title":"setOnChanged","text":"<p>Registers a callback to handle selection changes.</p> JavaKubeJS <pre><code>selectorWidget.setOnChanged(selected -&gt; {\n    System.out.println(\"New selection: \" + selected);\n});\n</code></pre> <pre><code>selectorWidget.setOnChanged(selected =&gt; {\n    console.log(\"New selection: \" + selected);\n});\n</code></pre> <ul> <li>This is useful for updating UI state or triggering game logic.</li> </ul>"},{"location":"zh/ldlib/ui/widget/Selector/#setcandidatessupplier","title":"setCandidatesSupplier","text":"<p>Automatically updates the option list from a dynamic source.</p> JavaKubeJS <pre><code>selectorWidget.setCandidatesSupplier(() -&gt; fetchDynamicOptions());\n</code></pre> <pre><code>selectorWidget.setCandidatesSupplier(() =&gt; fetchDynamicOptions());\n</code></pre> <ul> <li>The widget polls this function to refresh the list.</li> <li>Useful when candidates change based on external conditions.</li> </ul>"},{"location":"zh/ldlib/ui/widget/Selector/#setshow","title":"setShow","text":"<p>Manually toggles the dropdown visibility.</p> Java / KubeJS <pre><code>selectorWidget.setShow(true); // Opens dropdown\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Slot/","title":"SlotWidget","text":""},{"location":"zh/ldlib/ui/widget/Slot/#slotwidget","title":"SlotWidget","text":"<p>The <code>SlotWidget</code> represents an interactive item slot within a container GUI. This widget supports configurable properties such as whether items can be taken or placed, customizable hover overlays and tooltips, and integration with JEI/REI/EMI systems for displaying ingredient details. It can be configured to represent a slot in either a standard inventory container or via an item transfer handler.</p> <p>Note</p> <p>You cannot modify slot widget size.</p>"},{"location":"zh/ldlib/ui/widget/Slot/#basic-properties","title":"Basic Properties","text":"Field Description canTakeItems Indicates if items can be extracted from the slot (modifiable via setter) canPutItems Indicates if items can be inserted into the slot (modifiable via setter) drawHoverOverlay Determines whether a hover overlay is drawn when the mouse is over the slot drawHoverTips Determines whether tooltips are shown when the mouse hovers over the slot lastItem Item stored in the last tick."},{"location":"zh/ldlib/ui/widget/Slot/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/widget/Slot/#setcontainerslot","title":"setContainerSlot","text":"<p>Associates the widget with an inventory container by specifying the slot index. e.g. player inventory.</p> Java / KubeJS <pre><code>var player = ...;\nslotWidget.setContainerSlot(player.getInventory(), 2); // bind the player inventory of 2 index.\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Slot/#sethandlerslot","title":"setHandlerSlot","text":"<p>Configures the widget to use an item transfer handler with the specified slot index. </p>"},{"location":"zh/ldlib/ui/widget/Slot/#java","title":"Java","text":"<p>For Java User !!!</p> <p>If you want to use the handler of <code>ItemStackHandler</code>(from forge) or <code>Storage&lt;ItemVariant&gt;</code>(from fabric), you need one more line. Because Forge and Fabric has different APIs, you need to convert the handler into the LDLib one, which can be found in <code>ItemTransferHelperImpl</code>.</p> ForgeFabric <pre><code>var itemHandler = ...;\nvar itemTransfer = ItemTransferHelperImpl.toItemTransfer(itemHandler);\n</code></pre> <pre><code>var storage = ...;\nvar itemTransfer = ItemTransferHelperImpl.toItemTransfer(storage);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Slot/#kubejs","title":"KubeJS","text":"<p>KubeJS user do not need to do such mess. We have already convert them into a item transfer internal already.</p> KubeJS <pre><code>slotWidget.setHandlerSlot(itemTransfer, 0);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Slot/#setitem","title":"setItem","text":"<p>Set the internal itemstack with/without notify.</p> Java / KubeJS <pre><code>slotWidget.setItem(itemstack); // it will also trigger the listen you set\nslotWidget.setItem(itemstack, false); // it wont trigger the listen\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Slot/#getitem","title":"getItem","text":"<p>Get the internal itemstack stored.</p> Java / KubeJS <pre><code>var itemstack = slotWidget.getItem();\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Slot/#setchangelistener","title":"setChangeListener","text":"<p>Configures additional slot location information, such as whether it belongs to the player container or hotbar. It will affect the shift move behaviour.</p> JavaKubeJS <pre><code>slotWidget.setChangeListener(() -&gt; {\n    var last = slotWidget.getLastItem();\n    var current = slotWidget.getItem();\n});\n</code></pre> <pre><code>slotWidget.setChangeListener(() =&gt; {\n    let last = slotWidget.getLastItem();\n    let current = slotWidget.getItem();\n});\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Slot/#canputstack","title":"canPutStack","text":"<p>Whether can put stack into the slot.</p> Java / KubeJS <pre><code>slotWidget.canPutStack(true);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Slot/#cantakestack","title":"canTakeStack","text":"<p>Whether can take stack from the slot.</p> Java / KubeJS <pre><code>slotWidget.canTakeStack(true);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Slot/#setlocationinfo","title":"setLocationInfo","text":"<p>Configures additional slot location information, such as whether it belongs to the player container or hotbar. It will affect the shift move behaviour.</p> Java / KubeJS <pre><code>slotWidget.setLocationInfo(true, false); // (isPlayerContainer isPlayerHotBar)\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Switch/","title":"SwitchWidget","text":""},{"location":"zh/ldlib/ui/widget/Switch/#switchwidget","title":"SwitchWidget","text":"<p>The <code>SwitchWidget</code> is a toggle button that switches between an ON and OFF state. It supports custom textures, event callbacks, and dynamic state updates.</p>"},{"location":"zh/ldlib/ui/widget/Switch/#features","title":"Features","text":"<ul> <li>Toggle button behavior \u2013 Click to switch between ON and OFF.</li> <li>Event handling \u2013 Fires callbacks when the switch state changes.</li> </ul>"},{"location":"zh/ldlib/ui/widget/Switch/#properties","title":"Properties","text":"Field Type Description <code>isPressed</code> <code>boolean</code> (default: false) Current switch state."},{"location":"zh/ldlib/ui/widget/Switch/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/widget/Switch/#setpressed","title":"setPressed","text":"<p>Sets the ON/OFF state of the switch.</p> Java / KubeJS <pre><code>switchWidget.setPressed(true); // Turns ON\n</code></pre> <ul> <li>Triggers UI updates and event callbacks.</li> </ul>"},{"location":"zh/ldlib/ui/widget/Switch/#setonpresscallback","title":"setOnPressCallback","text":"<p>Registers a callback when the switch is clicked.</p> JavaKubeJS <pre><code>switchWidget.setOnPressCallback((clickData, state) -&gt; {\n    System.out.println(\"Switch is now: \" + state);\n});\n</code></pre> <pre><code>switchWidget.setOnPressCallback((clickData, state) =&gt; {\n    console.log(\"Switch is now: \" + state);\n});\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Switch/#setsupplier","title":"setSupplier","text":"<p>Automatically syncs with an external state.</p> JavaKubeJS <pre><code>switchWidget.setSupplier(() -&gt; getCurrentState()); // bool\n</code></pre> <pre><code>switchWidget.setSupplier(() =&gt; getCurrentState()); // bool\n</code></pre> <ul> <li>Updates dynamically when <code>getCurrentState()</code> changes.</li> </ul>"},{"location":"zh/ldlib/ui/widget/Tank/","title":"TankWidget","text":""},{"location":"zh/ldlib/ui/widget/Tank/#tankwidget","title":"TankWidget","text":"<p>The <code>TankWidget</code> represents a fluid slot widget within a container GUI. It displays a fluid in a designated tank and supports fluid interactions such as filling and emptying. In addition, it integrates with external systems (JEI/REI/EMI) to show fluid ingredient details and provides configurable options for hover overlays, tooltips, and click behavior.</p>"},{"location":"zh/ldlib/ui/widget/Tank/#basic-properties","title":"Basic Properties","text":"Field Description fluidTank The fluid storage or transfer handler associated with this widget tank The index of the fluid tank being represented showAmount Determines whether the fluid amount is displayed allowClickFilled Controls whether clicking the slot when filled triggers container-filling behavior allowClickDrained Controls whether clicking the slot when empty triggers container-emptying behavior drawHoverOverlay Indicates if a hover overlay should be drawn when the mouse is over the widget drawHoverTips Indicates if hover tooltips should be displayed fillDirection The direction in which the fluid fill is rendered (e.g. DOWN_TO_UP) lastFluidInTank Last fluid stored in the tank lastTankCapacity Last tank capacity"},{"location":"zh/ldlib/ui/widget/Tank/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/widget/Tank/#setfluidtank-ifluidstorage","title":"setFluidTank (IFluidStorage)","text":"<p>Associates the widget with a fluid storage and sets the tank index to 0.</p> Java / KubeJS <pre><code>tankWidget.setFluidTank(fluidStorage);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Tank/#setfluidtank-ifluidtransfer-int","title":"setFluidTank (IFluidTransfer, int)","text":"<p>Associates the widget with a fluid transfer handler and specifies the tank index.</p> Java / KubeJS <pre><code>tankWidget.setFluidTank(fluidTransfer, 1);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Tank/#setfluid","title":"setFluid","text":"<p>Set the internal fluidstack with/without notify.</p> Java / KubeJS <pre><code>tankWidget.setFluid(fluidstack); // it will also trigger the listen you set\ntankWidget.setFluid(fluidstack, false); // it wont trigger the listen\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Tank/#getfluid","title":"getFluid","text":"<p>Get the internal fluidstack stored.</p> Java / KubeJS <pre><code>var fluidstack = tankWidget.getFluid();\n</code></pre>"},{"location":"zh/ldlib/ui/widget/Tank/#setchangelistener","title":"setChangeListener","text":"<p>Configures additional slot location information, such as whether it belongs to the player container or hotbar. It will affect the shift move behaviour.</p> JavaKubeJS <pre><code>tankWidget.setChangeListener(() -&gt; {\n    var last = tankWidget.getLastFluidInTank();\n    var current = tankWidget.getFluid();\n});\n</code></pre> <pre><code>slotWidget.setChangeListener(() =&gt; {\n    let last = tankWidget.getLastFluidInTank();\n    let current = tankWidget.getFluid();\n});\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextField/","title":"TextFieldWidget","text":""},{"location":"zh/ldlib/ui/widget/TextField/#textfieldwidget","title":"TextFieldWidget","text":"Your browser does not support video.    <p>The <code>TextFieldWidget</code> provides an editable text field for GUI interfaces. It supports dynamic text updates via a supplier and responder, validation through custom validators, and configurable properties such as maximum string length, border style, and text color.</p>"},{"location":"zh/ldlib/ui/widget/TextField/#basic-properties","title":"Basic Properties","text":"Field Description currentString The current text displayed by the text field maxStringLength Maximum allowed length for the text isBordered Determines whether the text field has a border textColor The color of the text (modifiable via setter) supplier A supplier for dynamic text updates textResponder A responder that handles text changes wheelDur Duration (or step value) used for mouse wheel adjustments"},{"location":"zh/ldlib/ui/widget/TextField/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/widget/TextField/#settextsupplier","title":"setTextSupplier","text":"<p>Sets the supplier used to update the text dynamically.</p> Java / KubeJS <pre><code>textFieldWidget.setTextSupplier(() -&gt; \"Dynamic Text\");\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextField/#settextresponder","title":"setTextResponder","text":"<p>Sets the responder to be called when the text changes.</p> Java / KubeJS <pre><code>textFieldWidget.setTextResponder(newText -&gt; {\n    // Handle text change\n});\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextField/#setbordered","title":"setBordered","text":"<p>Configures whether the text field should display a border.</p> Java / KubeJS <pre><code>textFieldWidget.setBordered(true);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextField/#settextcolor","title":"setTextColor","text":"<p>Sets the text color for the text field.</p> Java / KubeJS <pre><code>textFieldWidget.setTextColor(0xffffff);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextField/#setmaxstringlength","title":"setMaxStringLength","text":"<p>Sets the maximum number of characters allowed in the text field.</p> Java / KubeJS <pre><code>textFieldWidget.setMaxStringLength(100);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextField/#setvalidator","title":"setValidator","text":"<p>Assigns a custom validator function to control and sanitize text input.</p> Java / KubeJS <pre><code>textFieldWidget.setValidator(text -&gt; text.trim());\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextField/#setcompoundtagonly","title":"setCompoundTagOnly","text":"<p>Restricts input to valid compound tags. Displays a tooltip indicating the restriction.</p> Java / KubeJS <pre><code>textFieldWidget.setCompoundTagOnly();\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextField/#setresourcelocationonly","title":"setResourceLocationOnly","text":"<p>Restricts input to valid resource locations. Displays a tooltip indicating the restriction.</p> Java / KubeJS <pre><code>textFieldWidget.setResourceLocationOnly();\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextField/#setnumbersonly","title":"setNumbersOnly","text":"<p>Restricts input to numeric values. Overloads are available for different numeric types.</p> JavaKubeJS <pre><code>textFieldWidget.setNumbersOnly(0, 100); // int\ntextFieldWidget.setNumbersOnly(0.0f, 1.0f); // float\n</code></pre> <pre><code>textFieldWidget.setNumbersOnlyInt(0, 100); // int\ntextFieldWidget.setNumbersOnlyFloat(0, 100); // float\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextField/#setwheeldur","title":"setWheelDur","text":"<p>Sets the wheel duration (step value) for adjusting numbers via mouse wheel or dragging.</p> Java / KubeJS <pre><code>textFieldWidget.setWheelDur(1);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextTexture/","title":"TextTextureWidget","text":""},{"location":"zh/ldlib/ui/widget/TextTexture/#texttexturewidget","title":"TextTextureWidget","text":"<p><code>TextTextureWidget</code> is an advanced text widget compared with <code>LabelWidget</code>. It wrapper an internal <code>TextTexture</code>, therefore, you can set the all text rendering properties by it.</p>"},{"location":"zh/ldlib/ui/widget/TextTexture/#basic-properties","title":"Basic Properties","text":"Field Description lastComponent The last component text displayed  <code>read only</code> textTexture Internal <code>TextTexture</code> <code>read only</code>"},{"location":"zh/ldlib/ui/widget/TextTexture/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/widget/TextTexture/#texturestyle","title":"textureStyle","text":"<p>Modifies the style of the internal text texture. see <code>TextTexture</code> for more details.</p> JavaKubeJS <pre><code>textTextureWidget.textureStyle(texture -&gt; {\n    texture.setType(TextType.ROLL);\n    texture.setRollSpeed(0.5);\n});\n</code></pre> <pre><code>textTextureWidget.textureStyle(texture =&gt; {\n    texture.setType(TextType.ROLL);\n    texture.setRollSpeed(0.5);\n});\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextTexture/#settext","title":"<code>setText</code>","text":"<p>Sets the text using a string.</p> Java / KubeJS <pre><code>textTextureWidget.setText(\"Hello World\");\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextTexture/#settext-setcomponent","title":"<code>setText</code> / <code>setComponent</code>","text":"<p>Sets the text using a Component.</p> JavaKubeJS <pre><code>textTextureWidget.setText(Component.literal(\"Hello World\"));\n</code></pre> <pre><code>textTextureWidget.setComponent(\"....\");\n</code></pre>"},{"location":"zh/ldlib/ui/widget/TextTexture/#settext-settextprovider","title":"<code>setText / setTextProvider</code>","text":"<p>Sets the text using a Supplier.</p> JavaKubeJS <pre><code>textTextureWidget.setText(() -&gt; \"dynamic text\");\n</code></pre> <pre><code>textTextureWidget.setTextProvider(() =&gt; Component.string(\"dynamic text\"));\n</code></pre>"},{"location":"zh/ldlib/ui/widget/WidgetGroup/","title":"WidgetGroup","text":""},{"location":"zh/ldlib/ui/widget/WidgetGroup/#widgetgroup","title":"WidgetGroup","text":"<p> <code>WidgetGroup</code></p> <p><code>WidgetGroup</code> is a container which can add child widgets. Widget inherints from <code>WidgetGroup</code> can add child widgets as well. </p> <p>Note</p> <p>We will add a  <code>WidgetGroup</code> for all widget inherints from it.</p>"},{"location":"zh/ldlib/ui/widget/WidgetGroup/#basic-properties","title":"Basic properties","text":"<p>All properties can be accessed via Java / KubeJS.</p> Field Description <code>widgets</code> all child widgets <code>layout</code> layout of child widgets <code>layoutPadding</code> padding offset JavaKubeJS <pre><code>for (var child in group.widgets) {\n\n}\n</code></pre> <pre><code>for (let child of group.widgets) {\n\n}\n</code></pre> <p>Warning</p> <p>DO NOT add widget to the <code>group.widgets</code> directly!! please check below methods.</p>"},{"location":"zh/ldlib/ui/widget/WidgetGroup/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/widget/WidgetGroup/#addwidgets","title":"<code>addWidgets()</code>","text":"<p>Add child widgets to it in order.</p> Java / KubeJS <pre><code>var button = ...;\nvar label = ...;\ngroup.addWidgets(button, label);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/WidgetGroup/#removewidget-clearallwidgets","title":"<code>removeWidget() / clearAllWidgets()</code>","text":"<p>Remove child widget from it.</p> Java / KubeJS <pre><code>var child = group.getFirstWidgetById(\"button_id\");\ngroup.removeWidget(child);\ngroup.clearAllWidget();\n</code></pre>"},{"location":"zh/ldlib/ui/widget/WidgetGroup/#waittoadded-waittoremoved","title":"<code>waitToAdded() / waitToRemoved()</code>","text":"<p>Basically equals to the <code>addWidgets()</code> and <code>removeWidget()</code>. However, these two methods is useful for iteration and multi-thread. It handles widget in the next tick (in main thread).</p>"},{"location":"zh/ldlib/ui/widget/progress/","title":"ProgressWidget","text":""},{"location":"zh/ldlib/ui/widget/progress/#progresswidget","title":"ProgressWidget","text":"Your browser does not support video.    <p>The <code>ProgressWidget</code> is a UI component that visually represents progress using a progress bar. It can be used in various contexts, such as tracking crafting progress, energy levels, or other dynamically changing values.</p>"},{"location":"zh/ldlib/ui/widget/progress/#features","title":"Features","text":"<ul> <li>Customizable progress texture \u2013 Define how the progress bar looks.</li> <li>Dynamic progress updates \u2013 Uses a <code>DoubleSupplier</code> to fetch real-time progress.</li> </ul>"},{"location":"zh/ldlib/ui/widget/progress/#properties","title":"Properties","text":"Field Type Description <code>lastProgressValue</code> <code>double</code> Stores the last recorded progress value."},{"location":"zh/ldlib/ui/widget/progress/#apis","title":"APIs","text":""},{"location":"zh/ldlib/ui/widget/progress/#setprogresssupplier","title":"setProgressSupplier","text":"<p>Sets a progress supplier from 0 to 1.</p> JavaKubeJS <pre><code>progressWidget.setProgressSupplier(() -&gt; 0.3);\n</code></pre> <pre><code>progressWidget.setProgressSupplier(() =&gt; 0.3);\n</code></pre>"},{"location":"zh/ldlib/ui/widget/progress/#setdynamichovertips","title":"setDynamicHoverTips","text":"<p>Sets a dynamic hovertips based on the progress value.</p> JavaKubeJS <pre><code>progressWidget.setDynamicHoverTips(progress -&gt; \"current progress is %.f%\".format(progress * 100));\n</code></pre> <pre><code>progressWidget.setDynamicHoverTips(progress =&gt; `current progress is ${progress * 100}%` );\n</code></pre>"},{"location":"zh/ldlib2/","title":"\u4ecb\u7ecd","text":""},{"location":"zh/ldlib2/#_1","title":"\u4ecb\u7ecd","text":"<p> Since 2.0.0 </p> <p>LDLib2 \u662f\u5bf9\u539f\u7248 LDLib \u7684\u5b8c\u5168\u91cd\u5199\uff0c\u4ece\u5934\u8bbe\u8ba1\u4ee5\u652f\u6301\u73b0\u4ee3\u7248\u672c\u7684 Minecraft\u3002 \u5b83\u5728\u6a21\u7ec4\u5f00\u53d1\u7684\u8bb8\u591a\u9886\u57df\u63d0\u4f9b\u4e86\u5148\u8fdb\u3001\u9ad8\u7ea7\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u663e\u8457\u964d\u4f4e\u4e86\u5f00\u53d1\u590d\u6742\u6027\u548c\u957f\u671f\u7ef4\u62a4\u6210\u672c\u3002</p> <p>LDLib2 \u62e5\u6709\u4e00\u4e2a\u5e9e\u5927\u4e14\u7ed3\u6784\u826f\u597d\u7684\u4ee3\u7801\u5e93\uff0c\u4e3aUI\u7cfb\u7edf\u3001\u7740\u8272\u5668\u3001\u6a21\u578b\u6e32\u67d3\u3001\u6570\u636e\u540c\u6b65\u4e0e\u6301\u4e45\u5316\u4ee5\u53ca\u6e38\u620f\u5185\u53ef\u89c6\u5316\u7f16\u8f91\u5668\u63d0\u4f9b\u4e86\u575a\u5b9e\u7684\u57fa\u7840\u8bbe\u65bd\uff0c\u4f7f\u5f00\u53d1\u8005\u80fd\u591f\u66f4\u9ad8\u6548\u5730\u6784\u5efa\u590d\u6742\u7cfb\u7edf\u3002</p> <p> \u52a0\u5165\u6211\u4eec\u7684 Discord</p> <p> LDLib2 \u4ed3\u5e93</p>"},{"location":"zh/ldlib2/#ldlib","title":"\ud83d\udca1 \u4e0e LDLib \u7684\u4e3b\u8981\u533a\u522b","text":"<ul> <li>\u5b8c\u5168\u91cd\u65b0\u8bbe\u8ba1\u7684\u67b6\u6784 \u6240\u6709\u6838\u5fc3\u7cfb\u7edf\u90fd\u5df2\u91cd\u5199\uff0c\u4ee5\u7b26\u5408\u73b0\u4ee3 Minecraft \u7248\u672c\u7684\u5185\u90e8\u7ed3\u6784\uff0c\u4ece\u800c\u5e26\u6765\u66f4\u6e05\u6670\u3001\u66f4\u53ef\u9760\u7684\u4ee3\u7801\u3002</li> <li>\u5168\u9762\u7684\u6587\u6863 LDLib2 \u5305\u542b\u8be6\u7ec6\u7684\u6587\u6863\u3001\u6ce8\u91ca\u548c\u793a\u4f8b\u4ee3\u7801\uff0c\u89e3\u51b3\u4e86 LDLib \u957f\u671f\u4ee5\u6765\u5b58\u5728\u7684\u5b9e\u73b0\u4e0d\u6e05\u6670\u3001\u96be\u4ee5\u9605\u8bfb\u7684\u95ee\u9898\u3002</li> <li>\u79fb\u9664\u4e86\u9057\u7559\u7cfb\u7edf \u8bb8\u591a\u8fc7\u65f6\u6216\u672a\u4f7f\u7528\u7684\u6846\u67b6\u5df2\u88ab\u79fb\u9664\uff0c\u4f7f LDLib2 \u66f4\u52a0\u8f7b\u91cf\u4e14\u6613\u4e8e\u7ef4\u62a4\u3002</li> <li>\u6539\u8fdb\u7684\u6a21\u7ec4\u517c\u5bb9\u6027 \u4e3a JEI\u3001KubeJS\u3001EMI \u7b49\u4e3b\u6d41\u6a21\u7ec4\u63d0\u4f9b\u4e86\u66f4\u7a33\u5b9a\u3001\u66f4\u53ef\u9760\u7684\u96c6\u6210\u3002</li> </ul>"},{"location":"zh/ldlib2/#_2","title":"\u6838\u5fc3\u6a21\u5757","text":"<ul> <li>\u6570\u636e\u540c\u6b65\u4e0e\u6301\u4e45\u5316</li> <li>LDLib2 UI</li> <li>\u7740\u8272\u5668</li> <li>\u6a21\u578b\u6e32\u67d3</li> <li>\u6e38\u620f\u5185\u7f16\u8f91\u5668</li> </ul>"},{"location":"zh/ldlib2/java_integration/","title":"Java \u96c6\u6210","text":""},{"location":"zh/ldlib2/java_integration/#java","title":"Java \u96c6\u6210","text":"<p> Since 2.0.0 </p>"},{"location":"zh/ldlib2/java_integration/#maven","title":"Maven","text":"<p>\u60a8\u53ef\u4ee5\u4ece\u6211\u4eec\u7684 Maven \u4ed3\u5e93 \u627e\u5230\u6700\u65b0\u7248\u672c\u3002</p> <p></p> <pre><code>repositories {\n    // LDLib2\n    maven { url = \"https://maven.firstdark.dev/snapshots\" } \n}\n\ndependencies {\n    // LDLib2\n    implementation(\"com.lowdragmc.ldlib2:ldlib2-neoforge-${minecraft_version}:${ldlib2_version}:all\") { transitive = false }\n    compileOnly(\"org.appliedenergistics.yoga:yoga:1.0.0\")   \n}\n</code></pre>"},{"location":"zh/ldlib2/java_integration/#idea-ldlib","title":"IDEA \u63d2\u4ef6 - LDLib \u5f00\u53d1\u5de5\u5177","text":"<p>\u5982\u679c\u60a8\u6253\u7b97\u4f7f\u7528 LDLib2 \u8fdb\u884c\u5f00\u53d1\uff0c\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u60a8\u5b89\u88c5\u6211\u4eec\u7684 IDEA \u63d2\u4ef6 LDLib Dev Tool\u3002 \u8be5\u63d2\u4ef6\u5177\u6709\uff1a</p> <ul> <li>\u4ee3\u7801\u9ad8\u4eae</li> <li>\u8bed\u6cd5\u68c0\u67e5</li> <li>\u4ee3\u7801\u8df3\u8f6c</li> <li>\u81ea\u52a8\u8865\u5168</li> <li>\u5176\u4ed6\u529f\u80fd</li> </ul> <p>\u8fd9\u4e9b\u529f\u80fd\u80fd\u6781\u5927\u5730\u5e2e\u52a9\u60a8\u5229\u7528 LDLib2 \u7684\u7279\u6027\u3002\u7279\u522b\u662f\uff0cLDLib2 \u7684\u6240\u6709\u6ce8\u89e3\u90fd\u5df2\u5f97\u5230\u652f\u6301\u548c\u4f7f\u7528\u3002</p>"},{"location":"zh/ldlib2/java_integration/#ldlibplugin","title":"LDLibPlugin","text":"<p>\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>ILDLibPlugin</code> \u548c <code>@LDLibPlugin</code> \u6765\u521b\u5efa\u4e00\u4e2a LDLibPlugin\u3002 </p><pre><code>@LDLibPlugin\npublic class MyLDLibPlugin implements ILDLibPlugin {\n    public void onLoad() {\n        // \u5728\u8fd9\u91cc\u4e3a LDLib2 \u8fdb\u884c\u60a8\u7684\u6ce8\u518c\u6216\u8bbe\u7f6e\u3002\n    }\n}\n</code></pre><p></p>"},{"location":"zh/ldlib2/sync/","title":"\u4ecb\u7ecd","text":""},{"location":"zh/ldlib2/sync/#_1","title":"\u4ecb\u7ecd","text":"<p> Since 2.0.0 </p> <p>\u5728 Minecraft \u6a21\u7ec4\u5f00\u53d1\u4e2d\uff0c\u6700\u91cd\u590d\u4e14\u5bb9\u6613\u51fa\u9519\u7684\u4efb\u52a1\u4e4b\u4e00\u5c31\u662f\u5904\u7406\u670d\u52a1\u5668\u4e0e\u5ba2\u6237\u7aef\u4e4b\u95f4\u7684\u6570\u636e\u540c\u6b65\u4ee5\u53ca\u6570\u636e\u6301\u4e45\u5316\u3002</p> <p>\u65e0\u8bba\u4f60\u662f\u5728\u5904\u7406\uff1a - \u65b9\u5757\u5b9e\u4f53 - \u5b9e\u4f53 - \u5c4f\u5e55 / GUI - \u4efb\u4f55\u4f60\u5e0c\u671b\u5904\u7406\u7684\u5bf9\u8c61</p> <p>...\u4f60\u603b\u662f\u4f1a\u9762\u4e34\u76f8\u540c\u7684\u4e09\u4e2a\u95ee\u9898\uff1a</p> <ol> <li>\u6570\u636e\u5e94\u8be5\u5728\u4f55\u65f6\u540c\u6b65\uff1f (\u6bcf\u523b\uff1f\u53d8\u5316\u65f6\uff1f\u6253\u5f00GUI\u65f6\uff1f)</li> <li>\u5e94\u8be5\u540c\u6b65\u54ea\u4e9b\u6570\u636e\uff1f (\u54ea\u4e9b\u5b57\u6bb5\u9700\u8981\u5904\u7406\uff1f)</li> <li>\u5e94\u8be5\u5982\u4f55\u5e8f\u5217\u5316\u6216\u4fdd\u5b58\uff1f (NBT \u8bfb\u5199\uff1f)</li> </ol> <p>\u4e3a\u4ec0\u4e48\u8fd9\u662f\u4e2a\u95ee\u9898\uff1f</p> <p>\u5c3d\u7ba1\u540c\u6b65\u548c\u6301\u4e45\u5316\u672c\u8eab\u5e76\u4e0d\u56f0\u96be\uff0c\u4f46\u60f3\u8981\u5e72\u51c0\u5730\u5b9e\u73b0\u5b83\u4eec\u901a\u5e38\u9700\u8981\u5927\u91cf\u6837\u677f\u4ee3\u7801\uff1a - \u91cd\u590d\u7684 NBT \u8bfb\u5199\u903b\u8f91 - \u624b\u52a8\u7684\u7f51\u7edc\u6570\u636e\u5305 - \u6563\u5e03\u5728\u5404\u5904\u7684\u91cd\u590d\u540c\u6b65\u903b\u8f91 - \u5bb9\u6613\u5bfc\u81f4\u5ba2\u6237\u7aef/\u670d\u52a1\u5668\u72b6\u6001\u4e0d\u540c\u6b65 - \u96be\u4ee5\u9605\u8bfb\u548c\u7ef4\u62a4\u7684\u4ee3\u7801 - \u7531\u4e0d\u5fc5\u8981\u7684\u540c\u6b65\u8c03\u7528\u5f15\u8d77\u7684\u6027\u80fd\u95ee\u9898</p>"},{"location":"zh/ldlib2/sync/#mojang","title":"Mojang \u7f16\u89e3\u7801\u5668\u7cfb\u7edf\u7684\u5c40\u9650\u6027","text":"<p>\u73b0\u4ee3 Minecraft \u5f15\u5165\u4e86 <code>Codec</code> \u548c <code>StreamCodec</code> \u7cfb\u7edf\uff0c\u8fd9\u6781\u5927\u5730\u7b80\u5316\u4e86\u6570\u636e\u7ed3\u6784\u7684\u5b9a\u4e49\u3002</p> <p>\u7136\u800c\uff1a</p> <p>Codec \u6709\u52a9\u4e8e\u89e3\u51b3\u683c\u5f0f\u95ee\u9898\uff0c\u4f46\u65e0\u52a9\u4e8e\u540c\u6b65</p> <p>\u8981\u5728\u6a21\u7ec4\u4e2d\u5b9e\u9645\u4f7f\u7528 Codec\uff0c\u4f60\u4ecd\u7136\u9700\u8981\uff1a - \u624b\u52a8\u5b9a\u4e49\u7f16\u89e3\u7801\u5668\u7ed3\u6784 - \u7f16\u5199\u7f16\u7801/\u89e3\u7801\u903b\u8f91 - \u663e\u5f0f\u89e6\u53d1\u540c\u6b65 - \u7ba1\u7406\u6570\u636e\u5305 - \u5411\u5ba2\u6237\u7aef\u5206\u53d1\u66f4\u65b0</p> <p>Codec \u51cf\u5c11\u4e86\u683c\u5f0f\u5316\u65b9\u9762\u7684\u75db\u82e6\uff0c\u4f46\u5e76\u6ca1\u6709\u51cf\u5c11\u540c\u6b65/\u6301\u4e45\u5316\u4ee3\u7801\u7684\u6570\u91cf\u3002</p>"},{"location":"zh/ldlib2/sync/#_2","title":"\u7b80\u5316\u540c\u6b65\u4e0e\u6301\u4e45\u5316","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u957f\u671f\u5b58\u5728\u7684\u95ee\u9898\uff0cLDLib2 \u63d0\u4f9b\u4e86\u4e00\u4e2a\u57fa\u4e8e\u6ce8\u89e3\u7684\u6570\u636e\u7ba1\u7406\u6846\u67b6\uff0c\u5b83\u80fd\u591f\uff1a - \u5728 <code>\u670d\u52a1\u5668</code> \u548c <code>\u5ba2\u6237\u7aef</code> \u4e4b\u95f4\u81ea\u52a8\u540c\u6b65\u6570\u636e\u3002 - \u81ea\u52a8\u5904\u7406\u4efb\u4f55\u7c7b\u7684\u6301\u4e45\u5316\u3002 - \u68c0\u6d4b\u66f4\u6539\u5e76\u4ec5\u540c\u6b65\u6240\u9700\u5185\u5bb9\u3002 - \u5c06\u5e8f\u5217\u5316\u4efb\u52a1\u5378\u8f7d\u5230\u540e\u53f0\u7ebf\u7a0b\uff08\u652f\u6301\u591a\u6838\uff09\u3002 - \u4ee5\u58f0\u660e\u5f0f\u65b9\u5f0f\u5de5\u4f5c\u2014\u2014\u53ea\u9700\u6ce8\u89e3\u5b57\u6bb5\uff0c\u5373\u53ef\u5b8c\u6210\u3002</p> <p>\u76ee\u6807\u5f88\u7b80\u5355\uff1a</p> <p>\u6838\u5fc3\u7406\u5ff5\uff1a\u4f60\u4e0d\u5e94\u8be5\u624b\u52a8\u7f16\u5199\u540c\u6b65\u6216\u5e8f\u5217\u5316\u4ee3\u7801</p> <p>\u58f0\u660e\u4e00\u4e2a\u5b57\u6bb5\u662f\u4ec0\u4e48 \u2014\u2014 LDLib2 \u6765\u5904\u7406\u5b83\u662f\u5982\u4f55\u540c\u6b65\u548c\u4fdd\u5b58\u7684\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u6700\u5c0f\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u5728 <code>\u539f\u7248 (Forge)</code> \u548c <code>LDLib2</code> \u4e4b\u95f4\u901a\u5e38\u9700\u8981\u7f16\u5199\u7684\u4ee3\u7801\u91cf\u3002</p> <p>(\u70b9\u51fb\u9009\u9879\u5361\u5207\u6362\u4ee3\u7801)</p> \u274c\u539f\u7248 / Forge \u98ce\u683c\u5b9e\u73b0\u2705 \u4f7f\u7528 LDLib2 <pre><code>public class ExampleBE extends BlockEntity {\n\n    private int energy = 0;\n    private String owner = \"\";\n\n    @Override\n    public void saveAdditional(CompoundTag tag) {\n        super.saveAdditional(tag);\n        tag.putInt(\"Energy\", energy);\n        tag.putString(\"Owner\", owner);\n    }\n\n    @Override\n    public void load(CompoundTag tag) {\n        super.load(tag);\n        energy = tag.getInt(\"Energy\");\n        owner = tag.getString(\"Owner\");\n    }\n\n    @Override\n    public CompoundTag getUpdateTag() {\n        CompoundTag tag = new CompoundTag();\n        saveAdditional(tag);\n        return tag;\n    }\n\n    @Override\n    public void onDataPacket(Connection net, ClientboundBlockEntityDataPacket pkt) {\n        load(pkt.getTag());\n    }\n\n    protected void syncAndSave() {\n        if (!level.isClientSide) {\n            setChanged();\n            level.sendBlockUpdated(worldPosition, getBlockState(), getBlockState(), 3);\n        }\n    }\n\n    public void setEnergy(int newEnergy) {\n        if (this.energy != newEnergy) {\n            this.energy = newEnergy;\n            syncAndSave();\n        }\n    }\n\n    public void setOwner(String newOwner) {\n        if (this.energy != newOwner) {\n            this.energy = newOwner;\n            syncAndSave();\n        }\n    }\n}\n</code></pre> <pre><code>public class ExampleBE extends BlockEntity implements ISyncPersistRPCBlockEntity {\n    @Getter\n    private final FieldManagedStorage syncStorage = new FieldManagedStorage(this);\n\n    // \u4f60\u7684\u5b57\u6bb5\n    @Persisted\n    @DescSynced\n    public int energy = 0;\n\n    @Persisted\n    @DescSynced\n    public String owner = \"\";\n}\n</code></pre> <p>\u5982\u5bf9\u6bd4\u6240\u793a\uff0cLDLib2 \u63d0\u4f9b\u7684\u6ce8\u89e3\u9a71\u52a8\u7cfb\u7edf\u6bd4\u4f20\u7edf\u7684\u539f\u7248\u6216 Forge \u98ce\u683c\u65b9\u6cd5\u8981\u7b80\u6d01\u5f97\u591a\uff0c\u4e14\u8868\u8fbe\u80fd\u529b\u66f4\u5f3a\u3002</p> <p>\u4f60\u4e0d\u9700\u8981\u4efb\u4f55\u989d\u5916\u7684\u6837\u677f\u4ee3\u7801\u3002 \u6bcf\u5f53 <code>energy</code> \u6216 <code>owner</code> \u53d1\u751f\u53d8\u5316\u65f6\uff0cLDLib2 \u5c06\u81ea\u52a8\u5904\u7406\uff1a - \u53d8\u66f4\u68c0\u6d4b - \u670d\u52a1\u5668 \u2192 \u5ba2\u6237\u7aef\u540c\u6b65 - \u6570\u636e\u6301\u4e45\u5316</p> <p>...\u800c\u65e0\u9700\u4f60\u624b\u52a8\u8c03\u7528\u4efb\u4f55\u540c\u6b65\u6216\u4fdd\u5b58\u51fd\u6570\u3002</p>"},{"location":"zh/ldlib2/sync/#_3","title":"\u4e0d\u4ec5\u4ec5\u662f\u51cf\u5c11\u4ee3\u7801\u91cf","text":"<p>\u4f7f\u7528\u539f\u7248 Forge \u5de5\u4f5c\u6d41\u65f6\uff0c\u5982\u679c\u4f60\u60f3\u4f18\u5316\u540c\u6b65\u2014\u2014\u4f8b\u5982\u4ec5\u540c\u6b65\u9009\u5b9a\u7684\u5b57\u6bb5\uff0c\u6216\u4ec5\u540c\u6b65\u5df2\u66f4\u6539\u7684\u5b57\u6bb5\u2014\u2014\u4f60\u6700\u7ec8\u5f80\u5f80\u4f1a\u7f16\u5199\u66f4\u590d\u6742\u7684\u4ee3\u7801\uff1a - \u624b\u52a8\u810f\u6807\u5fd7\u8ddf\u8e2a - \u81ea\u5b9a\u4e49\u6570\u636e\u5305\u7ed3\u6784 - \u663e\u5f0f\u7684\u670d\u52a1\u5668/\u5ba2\u6237\u7aef\u5904\u7406\u5668 - \u91cd\u590d\u7684\u8bfb\u5199\u903b\u8f91 - \u5206\u79bb\u7684\u6301\u4e45\u5316\u548c\u540c\u6b65\u7cfb\u7edf - \u591a\u5c42\u7684\u6761\u4ef6\u903b\u8f91</p> <p>\u5982\u679c\u4f60\u60f3\u8981\u5ba2\u6237\u7aef \u2192 \u670d\u52a1\u5668\u540c\u6b65\uff0c\u5219\u5fc5\u987b\u521b\u5efa\u5e76\u6ce8\u518c\u4f60\u81ea\u5df1\u7684\u7f51\u7edc\u6570\u636e\u5305\u3002</p> <p>\u8fd9\u4f1a\u5bfc\u81f4\u5927\u91cf\u4ee3\u7801\u788e\u7247\u5316\uff0c\u4f7f\u5f97\u4ee3\u7801\u5e93\u66f4\u96be\u7ef4\u62a4\u3002</p>"},{"location":"zh/ldlib2/sync/#ldlib2","title":"LDLib2 \u63d0\u4f9b\u4e86\u66f4\u7cbe\u7ec6\u548c\u73b0\u4ee3\u7684\u7cfb\u7edf","text":"<p>\u76f8\u6bd4\u4e4b\u4e0b\uff0cLDLib2 \u7684\u6846\u67b6\u662f\u7ec6\u7c92\u5ea6\u3001\u58f0\u660e\u5f0f\u4e14\u5b8c\u5168\u57fa\u4e8e\u4e8b\u4ef6\u7684\u3002</p> <p>\u5b83\u63d0\u4f9b\uff1a - \u81ea\u52a8\u53d8\u66f4\u68c0\u6d4b   \u4ec5\u540c\u6b65\u5df2\u4fee\u6539\u7684\u5b57\u6bb5\u3002 - \u9009\u62e9\u6027\u540c\u6b65   \u5982\u679c\u9700\u8981\uff0c\u4f60\u4ecd\u7136\u53ef\u4ee5\u624b\u52a8\u8bf7\u6c42\u5b57\u6bb5\u7ea7\u540c\u6b65\u3002 - \u81ea\u52a8\u6301\u4e45\u5316   \u7528 <code>@Persisted</code> \u6807\u8bb0\u4efb\u4f55\u5b57\u6bb5\uff0c\u5b83\u4f1a\u81ea\u52a8\u5e8f\u5217\u5316\u3002 - \u73b0\u4ee3\u53cc\u5411 RPC   \u4f60\u53ef\u4ee5\u4f7f\u7528 LDLib2 \u5185\u7f6e\u7684 RPC \u4e8b\u4ef6\u7cfb\u7edf\u8fdb\u884c\u5ba2\u6237\u7aef \u2192 \u670d\u52a1\u5668\u6216\u670d\u52a1\u5668 \u2192 \u5ba2\u6237\u7aef\u6570\u636e\u4f20\u8f93\uff0c\u800c\u65e0\u9700\u7f16\u5199\u6570\u636e\u5305\u3002 - \u540e\u53f0\uff08\u5f02\u6b65\uff09\u5e8f\u5217\u5316   \u5927\u578b\u6216\u590d\u6742\u7684\u6570\u636e\u53ef\u4ee5\u5728\u4e3b\u7ebf\u7a0b\u5916\u8fdb\u884c\u5e8f\u5217\u5316\u3002 - \u6e05\u6670\u3001\u4e00\u81f4\u7684\u7ed3\u6784   \u6240\u6709\u540c\u6b65\u548c\u6301\u4e45\u5316\u903b\u8f91\u90fd\u662f\u96c6\u4e2d\u4e14\u58f0\u660e\u5f0f\u7684\u3002</p> <p>\u7531\u4e8e\u8fd9\u79cd\u8bbe\u8ba1\uff0cLDLib2 \u7684\u7cfb\u7edf\u4e0d\u4ec5\u66f4\u6613\u7528\uff0c\u800c\u4e14\u529f\u80fd\u66f4\u5f3a\u5927\u3001\u6269\u5c55\u6027\u66f4\u597d\u3001\u7ef4\u62a4\u8d77\u6765\u4e5f\u5bb9\u6613\u5f97\u591a\u3002</p>"},{"location":"zh/ldlib2/sync/#_4","title":"\u540c\u6b65\u4e0e\u6301\u4e45\u5316\u7684\u73b0\u4ee3\u65b9\u6cd5","text":"<p>LDLib2 \u5c06\u6a21\u5f0f\u4ece\uff1a</p> <p>\u201c\u6bcf\u6b21\u4f7f\u7528\u6570\u636e\u65f6\u90fd\u624b\u52a8\u540c\u6b65\u548c\u5e8f\u5217\u5316\u3002\u201d</p> <p>\u8f6c\u53d8\u4e3a\uff1a</p> <p>\u201c\u5b9a\u4e49\u4e00\u6b21\u4f60\u7684\u6570\u636e\u3002 LDLib2 \u8d1f\u8d23\u5176\u4f59\u4e00\u5207\u3002\u201d</p> <p>\u8fd9\u5e26\u6765\u4e86\uff1a - \u66f4\u5c11\u7684\u4ee3\u7801 - \u66f4\u5c11\u7684\u9519\u8bef - \u66f4\u597d\u7684\u6027\u80fd - \u8de8\u6a21\u7ec4\u7684\u4e00\u81f4\u7ed3\u6784 - \u66f4\u6613\u4e8e\u8c03\u8bd5 - \u5728\u73b0\u4ee3 CPU \u4e0a\u66f4\u597d\u7684\u5e76\u884c\u6027</p> <p>\u5728\u63a5\u4e0b\u6765\u7684\u9875\u9762\u4e2d\uff0c\u4f60\u5c06\u5b66\u4e60\u5982\u4f55\uff1a - \u4f7f\u7528 <code>@Persisted</code>\u3001<code>@DescSynced</code> \u548c\u5176\u4ed6\u6ce8\u89e3 - \u7ba1\u7406\u81ea\u5b9a\u4e49\u6570\u636e\u7ed3\u6784 - \u521b\u5efa RPC \u4e8b\u4ef6 - \u6267\u884c\u624b\u52a8\uff08\u53ef\u9009\uff09\u7ec6\u7c92\u5ea6\u540c\u6b65 - \u5c06 LDLib2 \u4e0e\u65b9\u5757\u5b9e\u4f53\u3001\u5b9e\u4f53\u548c GUI \u7cfb\u7edf\u96c6\u6210</p> <p>LDLib2 \u65e8\u5728\u63d0\u4f9b\u4e00\u4e2a\u5b8c\u6574\u3001\u73b0\u4ee3\u4e14\u9ad8\u5ea6\u53ef\u5b9a\u5236\u7684\u540c\u6b65\u6846\u67b6\uff0c\u9002\u7528\u4e8e\u51e0\u4e4e\u6240\u6709\u7684\u6a21\u7ec4\u5f00\u53d1\u573a\u666f\u3002</p>"},{"location":"zh/ldlib2/sync/#codec","title":"\u7b80\u5316 Codec \u4e0e\u5e8f\u5217\u5316","text":"<p>\u867d\u7136\u73b0\u4ee3\u7684 Codec \u548c StreamCodec \u7cfb\u7edf\u65e0\u7591\u975e\u5e38\u5f3a\u5927\uff0c\u5e76\u4e3a\u65b0\u7248 Minecraft \u7684\u5e8f\u5217\u5316\u5e26\u6765\u4e86\u5de8\u5927\u6539\u8fdb\uff0c\u4f46\u5b9a\u4e49\u548c\u4f7f\u7528\u4e00\u4e2a Codec \u4ecd\u7136\u8fdc\u975e\u6613\u4e8b\u3002LDLib2 \u63d0\u4f9b\u4e86\u4e00\u79cd\u66f4\u7b80\u5355\u3001\u57fa\u4e8e\u6ce8\u89e3\u7684\u65b9\u6cd5\u3002</p> \u274c\u539f\u7248 / Forge \u98ce\u683c\u5b9e\u73b0\u2705 \u4f7f\u7528 LDLib2 <pre><code>public class MyObject implements INBTSerializable&lt;CompoundTag&gt; {\n    public final static Codec&lt;MyObject&gt; CODEC = RecordCodecBuilder.create(instance -&gt; instance.group(\n            ResourceLocation.CODEC.fieldOf(\"rl\").forGetter(MyObject::getResourceLocation),\n            Direction.CODEC.fieldOf(\"enum\").forGetter(MyObject::getEnumValue),\n            ItemStack.OPTIONAL_CODEC.fieldOf(\"item\").forGetter(MyObject::getItemstack)\n    ).apply(instance, MyObject::new));\n\n    private ResourceLocation resourceLocation = LDLib2.id(\"test\");\n    private Direction enumValue = Direction.NORTH;\n    private ItemStack itemstack = ItemStack.EMPTY;\n\n    public MyObject(ResourceLocation resourceLocation, Direction enumValue, ItemStack itemstack) {\n        this.resourceLocation = resourceLocation;\n        this.enumValue = enumValue;\n        this.itemstack = itemstack;\n    }\n\n    public ResourceLocation getResourceLocation() {\n        return resourceLocation;\n    }\n\n    public Direction getEnumValue() {\n        return enumValue;\n    }\n\n    public ItemStack getItemstack() {\n        return itemstack;\n    }\n\n    // for INBTSerializable\n    @Override\n    public CompoundTag serializeNBT(HolderLookup.Provider provider) {\n        var tag = new CompoundTag();\n        tag.putString(\"rl\", resourceLocation.toString());\n        tag.putString(\"enum\", enumValue.toString());\n        tag.put(\"item\", ItemStack.OPTIONAL_CODEC.encodeStart(provider.createSerializationContext(NbtOps.INSTANCE), itemstack).getOrThrow());\n        return tag;\n    }\n\n    @Override\n    public void deserializeNBT(HolderLookup.Provider provider, CompoundTag nbt) {\n        resourceLocation = ResourceLocation.parse(nbt.getString(\"rl\"));\n        enumValue = Direction.byName(nbt.getString(\"enum\"));\n        itemstack = ItemStack.OPTIONAL_CODEC.parse(provider.createSerializationContext(NbtOps.INSTANCE), nbt.get(\"item\")).getOrThrow();\n    }\n}\n</code></pre> <pre><code>public class MyObject implements IPersistedSerializable {\n    public final static Codec&lt;MyObject&gt; CODEC = PersistedParser.createCodec(MyObject::new);\n\n    @Persisted(key = \"rl\")\n    private ResourceLocation resourceLocation = LDLib2.id(\"test\");\n    @Persisted(key = \"enum\")\n    private Direction enumValue = Direction.NORTH;\n    @Persisted(key = \"item\")\n    private ItemStack itemstack = ItemStack.EMPTY;\n\n    // IPersistedSerializable \u7ee7\u627f\u81ea INBTSerializable\uff0c\u4f60\u4e0d\u9700\u8981\u624b\u52a8\u5b9e\u73b0\u5b83\n}\n</code></pre>"},{"location":"zh/ldlib2/sync/#_5","title":"\u4e3a\u4ec0\u4e48\u8fd9\u66f4\u597d","text":"<p>\u4f7f\u7528\u539f\u7248/Forge \u98ce\u683c\u7684 Codec \u65f6\uff0c\u4f60\u5fc5\u987b\uff1a - \u5728\u7f16\u89e3\u7801\u5668\u4e2d\u5b9a\u4e49\u6bcf\u4e2a\u5b57\u6bb5 - \u624b\u52a8\u6620\u5c04 getter \u65b9\u6cd5 - \u7ba1\u7406\u7f16\u7801/\u89e3\u7801\u9519\u8bef - \u5904\u7406\u6ce8\u518c\u8868\u64cd\u4f5c</p> <p>\u8fd9\u5bfc\u81f4\u4e86\u9ad8\u6602\u7684\u6837\u677f\u4ee3\u7801\u6210\u672c\u548c\u7ef4\u62a4\u96be\u5ea6\u3002</p> <p>LDLib2 \u7684\u4f18\u52bf</p> <p>LDLib2 \u53ef\u4ee5\u4e3a\u4f60\u7684\u7c7b\u81ea\u52a8\u751f\u6210\u5b8c\u6574\u7684 Codec\uff0c\u4f7f\u7528\uff1a </p><pre><code>PersistedParser.createCodec(MyObject::new)\n</code></pre> \u4f60\u4e0d\u518d\u9700\u8981\u624b\u52a8\u5217\u51fa\u6bcf\u4e2a\u5b57\u6bb5\u6216\u5b9a\u4e49\u5b83\u4eec\u7684\u7f16\u7801\u65b9\u5f0f\u3002<p></p> <p>\u53ea\u8981\u4e00\u4e2a\u5b57\u6bb5\u7528 <code>@Persisted</code> \u6ce8\u89e3\uff0cLDLib2 \u5c31\u4f1a\u5c06\u5176\u5305\u542b\u5728\u751f\u6210\u7684 Codec \u4e2d\u3002</p>"},{"location":"zh/ldlib2/sync/#nbt","title":"\u5b8c\u6574\u7684 NBT \u652f\u6301\uff08\u65e0\u9700\u989d\u5916\u4ee3\u7801\uff09","text":"<p>\u901a\u8fc7\u5b9e\u73b0 <code>IPersistedSerializable</code>\uff0c\u4f60\u7684\u7c7b\u5c06\u83b7\u5f97\uff1a - \u5904\u7406\u6ce8\u518c\u8868\u64cd\u4f5c\u7684\u80fd\u529b - \u81ea\u52a8 NBT \u5e8f\u5217\u5316 - \u81ea\u52a8 NBT \u53cd\u5e8f\u5217\u5316 - \u4e0e\u4efb\u4f55\u671f\u671b <code>INBTSerializable</code> \u7684\u7cfb\u7edf\u7684\u5b8c\u5168\u517c\u5bb9\u6027</p>"},{"location":"zh/ldlib2/sync/PersistedParser/","title":"PersistedParser","text":""},{"location":"zh/ldlib2/sync/PersistedParser/#persistedparser","title":"PersistedParser","text":"<p>PersistedParser \u662f\u4e00\u4e2a\u5de5\u5177\u7c7b\uff0c\u7528\u4e8e\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u5e26\u6709 <code>@Persisted</code> \u6216 <code>@Configurable</code> \u6ce8\u89e3\u7684\u5bf9\u8c61\u7684\u5b57\u6bb5\u3002</p>"},{"location":"zh/ldlib2/sync/PersistedParser/#_1","title":"\u5e8f\u5217\u5316","text":"<pre><code>@EqualsAndHashCode\npublic class TestData implements IPersistedSerializable {\n    @Persisted\n    private float numberFloat = 0.0f;\n    @Configurable\n    private boolean booleanValue = false;\n    @Persisted(key = \"key\")\n    private String stringValue = \"default\";\n\n    public TestData(float initialValue) {\n        this.numberFloat = initialValue;\n    }\n}\n\nvar instance = new TestData(100f);\nvar output = PersistedParser.serialize(JsonOps.INSTANCE, instance, provider).result().get();\nSystem.out.println(output);\nvar newInstance = new TestData(0f);\nvar data = PersistedParser.deserialize(JsonOps.INSTANCE, output, newInstance, provider);\nSystem.out.println(newInstance.equals(instance));\n</code></pre> <p>\u63a7\u5236\u53f0\u8f93\u51fa\u5e94\u4e3a</p> <pre><code>{\n    \"numberFloat\": 100,\n    \"booleanValue\": false,\n    \"stringValue\": \"default\",\n}\ntrue\n</code></pre>"},{"location":"zh/ldlib2/sync/PersistedParser/#codec","title":"\u521b\u5efa Codec","text":"<p>PersistedParser \u63d0\u4f9b\u7684\u53e6\u4e00\u4e2a\u6709\u7528\u5de5\u5177\u662f\u57fa\u4e8e\u6ce8\u89e3\u521b\u5efa Codec\u3002</p> <pre><code> public class MyObject implements IPersistedSerializable {\n    public final static Codec&lt;MyObject&gt; CODEC = PersistedParser.createCodec(MyObject::new);\n\n    @Persisted(key = \"rl\")\n    private ResourceLocation resourceLocation = LDLib2.id(\"test\");\n    @Persisted(key = \"enum\")\n    private Direction enumValue = Direction.NORTH;\n    @Persisted(key = \"item\")\n    private ItemStack itemstack = ItemStack.EMPTY;\n}\n</code></pre> <p>\u7b49\u540c\u4e8e</p> <pre><code>public class MyObject {\n    public final static Codec&lt;MyObject&gt; CODEC = RecordCodecBuilder.create(instance -&gt; instance.group(\n            ResourceLocation.CODEC.fieldOf(\"rl\").forGetter(MyObject::getResourceLocation),\n            Direction.CODEC.fieldOf(\"enum\").forGetter(MyObject::getEnumValue),\n            ItemStack.OPTIONAL_CODEC.fieldOf(\"item\").forGetter(MyObject::getItemstack)\n    ).apply(instance, MyObject::new));\n\n    private ResourceLocation resourceLocation = LDLib2.id(\"test\");\n    private Direction enumValue = Direction.NORTH;\n    private ItemStack itemstack = ItemStack.EMPTY;\n\n    public MyObject(ResourceLocation resourceLocation, Direction enumValue, ItemStack itemstack) {\n        this.resourceLocation = resourceLocation;\n        this.enumValue = enumValue;\n        this.itemstack = itemstack;\n    }\n\n    public ResourceLocation getResourceLocation() {\n        return resourceLocation;\n    }\n\n    public Direction getEnumValue() {\n        return enumValue;\n    }\n\n    public ItemStack getItemstack() {\n        return itemstack;\n    }\n}\n</code></pre>"},{"location":"zh/ldlib2/sync/annotations/","title":"\u6ce8\u89e3","text":""},{"location":"zh/ldlib2/sync/annotations/#_1","title":"\u6ce8\u89e3","text":"<p> Since 2.1.0 </p> <p>\u672c\u9875\u9762\u5c55\u793a\u4e86\u6240\u6709\u6ce8\u89e3\u53ca\u5176\u7528\u6cd5\u3002</p> <p>LDLib \u5f00\u53d1\u5de5\u5177</p> <p></p> <p>\u5982\u679c\u60a8\u6253\u7b97\u4f7f\u7528 LDLib2 \u8fdb\u884c\u5f00\u53d1\uff0c\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u60a8\u5b89\u88c5\u6211\u4eec\u7684 IDEA \u63d2\u4ef6 LDLib \u5f00\u53d1\u5de5\u5177\u3002 \u8be5\u63d2\u4ef6\u5177\u6709\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ul> <li>\u4ee3\u7801\u9ad8\u4eae</li> <li>\u8bed\u6cd5\u68c0\u67e5</li> <li>\u4ee3\u7801\u8df3\u8f6c</li> <li>\u81ea\u52a8\u8865\u5168</li> <li>\u5176\u4ed6\u529f\u80fd</li> </ul> <p>\u8fd9\u4e9b\u529f\u80fd\u5c06\u6781\u5927\u5730\u5e2e\u52a9\u60a8\u5229\u7528 LDLib2 \u7684\u7279\u6027\u3002\u7279\u522b\u662f\uff0cLDLib2 \u7684\u6240\u6709\u6ce8\u89e3\u90fd\u5df2\u5f97\u5230\u4f7f\u7528\u652f\u6301\u3002</p>"},{"location":"zh/ldlib2/sync/annotations/#_2","title":"\u901a\u7528\u6ce8\u89e3","text":""},{"location":"zh/ldlib2/sync/annotations/#descsynced","title":"<code>@DescSynced</code>","text":"<p>\u6ce8\u89e3\u4e00\u4e2a\u5b57\u6bb5\uff0c\u8be5\u5b57\u6bb5\u7684\u503c\uff08\u670d\u52a1\u5668\u7aef\uff09\u5e94\u540c\u6b65\u5230\u5ba2\u6237\u7aef\uff08\u5177\u4f53\u6765\u8bf4\u662f <code>remote</code> \u7aef\uff09\u3002</p> <pre><code>@DescSynced\nint a;\n\n@DescSynced\nprivate ItemStack b = ItemStack.EMPTY;\n\n@DescSynced\nprivate List&lt;ResourceLocation&gt; c = new ArrayList&lt;&gt;();\n</code></pre>"},{"location":"zh/ldlib2/sync/annotations/#persisted","title":"<code>@Persisted</code>","text":"<p>\u6ce8\u89e3\u4e00\u4e2a\u5b57\u6bb5\uff0c\u8be5\u5b57\u6bb5\u7684\u503c\uff08\u670d\u52a1\u5668\u7aef\uff09\u5c06\u88ab\u5199\u5165/\u8bfb\u53d6\u5230/\u81ea BlockEntity \u7684 NBT \u4e2d\u3002</p> <p><code>String key()</code> \u8868\u793a NBT \u4e2d\u7684\u6807\u7b7e\u540d\u3002\u9ed8\u8ba4\u503c \u2014\u2014 \u4f7f\u7528\u5b57\u6bb5\u540d\u4ee3\u66ff\u3002</p> <pre><code>@Persisted(key = \"fluidAmount\")\nint value = 100;\n@Persisted\nboolean isWater = true;\n</code></pre> <p>\u5176 NBT/JSON \u770b\u8d77\u6765\u5982\u4e0b\uff1a </p><pre><code>{\n  \"fluidAmount\": 100,\n  \"isWater\": true\n}\n</code></pre><p></p> <p><code>boolean subPersisted()</code> \u5982\u679c\u4e3a true\uff0c\u5b83\u5c06\u57fa\u4e8e\u5176<code>\u975e\u7a7a</code>\u5b9e\u4f8b\u5305\u88c5\u5b57\u6bb5\u7684\u5185\u90e8\u503c\u3002</p> <p>\u8fd9\u5bf9\u4e8e\u4e0d\u5141\u8bb8\u521b\u5efa\u65b0\u5b9e\u4f8b\u7684 <code>final</code> \u5b9e\u4f8b\u975e\u5e38\u6709\u7528\u3002\u5982\u679c\u5b57\u6bb5\u8bbe\u7f6e\u4e86 <code>subPersisted = true</code>\uff0cLDLib2 \u5c06\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\uff1a</p> <ul> <li>\u5982\u679c\u5b57\u6bb5\u7ee7\u627f\u81ea <code>INBTSerializable&lt;?&gt;</code>\uff0c\u5b83\u5c06\u5c1d\u8bd5\u4f7f\u7528\u5176 API \u8fdb\u884c\u5e8f\u5217\u5316\u3002</li> <li>\u5426\u5219\uff0c\u5b83\u5c06\u5e8f\u5217\u5316\u5b57\u6bb5\u7684\u5185\u90e8\u503c\u5e76\u5c06\u5176\u5305\u88c5\u4e3a\u4e00\u4e2a\u6620\u5c04\u3002</li> </ul> <pre><code>@Persisted(subPersisted = true) // \u8fd9\u91cc\u4f7f\u7528 @Persisted \u4e5f\u53ef\u4ee5\uff0c\u56e0\u4e3a INBTSerializable \u4f5c\u4e3a\u53ea\u8bfb\u5b57\u6bb5\u4e5f\u53d7\u652f\u6301\u3002\nprivate final INBTSerializable&lt;CompoundTag&gt; stackHandler = new ItemStackHandler(5);\n@Persisted(subPersisted = true)\nprivate final TestContainer testContainer = new TestContainer();\n\npublic static class TestContainer {\n    @Persisted\n    private Vector3f vector3fValue = new Vector3f(0, 0, 0);\n    @Persisted\n    private int[] intArray = new int[]{1, 2, 3};\n}\n</code></pre> <p>\u5176 NBT/JSON \u770b\u8d77\u6765\u5982\u4e0b\uff1a </p><pre><code>{\n    \"stackHandler\": {\n        \"Size\": 5,\n        \"Items\": [],\n    },\n    \"testContainer\": {\n        \"vector3fValue\": [0, 0, 0],\n        \"intArray\": [1, 2, 3],\n    }\n}\n</code></pre><p></p>"},{"location":"zh/ldlib2/sync/annotations/#lazymanaged","title":"<code>@LazyManaged</code>","text":"<p>\u4e00\u4e2a\u6ce8\u89e3\uff0c\u6807\u8bb0\u4e00\u4e2a\u5b57\u6bb5\u4e3a\u60f0\u6027\u7ba1\u7406\u3002\u8fd9\u610f\u5473\u7740\u8be5\u5b57\u6bb5\u5c06\u4ec5\u901a\u8fc7\u624b\u52a8\u6807\u8bb0\u4e3a\u810f\u3002  \u6b64\u6ce8\u89e3\u5bf9\u4e8e\u4e0d\u9891\u7e41\u66f4\u65b0\u7684\u5b57\u6bb5\uff0c\u6216\u6279\u91cf\u66f4\u65b0\u7684\u5b57\u6bb5\u5f88\u6709\u7528\u3002</p> <pre><code>@DescSynced\n@Persisted\nint a;\n\n@DescSynced \n@Persisted\n@LazyManaged // \u4fee\u6b63\u4e86\u539f\u6587\u4e2d\u7684\u62fc\u5199\u9519\u8bef LayzManaged -&gt; LazyManaged\nint b;\n\npublic void setA(int value) {\n    this.a = value;  // \u901a\u5e38\u4f1a\u81ea\u52a8\u540c\u6b65/\u6301\u4e45\u5316\n}\n\npublic void setB(int value) {\n    this.b = value;\n    markDirty(\"b\"); // \u624b\u52a8\u901a\u77e5\u66f4\u6539\n}\n</code></pre>"},{"location":"zh/ldlib2/sync/annotations/#readonlymanaged","title":"<code>@ReadOnlyManaged</code>","text":"<p>\u6b64\u6ce8\u89e3\u7528\u4e8e\u6807\u8bb0\u4e00\u4e2a\u7531\u7528\u6237\u7ba1\u7406\u7684\u53ea\u8bfb\u5b57\u6bb5\u3002</p> <p><code>\u53ea\u8bfb</code> \u7c7b\u578b\uff08\u4f8b\u5982 <code>IManaged</code> \u548c <code>INBTSerializable&lt;?&gt;</code>\uff09\u8981\u6c42\u5b57\u6bb5\u975e\u7a7a\u4e14\u5b57\u6bb5\u5b9e\u4f8b\u4e0d\u4f1a\u66f4\u6539\uff08\u4e00\u4e2a final \u5b57\u6bb5\uff09\u3002</p> <p>\u4ec0\u4e48\u662f <code>\u53ea\u8bfb</code> \u7c7b\u578b\uff1f</p> <p><code>\u53ea\u8bfb</code> \u7c7b\u578b\u6307\u7684\u662f\u90a3\u4e9b\u59cb\u7ec8\u975e\u7a7a\u4e14\u4e0d\u53ef\u53d8\uff0c\u5e76\u4e14\u4e0d\u786e\u5b9a\u5982\u4f55\u521b\u5efa\u8be5\u7c7b\u578b\u65b0\u5b9e\u4f8b\u7684\u5b57\u6bb5\u3002\u66f4\u591a\u8be6\u60c5\u8bf7\u53c2\u9605 \u652f\u6301\u7684\u7c7b\u578b\u3002</p> <p>\u56e0\u4e3a\u6211\u4eec\u4e0d\u77e5\u9053\u5982\u4f55\u4e3a\u8fd9\u4e9b\u7c7b\u578b\u521b\u5efa\u65b0\u5b9e\u4f8b\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u6b64\u6ce8\u89e3\uff0c\u5e76\u63d0\u4f9b\u65b9\u6cd5\uff0c \u901a\u8fc7 <code>serializeMethod()</code> \u4ece\u670d\u52a1\u5668\u5b58\u50a8\u552f\u4e00 ID\uff0c\u5e76\u901a\u8fc7 <code>deserializeMethod()</code> \u5728\u5ba2\u6237\u7aef\u521b\u5efa\u65b0\u5b9e\u4f8b\u3002</p> <p>\u6b64\u5916\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7 <code>onDirtyMethod()</code> \u63d0\u4f9b\u65b9\u6cd5\u6765\u63a7\u5236\u5b57\u6bb5\u662f\u5426\u5df2\u66f4\u6539\u3002</p> <ul> <li><code>onDirtyMethod</code>: \u6307\u5b9a\u4e00\u4e2a\u65b9\u6cd5\u7528\u4e8e\u81ea\u5b9a\u4e49\u810f\u68c0\u67e5\u3002\u8fd4\u56de\u662f\u5426\u5df2\u66f4\u6539\u3002     <pre><code>boolean methodName();\n</code></pre></li> <li><code>serializeMethod</code>: \u8fd4\u56de\u7ed9\u5b9a\u5b9e\u4f8b\u7684\u552f\u4e00 ID (<code>Tag</code>)\u3002     <pre><code>Tag methodName(@Nonnull T obj);\n</code></pre></li> <li><code>deserializeMethod</code>: \u901a\u8fc7\u7ed9\u5b9a\u7684 ID \u521b\u5efa\u5b9e\u4f8b\u3002     <pre><code>T methodName(@Nonnull Tag tag)\n</code></pre></li> </ul> <p>\u540c\u6b65\u8fc7\u7a0b\uff08\u6301\u4e45\u5316\u7c7b\u4f3c\uff09</p> <pre><code>flowchart LR\n\n    A[\u5f00\u59cb: \u68c0\u67e5\u53ea\u8bfb\u5b57\u6bb5] --&gt; B{UID == \u4e4b\u524d\u7684\u5feb\u7167?}\n\n    %% \u6b65\u9aa4 1\n    B -- \u5426 --&gt; C[\u6807\u8bb0\u5b57\u6bb5\u4e3a\u810f&lt;br/&gt;\u5b58\u50a8\u6700\u65b0\u5feb\u7167] --&gt; D[\u540c\u6b65 UID + \u503c&lt;br/&gt;\u901a\u77e5\u8fdc\u7a0b\u66f4\u65b0]\n    B -- \u662f --&gt; E{\u503c\u53d8\u810f\u4e86?}\n\n    %% \u6b65\u9aa4 2\n    E -- \u5426 --&gt; Z[\u7ed3\u675f]\n    E -- \u662f --&gt; F{\u6709 onDirtyMethod \u5417?}\n\n    F -- \u662f --&gt; G[\u4f7f\u7528\u81ea\u5b9a\u4e49\u65b9\u6cd5&lt;br/&gt;\u68c0\u67e5\u810f\u72b6\u6001]\n    F -- \u5426 --&gt; H[\u4f7f\u7528\u6ce8\u518c\u7684\u53ea\u8bfb\u7c7b\u578b&lt;br/&gt;\u68c0\u67e5\u810f\u72b6\u6001]\n\n    %% \u6b65\u9aa4 3\n    G --&gt; I[\u5b57\u6bb5\u53d8\u810f] --&gt; D\n    H --&gt; I\n\n    %% \u8fdc\u7a0b\u7aef\n    D --&gt; R[\u8fdc\u7a0b\u63a5\u6536\u66f4\u65b0] --&gt; S{UID \u76f8\u7b49?}\n\n    %% \u6b65\u9aa4 4\n    S -- \u5426 --&gt; T[\u901a\u8fc7 deserializeMethod&lt;br/&gt;\u521b\u5efa\u65b0\u5b9e\u4f8b] --&gt; U[\u901a\u8fc7\u53ea\u8bfb\u7c7b\u578b\u66f4\u65b0\u503c] --&gt; Z\n    S -- \u662f --&gt; U --&gt; Z</code></pre> <ol> <li>\u4e3a\u4e86\u68c0\u67e5 <code>\u53ea\u8bfb</code> \u5b57\u6bb5\u662f\u5426\u6709\u5185\u90e8\u66f4\u6539\uff0cLDLib2 \u5c06\u9996\u5148\u68c0\u67e5\u552f\u4e00 ID \u662f\u5426\u4e0e\u4e4b\u524d\u7684\u5feb\u7167\u76f8\u7b49\u3002<ul> <li>\u5982\u679c<code>\u4e0d\u76f8\u7b49</code>\uff0c\u5219\u6807\u8bb0\u6b64\u5b57\u6bb5\u4e3a\u810f\uff0c\u5e76\u5b58\u50a8\u6700\u65b0\u5feb\u7167\u3002</li> <li>\u5982\u679c<code>\u76f8\u7b49</code>\uff0c\u5219\u8f6c\u5230\u6b65\u9aa4 2\u3002</li> </ul> </li> <li>\u68c0\u67e5\u503c\u662f\u5426\u4e0e\u4e4b\u524d\u7684\u5feb\u7167\u76f8\u6bd4\u53d8\u810f\u4e86\u3002<ul> <li>\u5982\u679c\u672a\u8bbe\u7f6e <code>onDirtyMethod</code>\uff0cLDLib2 \u5c06\u6839\u636e\u6ce8\u518c\u7684 <code>\u53ea\u8bfb</code> \u7c7b\u578b\u68c0\u67e5\u810f\u72b6\u6001\u3002</li> <li>\u5982\u679c\u8bbe\u7f6e\u4e86\uff0c\u5219\u4f7f\u7528\u81ea\u5b9a\u4e49\u65b9\u6cd5\u68c0\u67e5\u662f\u5426\u53d8\u810f\u3002</li> </ul> </li> <li>\u5982\u679c\u5b57\u6bb5\u53d8\u810f\u4e86\u3002LDLib2 \u5c06\u540c\u6b65 UID \u548c\u503c\u6570\u636e\uff0c\u5e76\u8981\u6c42\u8fdc\u7a0b\uff08\u5ba2\u6237\u7aef\uff09\u66f4\u65b0\u503c\u3002</li> <li>\u5f53\u8fdc\u7a0b\u63a5\u6536\u5230\u66f4\u6539\u65f6\uff0c\u5b83\u5c06\u9996\u5148\u68c0\u67e5 UID\u3002<ul> <li>\u5982\u679c\u4e0d\u76f8\u7b49\uff0c\u5219\u5148\u57fa\u4e8e <code>deserializeMethod</code> \u521b\u5efa\u4e00\u4e2a\u65b0\u5b9e\u4f8b\u3002</li> <li>\u7136\u540e\u57fa\u4e8e\u6ce8\u518c\u7684 <code>\u53ea\u8bfb</code> \u7c7b\u578b\u66f4\u65b0\u503c\u3002</li> </ul> </li> </ol> <p>\u793a\u4f8b</p> <pre><code>@Persisted\n@DescSynced // \u4fee\u6b63\u4e86\u539f\u6587\u4e2d\u7684\u62fc\u5199\u9519\u8bef @DescSync -&gt; @DescSynced\n@ReadOnlyManaged(serializeMethod = \"testGroupSerialize\", deserializeMethod = \"testGroupDeserialize\")\nprivate final List&lt;TestGroup&gt; groupList = new ArrayList&lt;&gt;();\n\npublic static class TestGroup implements IPersistedSerializable {\n    @Persisted\n    private Range rangeValue = Range.of(0, 1);\n    @Persisted\n    private Direction enumValue = Direction.NORTH;\n    @Persisted\n    private Vector3i vector3iValue = new Vector3i(0, 0, 0);\n}\n\npublic IntTag testGroupSerialize(List&lt;TestGroup&gt; groups) {\n    return IntTag.valueOf(groups.size());\n}\n\npublic List&lt;TestGroup&gt; testGroupDeserialize(IntTag tag) {\n    var groups = new ArrayList&lt;TestGroup&gt;();\n    for (int i = 0; i &lt; tag.getAsInt(); i++) {\n        groups.add(new TestGroup());\n    }\n    return groups;\n}\n</code></pre> <p>Note</p> <p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c<code>onDirtyMethod</code> \u4e0d\u662f\u5fc5\u9700\u7684\u3002\u56e0\u4e3a <code>TestGroup</code> \u7ee7\u627f\u81ea <code>IPersistedSerializable</code>\uff0c\u800c <code>IPersistedSerializable</code> \u53c8\u7ee7\u627f\u81ea <code>INBTSerializable&lt;?&gt;</code>\u3002\u56e0\u6b64\uff0c\u5b83\u662f\u4e00\u4e2a\u53d7\u652f\u6301\u7684 <code>\u53ea\u8bfb</code> \u7c7b\u578b\u3002</p>"},{"location":"zh/ldlib2/sync/annotations/#rpcmethod","title":"<code>@RPCMethod</code>","text":"<p>\u6ce8\u89e3\u4e00\u4e2a\u65b9\u6cd5\uff0c\u60a8\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u548c\u8fdc\u7a0b\u7aef\u4e4b\u95f4\u53d1\u9001 RPC \u6570\u636e\u5305\u3002\u53ea\u8981\u53c2\u6570\u652f\u6301\u540c\u6b65\uff0c\u60a8\u53ef\u4ee5\u81ea\u7531\u5b9a\u4e49\u65b9\u6cd5\u7684\u53c2\u6570\uff0c\u5e76\u4e14\u53ef\u4ee5\u5728\u7c7b\u4e2d\u7684\u4efb\u4f55\u4f4d\u7f6e\u53d1\u9001 RPC\u3002 \u8fd9\u5bf9\u4e8e\u4f20\u64ad\u4e8b\u4ef6\uff08<code>c-&gt;s</code> / <code>s-&gt;c</code>\uff09\u5f88\u6709\u7528\u3002</p> <p>Note</p> <p>\u5982\u679c <code>RPCSender</code> \u88ab\u5b9a\u4e49\u4e3a\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u3002LDLib2 \u5c06\u63d0\u4f9b\u53d1\u9001\u8005\u4fe1\u606f\u3002</p> <p>\u786e\u4fdd\u6240\u6709\u53c2\u6570\u4e0e\u6ce8\u89e3\u65b9\u6cd5\u7684\u53c2\u6570\u5339\u914d\u3002</p> <pre><code>@RPCMethod\npublic void rpcTestA(RPCSender sender, String message) {\n    if (sender.isServer()) {\n        LDLib2.LOGGER.info(\"Received RPC from server: {}\", message);\n    } else {\n        LDLib2.LOGGER.info(\"Received RPC from client: {}\", message);\n    }\n}\n\n@RPCMethod\npublic void rpcTestB(ItemStack item) {\n    LDLib2.LOGGER.info(\"Received RPC: {}\", item);\n}\n\n// \u53d1\u9001 RPC \u7684\u65b9\u6cd5\npublic void sendMsgToPlayer(ServerPlayer player, String msg) {\n    rpcToServer(player, \"rpcTestA\", msg); // \u4fee\u6b63\u4e86\u7f3a\u5c11\u7684\u5206\u53f7\n}\n\npublic void sendMsgToAllTrackingPlayers(ServerPlayer player, String msg) {\n    rpcToTracking(\"rpcTestA\", msg); // \u4fee\u6b63\u4e86\u7f3a\u5c11\u7684\u5206\u53f7\n}\n\npublic void sendMsgToServer(ItemStack item) {\n    rpcToServer(\"rpcTestB\", item); // \u4fee\u6b63\u4e86\u7f3a\u5c11\u7684\u5206\u53f7\n}\n</code></pre> <ul> <li><code>rpcToTracking</code>: \u5982\u679c\u6b64\u533a\u5757\u5728\u8fdc\u7a0b\u73a9\u5bb6\u7684\u5ba2\u6237\u7aef\u4e2d\u5df2\u52a0\u8f7d\uff08\u88ab\u8ffd\u8e2a\uff09\uff0c\u5219\u53d1\u9001\u7ed9\u6240\u6709\u8fdc\u7a0b\u73a9\u5bb6\u3002</li> <li><code>rpcToPlayer</code>: \u53d1\u9001\u7ed9\u7279\u5b9a\u73a9\u5bb6\u3002</li> <li><code>rpcToServer</code>: \u53d1\u9001\u7ed9\u670d\u52a1\u5668\u3002</li> </ul> <p></p><pre><code>@RPCMethod\npublic void rpcTest(String msg) {\n    if (level.isClientSide) { // \u63a5\u6536 // \u4fee\u6b63\u4e86 level.isClient -&gt; level.isClientSide\n        LDLib2.LOGGER.info(\"Received RPC from server: {}\", msg); // \u4fee\u6b63\u4e86\u53c2\u6570\u540d message -&gt; msg\n    } else { // \u53d1\u9001\n        rpcToTracking(\"rpcTest\", msg); // \u4fee\u6b63\u4e86\u7f3a\u5c11\u7684\u5206\u53f7\n    }\n}\n</code></pre> \u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u60a8\u53ef\u4ee5\u5728\u4e00\u4e2a\u65b9\u6cd5\u5185\u53d1\u9001\u548c\u63a5\u6536\u6d88\u606f\uff0c\u8fd9\u662f\u4e00\u79cd\u7b80\u6d01\u7684\u65b9\u6cd5\u3002<p></p>"},{"location":"zh/ldlib2/sync/annotations/#updatelistener","title":"<code>@UpdateListener</code>","text":"<p>\u4f7f\u7528\u6b64\u6ce8\u89e3\u5728\u8fdc\u7a0b\u7aef\u6dfb\u52a0\u4e00\u4e2a\u540c\u6b65\u63a5\u6536\u7684\u76d1\u542c\u5668\u3002</p> <p>\u6307\u5b9a\u5f53\u6ce8\u89e3\u5b57\u6bb5\u4ece\u670d\u52a1\u5668\u66f4\u65b0\u65f6\uff0c\u8981\u8c03\u7528\u7684\u65b9\u6cd5\uff08\u8fdc\u7a0b\u7aef\uff09\u7684\u540d\u79f0\u3002</p> <p>\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u65e7\u503c\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u65b0\u503c\u3002</p> <pre><code>@DescSynced\n@UpdateListener(methodName = \"onIntValueChanged\")\nprivate int intValue = 10;\n\nprivate void onIntValueChanged(int oldValue, int newValue) {\n    LDLib2.LOGGER.info(\"Int value changed from {} to {}\", oldValue, newValue);\n}\n</code></pre>"},{"location":"zh/ldlib2/sync/annotations/#conditionalsynced","title":"<code>@ConditionalSynced</code>","text":"<p>\u901a\u5e38\uff0c\u6240\u6709\u7528 <code>@DescSynced</code> \u6ce8\u89e3\u7684\u5b57\u6bb5\u5728\u66f4\u6539\u65f6\u90fd\u4f1a\u540c\u6b65\u3002 \u4f46\u662f\uff0c\u60a8\u53ef\u80fd\u5e0c\u671b\u63a7\u5236\u662f\u5426\u540c\u6b65\uff0c\u4f8b\u5982\uff0c\u6761\u4ef6\u540c\u6b65\u3002</p> <p>LDLib2 \u63d0\u4f9b\u6b64\u6ce8\u89e3\uff0c\u5141\u8bb8\u60a8\u7cbe\u7ec6\u63a7\u5236\u5b57\u6bb5\u662f\u5426\u5e94\u540c\u6b65\u3002</p> <pre><code>@Configurable // \u6ce8\u610f\uff1a\u6b64\u793a\u4f8b\u4e2d\u7684 @Configurable \u53ef\u80fd\u6765\u81ea\u5176\u4ed6\u4e0a\u4e0b\u6587\u6216\u6587\u6863\u9519\u8bef\uff0c\u5728 LDLib2 \u540c\u6b65\u4e0a\u4e0b\u6587\u4e2d\u5e38\u89c1\u7684\u662f @DescSynced\n@ConditionalSynced(methodName = \"shouldSync\")\nint intField = 10;\n\npublic boolean shouldSync(int value) {\n    return value &gt; 0;\n}\n</code></pre>"},{"location":"zh/ldlib2/sync/annotations/#skippersistedvalue","title":"<code>@SkipPersistedValue</code>","text":"<p>\u901a\u5e38\uff0c\u6240\u6709\u7528 <code>@Persisted</code> \u6ce8\u89e3\u7684\u5b57\u6bb5\u5728\u6301\u4e45\u5316\u671f\u95f4\u90fd\u4f1a\u88ab\u5e8f\u5217\u5316\u3002 \u4f46\u662f\uff0c\u60a8\u53ef\u80fd\u5e0c\u671b\u8df3\u8fc7\u5e8f\u5217\u5316\uff0c\u4f8b\u5982\uff0c\u51cf\u5c11\u8f93\u51fa\u5927\u5c0f\uff0c\u8df3\u8fc7\u672a\u66f4\u6539\u7684\u503c\u7b49\u3002</p> <p>LDLib2 \u63d0\u4f9b\u6b64\u6ce8\u89e3\uff0c\u5141\u8bb8\u60a8\u7cbe\u7ec6\u63a7\u5236\u5b57\u6bb5\u662f\u5426\u5e94\u5e8f\u5217\u5316\u3002</p> <pre><code>@Persisted\nint intField = 10;\n\n@SkipPersistedValue(field = \"intField\")\npublic boolean skipIntFieldPersisted(int value) {\n    // 10 \u662f\u8fd9\u4e2a\u7c7b\u7684\u521d\u59cb\u503c\uff0c\u6ca1\u6709\u5fc5\u8981\u5b58\u50a8\u5b83\u3002\n    return value == 10;\n}\n</code></pre>"},{"location":"zh/ldlib2/sync/annotations/#blockentity","title":"<code>BlockEntity</code> \u4e13\u7528\u6ce8\u89e3","text":"<p>Note</p> <p>\u8fd9\u4e9b\u6ce8\u89e3\u4e13\u4e3a <code>BlockEntity</code> \u8bbe\u8ba1\uff0c\u5728\u4f7f\u7528\u524d\u8bf7\u67e5\u9605 \u7ba1\u7406 BlockEntity\u3002</p>"},{"location":"zh/ldlib2/sync/annotations/#dropsaved","title":"<code>@DropSaved</code>","text":"<p>\u6709\u65f6\uff0c\u60a8\u5e0c\u671b\u5728\u7834\u574f\u65b9\u5757\u65f6\u5c06\u5b57\u6bb5\u503c\u5b58\u50a8\u5230\u6389\u843d\u7269\u4e2d\u3002 \u6b64\u6ce8\u89e3\u7528\u4e8e\u6807\u8bb0\u4e00\u4e2a\u5b57\u6bb5\u8981\u4fdd\u5b58\u5230\u6389\u843d\u7269\u4e2d\u3002\u4f46\u662f\uff0c\u4f7f\u7528\u524d\u8fd8\u9700\u8981\u989d\u5916\u7684\u4ee3\u7801\u5de5\u4f5c\u3002 </p><pre><code>public class MyBlock extends Block {\n    @Override\n    public void setPlacedBy(Level level, BlockPos pos, BlockState state, @Nullable LivingEntity placer, ItemStack stack) {\n        if (!level.isClientSide) {\n            if (level.getBlockEntity(pos) instanceof IPersistManagedHolder persistManagedHolder) {\n                // \u5982\u679c\u60a8\u613f\u610f\uff0c\u53ef\u4ee5\u4f7f\u7528\u5176\u4ed6 DataComponents\u3002\n                Optional.ofNullable(stack.get(DataComponents.CUSTOM_DATA)).ifPresent(customData -&gt; {\n                    persistManagedHolder.loadManagedPersistentData(customData.copyTag());\n                });\n            }\n        }\n    }\n\n    @Override\n    protected List&lt;ItemStack&gt; getDrops(BlockState state, LootParams.Builder params) {\n        var opt = Optional.ofNullable(params.getOptionalParameter(LootContextParams.BLOCK_ENTITY));\n        if (opt.isPresent() &amp;&amp; opt.get() instanceof IPersistManagedHolder persistManagedHolder) {\n            var drop = new ItemStack(this);\n            var tag = new CompoundTag();\n            persistManagedHolder.saveManagedPersistentData(tag, true);\n            drop.set(DataComponents.CUSTOM_DATA, CustomData.of(tag));\n            // \u5982\u679c\u60a8\u613f\u610f\uff0c\u53ef\u4ee5\u5c06\u8fd9\u90e8\u5206\u79fb\u5230 LootTable \u4e2d\u3002\n            return List.of(drop);\n        }\n        return super.getDrops(state, params);\n    }\n\n    @Override\n    public ItemStack getCloneItemStack(BlockState state, HitResult target, LevelReader level, BlockPos pos, Player player) {\n        // \u5982\u679c\u60a8\u60f3\u514b\u9686\u4e00\u4e2a\u5e26\u6709\u6389\u843d\u6570\u636e\u7684\u7269\u54c1\uff0c\u522b\u5fd8\u4e86\u8fd9\u4e2a\n        if (level.getBlockEntity(pos) instanceof IPersistManagedHolder persistManagedHolder) {\n            var clone = new ItemStack(this);\n            var tag = new CompoundTag();\n            persistManagedHolder.saveManagedPersistentData(tag, true);\n            clone.set(DataComponents.CUSTOM_DATA, CustomData.of(tag));\n            return clone;\n        }\n        return super.getCloneItemStack(state, target, level, pos, player);\n    }\n}\n\npublic class MyBlockEntity extends BlockEntity implements ISyncPersistRPCBlockEntity {\n    @Persisted\n    private int intValue = 10;\n    @Persisted\n    @DropSaved\n    private ItemStack itemStack = ItemStack.EMPTY;\n}\n</code></pre> \u7ecf\u8fc7\u4e0a\u8ff0\u8bbe\u7f6e\u540e\uff0cMyBlockEntity \u4e2d\u7684 <code>itemStack</code> \u503c\u5c06\u5728\u7834\u574f\u548c\u514b\u9686\u65f6\u5b58\u50a8\u5230\u7269\u54c1\u5806\u4e2d\u3002 \u5e76\u4e14\u5b58\u50a8\u5728\u7269\u54c1\u5806\u4e2d\u7684\u503c\u5c06\u5728\u653e\u7f6e\u540e\u6062\u590d\u3002<p></p>"},{"location":"zh/ldlib2/sync/annotations/#requirererender","title":"<code>@RequireRerender</code>","text":"<p>\u5f53\u6ce8\u89e3\u5b57\u6bb5\u66f4\u65b0\u65f6\uff08\u4ece\u670d\u52a1\u5668\u540c\u6b65\uff09\uff0c\u5c06\u5b89\u6392\u533a\u5757\u6e32\u67d3\u66f4\u65b0\u3002\u8981\u4f7f\u7528\u6b64\u529f\u80fd\uff0c\u60a8\u7684 BlockEntity \u5fc5\u987b\u7ee7\u627f\u81ea <code>IBlockEntityManaged</code>\u3002</p> <p></p><pre><code>public class MyBlockEntity extends BlockEntity implements ISyncPersistRPCBlockEntity {\n    @Persisted\n    @DescSynced // \u4fee\u6b63\u4e86\u539f\u6587\u4e2d\u7684\u62fc\u5199\u9519\u8bef @DescSync -&gt; @DescSynced\n    @RequireRerender\n    private int color = -1;\n}\n</code></pre> \u5b83\u5b9e\u9645\u4e0a\u7b49\u540c\u4e8e <pre><code>public class MyBlockEntity extends BlockEntity implements ISyncPersistRPCBlockEntity {\n    @Persisted\n    @DescSynced // \u4fee\u6b63\u4e86\u539f\u6587\u4e2d\u7684\u62fc\u5199\u9519\u8bef @DescSync -&gt; @DescSynced\n    private int color = -1;\n\n    public MyBlockEntity(BlockPos pos, BlockState state) {\n        super(...)\n        ...\n        addSyncUpdateListener(\"color\", this::onColorUpdated); // \u6dfb\u52a0\u76d1\u542c\u5668\n    }\n\n    private Consumer&lt;Object&gt; onColorUpdated(ManagedKey managedKey, Object currentValue) { // \u4fee\u6b63\u4e86\u8fd4\u56de\u7c7b\u578b\uff0c\u539f\u4ee3\u7801\u7247\u6bb5\u6709\u8bef\n        return newValue -&gt; scheduleRenderUpdate();\n    }\n\n    public void scheduleRenderUpdate() {\n        var level = getLevel();\n        if (level != null) {\n            if (level.isClientSide) {\n                var state = getBlockState();\n                level.sendBlockUpdated(getBlockPos(), state, state, 1 &lt;&lt; 3); // \u901a\u77e5\u533a\u5757\u91cd\u65b0\u6e32\u67d3\n            }\n        }\n    }\n}\n</code></pre><p></p>"},{"location":"zh/ldlib2/sync/blockentity/","title":"\u7ba1\u7406 BlockEntity","text":""},{"location":"zh/ldlib2/sync/blockentity/#blockentity","title":"\u7ba1\u7406 BlockEntity","text":"<p> Since 2.1.0 </p> <p>\u901a\u8fc7\u5b9e\u73b0 <code>ISyncPersistRPCBlockEntity</code>\uff0c\u4f60\u53ef\u4ee5\u5c06\u6240\u6709\u540c\u6b65\u548c\u6301\u4e45\u5316\u4ee3\u7801\u59d4\u6258\u7ed9 LDLib2\u3002 \u4f60\u4e0d\u9700\u8981\u4efb\u4f55\u989d\u5916\u7684\u4ee3\u7801\uff0c\u53ea\u9700\u8bbe\u7f6e\u597d <code>syncStorage</code> \u548c\u6ce8\u89e3\u5373\u53ef\u3002</p> <pre><code>public class MyBlockEntity extends BlockEntity implements ISyncPersistRPCBlockEntity {\n    @Getter\n    private final FieldManagedStorage syncStorage = new FieldManagedStorage(this);\n\n    @Persisted\n    @DescSynced\n    @UpdateListener(methodName = \"onIntValueChanged\")\n    private int intValue = 10;\n    @Persisted\n    @DescSynced\n    @DropSaved\n    @RequireRerender\n    private ItemStack itemStack = ItemStack.EMPTY;\n\n    public MyBlockEntity(BlockPos pWorldPosition, BlockState pBlockState) {\n        super(...);\n    }\n\n    private void onIntValueChanged(int oldValue, int newValue) {\n        LDLib2.LOGGER.info(\"Int value changed from {} to {}\", oldValue, newValue);\n    }\n\n    @RPCMethod\n    public void rpcMsg(String msg) {\n    if (level.isClient) { // \u63a5\u6536\u7aef\n        LDLib2.LOGGER.info(\"Received RPC from server: {}\", message);\n    } else { // \u53d1\u9001\u7aef\n        rpcToTracking(\"rpcMsg\", msg)\n    }\n}\n</code></pre> <p>Note</p> <p>\u5b9e\u9645\u4e0a\uff0c<code>ISyncPersistRPCBlockEntity</code> \u7531 <code>ISyncBlockEntity</code>\u3001<code>IRPCBlockEntity</code>\u3001<code>IPersistManagedHolder</code>\u3001<code>IBlockEntityManaged</code> \u7ec4\u6210\u3002 \u5982\u679c\u4f60\u53ea\u9700\u8981\u5176\u4e2d\u90e8\u5206\u529f\u80fd\uff0c\u6216\u8005\u60f3\u8981\u8fdb\u884c\u66f4\u7cbe\u7ec6\u7684\u63a7\u5236\uff0c\u53ef\u4ee5\u9009\u62e9\u53ea\u5b9e\u73b0\u5b83\u4eec\u4e2d\u7684\u4e00\u90e8\u5206\u3002</p> <p>Warning</p> <p>\u5982\u679c\u4f60\u542f\u7528\u4e86 <code>useAsyncThread()</code>\uff08\u9ed8\u8ba4\u8fd4\u56de true\uff09\u3002\u4f60\u5fc5\u987b\u6ce8\u610f\u7ebf\u7a0b\u5b89\u5168\u95ee\u9898\u3002\u4f8b\u5982\uff0c<code>notifyPersistence()</code> \u5c06\u5728\u4e00\u4e2a\u7ebf\u7a0b\u4e2d\u88ab\u89e6\u53d1\u3002 \u901a\u5e38\uff0c\u4f60\u4e0d\u9700\u8981\u62c5\u5fc3\u5b83\uff0cLDLib2 \u4f1a\u5904\u7406\u6240\u6709\u60c5\u51b5\u3002</p>"},{"location":"zh/ldlib2/sync/rpc_packet/","title":"RPC \u6570\u636e\u5305","text":""},{"location":"zh/ldlib2/sync/rpc_packet/#rpc","title":"RPC \u6570\u636e\u5305","text":"<p>\u5728\u539f\u7248\u6216\u57fa\u4e8e Forge \u7684\u6a21\u7ec4\u5f00\u53d1\u4e2d\uff0c\u7ef4\u62a4\u81ea\u5b9a\u4e49\u7f51\u7edc\u6570\u636e\u5305\u901a\u5e38\u662f\u7e41\u7410\u7684\u3002 \u4f60\u901a\u5e38\u9700\u8981\u7ef4\u62a4\u6837\u677f\u5f0f\u7684\u7f51\u7edc\u4ee3\u7801\uff1a</p> <ul> <li>\u5b9a\u4e49\u6570\u636e\u5305\u7c7b</li> <li>\u624b\u52a8\u6ce8\u518c\u5b83\u4eec</li> <li>\u5904\u7406\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316</li> </ul> <p>\u4e3a\u4e86\u7b80\u5316\u8fd9\u4e2a\u8fc7\u7a0b\uff0cLDLib2 \u5f15\u5165\u4e86\u57fa\u4e8e\u6ce8\u89e3\u7684 RPC \u7cfb\u7edf\uff0c\u4f7f\u7528 <code>@RPCPacket</code>\u3002</p> <p>\u6709\u4e86 <code>@RPCPacket</code>\uff0c\u4f60\u53ef\u4ee5\u5728\u4ee3\u7801\u5e93\u4e2d\u7684\u4efb\u4f55\u5730\u65b9\u58f0\u660e\u4e00\u4e2a\u9759\u6001\u65b9\u6cd5\uff0c\u5e76\u5c06\u5176\u89c6\u4e3a\u7f51\u7edc\u6570\u636e\u5305\u5904\u7406\u5668\u3002 \u88ab\u6ce8\u89e3\u7684\u65b9\u6cd5\u672c\u8eab\u6210\u4e3a\u6570\u636e\u5305\u6267\u884c\u7684\u76ee\u6807\uff0c\u5176\u53c2\u6570\u4ee3\u8868\u4e86\u5728\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u4f20\u8f93\u7684\u6570\u636e\u3002</p> <ul> <li><code>@RPCPacket(\"id\")</code>: \u5c06\u65b9\u6cd5\u6ce8\u518c\u4e3a\u5177\u6709\u552f\u4e00\u6807\u8bc6\u7b26\u7684 RPC \u5904\u7406\u5668\u3002</li> <li><code>RPCSender</code> (\u53ef\u9009): \u5982\u679c\u58f0\u660e\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0cLDLib2 \u5c06\u6ce8\u5165\u53d1\u9001\u65b9\u4fe1\u606f\uff0c\u5141\u8bb8\u4f60\u533a\u5206\u8c03\u7528\u662f\u5728\u5ba2\u6237\u7aef\u8fd8\u662f\u670d\u52a1\u5668\u4e0a\u6267\u884c\u7684\u3002</li> <li>\u65b9\u6cd5\u53c2\u6570: \u6240\u6709\u53c2\u6570\uff08\u9664\u4e86 RPCSender\uff09\u90fd\u4f1a\u88ab\u81ea\u52a8\u5e8f\u5217\u5316\u548c\u4f20\u8f93\u3002</li> </ul> <p>Note</p> <p>\u53c2\u6570\u7684\u7c7b\u578b\u5e94\u5728 \u652f\u6301\u7684\u7c7b\u578b \u4e2d\u53d7\u652f\u6301\u3002</p> <p>RPCPacketDistributor \u63d0\u4f9b\u5b9e\u7528\u65b9\u6cd5\u6765\u5411\u670d\u52a1\u5668\u3001\u6240\u6709\u73a9\u5bb6\u6216\u7279\u5b9a\u76ee\u6807\u53d1\u9001 RPC \u8c03\u7528\u3002</p> <pre><code>// \u5728\u4f60\u60f3\u8981\u7684\u4efb\u4f55\u5730\u65b9\u6ce8\u89e3\u4f60\u7684\u6570\u636e\u5305\u65b9\u6cd5\n@RPCPacket(\"rpcPacketTest\")\npublic static void rpcPacketTest(RPCSender sender, String message, boolean message2) {\n    if (sender.isServer()) {\n        LDLib2.LOGGER.info(\"\u4ece\u670d\u52a1\u5668\u63a5\u6536\u5230\u7684 RPC \u6570\u636e\u5305: {}, {}\", message, message2);\n    } else {\n        LDLib2.LOGGER.info(\"\u4ece\u5ba2\u6237\u7aef\u63a5\u6536\u5230\u7684 RPC \u6570\u636e\u5305: {}, {}\", message, message2);\n    }\n}\n\n// \u53d1\u9001\u6570\u636e\u5305\u5230\u8fdc\u7a0b/\u670d\u52a1\u5668\nRPCPacketDistributor.rpcToServer(\"rpcPacketTest\", \"\u6765\u81ea\u5ba2\u6237\u7aef\u7684\u95ee\u5019!\", true)\nRPCPacketDistributor.rpcToAllPlayers(\"rpcPacketTest\", \"\u6765\u81ea\u670d\u52a1\u5668\u7684\u95ee\u5019!\", false)\n</code></pre>"},{"location":"zh/ldlib2/sync/types_support/","title":"\u7c7b\u578b\u652f\u6301","text":""},{"location":"zh/ldlib2/sync/types_support/#_1","title":"\u7c7b\u578b\u652f\u6301","text":"<p> Since 2.0.0 </p> <p>LDLib2 \u5df2\u7ecf\u4e3a\u540c\u6b65\u548c\u6301\u4e45\u5316\u63d0\u4f9b\u4e86\u5927\u91cf\u7684\u7c7b\u578b\u652f\u6301\u3002</p>"},{"location":"zh/ldlib2/sync/types_support/#_2","title":"\u5185\u7f6e\u652f\u6301","text":"<p>Note</p> <p>\u8bf7\u67e5\u770b github \u4ee5\u83b7\u53d6\u6700\u65b0\u7684\u652f\u6301\u5217\u8868\u3002</p> <ul> <li>Java \u4e2d\u7684\u539f\u751f\u7c7b\u578b\uff08\u6570\u5b57\u3001\u5e03\u5c14\u503c\u3001\u5b57\u7b26\u4e32\u3001\u679a\u4e3e\u7b49\uff09</li> </ul> \u7c7b\u578b \u4f18\u5148\u7ea7 \u53ea\u8bfb <code>int</code> / <code>Integer</code> <code>-1</code> - <code>long</code> / <code>Long</code> <code>-1</code> - <code>float</code> / <code>Float</code> <code>-1</code> - <code>double</code> / <code>Double</code> <code>-1</code> - <code>boolean</code> / <code>Boolean</code> <code>-1</code> - <code>byte</code> / <code>Byte</code> <code>-1</code> - <code>short</code> / <code>Short</code> <code>-1</code> - <code>char</code> / <code>Character</code> <code>-1</code> - <code>String</code> <code>-1</code> - <code>Enum&lt;?&gt;</code> <code>-1</code> - <code>Number</code> <code>1000</code> - <code>UUID</code> <code>100</code> - <code>T[]</code> <code>-1</code> \u53d6\u51b3\u4e8e <code>T</code> <code>Collection&lt;?&gt;</code> <code>-1</code> \u2705 <ul> <li>Minecraft \u4e2d\u7684\u7c7b\u578b\uff08\u65b9\u5757\u3001\u7269\u54c1\u3001\u6d41\u4f53\u7b49\uff09</li> </ul> \u7c7b\u578b \u4f18\u5148\u7ea7 \u53ea\u8bfb <code>Block</code> <code>100</code> - <code>Item</code> <code>100</code> - <code>Fluid</code> <code>100</code> - <code>EntityType&lt;?&gt;</code> <code>100</code> - <code>BlockEntityType&lt;?&gt;</code> <code>100</code> - <code>BlockState</code> <code>100</code> - <code>ResourceLocation</code> <code>100</code> - <code>AABB</code> <code>1000</code> - <code>BlockPos</code> <code>1000</code> - <code>FluidStack</code> <code>1000</code> - <code>ItemStack</code> <code>1000</code> - <code>RecipeHolder&lt;?&gt;</code> <code>1000</code> - <code>Tag</code> <code>2000</code> - <code>Component</code> <code>2000</code> - <code>INBTSerializable&lt;?&gt;</code> <code>2000</code> \u2705 <ul> <li>LDLib2 \u6216\u5176\u4ed6\u6a21\u7ec4\u4e2d\u7684\u7c7b\u578b\u3002</li> </ul> \u7c7b\u578b \u4f18\u5148\u7ea7 \u53ea\u8bfb <code>UIEvent</code> <code>100</code> - <code>Position</code> <code>100</code> - <code>Size</code> <code>100</code> - <code>Pivot</code> <code>100</code> - <code>Range</code> <code>100</code> - <code>Vector3f</code> <code>1000</code> - <code>Vector4f</code> <code>1000</code> - <code>Vector2f</code> <code>1000</code> - <code>Vector2i</code> <code>1000</code> - <code>Quaternionf</code> <code>1000</code> - <code>IGuiTexture</code> <code>1000</code> - <code>IRenderer</code> <code>1000</code> - <code>IResourcePath</code> <code>1000</code> - <code>IManaged</code> <code>1500</code> \u2705"},{"location":"zh/ldlib2/sync/types_support/#_3","title":"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u7c7b\u578b\u652f\u6301","text":"<p>\u8981\u6dfb\u52a0\u5bf9\u65b0\u7c7b\u578b\u7684\u652f\u6301\uff0c\u4f60\u9700\u8981\u6ce8\u518c\u8be5\u7c7b\u578b\u7684 <code>IAccessor&lt;TYPE&gt;</code>\u3002\u6240\u6709\u7c7b\u578b\u53ef\u4ee5\u5206\u4e3a\u4e24\u7ec4\uff1a<code>direct</code>\uff08\u76f4\u63a5\uff09\u548c <code>read-only</code>\uff08\u53ea\u8bfb\uff09\u3002</p> <p>Important</p> <ul> <li><code>direct</code> \u6307\u7684\u662f\u53ef\u4ee5\u4e3a\u7a7a\uff0c\u5e76\u4e14\u5728\u7ba1\u7406\u751f\u547d\u5468\u671f\u5185\u6709\u5df2\u77e5\u65b9\u6cd5\u53ef\u4ee5\u521b\u5efa\u8be5\u7c7b\u578b\u65b0\u5b9e\u4f8b\u7684\u7c7b\u578b\u3002</li> <li><code>read-only</code> \u6307\u7684\u662f\u5728\u7ba1\u7406\u751f\u547d\u5468\u671f\u5185\u4e0d\u80fd\u4e3a\u7a7a\u4e14\u4e0d\u53ef\u53d8\u7684\u7c7b\u578b\uff08\u4f8b\u5982 <code>INBTSerializable&lt;?&gt;</code> \u548c <code>Collection&lt;?&gt;</code>\uff09\u3002\u6240\u6709\u4fee\u6539\u90fd\u5e94\u901a\u8fc7\u5176 API \u5b8c\u6210\u3002</li> </ul> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>AccessorRegistries.registerAccessor</code> \u6765\u6ce8\u518c\u8bbf\u95ee\u5668\u3002\u4e00\u822c\u6765\u8bf4\uff0c\u4f60\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u6ce8\u518c\u4f60\u7684\u8bbf\u95ee\u5668\uff0c\u4f46\u6211\u4eec\u5efa\u8bae\u5728 LDLibPlugin#onLoad \u4e2d\u8fdb\u884c\u3002</p>"},{"location":"zh/ldlib2/sync/types_support/#direct","title":"\u6ce8\u518c\u4e00\u4e2a direct \u7c7b\u578b","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>CustomDirectAccessor</code> \u8f7b\u677e\u6ce8\u518c\u65b0\u7c7b\u578b\u3002</p> <p>\u4ec0\u4e48\u662f Mark\uff1f</p> <p>Mark \u662f\u7ba1\u7406\u751f\u547d\u5468\u671f\u4e2d\u7684\u4e00\u4e2a\u5feb\u7167\u3002LDLib2 \u4f1a\u4e3a\u5f53\u524d\u503c\u751f\u6210 mark \u5e76\u5728\u4e4b\u540e\u8fdb\u884c\u6bd4\u8f83\uff0c\u4ee5\u786e\u5b9a\u5176\u662f\u5426\u53d1\u751f\u4e86\u53d8\u5316\u3002 \u5982\u679c\u672a\u5b9a\u4e49 Mark\uff0c\u5b83\u5c06\u5b58\u50a8\u5f53\u524d\u503c\u4f5c\u4e3a mark\u3002\u5982\u679c\u7c7b\u578b\u7684\u5185\u90e8\u503c\u662f\u4e0d\u53ef\u53d8\u7684\uff08\u4f8b\u5982 UUID\u3001ResourceLocation\uff09\uff0c\u8fd9\u662f\u53ef\u884c\u7684\u3002\u5426\u5219\uff0c\u4f60\u6700\u597d\u8bbe\u7f6e\u4e00\u79cd\u83b7\u53d6 mark \u7684\u65b9\u5f0f\u3002</p> \u65b9\u6cd5 \u662f\u5426\u53ef\u9009 \u8bf4\u660e <code>codec</code> \u5fc5\u9700 \u63d0\u4f9b\u7528\u4e8e\u6301\u4e45\u5316\u7684\u7f16\u89e3\u7801\u5668 <code>streamCodec</code> \u5fc5\u9700 \u63d0\u4f9b\u7528\u4e8e\u540c\u6b65\u7684 StreamCodec <code>customMark</code> \u53ef\u9009 \u63d0\u4f9b\u83b7\u53d6\u548c\u6bd4\u8f83 mark \u7684\u51fd\u6570 <code>copyMark</code> \u53ef\u9009 \u4ece\u503c\u4e2d\u590d\u5236 mark\u3002\u8fd9\u5c06\u4f7f\u7528 <code>Objects#equals(Object, Object)</code> \u6765\u6bd4\u8f83 mark\u3002\u8bf7\u786e\u4fdd\u5bf9\u8c61\u652f\u6301 <code>Object#equals(Object)</code>\u3002 <code>codecMark</code> \u53ef\u9009 \u8fd9\u5c06\u4f7f\u7528 <code>JavaOps</code> \u57fa\u4e8e\u5f53\u524d\u503c\u751f\u6210 mark\u3002 <pre><code>AccessorRegistries.registerAccessor(CustomDirectAccessor.builder(Quaternionf.class)\n    .codec(ExtraCodecs.QUATERNIONF)\n    .streamCodec(ByteBufCodecs.QUATERNIONF)\n    .copyMark(Quaternionf::new)\n    .build());\n\nAccessorRegistries.registerAccessor(CustomDirectAccessor.builder(ItemStack.class)\n    .codec(ItemStack.OPTIONAL_CODEC)\n    .streamCodec(ItemStack.OPTIONAL_STREAM_CODEC)\n    .customMark(ItemStack::copy, ItemStack::matches)\n    .build());\n</code></pre>"},{"location":"zh/ldlib2/sync/types_support/#read-only","title":"\u6ce8\u518c\u4e00\u4e2a read-only \u7c7b\u578b","text":"<p>\u4e00\u822c\u6765\u8bf4\uff0c\u4f60\u5e76\u4e0d\u771f\u7684\u9700\u8981\u8fd9\u6837\u505a\u3002\u56e0\u4e3a\u4f60\u53ef\u4ee5\u8ba9\u4f60\u81ea\u5df1\u7684\u7c7b\u7ee7\u627f\u81ea <code>INBTSerializable</code>\u3002 \u5982\u679c\u4f60\u786e\u5b9e\u9700\u8981\uff0c\u8bf7\u5b9e\u73b0 <code>IReadOnlyAccessor&lt;TYPE&gt;</code> \u5e76\u6ce8\u518c\u5b83\uff0c\u67e5\u770b\u4ee3\u7801\u6ce8\u91ca\u4ee5\u83b7\u53d6\u66f4\u591a\u4f7f\u7528\u7ec6\u8282\u3002</p>"},{"location":"zh/ldlib2/ui/","title":"Introduction","text":""},{"location":"zh/ldlib2/ui/#introduction","title":"Introduction","text":"<p> Since 2.1.0 </p> <p>LDLib2 provides powerful UI library based on the <code>yoga</code> layout engine.  If you are struggling with GUI development, LDLib2 is definitely one of your best choice. Compared with the LDLib, LDLib2 has undergone a complete refactoring:</p> <ul> <li>modern UI layout system</li> <li>modern UI event system</li> <li>CSS-like stylesheet system</li> <li>data binding + rpc event</li> <li>massive plug-and-play components</li> <li>xml support + in-game UI visual editor</li> <li>xei / kjs supports</li> <li>completed document and usage examples</li> </ul>"},{"location":"zh/ldlib2/ui/#lets-see-what-we-can-do-with-ldlib2","title":"Let's see what we can do with LDLib2","text":""},{"location":"zh/ldlib2/ui/editor/","title":"UI Editor","text":""},{"location":"zh/ldlib2/ui/editor/#ui-editor","title":"UI Editor","text":"<p> Since 2.1.5 </p> <p>Warning</p> <p>This command can only be used under the <code>single player</code> world.</p> <p>LDLib2 provides a visual editor to support UI creatiom. Use command to open the UI Editor.</p> <pre><code>/ldlib2_ui_editor\n</code></pre> <p>The UI Editor supports two ways of creating UIs through visualization:</p> <ul> <li><code>UI XML</code></li> <li><code>UI Template</code></li> </ul>"},{"location":"zh/ldlib2/ui/editor/#ui-xml","title":"UI XML","text":"<p>Click <code>File \u2192 New \u2192 UI XML File</code> to create a new UI XML file. You can also click <code>Open</code> to load an existing XML file.</p> <p>Once opened, you can edit the XML and see a real-time preview of your UI directly in the editor. For more xml details, check UI Xml</p> <p>Tip</p> <p>You can also edit the XML file using an external IDE (such as VS Code or IntelliJ IDEA). The preview will automatically update when you save your changes.</p>"},{"location":"zh/ldlib2/ui/editor/#ui-template","title":"UI Template","text":"<p>A UI Template is similar to UI XML and is used to define UI content (including styles and the component tree).</p> <p>The key differences are:</p> <ul> <li>UI Templates can be edited visually using the UI Editor.</li> <li>A saved UI Template can be reused as a template component in other UI XML files or UI Templates.</li> </ul> <p>Unlike UI XML files, UI Templates are managed by LDLib2\u2019s resource system. To create one, use the Resource Panel:</p> <p>Steps:</p> <ol> <li>Select the UI resource category.</li> <li>Choose or create a resource provider.</li> <li>Right-click and create a UI Template, then double-click it to enter edit mode.</li> </ol>"},{"location":"zh/ldlib2/ui/editor/#edit-your-template","title":"Edit your Template","text":"<p>After opening a UI Template, you will see the following editor interface:</p> <ol> <li> <p>Style Configurator    Edit built-in styles, add or remove external stylesheets, and inspect applied styles.</p> </li> <li> <p>UI Tree    Displays the full UI hierarchy.    You can create or remove components via the context menu, select multiple elements, or drag to reorder the hierarchy.</p> </li> <li> <p>Element Configurator    Shows configurable properties of the currently selected element.</p> </li> <li> <p>Preview    Provides a real-time preview of your UI.</p> </li> </ol> <p>Using the UI Editor, you can configure layout, styles, and other settings visually. If you understand the concepts introduced in the Preliminary section, the editor should be intuitive to use. For components with special configuration options, refer to their individual documentation pages.</p>"},{"location":"zh/ldlib2/ui/editor/#load-ui-template-and-setup","title":"Load UI Template and setup","text":"<p>There are two methods to load and use your template for your UI.</p> <ol> <li>you could also move it to your assets and loaed it by a <code>ResourceLoaction</code>.</li> <li>if the resrouce is under the ldlib2 folder, you can right click the resource to obtain the resource path and load it.</li> </ol> JavaKubeJS <pre><code>@Override\npublic ModularUI createUI(Player player) {\n    var ui = Optional.ofNullable(UIResource.INSTANCE.getResourceInstance()\n            // resource location based\n            .getResource(new FilePath(ResourceLoaction.parse(\"ldlib2:resources/examples/example_layout.ui.nbt\"))))\n\n            // file based\n            //.getResource(new FilePath(new File(LDLib2.getAssetsDir(), \"ldlib2/resources/examples/example_layout.ui.nbt\"))) // LDLib2.getAssetsDir() = \".minecraft/ldlib2/assets\"\n\n            .map(UITemplate::createUI)\n            .orElseGet(UI::empty);\n\n    // find elemetns and do data bindings or logic setup here\n    var buttons = ui.select(\".button_container &gt; button\").toList(); // by selector\n    var container = ui.selectRegex(\"container\").findFirst().orElseThrow(); // by id regex\n\n    return ModularUI.of(ui, player);\n}\n</code></pre> <pre><code>function createUIFromUIResource(path) {\n    return UIResource.INSTANCE.getResourceInstance().getResource(path).createUI();\n}\n\nfunction createUI(player) {\n    // file based\n    let ui = createUIFromUIResource(\"file(./ldlib2/assets/ldlib2/resources/global/modern_styles.ui.nbt)\")\n\n    // resource location based\n    // let ui = createUIFromUIResource(\"file(ldlib2:resources/global/modern_styles.ui.nbt)\")\n\n    // find elemetns and do data bindings or logic setup here\n    let buttons = ui.select(\".button_container &gt; button\").toList(); // by selector\n    let container = ui.selectRegex(\"container\").findFirst().orElseThrow(); // by id regex\n\n    return ModularUI.of(ui, player)\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/editor/#loading-event","title":"Loading Event","text":"<p>A saved UI Template only defines the visual structure and styles \u2014 it does not include runtime logic by default. In most cases, you load the template and then manually attach handlers or bindings in code.</p> <p>However, if you want to reuse the same UI in different contexts, repeating the same setup logic every time becomes tedious.</p> <p>To address this, LDLib2 provides a hook event that lets you inject logic when the UI Template calls <code>createUI()</code>, so you can configure the returned <code>UI</code> automatically during creation.</p> <pre><code>@SubscribeEvent\npublic static void onUICreated(UITemplate.CreateUI event) {\n    var template = event.template;\n    var ui = event.ui;\n    // do initialization here\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/editor/#ui-simulation","title":"UI Simulation","text":"<p>Click the green Play button at the top of the editor to enter simulation mode. This allows you to interact with the UI and verify its behavior.</p>"},{"location":"zh/ldlib2/ui/factory/","title":"UI Factory","text":""},{"location":"zh/ldlib2/ui/factory/#ui-factory","title":"UI Factory","text":""},{"location":"zh/ldlib2/ui/getting_start/","title":"Getting Started","text":""},{"location":"zh/ldlib2/ui/getting_start/#getting-started","title":"Getting Started","text":"<p> Since 2.1.0 </p> <p>In this section, we will give you some examples step by step.</p>"},{"location":"zh/ldlib2/ui/getting_start/#tutorial-1-create-and-display-a-modularui-in-your-screen","title":"Tutorial 1: create and display a <code>ModularUI</code> in your screen","text":"<p>Let's start with a simple UI. A <code>ModularUI</code> acts as the runtime manager for your UI \u2014 handling lifecycle, rendering, and interactions for all elements you define.  It takes a <code>UI</code> instance and optionally a <code>Player</code> as inputs. Check ModularUI page for more details.</p> <pre><code>private static ModularUI createModularUI() {\n    // create a root element\n    var root = new UIElement();\n    root.addChildren(\n            // add a label to display text\n            new Label().setText(\"My First UI\"),\n            // add a button with text\n            new Button().setText(\"Click Me!\"),\n            // add an element to display an image based on a resource location\n            new UIElement().layout(layout -&gt; layout.width(80).height(80))\n                    .style(style -&gt; style.background(\n                            SpriteTexture.of(\"ldlib2:textures/gui/icon.png\"))\n                    )\n    ).style(style -&gt; style.background(Sprites.BORDER)); // set a background for the root element\n    // create a UI\n    var ui = UI.of(root);\n    // return a modular UI for runtime instance\n    return ModularUI.of(ui);\n}\n</code></pre> <p>Next, we need to display our UI. Unlike most UI libraries that force you to use a dedicated screen class, LDLib2 provides a universal solution for rendering and interacting with a <code>ModularUI</code> inside any screen you choose. This means you can create and initialize a <code>ModularUI</code> during the screen\u2019s initialization stage, as shown below.</p> <pre><code>@OnlyIn(Dist.CLIENT)\npublic class MyScreen extends Screen {\n    // .....\n\n    // initial\n    @Override\n    public void init() {\n        super.init();\n        var modularUI = createModularUI();\n        modularUI.setScreenAndInit(this);\n        this.addRenderableWidget(modularUI.getWidget());\n    }\n\n    // .....\n}\n</code></pre> <p>Quick Test</p> <p>If you dont want to cope with the code of the <code>screen</code> and display. We also provide the <code>ModularUIScreen</code> for you.  Check screen and menu page for more details.</p> <pre><code>public static void openScreenUI() {\n    var modularUI = createModularUI();\n    minecraft.setScreen(new ModularUIScreen(modularUI, Component.empty()));\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/getting_start/#tutorial-2-better-layout-and-style","title":"Tutorial 2: better layout and style","text":"<p>Fine, it works \u2014 but the layout and styling are still not ideal. For example, we want to add padding to the root element, introduce some spacing between components, and center-align the label. Thanks to the yoga, we do need to cope with layout code. Check layout page for more details. Let\u2019s improve the UI by refining its layout and style. </p> <pre><code>private static ModularUI createModularUI() {\n    // create a root element\n    var root = new UIElement();\n    root.addChildren(\n            // add a label to display text\n            new Label().setText(\"My First UI\")\n                    // center align text\n                    .textStyle(textStyle -&gt; textStyle.textAlignHorizontal(Horizontal.CENTER)),\n            // add a button with text\n            new Button().setText(\"Click Me!\"),\n            // add an element to display an image based on a resource location\n            new UIElement().layout(layout -&gt; layout.width(80).height(80))\n                    .style(style -&gt; style.background(\n                            SpriteTexture.of(\"ldlib2:textures/gui/icon.png\"))\n                    )\n    ).style(style -&gt; style.background(Sprites.BORDER)); // set a background for the root element\n    // set padding and gap for children elements\n    root.layout(layout -&gt; layout.paddingAll(7).gapAll(5));\n    // create a UI\n    var ui = UI.of(root);\n    // return a modular UI for runtime instance\n    return ModularUI.of(ui);\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/getting_start/#tutorial-3-component-interaction-and-ui-events","title":"Tutorial 3: component interaction and UI events","text":"<p>Let's see how to interact with components. Here we take the button as examples, <code>setOnClick()</code> is provided by the button. We introduce two buttons that rotate an image by \u00b145\u00b0.</p> <pre><code>private static ModularUI createModularUI() {\n    // create a root element\n    var root = new UIElement();\n    // add an element to display an image based on a resource location\n    var image = new UIElement().layout(layout -&gt; layout.width(80).height(80))\n            .style(style -&gt; style.background(\n                    SpriteTexture.of(\"ldlib2:textures/gui/icon.png\"))\n            );\n    root.addChildren(\n            // add a label to display text\n            new Label().setText(\"Interaction\")\n                    // center align text\n                    .textStyle(textStyle -&gt; textStyle.textAlignHorizontal(Horizontal.CENTER)),\n            image,\n            // add a container with the row flex direction\n            new UIElement().layout(layout -&gt; layout.flexDirection(YogaFlexDirection.ROW)).addChildren(\n                    // a button to rotate the image -45\u00b0\n                    new Button().setText(\"-45\u00b0\")\n                            .setOnClick(e -&gt; image.transform(transform -&gt; \n                                    transform.rotation(transform.rotation()-45))),\n                    new UIElement().layout(layout -&gt; layout.flex(1)), // occupies the remaining space\n                    // a button to rotate the image 45\u00b0\n                    new Button().setText(\"+45\u00b0\")\n                            .setOnClick(e -&gt; image.transform(transform -&gt; \n                                    transform.rotation(transform.rotation() + 45)))\n            )\n    ).style(style -&gt; style.background(Sprites.BORDER)); // set a background for the root element\n    // set padding and gap for children elements\n    root.layout(layout -&gt; layout.paddingAll(7).gapAll(5));\n    // create a UI\n    var ui = UI.of(root);\n    // return a modular UI for runtime instance\n    return ModularUI.of(ui);\n}\n</code></pre> <p>In the previous step, we used <code>Button#setOnClick()</code> to handle interactions. While this is convenient, it is only an API method only provided by the Button component.</p> <p>LDLib2 itself exposes a complete and flexible UI event system.  Any UIElement can listen to input events such as mouse clicks, hover, command, lifecycle, drag, focus, keyboard input, etc. Check event page for more details.</p> <p>By combining a basic UIElement with event listeners and styles, you can implement fully custom interactive components\u2014including buttons.</p> <pre><code>private static ModularUI createModularUI() {\n    // create a root element\n    var root = new UIElement();\n    // add an element to display an image based on a resource location\n    var image = new UIElement().layout(layout -&gt; layout.width(80).height(80))\n            .style(style -&gt; style.background(\n                    SpriteTexture.of(\"ldlib2:textures/gui/icon.png\"))\n            );\n    root.addChildren(\n            // add a label to display text\n            new Label().setText(\"UI Event\")\n                    // center align text\n                    .textStyle(textStyle -&gt; textStyle.textAlignHorizontal(Horizontal.CENTER)),\n            image,\n            // add a container with the row flex direction\n            new UIElement().layout(layout -&gt; layout.flexDirection(YogaFlexDirection.ROW)).addChildren(\n                    // implement the button by using ui events\n                    new UIElement().addChild(new Label().setText(\"-45\u00b0\").textStyle(textStyle -&gt; textStyle.adaptiveWidth(true)))\n                            .layout(layout -&gt; layout.justifyItems(YogaJustify.CENTER).paddingHorizontal(3))\n                            .style(style -&gt; style.background(Sprites.BORDER1))\n                            .addEventListener(UIEvents.MOUSE_DOWN, e -&gt; image.transform(transform -&gt;\n                                    transform.rotation(transform.rotation()-45)))\n                            .addEventListener(UIEvents.MOUSE_ENTER, e -&gt;\n                                    e.currentElement.style(style -&gt; style.background(Sprites.BORDER1_DARK)), true)\n                            .addEventListener(UIEvents.MOUSE_LEAVE, e -&gt;\n                                    e.currentElement.style(style -&gt; style.background(Sprites.BORDER1)), true),\n                    new UIElement().layout(layout -&gt; layout.flex(1)), // occupies the remaining space\n                    // a button to rotate the image 45\u00b0\n                    new Button().setText(\"+45\u00b0\")\n                            .setOnClick(e -&gt; image.transform(transform -&gt;\n                                    transform.rotation(transform.rotation() + 45)))\n            )\n    ).style(style -&gt; style.background(Sprites.BORDER)); // set a background for the root element\n    // set padding and gap for children elements\n    root.layout(layout -&gt; layout.paddingAll(7).gapAll(5));\n    // create a UI\n    var ui = UI.of(root);\n    // return a modular UI for runtime instance\n    return ModularUI.of(ui);\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/getting_start/#tutorial-4-ui-stylesheet","title":"Tutorial 4: UI stylesheet","text":"<p>In Tutorial 2, we improved the layout and visual appearance by configuring layout and style directly in code. While this works well, inline layout and style definitions can quickly become verbose and harder to maintain as the UI grows.</p> <p>To address this, LDLib2 introduces a stylesheet system called <code>LSS</code> (LDLib2 StyleSheet). LSS allows you to describe layout and style properties in a declarative, CSS-like way, separating visual design from UI structure. Check stylesheet page for more details.</p> <p>In the examples below, we reimplement the layout and style logic from Step 3 using LSS:</p> <ul> <li>Example 1 demonstrates LSS bindings directly on UI elements</li> <li>Example 2 shows how to define a standalone stylesheet and apply it to the UI</li> </ul> example 1example 2 <pre><code>private static ModularUI createModularUI() {\n    var root = new UIElement();\n    root.addChildren(\n            new Label().setText(\"LSS example\")\n                    .lss(\"horizontal-align\", \"center\"),\n            new Button().setText(\"Click Me!\"),\n            new UIElement()\n                    .lss(\"width\", 80)\n                    .lss(\"height\", 80)\n                    .lss(\"background\", \"sprite(ldlib2:textures/gui/icon.png)\")\n    );\n    root.lss(\"background\", \"built-in(ui-gdp:BORDER)\");\n    root.lss(\"padding-all\", 7);\n    root.lss(\"gap-all\", 5);\n    var ui = UI.of(root);\n    return ModularUI.of(ui);\n}\n</code></pre> <pre><code>private static ModularUI createModularUI() {\n    // set root with an ID\n    var root = new UIElement().setId(\"root\");\n    root.addChildren(\n            new Label().setText(\"LSS example\"),\n            new Button().setText(\"Click Me!\"),\n            // set the element with a class\n            new UIElement().addClass(\"image\")\n    );\n    var lss = \"\"\"\n        // id selector\n        #root {\n            background: built-in(ui-gdp:BORDER);\n            padding-all: 7;\n            gap-all: 5;\n        }\n\n        // class selector\n        .image {\n            width: 80;\n            height: 80;\n            background: sprite(ldlib2:textures/gui/icon.png);\n        }\n\n        // element selector\n        #root label {\n            horizontal-align: center;\n        }\n        \"\"\";\n    var stylesheet = Stylesheet.parse(lss);\n    // add stylesheets to ui\n    var ui = UI.of(root, stylesheet);\n    return ModularUI.of(ui);\n}\n</code></pre> <p>Built-in Stylesheets</p> <p>In addition to custom LSS definitions, LDLib2 also provides several built-in stylesheet themes that cover most common UI components:</p> <ul> <li><code>StylesheetManager.GDP</code></li> <li><code>StylesheetManager.MC</code></li> <li><code>StylesheetManager.MODERN</code></li> </ul> <p>These built-in stylesheets allow you to apply a consistent visual style to an entire UI with minimal setup. You can access and manage them through the <code>StylesheetManager</code>, which acts as a central registry for all available stylesheet packs. </p> <pre><code>private static ModularUI createModularUI() {\n    var root = new UIElement();\n    root.layout(layout -&gt; layout.width(100));\n    root.addChildren(\n            new Label().setText(\"Stylesheets\"),\n            new Button().setText(\"Click Me!\"),\n            new ProgressBar().setProgress(0.5f).label(label -&gt; label.setText(\"Progress\")),\n            new Toggle().setText(\"Toggle\"),\n            new TextField().setText(\"Text Field\"),\n            new UIElement().layout(layout -&gt; layout.setFlexDirection(YogaFlexDirection.ROW)).addChildren(\n                    new ItemSlot().setItem(Items.APPLE.getDefaultInstance()),\n                    new FluidSlot().setFluid(new FluidStack(Fluids.WATER, 1000))\n            ),\n            // list all stylesheets\n            new Selector&lt;ResourceLocation&gt;()\n                    .setSelected(StylesheetManager.GDP, false)\n                    .setCandidates(StylesheetManager.INSTANCE.getAllPackStylesheets().stream().toList())\n                    .setOnValueChanged(selected -&gt; {\n                        // switch to the selected stylesheet\n                        var mui = root.getModularUI();\n                        if (mui != null) {\n                            mui.getStyleEngine().clearAllStylesheets();\n                            mui.getStyleEngine().addStylesheet(StylesheetManager.INSTANCE.getStylesheetSafe(selected));\n                        }\n                    })\n    );\n    root.addClass(\"panel_bg\");\n    // use GDP stylesheets by default\n    var ui = UI.of(root, StylesheetManager.INSTANCE.getStylesheetSafe(StylesheetManager.GDP)));\n    return ModularUI.of(ui);\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/getting_start/#tutorial-5-data-bindings","title":"Tutorial 5: data bindings","text":"<p>LDLib2 provides built-in data binding support for most data-driven UI components. This allows UI elements to stay in sync with underlying data without manual update logic. The binding system is based on <code>IObserver&lt;T&gt;</code> and <code>IDataProvider&lt;T&gt;</code>.  Check data bindings page for more details.</p> <p>In this example:</p> <ul> <li>A shared AtomicInteger acts as the single source of truth</li> <li>Buttons modify the value directly</li> <li>The TextField updates the value through an observer</li> <li>Labels and the progress bar automatically refresh when the data changes</li> </ul> <pre><code>private static ModularUI createModularUI() {\n    // a value holder\n    var valueHolder = new AtomicInteger(0);\n\n    var root = new UIElement();\n    root.addChildren(\n            new Label().setText(\"Data Bindings\")\n                    .textStyle(textStyle -&gt; textStyle.textAlignHorizontal(Horizontal.CENTER)),\n            new UIElement().layout(layout -&gt; layout.flexDirection(YogaFlexDirection.ROW)).addChildren(\n                    // button to decrease the value\n                    new Button().setText(\"-\")\n                            .setOnClick(e -&gt; {\n                                if (valueHolder.get() &gt; 0) {\n                                    valueHolder.decrementAndGet();\n                                }\n                            }),\n                    new TextField()\n                            .setNumbersOnlyInt(0, 100)\n                            .setValue(String.valueOf(valueHolder.get()))\n                            // bind an Observer to update the value holder\n                            .bindObserver(value -&gt; valueHolder.set(Integer.parseInt(value)))\n                            // bind a DataSource to notify the value changes\n                            .bindDataSource(SupplierDataSource.of(() -&gt; String.valueOf(valueHolder.get())))\n                            .layout(layout -&gt; layout.flex(1)),\n                    // button to increase the value\n                    new Button().setText(\"+\")\n                            .setOnClick(e -&gt; {\n                                if (valueHolder.get() &lt; 100) {\n                                    valueHolder.incrementAndGet();\n                                }\n                            })\n            ),\n            // bind a DataSource to notify the value changes for label and progress bar\n            new Label().bindDataSource(SupplierDataSource.of(() -&gt; Component.literal(\"Binding: \").append(String.valueOf(valueHolder.get())))),\n            new ProgressBar()\n                    .setProgress(valueHolder.get() / 100f)\n                    .bindDataSource(SupplierDataSource.of(() -&gt; valueHolder.get() / 100f))\n                    .label(label -&gt; label.bindDataSource(SupplierDataSource.of(() -&gt; Component.literal(\"Progress: \").append(String.valueOf(valueHolder.get())))))\n    ).style(style -&gt; style.background(Sprites.BORDER));\n    root.layout(layout -&gt; layout.width(100).paddingAll(7).gapAll(5));\n    return ModularUI.of(UI.of(root));\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/getting_start/#tutorial-6-modularui-for-menu","title":"Tutorial 6: <code>ModularUI</code> for Menu","text":"<p>In the previous tutorials, we focused on rendering\u3000<code>ModularUI</code> inside client-side screens. This works well for purely visual or client-only interfaces.</p> <p>However, most real-world GUIs in Minecraft are server\u2013client synchronized. When a GUI involves gameplay logic or persistent data, the server must stay authoritative. In vanilla Minecraft, this is handled through a <code>Menu</code>, which manages synchronization between the server and client.</p> <p>Unlike UI libraries that only support client-side rendering, LDLib2 provides first-class support for server-backed Menus. You can use <code>ModularUI</code> directly with a Menu, and no additional networking or synchronization code is required.</p> <p>Let's create a simple Menu-based UI that displays the player\u2019s inventory.</p> <pre><code>private static ModularUI createModularUI(Player player) {\n    var root = new UIElement();\n    root.addChildren(\n            new Label().setText(\"Menu UI\"),\n            // add player invotry \n            new InventorySlots()\n    ).addClass(\"panel_bg\");\n\n    var ui = UI.of(root, StylesheetManager.INSTANCE.getStylesheetSafe(StylesheetManager.GDP));\n    // pass the player to the Modular UI\n    return ModularUI.of(ui, player);\n}\n</code></pre> <p>You have to create a <code>ModularUI</code> with a <code>Player</code>, which is necessary for the menu-based UI. Besides, not only the screen, you should also init the <code>ModularUI</code> for your <code>Menu</code> as well:</p> <ul> <li>The initialization should be done after creation and before writing the extra data buffer.</li> <li>Don't forget to set a correct image size of your screen if necessary.</li> </ul> <pre><code>public class MyContainerMenu extends AbstractContainerMenu {\n    // you can do initialization in the constructor\n    public MyContainerMenu(...) {\n        super(...)\n\n        var modularUI = createModularUI(player)\n        // we have added mixin to make the AbstractContainerMenu implementing the interface\n        if (this instanceof IModularUIHolderMenu holder) {\n            holder.setModularUI(modularUI);\n        }\n    }\n\n    // .....\n}\n\npublic class MyContainerScreen extends AbstractContainerScreen&lt;MyContainerMenu&gt; {\n    @Override\n    public void init() {\n        // the modular widget has already added + init by events\n        this.imageWidth = (int) getMenu().getModularUI().getWidth();\n        this.imageHeight = (int) getMenu().getModularUI().getHeight();\n        super.init();\n    }\n\n    // .....\n}\n</code></pre> <p>Quick Test</p> <p>To use and open a menu-based UI, you need to register your own <code>MenuType</code>, LDLib2 also provide the <code>ModularUIContainerScreen</code> and <code>ModularUIContainerMenu</code> to help you set this up quickly. Check screen and menu page for more details. </p> <p>Alternatively, you can get started even faster by using the provided factories. They allow you to create menu-based UIs for blocks, items, or players with minimal setup\u2014without dealing with manual registration or boilerplate code. In this case, we use the <code>PlayerUIMenuType</code> for quick demo.</p> <pre><code>public static final ResourceLocation UI_ID = LDLib2.id(\"unique_id\");\n\n// register your ui somewhere, e.g. during your mod initialization.\npublic static void registerPlayerUI() {\n    PlayerUIMenuType.register(UI_ID, ignored -&gt; player -&gt; createModularUI(player));\n}\n\npublic static void openMenuUI(Player player) {\n    PlayerUIMenuType.openUI(player, UI_ID);\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/getting_start/#tutorial-7-communication-between-screen-and-menu","title":"Tutorial 7: communication between Screen and Menu","text":"<p>While the <code>InventorySlots</code> works out of the box, they are pre-packaged built-in components. In real projects, you often need more control over how data and events flow between the client-side screen and the server-side menu.</p> <p>ModularUI provides full support for <code>data bindings</code> and <code>event dispatch</code> across client and server. This allows UI interactions on the client to safely trigger logic on the server, and server-side state changes to automatically update the UI.  Check data bindings page for more details. </p> <p>Here, we focus on practical patterns to help you get started quickly. </p> <pre><code>// represents data on the server\nprivate final ItemStackHandler itemHandler = new ItemStackHandler(2);\nprivate final FluidTank fluidTank = new FluidTank(2000);\nprivate boolean bool = true;\nprivate String string = \"hello\";\nprivate float number = 0.5f;\n\nprivate static ModularUI createModularUI(Player player) {\n    // create a root element\n    var root = new UIElement();\n    root.addChildren(\n            // add a label to display text\n            new Label().setText(\"Data Between Screen and Menu\"),\n            // bind storage to slots\n            new UIElement().addChildren(\n                    new ItemSlot().bind(itemHandler, 0),\n                    new ItemSlot().bind(new ItemHandlerSlot(itemHandler, 1).setCanTake(p -&gt; false)),\n                    new FluidSlot().bind(fluidTank, 0)\n            ).layout(l -&gt; l.gapAll(2).flexDirection(YogaFlexDirection.ROW)),\n            // bind value to the components\n            new UIElement().addChildren(\n                    new Switch().bind(DataBindingBuilder.bool(() -&gt; bool, value -&gt; bool = value).build()),\n                    new TextField().bind(DataBindingBuilder.string(() -&gt; string, value -&gt; string = value).build()),\n                    new Scroller.Horizontal().bind(DataBindingBuilder.floatVal(() -&gt; number, value -&gt; number = value).build()),\n                    // read-only (s-&gt;c), always get data from the server and display on the client\n                    new Label().bind(DataBindingBuilder.componentS2C(() -&gt; Component.literal(\"s-&gt;c only: \")\n                            .append(Component.literal(String.valueOf(bool)).withStyle(ChatFormatting.AQUA)).append(\" \")\n                            .append(Component.literal(string).withStyle(ChatFormatting.RED)).append(\" \")\n                            .append(Component.literal(\"%.2f\".formatted(number)).withStyle(ChatFormatting.YELLOW)))\n                            .build())\n            ).layout(l -&gt; l.gapAll(2)),\n            // trigger ui events on the server side\n            new Button().addServerEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n                if (fluidTank.getFluid().getFluid() == Fluids.WATER) {\n                    fluidTank.setFluid(new FluidStack(Fluids.LAVA, 1000));\n                } else {\n                    fluidTank.setFluid(new FluidStack(Fluids.WATER, 1000));\n                }\n            }),\n            // you could also use button.setOnServerClick(e -&gt; { ... })\n            new InventorySlots()\n    );\n    root.addClass(\"panel_bg\");\n\n    // pass the player to the Modular UI\n    return ModularUI.of(UI.of(root, StylesheetManager.INSTANCE.getStylesheetSafe(StylesheetManager.MODERN)), player);\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/getting_start/#ending","title":"Ending","text":"<p>This is far from over. Why not give the powerful UI editor a try?</p>"},{"location":"zh/ldlib2/ui/kjs_support/","title":"KubeJS Integration","text":""},{"location":"zh/ldlib2/ui/kjs_support/#kubejs-integration","title":"KubeJS Integration","text":""},{"location":"zh/ldlib2/ui/xei_support/","title":"XEI Integration","text":""},{"location":"zh/ldlib2/ui/xei_support/#xei-integration","title":"XEI Integration","text":""},{"location":"zh/ldlib2/ui/xml/","title":"UI Xml","text":""},{"location":"zh/ldlib2/ui/xml/#ui-xml","title":"UI Xml","text":"<p> Since 2.1.6 </p> <p>LDLib2 allows you to define UIs using XML, including both styles and the component tree. This provides a workflow similar to HTML (H5) UI development, making UI structure clear and declarative.</p> <p>A minimal UI XML template looks like this:</p> <pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" ?&gt;\n&lt;ldlib2-ui xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n           xsi:noNamespaceSchemaLocation=\"https://raw.githubusercontent.com/Low-Drag-MC/LDLib2/refs/heads/1.21/ldlib2-ui.xsd\"&gt;\n    &lt;stylesheet location=\"ldlib2:lss/mc.lss\"/&gt;\n    &lt;style&gt;\n        .half-button {\n            width: 50%\n        }\n    &lt;/style&gt;\n    &lt;root class=\"panel_bg\" style=\"width: 150; height: 300\"&gt;\n        &lt;button text=\"click me!\"/&gt;\n        &lt;button class=\"half-button\" text=\"half\"/&gt;\n    &lt;/root&gt;\n&lt;/ldlib2-ui&gt;\n</code></pre> <p>The attribute <code>xsi:noNamespaceSchemaLocation</code> points to the XSD schema provided by LDLib2. When editing the XML in VS Code, IntelliJ IDEA, or other IDEs, the schema enables:</p> <ul> <li>Syntax highlighting</li> <li>Validation and error checking</li> <li>Auto-completion and suggestions</li> </ul>"},{"location":"zh/ldlib2/ui/xml/#load-ui-xml-and-setup","title":"Load UI Xml and setup","text":"<p>You can load and use a UI XML file in the following way:</p> JavaKubeJS <pre><code>var xml = XmlUtils.loadXml(ResourceLocation.parse(\"ldlib2:tuto.xml\"));\nif (xml != null) {\n    var ui = UI.of(xml);\n\n    // find elemetns and do data bindings or logic setup here\n    var buttons = ui.select(\".button_container &gt; button\").toList(); // by selector\n    var container = ui.selectRegex(\"container\").findFirst().orElseThrow(); // by id regex\n}\n</code></pre> <pre><code>let xml = XmlUtils.loadXml(ResourceLocation.parse(\"ldlib2:tuto.xml\"));\nif (xml != null) {\n    let ui = UI.of(xml);\n\n    // find elemetns and do data bindings or logic setup here\n    let buttons = ui.select(\".button_container &gt; button\").toList(); // by selector\n    let container = ui.selectRegex(\"container\").findFirst().orElseThrow(); // by id regex\n}\n</code></pre> <p>Info</p> <p><code>XmlUtils</code>also provides other ways to load XML documents, such as from strings or input streams. Choose the method that best fits your use case.</p>"},{"location":"zh/ldlib2/ui/xml/#xml-syntax-overview","title":"XML Syntax Overview","text":"<p>LDLib2 UI XML uses a declarative syntax to describe both the UI structure and its styles, similar to HTML + CSS.</p> <p>At the top level, the <code>&lt;ldlib2-ui&gt;</code> root defines a complete UI document. Inside it, you can describe styles, external stylesheets, and the component tree.</p>"},{"location":"zh/ldlib2/ui/xml/#stylesheet","title":"Stylesheet","text":"<p>Note</p> <p>Read LSS page before reading this chapter.</p> <p>You can reference external LSS files using the <code>&lt;stylesheet&gt;</code> tag:</p> <pre><code>&lt;stylesheet location=\"ldlib2:lss/mc.lss\"/&gt;\n</code></pre> <p>This allows you to reuse shared styles or let resource packs override UI appearance globally.</p>"},{"location":"zh/ldlib2/ui/xml/#embedded-styles","title":"Embedded Styles","text":"<p>Inline styles can be defined inside a <code>&lt;style&gt;</code> block using LSS (LDLib Style Sheet) syntax:</p> <pre><code>&lt;style&gt;\n    label:host {\n        vertical-align: center;\n        horizontal-align: center;\n    }\n    .flex-1 {\n        flex: 1;\n    }\n    .bg {\n        background: sprite(ldlib2:textures/gui/icon.png)\n    }\n&lt;/style&gt;\n</code></pre>"},{"location":"zh/ldlib2/ui/xml/#inline-style-attribute","title":"Inline Style Attribute","text":"<p>For quick adjustments, styles can also be set directly on elements:</p> <pre><code>&lt;button style=\"height: 30; align-items: center;\"/&gt;\n</code></pre> <p>Inline styles have higher priority than stylesheet rules.</p>"},{"location":"zh/ldlib2/ui/xml/#component-tree","title":"Component Tree","text":"<p>The UI layout is described as a tree of elements under <code>&lt;root&gt;</code>. Each XML node maps to a UI component, and nesting defines parent\u2013child relationships.</p> <p>Attributes are used to configure component properties, while child nodes define structure.</p> <p>In short:</p> <ul> <li><code>&lt;stylesheet&gt;</code> \u2192 load external styles</li> <li><code>&lt;style&gt;</code> \u2192 define embedded styles</li> <li><code>style</code> attribute \u2192 inline styles</li> <li>XML hierarchy \u2192 UI component tree</li> </ul> <p>This makes UI definitions clear, readable, and easy to maintain.</p>"},{"location":"zh/ldlib2/ui/components/element/","title":"UIElement","text":""},{"location":"zh/ldlib2/ui/components/element/#uielement","title":"UIElement","text":"<p> Since 2.1.0 </p> <p><code>UIElement</code> \u662f LDLib2 \u4e2d\u6700\u57fa\u7840\u4e14\u6700\u5e38\u7528\u7684 UI \u7ec4\u4ef6\u3002 \u6240\u6709 UI \u7ec4\u4ef6\u90fd\u7ee7\u627f\u81ea\u5b83\u3002</p> <p>\u4ece\u6982\u5ff5\u4e0a\u8bb2\uff0c\u5b83\u7c7b\u4f3c\u4e8e HTML \u4e2d\u7684 <code>&lt;div/&gt;</code> \u5143\u7d20\uff1a\u4e00\u4e2a\u901a\u7528\u7684\u5bb9\u5668\uff0c\u53ef\u4ee5\u8fdb\u884c\u6837\u5f0f\u5316\u3001\u5e03\u5c40\uff0c\u5e76\u901a\u8fc7\u884c\u4e3a\u8fdb\u884c\u6269\u5c55\u3002</p> <p>\u56e0\u6b64\uff0c\u672c\u9875\u4ecb\u7ecd\u7684\u6240\u6709\u5185\u5bb9\u540c\u6837\u9002\u7528\u4e8e LDLib2 \u4e2d\u7684\u6240\u6709\u5176\u4ed6 UI \u7ec4\u4ef6\u2014\u2014\u6240\u4ee5\u8bf7\u52a1\u5fc5\u4ed4\u7ec6\u9605\u8bfb\u3002</p>"},{"location":"zh/ldlib2/ui/components/element/#_1","title":"\u7528\u6cd5","text":"JavaKubeJS <pre><code>var element = new UIElement();\nelement.style(style -&gt; style.background(MCSprites.RECT));\nelement.layout(layout -&gt; layout.width(40).height(40));\nelement.setFocusable(true)\nelement.addEventListener(UIEvents.MOUSE_DOWN, e -&gt; e.currentElement.focus());\nroot.addChild(element);\n</code></pre> <pre><code>let element = new UIElement();\nelement.style(style =&gt; style.background(MCSprites.RECT));\nelement.layout(layout =&gt; layout.width(40).height(40));\nelement.setFocusable(true)\nelement.addEventListener(UIEvents.MOUSE_DOWN, e =&gt; e.currentElement.focus());\nroot.addChild(element);\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#xml","title":"Xml","text":"<pre><code>&lt;element id=\"my_id\" class=\"class1 class2\" focusable=\"false\" visible=\"true\" active=\"true\" style=\"background: #fff; width: 50\"&gt;\n    &lt;!-- \u5728\u6b64\u6dfb\u52a0\u5b50\u5143\u7d20 --&gt;\n    &lt;button text=\"click me!\"/&gt;\n    &lt;inventory-slots/&gt;\n&lt;/element&gt;\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#_2","title":"\u6837\u5f0f","text":"<p>\u5e03\u5c40</p> <p>\u5e03\u5c40\u5c5e\u6027\u5b9e\u9645\u4e0a\u4e5f\u662f\u6837\u5f0f\u3002</p> <p>UIElement \u7684\u6837\u5f0f\uff08\u5305\u62ec\u5e03\u5c40\uff09\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8bbf\u95ee\uff1a</p> JavaKubeJS <pre><code>element.style(style -&gt; style.background(...));\nelement.layout(layout -&gt; layout.width(...));\nelement.getStyle().background(...);\nelement.getLayout().width(...);\n</code></pre> <pre><code>element.style(style =&gt; style.background(...));\nelement.layout(layout =&gt; layout.width(...));\nelement.getStyle().background(...);\nelement.getLayout().width(...);\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#_3","title":"\u5e03\u5c40\u5c5e\u6027","text":"<p>\u4f7f\u7528\u524d\u6700\u597d\u5148\u9605\u8bfb \u5e03\u5c40\u3002</p>"},{"location":"zh/ldlib2/ui/components/element/#display","title":"<p>display</p>","text":"<p>\u63a7\u5236\u5143\u7d20\u662f\u5426\u53c2\u4e0e\u5e03\u5c40\u3002<code>FLEX</code> \u542f\u7528\u6b63\u5e38\u5e03\u5c40\uff0c<code>NONE</code> \u5c06\u5143\u7d20\u4ece\u5e03\u5c40\u8ba1\u7b97\u4e2d\u79fb\u9664\u3002<code>CONTENTS</code> \u4e0d\u5f71\u54cd\u5e03\u5c40\u4f46\u4f1a\u6e32\u67d3\u5176\u5b50\u5143\u7d20\u3002</p> JavaLSS <pre><code>layout.display(YogaDisplay.FLEX);\nelement.setDisplay(false); // \u7b49\u540c\u4e8e layout.display(YogaDisplay.NONE);\n</code></pre> <pre><code>element {\n    display: flex;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#layout-direction","title":"<p>layout-direction</p>","text":"<p>\u8bbe\u7f6e\u5e03\u5c40\u65b9\u5411\u3002\u901a\u5e38\u4ece\u7236\u5143\u7d20\u7ee7\u627f\u3002</p> JavaLSS <pre><code>layout.layoutDirection(YogaDirection.LTR);\n</code></pre> <pre><code>element {\n    layout-direction: ltr;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#flex-basis","title":"<p>flex-basis</p>","text":"<p>\u8bbe\u7f6e\u5728 flex \u589e\u957f/\u6536\u7f29\u4e4b\u524d\u7684\u4e3b\u8f74\u521d\u59cb\u5927\u5c0f\u3002\u652f\u6301 \u70b9\u3001\u767e\u5206\u6bd4 \u548c \u81ea\u52a8 \u6a21\u5f0f\u3002</p> JavaLSS <pre><code>layout.flexBasis(1);\n</code></pre> <pre><code>element {\n    flex-basis: 1;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#flex","title":"<p>flex</p>","text":"<p>\u4f7f\u5143\u7d20\u6cbf\u4e3b\u8f74\u7075\u6d3b\u4f38\u7f29\u3002</p> JavaLSS <pre><code>layout.flex(1);\n</code></pre> <pre><code>element {\n    flex: 1;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#flex-grow","title":"<p>flex-grow</p>","text":"<p>\u63a7\u5236\u5f53\u6709\u989d\u5916\u7a7a\u95f4\u65f6\uff0c\u5143\u7d20\u7684\u589e\u957f\u7a0b\u5ea6\u3002</p> JavaLSS <pre><code>layout.flexGrow(1);\n</code></pre> <pre><code>element {\n    flex-grow: 1;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#flex-shrink","title":"<p>flex-shrink</p>","text":"<p>\u63a7\u5236\u5f53\u7a7a\u95f4\u4e0d\u8db3\u65f6\uff0c\u5143\u7d20\u7684\u6536\u7f29\u7a0b\u5ea6\u3002</p> JavaLSS <pre><code>layout.flexShrink(1);\n</code></pre> <pre><code>element {\n    flex-shrink: 1;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#flex-direction","title":"<p>flex-direction</p>","text":"<p>\u5b9a\u4e49\u4e3b\u8f74\u65b9\u5411\uff0c\u4f8b\u5982 <code>ROW</code> \u6216 <code>COLUMN</code>\u3002</p> JavaLSS <pre><code>layout.flexDirection(YogaFlexDirection.ROW);\n</code></pre> <pre><code>element {\n    flex-direction: row;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#flex-wrap","title":"<p>flex-wrap</p>","text":"<p>\u63a7\u5236\u5b50\u5143\u7d20\u662f\u5426\u6362\u884c\u3002</p> JavaLSS <pre><code>layout.flexWrap(YogaWrap.WRAP);\n</code></pre> <pre><code>element {\n    flex-wrap: wrap;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#position","title":"<p>position</p>","text":"<p>\u8bbe\u7f6e\u5b9a\u4f4d\u6a21\u5f0f\u3002<code>RELATIVE</code> \u53c2\u4e0e\u5e03\u5c40\uff0c<code>ABSOLUTE</code> \u4e0d\u5f71\u54cd\u5144\u5f1f\u5143\u7d20\u3002</p> JavaLSS <pre><code>layout.position(YogaPositionType.ABSOLUTE);\n</code></pre> <pre><code>element {\n    position: absolute;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#top-right-bottom-left-start-end-horizontal-vertical-all","title":"<p>top / right / bottom / left / start / end / horizontal / vertical / all</p>","text":"<p>\u5f53 <code>position</code> \u4e3a <code>RELATIVE</code> \u6216 <code>ABSOLUTE</code> \u65f6\u4f7f\u7528\u7684\u504f\u79fb\u91cf\u3002</p> JavaLSS <pre><code>layout.top(10);\nlayout.leftPercent(30); // 30%\nlayout.allAuto()\n</code></pre> <pre><code>element {\n    top: 10;\n    left: 30%;\n    all: auto;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#margin-","title":"<p>margin-*</p>","text":"<p><code>*</code>: top / right / bottom / left / start / end / horizontal / vertical / all</p> <p>\u8bbe\u7f6e\u5143\u7d20\u5468\u56f4\u7684\u5916\u8fb9\u8ddd\u3002</p> JavaLSS <pre><code>layout.marginTop(5);\nlayout.marginAll(3);\n</code></pre> <pre><code>element {\n    margin-top: 5;\n    margin-all: 3;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#padding-","title":"<p>padding-*</p>","text":"<p><code>*</code>: top / right / bottom / left / start / end / horizontal / vertical / all</p> <p>\u8bbe\u7f6e\u8fb9\u6846\u4e0e\u5185\u5bb9\u4e4b\u95f4\u7684\u5185\u8fb9\u8ddd\u3002</p> JavaLSS <pre><code>layout.paddingLeft(8);\n</code></pre> <pre><code>element {\n    padding-left: 8;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#gap-","title":"<p>gap-*</p>","text":"<p><code>*</code>: top / right / bottom / left / start / end / horizontal / vertical / all</p> <p>\u8bbe\u7f6e\u5f39\u6027\u5e03\u5c40\u4e2d\u5b50\u5143\u7d20\u4e4b\u95f4\u7684\u95f4\u8ddd\u3002</p> JavaLSS <pre><code>layout.rowGap(6);\n</code></pre> <pre><code>element {\n    row-gap: 6;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#width","title":"<p>width</p>","text":"<p>\u8bbe\u7f6e\u5143\u7d20\u5bbd\u5ea6\u3002\u652f\u6301 \u70b9\u3001\u767e\u5206\u6bd4 \u548c \u81ea\u52a8 \u6a21\u5f0f\u3002</p> JavaLSS <pre><code>layout.width(100);\nlayout.widthPercent(20); // 20%\n</code></pre> <pre><code>element {\n    width: 100;\n    width: 20%;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#height","title":"<p>height</p>","text":"<p>\u8bbe\u7f6e\u5143\u7d20\u9ad8\u5ea6\u3002\u652f\u6301 \u70b9\u3001\u767e\u5206\u6bd4 \u548c \u81ea\u52a8 \u6a21\u5f0f\u3002</p> JavaLSS <pre><code>layout.height(50);\n</code></pre> <pre><code>element {\n    height: 50;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#min-width-min-height","title":"<p>min-width / min-height</p>","text":"<p>\u8bbe\u7f6e\u6700\u5c0f\u5c3a\u5bf8\u7ea6\u675f\u3002</p> JavaLSS <pre><code>layout.minWidth(20);\n</code></pre> <pre><code>element {\n    min-width: 20;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#max-width-max-height","title":"<p>max-width / max-height</p>","text":"<p>\u8bbe\u7f6e\u6700\u5927\u5c3a\u5bf8\u7ea6\u675f\u3002</p> JavaLSS <pre><code>layout.maxHeight(200);\n</code></pre> <pre><code>element {\n    max-height: 200;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#aspect-rate","title":"<p>aspect-rate</p>","text":"<p>\u9501\u5b9a\u5bbd\u9ad8\u6bd4\u3002\u5bf9\u4e8e\u65b9\u5f62\u6216\u56fe\u6807\u5143\u7d20\u5f88\u6709\u7528\u3002</p> JavaLSS <pre><code>layout.aspectRate(1);\n</code></pre> <pre><code>element {\n    aspect-rate: 1;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#overflow","title":"<p>overflow</p>","text":"<p>\u63a7\u5236\u5982\u4f55\u5904\u7406\u6ea2\u51fa\u5185\u5bb9\u3002\u5982\u679c\u8bbe\u4e3a 'hidden'\uff0c\u8fb9\u754c\u4e4b\u5916\u7684\u5185\u5bb9\u5c06\u88ab\u9690\u85cf\u3002</p> JavaLSS <pre><code>layout.overflow(YogaOverflow.HIDDEN);\nelement.setOverflowVisible(false); // \u7b49\u540c\u4e8e layout.overflow(YogaOverflow.HIDDEN);\n</code></pre> <pre><code>element {\n    overflow: hidden;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#align-items","title":"<p>align-items</p>","text":"<p>\u6cbf\u4ea4\u53c9\u8f74\u5bf9\u9f50\u5b50\u5143\u7d20\uff08\u5bb9\u5668\u5c5e\u6027\uff09\u3002</p> JavaLSS <pre><code>layout.alignItems(YogaAlign.CENTER);\n</code></pre> <pre><code>element {\n    align-items: center;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#justify-content","title":"<p>justify-content</p>","text":"<p>\u6cbf\u4e3b\u8f74\u5bf9\u9f50\u5b50\u5143\u7d20\uff08\u5bb9\u5668\u5c5e\u6027\uff09\u3002</p> JavaLSS <pre><code>layout.justifyContent(YogaJustify.CENTER);\n</code></pre> <pre><code>element {\n    justify-content: center;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#align-self","title":"<p>align-self</p>","text":"<p>\u8986\u76d6\u5355\u4e2a\u5143\u7d20\u7684\u4ea4\u53c9\u8f74\u5bf9\u9f50\u65b9\u5f0f\u3002</p> JavaLSS <pre><code>layout.alignSelf(YogaAlign.CENTER);\n</code></pre> <pre><code>element {\n    align-self: center;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#align-content","title":"<p>align-content</p>","text":"<p>\u5f53\u542f\u7528 <code>flex-wrap</code> \u65f6\uff0c\u5bf9\u9f50\u6362\u884c\u540e\u7684\u884c\u3002</p> JavaLSS <pre><code>layout.alignContent(YogaAlign.CENTER);\n</code></pre> <pre><code>element {\n    align-content: center;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#_4","title":"\u57fa\u7840\u5c5e\u6027","text":""},{"location":"zh/ldlib2/ui/components/element/#background","title":"<p>background</p>","text":"<p>\u8bbe\u7f6e\u5728\u5143\u7d20\u5185\u5bb9\u4e0b\u65b9\u7684\u80cc\u666f\u6e32\u67d3\uff0c\u4f8b\u5982\u989c\u8272\u3001\u77e9\u5f62\u3001\u56fe\u50cf\u3002</p> JavaLSS <pre><code>layout.background(MCSprites.BORDER);\n</code></pre> <p>\u5173\u4e8e lss \u652f\u6301\uff0c\u8bf7\u67e5\u770b LSS \u4e2d\u7684\u7eb9\u7406\u3002</p> <pre><code>element {\n    background: #FFF;\n    background: rect(#2ff, 3);\n    background: sprite(ldlib2:textures/gui/icon.png);\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#overlay","title":"<p>overlay</p>","text":"<p>\u63a7\u5236\u5728\u5143\u7d20\u5185\u5bb9\u4e0a\u65b9\u7ed8\u5236\u7684\u8986\u76d6\u5c42\u6e32\u67d3\u3002</p> JavaLSS <pre><code>layout.overlay(...);\n</code></pre> <p>\u5173\u4e8e lss \u652f\u6301\uff0c\u8bf7\u67e5\u770b LSS \u4e2d\u7684\u7eb9\u7406\u3002</p> <pre><code>element {\n    overlay: #FFF;\n    overlay: rect(#2ff, 3);\n    overlay: sprite(ldlib2:textures/gui/icon.png);\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#tooltips","title":"<p>tooltips</p>","text":"<p>\u5b9a\u4e49\u5f53\u9f20\u6807\u60ac\u505c\u5728\u5143\u7d20\u4e0a\u65f6\u663e\u793a\u7684\u5de5\u5177\u63d0\u793a\u5185\u5bb9\u3002</p> JavaLSS <pre><code>layout.tooltips(\"tips.0\"\uff0c \"tips.1\");\nlayout.appendTooltips(\"tips.2\");\n</code></pre> <pre><code>element {\n    tooltips: \u8fd9\u662f\u6211\u7684\u5de5\u5177\u63d0\u793a;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#z-index","title":"<p>z-index</p>","text":"<p>\u63a7\u5236\u5143\u7d20\u7684\u5806\u53e0\u987a\u5e8f\u3002\u6570\u503c\u8f83\u5927\u7684\u5143\u7d20\u663e\u793a\u5728\u6570\u503c\u8f83\u5c0f\u7684\u5143\u7d20\u4e4b\u4e0a\u3002</p> JavaLSS <pre><code>layout.zIndex(1);\n</code></pre> <pre><code>element {\n    z-index: 1;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#opacity","title":"<p>opacity</p>","text":"<p>\u8bbe\u7f6e\u5143\u7d20\u7684\u900f\u660e\u5ea6\u7b49\u7ea7\u3002<code>0</code> \u4e3a\u5b8c\u5168\u900f\u660e\uff0c<code>1</code> \u4e3a\u5b8c\u5168\u4e0d\u900f\u660e\u3002</p> JavaLSS <pre><code>layout.opacity(0.8f);\n</code></pre> <pre><code>element {\n    opacity: 0.8;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#overflow-clip","title":"<p>overflow-clip</p>","text":"<p>\u5982\u679c\u5143\u7d20\u7684 overflow \u8bbe\u4e3a <code>hidden</code>\uff0c\u5219\u6839\u636e\u7ed9\u5b9a\u7eb9\u7406\u7684\u7ea2\u8272\u901a\u9053\u88c1\u526a\u5143\u7d20\u6e32\u67d3\u3002</p> <p></p>      \u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u89c6\u9891\u3002      <p></p> JavaLSS <pre><code>layout.overflowClip(true);\n</code></pre> <p>\u5173\u4e8e lss \u652f\u6301\uff0c\u8bf7\u67e5\u770b LSS \u4e2d\u7684\u7eb9\u7406\u3002</p> <pre><code>element {\n    overflow-clip: sprite(ldlib2:textures/gui/icon.png);\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#transform-2d","title":"<p>transform-2d</p>","text":"<p>\u5e94\u7528 2D \u53d8\u6362\uff0c\u4f8b\u5982\u5e73\u79fb\u3001\u7f29\u653e\u6216\u65cb\u8f6c\u3002</p> JavaLSS <pre><code>layout.transform2D(Transform2D.identity().scale(0.5f));\nelement.transform(transform -&gt; transform.translate(10, 0))\n</code></pre> <pre><code>element {\n    transform: translate(10, 20) rotate(45) scale(2\uff0c 2) pivot(0.5, 0.5);\n    transform: translateX(10) scale(0.5);\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#transition","title":"<p>transition</p>","text":"<p>\u5b9a\u4e49\u5c5e\u6027\u53d8\u5316\u4e4b\u95f4\u7684\u52a8\u753b\u8fc7\u6e21\u6548\u679c\u3002</p> <p></p>      \u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u89c6\u9891\u3002      <p></p> JavaLSS <pre><code>layout.transition(new Transition(Map.of(YogaProperties.HEIGHT, new Animation(1, 0, Eases.LINEAR))));\n</code></pre> <pre><code>element {\n    transition: width 1;\n    transition: background 0.8 quad_in_out,\n                transform 0.3;\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#_5","title":"\u72b6\u6001","text":""},{"location":"zh/ldlib2/ui/components/element/#isvisible","title":"<code>isVisible</code>","text":"<p>\u5f53 <code>isVisible</code> \u8bbe\u7f6e\u4e3a <code>false</code> \u65f6\uff0c\u8be5\u5143\u7d20\u53ca\u5176\u6240\u6709\u5b50\u5143\u7d20\u5c06\u4e0d\u518d\u88ab\u6e32\u67d3\u3002 \u4e0e <code>display: NONE</code> \u4e0d\u540c\uff0c\u8fd9\u4e0d\u4f1a\u5f71\u54cd\u5e03\u5c40\u8ba1\u7b97\u3002 <code>isVisible = false</code> \u7684\u5143\u7d20\u4e5f\u4f1a\u88ab\u6392\u9664\u5728\u547d\u4e2d\u6d4b\u8bd5\u4e4b\u5916\uff0c\u56e0\u6b64\u8bb8\u591a UI \u4e8b\u4ef6\uff08\u5982\u70b9\u51fb\uff09\u5c06\u4e0d\u4f1a\u88ab\u89e6\u53d1\u3002</p>"},{"location":"zh/ldlib2/ui/components/element/#isactive","title":"<code>isActive</code>","text":"<p>\u5f53 <code>isActive</code> \u8bbe\u7f6e\u4e3a <code>false</code> \u65f6\uff0c\u5143\u7d20\u53ef\u80fd\u4f1a\u5931\u53bb\u5176\u4ea4\u4e92\u884c\u4e3a\u2014\u2014\u4f8b\u5982\uff0c\u6309\u94ae\u65e0\u6cd5\u518d\u88ab\u70b9\u51fb\u2014\u2014\u5e76\u4e14\u5143\u7d20\u5c06\u4e0d\u518d\u63a5\u6536 <code>tick</code> \u4e8b\u4ef6\u3002</p> <p>Note</p> <p>\u5f53 <code>isActive</code> \u8bbe\u7f6e\u4e3a <code>false</code> \u65f6\uff0c\u4f1a\u81ea\u52a8\u5411\u5143\u7d20\u6dfb\u52a0\u4e00\u4e2a <code>__disabled__</code> \u7c7b\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b LSS \u9009\u62e9\u5668\u6765\u8bbe\u7f6e\u6d3b\u52a8\u548c\u975e\u6d3b\u52a8\u72b6\u6001\u7684\u6837\u5f0f\uff1a</p> <pre><code>selector.__disabled__ {\n}\n\nselector:not(.__disabled__) {\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#focusable","title":"<code>focusable</code>","text":"<p>\u5143\u7d20\u9ed8\u8ba4\u662f <code>focusable: false</code>\u3002\u6709\u4e9b\u7ec4\u4ef6\uff08\u5982 <code>TextField</code>\uff09\u5728\u8bbe\u8ba1\u4e0a\u662f\u53ef\u805a\u7126\u7684\uff0c\u4f46\u4f60\u4ecd\u7136\u53ef\u4ee5\u624b\u52a8\u66f4\u6539\u5143\u7d20\u7684\u53ef\u805a\u7126\u72b6\u6001\u3002 \u53ea\u6709\u5f53 <code>focusable</code> \u8bbe\u7f6e\u4e3a <code>true</code> \u65f6\uff0c\u5143\u7d20\u624d\u80fd\u901a\u8fc7 <code>focus()</code> \u6216\u9f20\u6807\u4ea4\u4e92\u83b7\u5f97\u7126\u70b9\u3002</p> <p>Note</p> <p>\u5f53\u5143\u7d20\u5904\u4e8e <code>focused</code>\uff08\u5df2\u805a\u7126\uff09\u72b6\u6001\u65f6\uff0c\u4f1a\u81ea\u52a8\u6dfb\u52a0\u4e00\u4e2a <code>__focused__</code> \u7c7b\u3002 \u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b LSS \u9009\u62e9\u5668\u6765\u8bbe\u7f6e\u5df2\u805a\u7126\u548c\u672a\u805a\u7126\u72b6\u6001\u7684\u6837\u5f0f\uff1a</p> <pre><code>selector.__focused__ {\n}\n\nselector:not(.__focused__) {\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/components/element/#isinternalui","title":"<code>isInternalUI</code>","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u7279\u6b8a\u72b6\u6001\uff0c\u8868\u793a\u4e00\u4e2a\u5143\u7d20\u662f\u5426\u662f\u7ec4\u4ef6\u7684\u5185\u90e8\u90e8\u5206\u3002 \u4f8b\u5982\uff0c\u4e00\u4e2a <code>button</code> \u5305\u542b\u4e00\u4e2a\u7528\u4e8e\u6e32\u67d3\u5176\u6807\u7b7e\u7684\u5185\u90e8 <code>text</code> \u5143\u7d20\u3002</p> <p>\u4ece\u8bed\u4e49\u4e0a\u8bb2\uff0c\u4e0d\u5141\u8bb8\u76f4\u63a5\u6dfb\u52a0\u3001\u79fb\u9664\u6216\u91cd\u65b0\u6392\u5e8f\u5185\u90e8\u5143\u7d20\u3002 \u4f46\u662f\uff0c\u4f60\u4ecd\u7136\u53ef\u4ee5\u901a\u8fc7\u7f16\u8f91\u5668\u6216 XML \u7f16\u8f91\u5b83\u4eec\u7684\u6837\u5f0f\u5e76\u7ba1\u7406\u5b83\u4eec\u7684\u5b50\u5143\u7d20\u3002 \u5728\u7f16\u8f91\u5668\u4e2d\uff0c\u5185\u90e8\u5143\u7d20\u5728\u5c42\u7ea7\u89c6\u56fe\u4e2d\u663e\u793a\u4e3a\u7070\u8272\u3002</p> <p>\u5728 XML \u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>&lt;internal index=\"...\"/&gt;</code> \u6807\u7b7e\u8bbf\u95ee\u5185\u90e8\u5143\u7d20\uff0c\u5176\u4e2d <code>index</code> \u6307\u5b9a\u8981\u5f15\u7528\u7684\u5185\u90e8\u5143\u7d20\uff1a</p> <pre><code>&lt;button&gt;\n    &lt;!-- \u5728\u8fd9\u91cc\u83b7\u53d6\u5185\u90e8\u6587\u672c\u7ec4\u4ef6 --&gt;\n    &lt;internal index=\"0\"&gt;\n    &lt;/internal&gt;\n&lt;/button&gt;\n</code></pre> <p>\u5728 LSS \u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 :host \u548c :internal \u6765\u660e\u786e\u6307\u5b9a\u5bbf\u4e3b\u5143\u7d20\u6216\u5185\u90e8\u5143\u7d20\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u9009\u62e9\u5668\u4f1a\u5339\u914d\u4e24\u8005\uff0c\u9664\u975e\u52a0\u4ee5\u9650\u5236\u3002 </p><pre><code>button &gt; text {\n}\n\nbutton &gt; text:internal {\n}\n\nbutton &gt; text:host {\n}\n</code></pre><p></p>"},{"location":"zh/ldlib2/ui/components/element/#_6","title":"\u5b57\u6bb5","text":"<p>\u4ec5\u5217\u51fa\u5916\u90e8\u53ef\u89c2\u5bdf\u6216\u53ef\u914d\u7f6e\u7684\u516c\u5171\u6216\u53d7\u4fdd\u62a4\u5b57\u6bb5\u3002</p> \u540d\u79f0 \u7c7b\u578b \u8bbf\u95ee\u6743\u9650 \u63cf\u8ff0 <code>layoutNode</code> <code>YogaNode</code> protected (getter) \u7528\u4e8e\u5e03\u5c40\u8ba1\u7b97\u7684\u57fa\u7840 Yoga \u8282\u70b9\u3002 <code>modularUI</code> <code>ModularUI</code> private (getter) \u6b64\u5143\u7d20\u6240\u5c5e\u7684 <code>ModularUI</code> \u5b9e\u4f8b\u3002 <code>id</code> <code>String</code> private (getter/setter) \u5143\u7d20 ID\uff0c\u7528\u4e8e\u9009\u62e9\u5668\u548c\u67e5\u8be2\u3002 <code>classes</code> <code>Set&lt;String&gt;</code> private (getter) \u5e94\u7528\u4e8e\u6b64\u5143\u7d20\u7684\u7c7b\u4f3c CSS \u7684\u7c7b\u5217\u8868\u3002 <code>styleBag</code> <code>StyleBag</code> private (getter) \u5b58\u50a8\u5df2\u89e3\u6790\u7684\u6837\u5f0f\u5019\u9009\u503c\u548c\u8ba1\u7b97\u540e\u7684\u6837\u5f0f\u3002 <code>styles</code> <code>List&lt;Style&gt;</code> private (getter) \u9644\u52a0\u5230\u6b64\u5143\u7d20\u7684\u5185\u8054\u6837\u5f0f\u3002 <code>layoutStyle</code> <code>LayoutStyle</code> private (getter) \u5e03\u5c40\u76f8\u5173\u6837\u5f0f\u7684\u5305\u88c5\u5668\uff08\u57fa\u4e8e Yoga\uff09\u3002 <code>style</code> <code>BasicStyle</code> private (getter) \u57fa\u7840\u89c6\u89c9\u6837\u5f0f\uff08\u80cc\u666f\u3001\u4e0d\u900f\u660e\u5ea6\u3001zIndex \u7b49\uff09\u3002 <code>isVisible</code> <code>boolean</code> private (getter/setter) \u5143\u7d20\u662f\u5426\u53ef\u89c1\u3002 <code>isActive</code> <code>boolean</code> private (getter/setter) \u5143\u7d20\u662f\u5426\u53c2\u4e0e\u903b\u8f91\u548c\u4e8b\u4ef6\u3002 <code>focusable</code> <code>boolean</code> private (getter/setter) \u5143\u7d20\u662f\u5426\u53ef\u4ee5\u83b7\u5f97\u7126\u70b9\u3002 <code>isInternalUI</code> <code>boolean</code> private (getter) \u6807\u8bb0\u5185\u90e8\uff08\u7ec4\u4ef6\u62e5\u6709\u7684\uff09\u5143\u7d20\u3002"},{"location":"zh/ldlib2/ui/components/element/#_7","title":"\u65b9\u6cd5","text":""},{"location":"zh/ldlib2/ui/components/element/#_8","title":"\u5e03\u5c40\u4e0e\u51e0\u4f55","text":"\u65b9\u6cd5 \u7b7e\u540d \u63cf\u8ff0 <code>getLayout()</code> <code>LayoutStyle</code> \u8fd4\u56de\u5e03\u5c40\u6837\u5f0f\u63a7\u5236\u5668\u3002 <code>layout(...)</code> <code>UIElement layout(Consumer&lt;LayoutStyle&gt;)</code> \u4ee5\u6d41\u5f0f\u65b9\u5f0f\u4fee\u6539\u5e03\u5c40\u5c5e\u6027\u3002 <code>node(...)</code> <code>UIElement node(Consumer&lt;YogaNode&gt;)</code> \u76f4\u63a5\u4fee\u6539\u5e95\u5c42\u7684 Yoga \u8282\u70b9\u3002 <code>getPositionX()</code> <code>float</code> \u5c4f\u5e55\u4e0a\u7684\u7edd\u5bf9 X \u5750\u6807\u3002 <code>getPositionY()</code> <code>float</code> \u5c4f\u5e55\u4e0a\u7684\u7edd\u5bf9 Y \u5750\u6807\u3002 <code>getSizeWidth()</code> <code>float</code> \u5143\u7d20\u7684\u8ba1\u7b97\u5bbd\u5ea6\u3002 <code>getSizeHeight()</code> <code>float</code> \u5143\u7d20\u7684\u8ba1\u7b97\u9ad8\u5ea6\u3002 <code>getContentX()</code> <code>float</code> \u5185\u5bb9\u533a\u57df\u7684 X \u5750\u6807\uff08\u4e0d\u5305\u62ec\u8fb9\u6846\u548c\u5185\u8fb9\u8ddd\uff09\u3002 <code>getContentY()</code> <code>float</code> \u5185\u5bb9\u533a\u57df\u7684 Y \u5750\u6807\u3002 <code>getContentWidth()</code> <code>float</code> \u5185\u5bb9\u533a\u57df\u7684\u5bbd\u5ea6\u3002 <code>getContentHeight()</code> <code>float</code> \u5185\u5bb9\u533a\u57df\u7684\u9ad8\u5ea6\u3002 <code>adaptPositionToScreen()</code> <code>void</code> \u8c03\u6574\u4f4d\u7f6e\u4ee5\u4fdd\u6301\u5728\u5c4f\u5e55\u8fb9\u754c\u5185\u3002 <code>adaptPositionToElement(...)</code> <code>void</code> \u8c03\u6574\u4f4d\u7f6e\u4ee5\u4fdd\u6301\u5728\u53e6\u4e00\u4e2a\u5143\u7d20\u5185\u90e8\u3002"},{"location":"zh/ldlib2/ui/components/element/#_9","title":"\u6811\u7ed3\u6784","text":"\u65b9\u6cd5 \u7b7e\u540d \u63cf\u8ff0 <code>getParent()</code> <code>UIElement</code> \u8fd4\u56de\u7236\u5143\u7d20\uff0c\u6216 <code>null</code>\u3002 <code>getChildren()</code> <code>List&lt;UIElement&gt;</code> \u8fd4\u56de\u4e00\u4e2a\u4e0d\u53ef\u4fee\u6539\u7684\u5b50\u5143\u7d20\u5217\u8868\u3002 <code>addChild(...)</code> <code>UIElement addChild(UIElement)</code> \u6dfb\u52a0\u4e00\u4e2a\u5b50\u5143\u7d20\u3002 <code>addChildren(...)</code> <code>UIElement addChildren(UIElement...)</code> \u6dfb\u52a0\u591a\u4e2a\u5b50\u5143\u7d20\u3002 <code>removeChild(...)</code> <code>boolean removeChild(UIElement)</code> \u79fb\u9664\u4e00\u4e2a\u5b50\u5143\u7d20\u3002 <code>removeSelf()</code> <code>boolean</code> \u4ece\u5176\u7236\u5143\u7d20\u4e2d\u79fb\u9664\u6b64\u5143\u7d20\u3002 <code>clearAllChildren()</code> <code>void</code> \u79fb\u9664\u6240\u6709\u5b50\u5143\u7d20\u3002 <code>isAncestorOf(...)</code> <code>boolean</code> \u68c0\u67e5\u6b64\u5143\u7d20\u662f\u5426\u662f\u53e6\u4e00\u4e2a\u5143\u7d20\u7684\u7956\u5148\u3002 <code>getStructurePath()</code> <code>ImmutableList&lt;UIElement&gt;</code> \u4ece\u6839\u5143\u7d20\u5230\u6b64\u5143\u7d20\u7684\u8def\u5f84\u3002"},{"location":"zh/ldlib2/ui/components/element/#_10","title":"\u6837\u5f0f\u4e0e\u7c7b","text":"\u65b9\u6cd5 \u7b7e\u540d \u63cf\u8ff0 <code>style(...)</code> <code>UIElement style(Consumer&lt;BasicStyle&gt;)</code> \u4fee\u6539\u5185\u8054\u89c6\u89c9\u6837\u5f0f\u3002 <code>lss(...)</code> <code>UIElement lss(String, Object)</code> \u4ee5\u7f16\u7a0b\u65b9\u5f0f\u5e94\u7528\u6837\u5f0f\u8868\u98ce\u683c\u7684\u5c5e\u6027\u3002 <code>addClass(...)</code> <code>UIElement addClass(String)</code> \u6dfb\u52a0\u4e00\u4e2a\u7c7b\u4f3c CSS \u7684\u7c7b\u3002 <code>removeClass(...)</code> <code>UIElement removeClass(String)</code> \u79fb\u9664\u4e00\u4e2a\u7c7b\u3002 <code>hasClass(...)</code> <code>boolean</code> \u68c0\u67e5\u7c7b\u662f\u5426\u5b58\u5728\u3002 <code>transform(...)</code> <code>UIElement transform(Consumer&lt;Transform2D&gt;)</code> \u5e94\u7528 2D \u53d8\u6362\u3002 <code>animation()</code> <code>StyleAnimation</code> \u5f00\u59cb\u4e00\u4e2a\u4ee5\u6b64\u5143\u7d20\u4e3a\u76ee\u6807\u7684\u6837\u5f0f\u52a8\u753b\u3002 <code>animation(a -&gt; {})</code> <code>StyleAnimation</code> \u5f00\u59cb\u4e00\u4e2a\u4ee5\u6b64\u5143\u7d20\u4e3a\u76ee\u6807\u7684\u6837\u5f0f\u52a8\u753b\u3002\uff08\u5f53 <code>ModularUI</code> \u6709\u6548\u65f6\u603b\u662f\u53ef\u7528\uff09"},{"location":"zh/ldlib2/ui/components/element/#_11","title":"\u7126\u70b9\u4e0e\u4ea4\u4e92","text":"\u65b9\u6cd5 \u7b7e\u540d \u63cf\u8ff0 <code>focus()</code> <code>void</code> \u8bf7\u6c42\u6b64\u5143\u7d20\u83b7\u5f97\u7126\u70b9\u3002 <code>blur()</code> <code>void</code> \u5982\u679c\u6b64\u5143\u7d20\u5df2\u805a\u7126\uff0c\u5219\u6e05\u9664\u5176\u7126\u70b9\u3002 <code>isFocused()</code> <code>boolean</code> \u5982\u679c\u6b64\u5143\u7d20\u5df2\u805a\u7126\uff0c\u5219\u8fd4\u56de true\u3002 <code>isHover()</code> <code>boolean</code> \u5982\u679c\u9f20\u6807\u76f4\u63a5\u60ac\u505c\u5728\u6b64\u5143\u7d20\u4e0a\uff0c\u5219\u8fd4\u56de true\u3002 <code>isSelfOrChildHover()</code> <code>boolean</code> \u5982\u679c\u81ea\u8eab\u6216\u5b50\u5143\u7d20\u88ab\u60ac\u505c\uff0c\u5219\u8fd4\u56de true\u3002 <code>startDrag(...)</code> <code>DragHandler</code> \u5f00\u59cb\u4e00\u4e2a\u62d6\u62fd\u64cd\u4f5c\u3002"},{"location":"zh/ldlib2/ui/components/element/#_12","title":"\u4e8b\u4ef6","text":"\u65b9\u6cd5 \u7b7e\u540d \u63cf\u8ff0 <code>addEventListener(...)</code> <code>UIElement addEventListener(String, UIEventListener)</code> \u6ce8\u518c\u4e00\u4e2a\u5192\u6ce1\u9636\u6bb5\u7684\u4e8b\u4ef6\u76d1\u542c\u5668\u3002 <code>addEventListener(..., true)</code> <code>UIElement addEventListener(String, UIEventListener, boolean)</code> \u6ce8\u518c\u4e00\u4e2a\u6355\u83b7\u9636\u6bb5\u7684\u76d1\u542c\u5668\u3002 <code>removeEventListener(...)</code> <code>void</code> \u79fb\u9664\u4e00\u4e2a\u4e8b\u4ef6\u76d1\u542c\u5668\u3002 <code>stopInteractionEventsPropagation()</code> <code>UIElement</code> \u505c\u6b62\u9f20\u6807\u548c\u62d6\u62fd\u4e8b\u4ef6\u7684\u4f20\u64ad\u3002"},{"location":"zh/ldlib2/ui/components/element/#-rpc","title":"\u5ba2\u6237\u7aef-\u670d\u52a1\u5668\u540c\u6b65\u4e0e RPC","text":"\u65b9\u6cd5 \u7b7e\u540d \u63cf\u8ff0 <code>addSyncValue(...)</code> <code>UIElement</code> \u6ce8\u518c\u4e00\u4e2a\u540c\u6b65\u503c\u3002 <code>removeSyncValue(...)</code> <code>UIElement</code> \u6ce8\u9500\u4e00\u4e2a\u540c\u6b65\u503c\u3002 <code>addRPCEvent(...)</code> <code>UIElement</code> \u6ce8\u518c\u4e00\u4e2a RPC \u4e8b\u4ef6\u3002 <code>sendEvent(...)</code> <code>void</code> \u5411\u670d\u52a1\u5668\u53d1\u9001\u4e00\u4e2a RPC \u4e8b\u4ef6\u3002 <code>sendEvent(..., callback)</code> <code>&lt;T&gt; void</code> \u53d1\u9001\u4e00\u4e2a\u5e26\u6709\u54cd\u5e94\u56de\u8c03\u7684 RPC \u4e8b\u4ef6\u3002"},{"location":"zh/ldlib2/ui/components/element/#_13","title":"\u6e32\u67d3","text":"\u65b9\u6cd5 \u7b7e\u540d \u63cf\u8ff0 <code>isDisplayed()</code> <code>boolean</code> \u5982\u679c display \u4e0d\u662f <code>NONE</code>\uff0c\u5219\u8fd4\u56de true\u3002 <code>isRendered()</code> <code>boolean</code> \u5982\u679c\u5143\u7d20\u5f53\u524d\u88ab\u6e32\u67d3\uff0c\u5219\u8fd4\u56de true\u3002 <code>isDragged()</code> <code>boolean</code> \u5982\u679c\u5143\u7d20\u5f53\u524d\u6b63\u88ab\u62d6\u62fd\uff0c\u5219\u8fd4\u56de true\u3002"},{"location":"zh/ldlib2/ui/preliminary/","title":"\u57fa\u7840","text":""},{"location":"zh/ldlib2/ui/preliminary/#_1","title":"\u57fa\u7840","text":"<p> Since 2.1.0 </p> <p>LDLib2 UI \u9075\u5faa\u7c7b\u4f3c\u4e8e Web UI\u3001UI \u5de5\u5177\u5305 \u548c \u6d41\u5f0f\u98ce\u683c API \u7684\u7406\u5ff5\u3002 \u6240\u6709 UI \u5bf9\u8c61\u90fd\u4ece\u4e00\u4e2a\u540d\u4e3a <code>UIElement</code> \u7684\u57fa\u7840\u7c7b\u578b\u6784\u5efa\u3002 \u901a\u8fc7\u5c06\u5143\u7d20\u4e0e \u5e03\u5c40\u3001\u6837\u5f0f \u548c \u4e8b\u4ef6 \u7ec4\u5408\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4e0d\u540c\u7684\u884c\u4e3a\u548c\u89c6\u89c9\u5916\u89c2\u3002</p> <p>\u5982\u679c\u4f60\u5df2\u9605\u8bfb \u5165\u95e8\u6307\u5357\uff0c \u4f60\u53ef\u80fd\u5df2\u7ecf\u6ce8\u610f\u5230 LDLib2 UI \u5177\u6709\u9ad8\u5ea6\u7684\u7075\u6d3b\u6027\u548c\u6a21\u5757\u5316\u3002</p> <p>\u4e0b\u9762\u662f\u4f60\u63a5\u4e0b\u6765\u53ef\u80fd\u9700\u8981\u63a2\u7d22\u7684\u6838\u5fc3\u9875\u9762\u5217\u8868\u3002 \u6bcf\u4e2a\u9875\u9762\u90fd\u805a\u7126\u4e8e UI \u7cfb\u7edf\u7684\u7279\u5b9a\u65b9\u9762\u3002</p> \u4e3b\u9898 \u63cf\u8ff0 ModularUI \u5b66\u4e60 <code>ModularUI</code> \u5982\u4f55\u5de5\u4f5c\u3002 \u5e03\u5c40 \u5b66\u4e60\u5982\u4f55\u4f7f\u7528\u57fa\u4e8e Yoga \u7684 flexbox \u89c4\u5219\u8fdb\u884c UI \u5e03\u5c40\u3002 \u4e8b\u4ef6 \u7406\u89e3 UI \u4e8b\u4ef6\u7cfb\u7edf\uff0c\u5305\u62ec\u6d3e\u53d1\u548c\u5192\u6ce1\u3002 \u6837\u5f0f\u8868 \u4f7f\u7528 LSS \u4ee5\u58f0\u660e\u65b9\u5f0f\u5b9a\u4e49\u6837\u5f0f\u5e76\u4e00\u81f4\u5730\u5e94\u7528\u4e3b\u9898\u3002 \u6570\u636e\u7ed1\u5b9a \u5c06 UI \u7ec4\u4ef6\u7ed1\u5b9a\u5230\u6570\u636e\u6e90\u5e76\u5b9e\u73b0\u81ea\u52a8\u66f4\u65b0\u3002 \u5c4f\u5e55\u4e0e\u83dc\u5355 \u5c06 ModularUI \u4e0e\u5ba2\u6237\u7aef\u5c4f\u5e55\u548c\u670d\u52a1\u5668\u7aef\u83dc\u5355\u96c6\u6210\u3002"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/","title":"\u6570\u636e\u7ed1\u5b9a\u4e0eRPCEvent","text":""},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#rpcevent","title":"\u6570\u636e\u7ed1\u5b9a\u4e0eRPCEvent","text":"<p> Since 2.1.5 </p> <p>\u5728\u5b66\u4e60\u6570\u636e\u7ed1\u5b9a\u548cRPCEvent\u4e4b\u524d\uff0c\u4e86\u89e3UI\u7ec4\u4ef6\u4e0e\u6570\u636e\u4e4b\u95f4\u7684\u5173\u7cfb\u975e\u5e38\u91cd\u8981\u3002</p>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#_1","title":"\u5ba2\u6237\u7aef\u7684\u6570\u636e\u7ed1\u5b9a","text":"<p>\u5982\u679cUI\u7ec4\u4ef6\u662f\u6570\u636e\u9a71\u52a8\u7684\uff0c\u5b83\u5728\u6570\u636e\u6a21\u578b\u4e2d\u7684\u89d2\u8272\u901a\u5e38\u5c5e\u4e8e\u4ee5\u4e0b\u7c7b\u522b\u4e4b\u4e00\uff1a</p> <ul> <li>\u6570\u636e\u6d88\u8d39\u8005\uff1a\u88ab\u52a8\u63a5\u6536\u6570\u636e\u5e76\u6e32\u67d3\u5b83\u3002</li> <li>\u6570\u636e\u751f\u4ea7\u8005\uff1a\u4ea7\u751f\u53ef\u80fd\u53d8\u5316\u7684\u6570\u636e\uff08\u5b9e\u8df5\u4e2d\u7eaf\u751f\u4ea7\u8005\u5f88\u5c11\u89c1\uff09\u3002</li> <li>\u6570\u636e\u6d88\u8d39\u8005 + \u751f\u4ea7\u8005\uff1a\u65e2\u663e\u793a\u6570\u636e\uff0c\u4e5f\u4fee\u6539\u6570\u636e\u3002</li> </ul>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#idataconsumert","title":"\u6570\u636e\u6d88\u8d39\u8005\u4e0e <code>IDataConsumer&lt;T&gt;</code>","text":"<p>\u88ab\u52a8\u63a5\u6536\u6570\u636e\u7684\u7ec4\u4ef6\u5b9e\u73b0\u4e86 <code>IDataConsumer&lt;T&gt;</code> \u63a5\u53e3\uff0c\u4f8b\u5982 <code>Label</code> \u548c <code>ProgressBar</code>\u3002</p> <p>\u6b64\u63a5\u53e3\u5141\u8bb8\u60a8\u7ed1\u5b9a\u4e00\u4e2a <code>IDataProvider&lt;T&gt;</code>\uff0c\u5b83\u8d1f\u8d23\u63d0\u4f9b\u66f4\u65b0\u540e\u7684\u6570\u636e\u503c\u3002</p> <p>\u5f53\u60a8\u60f3\u8981\u663e\u793a\u52a8\u6001\u6587\u672c\u6216\u53d8\u5316\u7684\u8fdb\u5ea6\u503c\u65f6\uff0c\u8fd9\u5f88\u6709\u7528\u3002</p> JavaKubeJS <pre><code>var valueHolder = new AtomicInteger(0);\n// \u7ed1\u5b9a\u4e00\u4e2a DataSource \u6765\u901a\u77e5\u6807\u7b7e\u548c\u8fdb\u5ea6\u6761\u7684\u503c\u53d8\u5316\nnew Label().bindDataSource(SupplierDataSource.of(() -&gt; \n    Component.literal(\"\u7ed1\u5b9a\u503c: \").append(String.valueOf(valueHolder.get())))),\nnew ProgressBar()\n        .bindDataSource(SupplierDataSource.of(() -&gt; valueHolder.get() / 100f))\n        .label(label -&gt; label.bindDataSource(SupplierDataSource.of(() -&gt; \n            Component.literal(\"\u8fdb\u5ea6: \").append(String.valueOf(valueHolder.get())))))\n</code></pre> <pre><code>let valueHolder = {\n    \"value\": 0\n}\n// \u7ed1\u5b9a\u4e00\u4e2a DataSource \u6765\u901a\u77e5\u6807\u7b7e\u548c\u8fdb\u5ea6\u6761\u7684\u503c\u53d8\u5316\nnew Label().bindDataSource(SupplierDataSource.of(() =&gt; `\u7ed1\u5b9a\u503c: ${valueHolder.value}`)),\nnew ProgressBar()\n    .bindDataSource(SupplierDataSource.of(() =&gt; valueHolder.value / 100))\n    .label(label =&gt; label.bindDataSource(SupplierDataSource.of(() =&gt; `\u8fdb\u5ea6: ${valueHolder.value}`)))\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#iobservablet","title":"\u6570\u636e\u751f\u4ea7\u8005\u4e0e <code>IObservable&lt;T&gt;</code>","text":"<p>\u4ea7\u751f\u53ef\u53d8\u6570\u636e\u7684\u7ec4\u4ef6\u5b9e\u73b0\u4e86 <code>IObservable&lt;T&gt;</code> \u63a5\u53e3\u3002 \u5927\u591a\u6570\u6570\u636e\u9a71\u52a8\u7684\u7ec4\u4ef6\u90fd\u5c5e\u4e8e\u6b64\u7c7b\uff0c\u4f8b\u5982 <code>Toggle</code>\u3001<code>TextField</code>\u3001<code>Selector</code>\u3002</p> <p>\u6b64\u63a5\u53e3\u5141\u8bb8\u60a8\u7ed1\u5b9a\u4e00\u4e2a <code>IObserver&lt;T&gt;</code>\uff0c\u6bcf\u5f53\u7ec4\u4ef6\u7684\u503c\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u5b83\u90fd\u4f1a\u6536\u5230\u901a\u77e5\u3002</p> <p>\u4f8b\u5982\uff0c\u8981\u89c2\u5bdf <code>TextField</code> \u7684\u53d8\u5316\uff1a</p> JavaKubeJS <pre><code>var valueHolder = new AtomicInteger(0);\n// \u7ed1\u5b9a\u4e00\u4e2a Observer \u6765\u89c2\u5bdf\u6587\u672c\u6846\u7684\u503c\u53d8\u5316\nnew TextField()\n    .setNumbersOnlyInt(0, 100)\n    .setValue(String.valueOf(valueHolder.get()))\n    // \u7ed1\u5b9a\u4e00\u4e2a Observer \u6765\u66f4\u65b0\u503c\u6301\u6709\u5668\n    .bindObserver(value -&gt; valueHolder.set(Integer.parseInt(value)))\n    // \u5b9e\u9645\u4e0a\uff0c\u7b49\u540c\u4e8e setTextResponder\n    //.setTextResponder(value -&gt; valueHolder.set(Integer.parseInt(value)))\n</code></pre> <pre><code>let valueHolder = {\n    \"value\": 0\n}\n// \u7ed1\u5b9a\u4e00\u4e2a Observer \u6765\u89c2\u5bdf\u6587\u672c\u6846\u7684\u503c\u53d8\u5316\nnew TextField()\n    .setNumbersOnlyInt(0, 100)\n    .setValue(valueHolder.value)\n    // \u7ed1\u5b9a\u4e00\u4e2a Observer \u6765\u66f4\u65b0\u503c\u6301\u6709\u5668\n    .bindObserver(value =&gt; valueHolder.value = int(value))\n    // \u5b9e\u9645\u4e0a\uff0c\u7b49\u540c\u4e8e setTextResponder\n    //.setTextResponder(value =&gt; valueHolder.value = int(value))\n</code></pre> <p>Note</p> <p>\u50cf <code>Toggle</code>\u3001<code>Selector</code> \u548c <code>TextField</code> \u8fd9\u6837\u7684\u7ec4\u4ef6\u540c\u65f6\u652f\u6301 <code>IDataConsumer&lt;T&gt;</code> \u548c <code>IObservable&lt;T&gt;</code>\uff0c\u56e0\u4e3a\u5b83\u4eec\u8d1f\u8d23\u540c\u65f6\u663e\u793a\u6570\u636e\u548c\u4fee\u6539\u6570\u636e\u3002</p>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#_2","title":"\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u6570\u636e\u7ed1\u5b9a","text":"<p>\u5982\u679c\u60a8\u7684UI\u4ec5\u5728\u5ba2\u6237\u7aef\u8fd0\u884c\uff0c<code>IDataConsumer&lt;T&gt;</code> \u548c <code>IObservable&lt;T&gt;</code> \u901a\u5e38\u5c31\u8db3\u591f\u4e86\u3002\u5b83\u4eec\u8986\u76d6\u4e86\u89c2\u5bdf\u548c\u66f4\u65b0\u672c\u5730\u6570\u636e\u7684\u5927\u90e8\u5206\u9700\u6c42\u3002</p> <p>\u4f46\u662f\uff0c\u8bb8\u591aUI\u662f\u57fa\u4e8e\u5bb9\u5668\u7684UI\uff0c\u5b9e\u9645\u6570\u636e\u5b58\u50a8\u5728\u670d\u52a1\u5668\u4e0a\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u60a8\u901a\u5e38\u5e0c\u671b\uff1a</p> <ul> <li>\u5728\u5ba2\u6237\u7aefUI\u7ec4\u4ef6\u4e2d\u663e\u793a\u670d\u52a1\u5668\u7aef\u6570\u636e\u3002</li> <li>\u5c06\u5ba2\u6237\u7aefUI\u4e0a\u6240\u505a\u7684\u66f4\u6539\u540c\u6b65\u56de\u670d\u52a1\u5668\u3002</li> </ul> <p>\u8fd9\u88ab\u79f0\u4e3a\u53cc\u5411\u6570\u636e\u7ed1\u5b9a\u3002</p> <pre><code>sequenceDiagram\n  autonumber\n  Server-&gt;&gt;Client UI: \u540c\u6b65\u521d\u59cb\u6570\u636e\uff08\u5982\u679c\u5141\u8bb8s-&gt;c\uff09\n  Note right of Client UI: \u521d\u59cb\u5316UI\u72b6\u6001\n  Server-&gt;&gt;Server: \u68c0\u6d4b\u670d\u52a1\u5668\u7aef\u6570\u636e\u53d8\u5316\n  Server-&gt;&gt;Client UI: \u540c\u6b65\u66f4\u65b0\u540e\u7684\u6570\u636e\uff08\u5982\u679c\u5141\u8bb8s-&gt;c\uff09\n  Note right of Client UI: \u66f4\u65b0UI\u663e\u793a\n\n  Client UI-&gt;&gt;Client UI: UI\u4ea4\u4e92\u6539\u53d8\u503c\n  Client UI-&gt;&gt;Server: \u540c\u6b65\u66f4\u6539\u7684\u6570\u636e\uff08\u5982\u679c\u5141\u8bb8c-&gt;s\uff09\n  Note left of Server: \u5e94\u7528\u670d\u52a1\u5668\u7aef\u66f4\u65b0\n</code></pre> <p>\u8fd9\u542c\u8d77\u6765\u53ef\u80fd\u5f88\u590d\u6742\uff0c\u4f46LDLib2\u5b8c\u5168\u62bd\u8c61\u4e86\u8fd9\u4e2a\u8fc7\u7a0b\u3002</p>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#databindingbuildert","title":"\u4f7f\u7528 <code>DataBindingBuilder&lt;T&gt;</code>","text":"<p>\u4f7f\u7528 <code>DataBindingBuilder&lt;T&gt;</code>\uff0c\u60a8\u65e0\u9700\u81ea\u5df1\u7f16\u5199\u4efb\u4f55\u540c\u6b65\u903b\u8f91\u3002\u60a8\u53ea\u9700\u8981\u63cf\u8ff0\uff1a</p> <ul> <li>\u6570\u636e\u5b58\u50a8\u5728\u54ea\u91cc</li> <li>\u5982\u4f55\u8bfb\u53d6\u5b83</li> <li>\u5982\u4f55\u5e94\u7528\u66f4\u65b0</li> </ul>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#_3","title":"\u7b80\u5355\u7684\u53cc\u5411\u7ed1\u5b9a","text":"JavaKubeJS <pre><code>// \u670d\u52a1\u5668\u7aef\u503c\n// boolean bool = true;\n// String string = \"hello\";\n// ItemStack item = new ItemStack(Items.APPLE);\n\nnew Switch()\n    .bind(DataBindingBuilder.bool(() -&gt; bool, value -&gt; bool = value).build());\n\nnew TextField()\n    .bind(DataBindingBuilder.string(() -&gt; string, value -&gt; string = value).build());\n\nnew ItemSlot()\n    .bind(DataBindingBuilder.itemStack(() -&gt; item, stack -&gt; item = stack).build());\n</code></pre> <pre><code>// \u670d\u52a1\u5668\u7aef\u503c\n// let bool = true;\n// let string = \"hello\";\n// let item = new ItemStack(Items.APPLE);\n\nnew Switch()\n    .bind(DataBindingBuilder.bool(() =&gt; bool, v =&gt; bool = v).build());\n\nnew TextField()\n    .bind(DataBindingBuilder.string(() =&gt; string, v =&gt; string = v).build());\n\nnew ItemSlot()\n    .bind(DataBindingBuilder.itemStack(() =&gt; item, v =&gt; item = v).build());\n</code></pre> <p>\u4f8b\u5982\uff0c\u5728\uff1a</p> <pre><code>DataBindingBuilder.bool(() -&gt; bool, value -&gt; bool = value).build()\n</code></pre> <ul> <li>\u7b2c\u4e00\u4e2alambda\u5b9a\u4e49\u670d\u52a1\u5668\u5982\u4f55\u5411\u5ba2\u6237\u7aef\u63d0\u4f9b\u6570\u636e\u3002</li> <li>\u7b2c\u4e8c\u4e2alambda\u5b9a\u4e49\u5ba2\u6237\u7aef\u66f4\u6539\u5982\u4f55\u66f4\u65b0\u670d\u52a1\u5668\u6570\u636e\u3002</li> </ul>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#_4","title":"\u5355\u5411\u7ed1\u5b9a\uff08\u4ec5\u670d\u52a1\u5668\u2192\u5ba2\u6237\u7aef\uff09","text":"<p>\u6709\u65f6\uff0c\u60a8\u4e0d\u5e0c\u671b\u5ba2\u6237\u7aef\u7684\u66f4\u6539\u5f71\u54cd\u670d\u52a1\u5668\uff0c\u4f8b\u5982\u4ec5\u7528\u4e8e\u663e\u793a\u7684 <code>Label</code>\u3002</p> <p>LDLib2 \u5141\u8bb8\u60a8\u660e\u786e\u63a7\u5236\u540c\u6b65\u7b56\u7565\u3002</p> SyncStrategy \u6982\u89c8 <ul> <li><code>NONE</code> \u5b8c\u5168\u4e0d\u8fdb\u884c\u540c\u6b65\u3002</li> <li><code>CHANGED_PERIODIC</code> \u4ec5\u5f53\u6570\u636e\u53d8\u5316\u65f6\u540c\u6b65\uff08\u9ed8\u8ba4\uff1a\u6bcftick\u4e00\u6b21\uff09\u3002</li> <li><code>ALWAYS</code> \u5f3a\u5236\u6bcftick\u540c\u6b65\uff0c\u5373\u4f7f\u672a\u66f4\u6539\uff08\u8c28\u614e\u4f7f\u7528\uff09\u3002</li> </ul> JavaKubeJS <pre><code>// \u963b\u6b62\u5ba2\u6237\u7aef -&gt; \u670d\u52a1\u5668\u7684\u66f4\u65b0\nnew Label().bind(\n    DataBindingBuilder.component(() -&gt; Component.literal(data), c -&gt; {})\n        .c2sStrategy(SyncStrategy.NONE)\n        .build()\n);\n\n// \u4ec5\u670d\u52a1\u5668 -&gt; \u5ba2\u6237\u7aef\u7684\u7b80\u5199\u5f62\u5f0f\nnew Label().bind(\n    DataBindingBuilder.componentS2C(() -&gt; Component.literal(data)).build()\n);\n</code></pre> <pre><code>// \u963b\u6b62\u5ba2\u6237\u7aef -&gt; \u670d\u52a1\u5668\u7684\u66f4\u65b0\nnew Label().bind(\n    DataBindingBuilder.component(() =&gt; data, c =&gt; {})\n        .c2sStrategy(\"NONE\")\n        .build()\n);\n\n// \u4ec5\u670d\u52a1\u5668 -&gt; \u5ba2\u6237\u7aef\u7684\u7b80\u5199\u5f62\u5f0f\nnew Label().bind(\n    DataBindingBuilder.componentS2C(() =&gt; data).build()\n);\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#ibindingt","title":"\u81ea\u5b9a\u4e49 <code>IBinding&lt;T&gt;</code>","text":"<p><code>DataBindingBuilder&lt;T&gt;</code> \u4e3a\u5e38\u89c1\u6570\u636e\u7c7b\u578b\u63d0\u4f9b\u4e86\u5185\u7f6e\u7ed1\u5b9a\u3002 \u5bf9\u4e8e\u81ea\u5b9a\u4e49\u7c7b\u578b\uff08\u4f8b\u5982 <code>int[]</code>\uff09\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u81ea\u5df1\u7684\u7ed1\u5b9a\u3002</p> <pre><code>// \u670d\u52a1\u5668\u7aef\u503c\n// int[] data = new int[]{1, 2, 3};\n\nnew BindableValue&lt;int[]&gt;().bind(\n    DataBindingBuilder.create(\n        () -&gt; data,\n        v -&gt; data = v\n    ).build()\n);\n</code></pre> <p>Warning</p> <p>\u9ed8\u8ba4\u5e76\u975e\u6240\u6709\u7c7b\u578b\u90fd\u53d7\u652f\u6301\u3002 \u53c2\u89c1\u7c7b\u578b\u652f\u6301\u3002 \u4e0d\u652f\u6301\u7684\u7c7b\u578b\u9700\u8981\u81ea\u5b9a\u4e49\u7c7b\u578b\u8bbf\u95ee\u5668\u3002</p> <p>\u5982\u679c\u67d0\u4e2a\u7c7b\u578b\u662f\u53ea\u8bfb\u7684\uff08\u53c2\u89c1\u7c7b\u578b\u652f\u6301\uff09\uff1a</p> <ul> <li>getter\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u7a33\u5b9a\u7684\u3001\u975e\u7a7a\u7684\u5b9e\u4f8b\u3002</li> <li>\u60a8\u5fc5\u987b\u5b9a\u4e49\u7c7b\u578b\u548c\u521d\u59cb\u503c\u3002</li> </ul> <p>\u4f7f\u7528 <code>INBTSerializable</code> \u7684\u793a\u4f8b\uff1a</p> <pre><code>// \u670d\u52a1\u5668\u7aef\u503c\n// INBTSerializable&lt;CompoundTag&gt; data = ...;\n\nnew BindableValue&lt;INBTSerializable&gt;().bind(\n    DataBindingBuilder.create(\n        () -&gt; data,\n        v -&gt; {\n            // \u5b9e\u4f8b\u5df2\u66f4\u65b0\uff0c\u53ea\u9700\u5728\u6b64\u505a\u51fa\u53cd\u5e94\n        }\n    )\n    .initialValue(data).syncType(INBTSerializable.class)\n    .build()\n);\n</code></pre> <p>\u8fd9\u786e\u4fdd\u4e86\u6b63\u786e\u7684\u540c\u6b65\uff0c\u5e76\u907f\u514d\u4e86\u53ea\u8bfb\u5bf9\u8c61\u7684\u6b67\u4e49\u3002</p>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#getter-setter","title":"\u5ba2\u6237\u7aef\u7684 <code>Getter</code> \u548c <code>Setter</code>","text":"<p>\u60a8\u53ef\u80fd\u60f3\u77e5\u9053\uff0c\u4e3a\u4ec0\u4e48\u6211\u4eec\u53ea\u5728\u670d\u52a1\u5668\u7aef\u5b9a\u4e49 getter \u548c setter \u903b\u8f91\uff0c\u800c\u4e0d\u5728\u5ba2\u6237\u7aef\u5b9a\u4e49\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a\u6240\u6709\u652f\u6301 bind \u65b9\u6cd5\u7684\u7ec4\u4ef6\u90fd\u7ee7\u627f\u81ea <code>IBindable&lt;T&gt;</code>\u3002 \u5bf9\u4e8e\u8fd9\u4e9b\u7ec4\u4ef6\uff0cLDLib2 \u4f1a\u81ea\u52a8\u4e3a\u6570\u636e\u540c\u6b65\u8bbe\u7f6e\u76f8\u5e94\u7684\u5ba2\u6237\u7aef getter \u548c setter \u903b\u8f91\u3002</p> <p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b\uff0c\u8fd9\u79cd\u9ed8\u8ba4\u884c\u4e3a\u5c31\u8db3\u591f\u4e86\uff0c\u65e0\u9700\u989d\u5916\u914d\u7f6e\u3002</p> <p>\u4f46\u662f\uff0c\u5982\u679c\u60a8\u60f3\u5b8c\u5168\u63a7\u5236\u5ba2\u6237\u7aef\u5982\u4f55\u5904\u7406\u4f20\u5165\u7684\u6570\u636e\uff0c\u6216\u5b83\u53d1\u9001\u56de\u670d\u52a1\u5668\u7684\u6570\u636e\uff0c\u60a8\u53ef\u4ee5\u624b\u52a8\u5b9a\u4e49\u81ea\u5df1\u7684\u5ba2\u6237\u7aef getter \u548c setter \u903b\u8f91\u3002</p> JavaKubeJS <pre><code>// \u670d\u52a1\u5668\u7aef\u503c\n// Block data = ...;\n\nvar label = new Label();\nnew BindableValue&lt;Block&gt;().bind(\n    DataBindingBuilder.blockS2C(() -&gt; data)\n        .remoteSetter(block -&gt; label.setText(block.getDescriptionId())).build()\n);\n</code></pre> <pre><code>// \u670d\u52a1\u5668\u7aef\u503c\n// Block data = ...;\n\nlet label = new Label();\nnew BindableValue().bind(\n    DataBindingBuilder.blockS2C(() =&gt; data)\n        .remoteSetter(block =&gt; label.setText(block.getDescriptionId())).build()\n);\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#-bindableuielementt","title":"\u4e00\u4f53\u5316 - <code>BindableUIElement&lt;T&gt;</code>","text":"<p>\u60a8\u53ef\u80fd\u5df2\u7ecf\u6ce8\u610f\u5230\uff0c\u51e0\u4e4e\u6240\u6709\u6570\u636e\u9a71\u52a8\u7684\u7ec4\u4ef6\u2014\u2014\u5982 <code>TextArea</code>\u3001<code>SearchComponent</code>\u3001<code>Switch</code> \u7b49\u2014\u2014\u90fd\u662f\u6784\u5efa\u5728 <code>BindableUIElement&lt;T&gt;</code> \u4e4b\u4e0a\u7684\u3002 <code>BindableUIElement&lt;T&gt;</code> \u662f\u4e00\u4e2a\u5305\u88c5\u7684 UI \u5143\u7d20\uff0c\u5b83\u5b9e\u73b0\u4e86\u4ee5\u4e0b\u6240\u6709\u63a5\u53e3\uff1a \u8fd9\u610f\u5473\u7740\u5b83\u65e2\u53ef\u4ee5\u663e\u793a\u6570\u636e\uff0c\u53c8\u53ef\u4ee5\u4ea7\u751f\u6570\u636e\u53d8\u5316\uff0c\u540c\u65f6\u652f\u6301\u5ba2\u6237\u7aef-\u670d\u52a1\u5668\u540c\u6b65\u3002</p> Info <p><code>BindableValue&lt;T&gt;</code> \u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u5b9e\u7528\u7ec4\u4ef6\uff0c\u5e76\u4e14\u8bbe\u7f6e\u4e86 <code>display: CONTENTS;</code>\uff0c\u8fd9\u610f\u5473\u7740\u5b83\u5728\u751f\u547d\u5468\u671f\u5185\u4e0d\u4f1a\u5f71\u54cd\u5e03\u5c40\u3002</p> <p>\u5982\u679c\u60a8\u60f3\u5b9e\u73b0\u81ea\u5df1\u7684 UI \u7ec4\u4ef6\u5e76\u652f\u6301\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u53cc\u5411\u6570\u636e\u7ed1\u5b9a\uff0c\u60a8\u53ef\u4ee5\u7b80\u5355\u5730\u6269\u5c55\u8fd9\u4e2a\u7c7b\u3002 \u5bf9\u4e8e\u4e0d\u5b9e\u73b0 <code>IBindable&lt;T&gt;</code> \u7684\u7ec4\u4ef6\u2014\u2014\u6bd4\u5982\u57fa\u7840\u7684 <code>UIElement</code>\u2014\u2014\u60a8\u4ecd\u7136\u53ef\u4ee5\u901a\u8fc7\u5728\u5185\u90e8\u9644\u52a0\u4e00\u4e2a <code>BindableValue&lt;T&gt;</code> \u6765\u5b9e\u73b0\u6570\u636e\u7ed1\u5b9a\u3002 \u4e0b\u9762\u7684\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u5c06\u670d\u52a1\u5668\u7aef\u6570\u636e\u540c\u6b65\u5230\u5ba2\u6237\u7aef\uff0c\u5e76\u7528\u5b83\u6765\u63a7\u5236\u5143\u7d20\u7684\u5bbd\u5ea6\uff1a</p> JavaKubeJS <pre><code>// \u670d\u52a1\u5668\u7aef\u503c\n// var widthOnTheServer = 100f;\n\nvar element = new UIElement();\nelement.addChildren(\n    new BindableValue&lt;Float&gt;().bind(DataBindingBuilder.floatS2C(() -&gt; widthOnTheServer)\n        .remoteSetter(width -&gt; element.getLayout().width(width))\n        .build())\n);\n</code></pre> <pre><code>// \u670d\u52a1\u5668\u7aef\u503c\n// let widthOnTheServer = 100;\n\nlet element = new UIElement();\nelement.addChildren(\n    new BindableValue().bind(DataBindingBuilder.floatS2C(() =&gt; widthOnTheServer)\n        .remoteSetter(width =&gt; element.getLayout().width(width))\n        .build())\n);\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#_5","title":"\u590d\u6742\u7528\u6cd5\u793a\u4f8b","text":"<p>\u597d\u4e86\uff0c\u8ba9\u6211\u4eec\u518d\u505a\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u4f8b\u5b50\uff0c\u4e3a <code>Selector</code> \u7ed1\u5b9a\u4e00\u4e2a\u5b58\u50a8\u5728\u670d\u52a1\u5668\u7aef\u7684 <code>String</code> \u5217\u8868\uff08\u4f5c\u4e3a\u5019\u9009\u9879\uff09\u3002 </p><pre><code>// \u65b9\u6cd51\uff0c\u6211\u4eec\u540c\u6b65 String[]\n// \u4ee3\u8868\u5b58\u50a8\u5728\u670d\u52a1\u5668\u7aef\u7684\u503c\n// var candidates = new ArrayList&lt;&gt;(List.of(\"a\", \"b\", \"c\", \"d\"));\n\nvar selector1 = new Selector&lt;String&gt;();\nselector1.addChild(\n    // \u4e00\u4e2a\u7528\u4e8e\u540c\u6b65\u5019\u9009\u9879\u7684\u5360\u4f4d\u5143\u7d20\u503c\uff0c\u5b83\u4e0d\u4f1a\u5f71\u54cd\u5e03\u5c40\n    new BindableValue&lt;String[]&gt;().bind(DataBindingBuilder.create(\n            () -&gt; candidates.toArray(String[]::new), Consumers.nop())\n            .c2sStrategy(SyncStrategy.NONE) // \u4ec5 s -&gt; c\n            .remoteSetter(candidates -&gt; {\n                selector1.setCandidates(Arrays.stream(candidates).toList());\n            })\n            .build()\n    )\n);\n\n// \u65b9\u6cd52\uff0c\u6211\u4eec\u540c\u6b65 List&lt;String&gt;\n// \u4ee3\u8868\u5b58\u50a8\u5728\u670d\u52a1\u5668\u7aef\u548c\u5ba2\u6237\u7aef\u7684\u503c\n// var candidates = new ArrayList&lt;&gt;(List.of(\"a\", \"b\", \"c\", \"d\"));\n\nvar selector2 = new Selector&lt;String&gt;();\n// \u56e0\u4e3a\u5bf9\u4e8eldlib2\u540c\u6b65\u7cfb\u7edf\u6765\u8bf4\uff0cList\u662f\u53ea\u8bfb\u503c\u3002\u60a8\u5fc5\u987b\u83b7\u53d6 List&lt;String&gt; \u7684\u5b9e\u9645\u7c7b\u578b\u3002\nType type = new TypeToken&lt;List&lt;String&gt;&gt;(){}.getType();\nselector2.addChild(\n    // \u4e00\u4e2a\u7528\u4e8e\u540c\u6b65\u5019\u9009\u9879\u7684\u5360\u4f4d\u5143\u7d20\u503c\uff0c\u5b83\u4e0d\u4f1a\u5f71\u54cd\u5e03\u5c40\n    new BindableValue&lt;List&lt;String&gt;&gt;().bind(DataBindingBuilder.create(\n            () -&gt; candidates, Consumers.nop())\n            .syncType(type)\n            .initialValue(candidates)\n            .c2sStrategy(SyncStrategy.NONE) // \u4ec5 s -&gt; c\n            .remoteSetter(selector2::setCandidates)\n            .build()\n    )\n);\n\nroot.addChildren(selector1, selector2);\n</code></pre> \u5982\u679c\u60a8\u7406\u89e3\u4e86\u8fd9\u6bb5\u4ee3\u7801\u4e2d\u5c55\u793a\u7684\u4e24\u79cd\u65b9\u6cd5\uff0c\u60a8\u57fa\u672c\u4e0a\u5c31\u5df2\u7ecf\u638c\u63e1\u4e86\u6570\u636e\u7ed1\u5b9a\u7684\u7cbe\u9ad3\u3002<p></p> <ul> <li>\u65b9\u6cd51 \u540c\u6b65\u4e00\u4e2a <code>String[]</code>\uff0c\u8fd9\u79cd\u65b9\u6cd5\u76f4\u622a\u4e86\u5f53\uff0c\u6309\u9884\u671f\u5de5\u4f5c\u3002</li> <li>\u65b9\u6cd52 \u540c\u6b65\u4e00\u4e2a <code>List&lt;String&gt;</code>\u3002\u7531\u4e8e <code>Collection&lt;T&gt;</code> \u5728 LDLib2 \u4e2d\u88ab\u89c6\u4e3a\u53ea\u8bfb\u7c7b\u578b\uff0c\u60a8\u5fc5\u987b\u663e\u5f0f\u63d0\u4f9b <code>initialValue</code> \u5e76\u6307\u5b9a\u5b9e\u9645\u7c7b\u578b\uff08\u5305\u62ec\u6cdb\u578b\uff09\u3002</li> </ul> <p>\u8fd9\u786e\u4fdd\u4e86\u7ed1\u5b9a\u7cfb\u7edf\u80fd\u591f\u6b63\u786e\u8bc6\u522b\u548c\u8ddf\u8e2a\u6570\u636e\u3002</p>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#ui-rpcevent","title":"UI RPCEvent","text":"<p>\u4e4d\u4e00\u770b\uff0c\u6570\u636e\u7ed1\u5b9a\u7cfb\u7edf\u4f3c\u4e4e\u53ef\u4ee5\u5904\u7406\u5927\u591a\u6570\u540c\u6b65\u9700\u6c42\uff0c\u4f46\u5728\u5b9e\u8df5\u4e2d\uff0c\u60c5\u51b5\u5e76\u975e\u603b\u662f\u5982\u6b64\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u60a8\u60f3\u5728\u7528\u6237\u70b9\u51fb\u6309\u94ae\u65f6\u6267\u884c\u670d\u52a1\u5668\u7aef\u903b\u8f91\uff0c\u6570\u636e\u7ed1\u5b9a\u663e\u7136\u4e0d\u5408\u9002\u3002</p> <p>\u73b0\u5728\u8003\u8651\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u573a\u666f\uff1a\u5c06 <code>FluidSlot</code> \u7ed1\u5b9a\u5230\u670d\u52a1\u5668\u7aef\u7684 <code>IFluidHandler</code>\u3002 \u8fd9\u770b\u8d77\u6765\u4f3c\u4e4e\u53ef\u4ee5\u7528\u6570\u636e\u7ed1\u5b9a\u5b9e\u73b0\u3002\u5982\u679c\u5b83\u4ec5\u7528\u4e8e\u670d\u52a1\u5668\u5230\u5ba2\u6237\u7aef\u7684\u663e\u793a\uff0c\u5b83\u5de5\u4f5c\u5f97\u5f88\u597d\u3002 \u7136\u800c\uff0c\u4e00\u65e6\u6d89\u53ca\u4ea4\u4e92\uff0c\u53cc\u5411\u540c\u6b65\u5c31\u53d8\u5f97\u5371\u9669\u3002</p> <p>\u5982\u679c\u5141\u8bb8\u5ba2\u6237\u7aef\u4fee\u6539\u503c\uff0c\u5b83\u53ef\u4ee5\u8f7b\u677e\u53d1\u9001\u6076\u610f\u6570\u636e\u5305\u6765\u64cd\u7eb5\u670d\u52a1\u5668\u7aef\u7684 <code>IFluidHandler</code>\u3002</p> \u6b63\u786e\u7684\u505a\u6cd5\u662f <ul> <li>\u4ec5\u5bf9\u663e\u793a\u4f7f\u7528\u670d\u52a1\u5668\u5230\u5ba2\u6237\u7aef\u7684\u6570\u636e\u7ed1\u5b9a</li> <li>\u5c06\u5ba2\u6237\u7aef\u4ea4\u4e92\uff08\u4f8b\u5982\u70b9\u51fb <code>FluidSlot</code>\uff09\u53d1\u9001\u5230\u670d\u52a1\u5668</li> <li>\u5728\u670d\u52a1\u5668\u7aef\u5904\u7406\u4ea4\u4e92</li> <li>\u5982\u679c\u670d\u52a1\u5668\u72b6\u6001\u53d1\u751f\u53d8\u5316\uff0c\u5219\u901a\u8fc7\u6570\u636e\u7ed1\u5b9a\u5c06\u5176\u540c\u6b65\u56de\u5ba2\u6237\u7aef</li> </ul> <p>\u7b80\u800c\u8a00\u4e4b\uff0c\u6211\u4eec\u9700\u8981\u4e00\u79cd\u673a\u5236\u6765\u5728\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u53d1\u9001\u4ea4\u4e92\u6570\u636e\u3002 \u8fd9\u79cd\u673a\u5236\u88ab\u79f0\u4e3a <code>UI RPCEvent</code>\u3002</p> <p>\u4ee5\u6309\u94ae\u4e3a\u4f8b\uff0c\u5982\u679c\u60a8\u9605\u8bfb\u8fc7 UI \u4e8b\u4ef6 \u90e8\u5206\uff0c\u60a8\u5df2\u7ecf\u77e5\u9053UI\u4e8b\u4ef6\u53ef\u4ee5\u53d1\u9001\u5230\u670d\u52a1\u5668\u5e76\u89e6\u53d1\u903b\u8f91\u3002 \u5728\u5185\u90e8\uff0c\u8fd9\u662f\u4f7f\u7528 <code>RPCEvent</code> \u5b9e\u73b0\u7684\u3002</p> <pre><code>// \u5728\u670d\u52a1\u5668\u7aef\u89e6\u53d1 ui \u4e8b\u4ef6\nvar button = new UIElement().addServerEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    // \u5728\u670d\u52a1\u5668\u7aef\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\n});\n</code></pre> <pre><code>// \u4f7f\u7528 RPCEvent \u7684\u7b49\u6548\u5b9e\u73b0\n\nvar clickEvent = RPCEventBuilder.simple(UIEvent.class, event -&gt; {\n    // \u5728\u670d\u52a1\u5668\u7aef\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\n});\n\nnew UIElement().addEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    e.currentElement.sendEvent(clickEvent, e);\n}).addRPCEvent(clickEvent);\n</code></pre> <p>\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>RPCEventBuilder</code> \u6765\u6784\u5efa\u4e00\u4e2a <code>RPCEvent</code>\uff0c\u5e76\u5728\u9700\u8981\u65f6\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e\u3002</p> <p>Note</p> <p>\u53d1\u9001 RPC \u4e8b\u4ef6\u65f6\uff0c\u4f20\u9012\u7ed9 <code>sendEvent</code> \u7684\u53c2\u6570\u5fc5\u987b\u4e0e\u5728 <code>RPCEventBuilder</code> \u4e2d\u5b9a\u4e49\u7684\u53c2\u6570\u5b8c\u5168\u5339\u914d\uff0c\u5305\u62ec\u987a\u5e8f\u548c\u7c7b\u578b\uff0c\u5e76\u4e14\u4e0d\u8981\u5fd8\u8bb0\u4f7f\u7528 <code>addRPCEvent</code> \u6dfb\u52a0\u5b83\u4eec\u3002 \u5426\u5219\uff0c\u4e8b\u4ef6\u5c06\u65e0\u6cd5\u88ab\u6b63\u786e\u5206\u53d1\u3002</p>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#rpcevent_1","title":"\u5e26\u8fd4\u56de\u503c\u7684 RPCEvent","text":"<p>\u6709\u65f6\u60a8\u53ef\u80fd\u5e0c\u671b\u5411\u670d\u52a1\u5668\u53d1\u9001\u8bf7\u6c42\u4ee5\u67e5\u8be2\u6570\u636e\uff0c\u5e76\u671f\u671b\u670d\u52a1\u5668\u8fd4\u56de\u7ed3\u679c\u3002 \u4f8b\u5982\uff0c\u8981\u6c42\u670d\u52a1\u5668\u6267\u884c\u52a0\u6cd5\u5e76\u8fd4\u56de\u7ed3\u679c\uff0c\u60a8\u53ef\u4ee5\u8fd9\u6837\u5b9a\u4e49\uff1a</p> <pre><code>var queryAdd = RPCEventBuilder.simple(int.class, int.class, int.class, (a, b) -&gt; {\n    // \u5728\u670d\u52a1\u5668\u7aef\u8ba1\u7b97\u7ed3\u679c\u5e76\u8fd4\u56de\n    return a + b;\n});\n\nnew UIElement().addEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    e.currentElement.&lt;Integer&gt;sendEvent(queryAdd, result -&gt; {\n        // \u5728\u5ba2\u6237\u7aef\u63a5\u6536\u7ed3\u679c\n        assert result == 2;\n    }, 1, 2);\n}).addRPCEvent(queryAdd);\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/data_bindings/#_6","title":"\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u4e8b\u4ef6","text":"<p>\u5728\u5b9e\u8df5\u4e2d\uff0cUI RPC \u4e8b\u4ef6\u4e3b\u8981\u8bbe\u8ba1\u7528\u4e8e\u5ba2\u6237\u7aef \u2192 \u670d\u52a1\u5668\u7684\u901a\u4fe1\uff0c\u5e76\u5e26\u6709\u53ef\u9009\u7684\u54cd\u5e94\u53d1\u9001\u56de\u5ba2\u6237\u7aef\u3002 \u8fd9\u4e0e\u5927\u591a\u6570\u5b9e\u9645\u7528\u4f8b\u76f8\u5339\u914d\uff0c\u5373\u670d\u52a1\u5668\u62e5\u6709\u6570\u636e\u548c\u903b\u8f91\uff0c\u800c\u5ba2\u6237\u7aef\u4ec5\u53d1\u9001\u4ea4\u4e92\u8bf7\u6c42\u3002</p> <p>\u56e0\u6b64\uff0cLDLib2 \u4e0d\u63d0\u4f9b\u4e13\u7528\u7684 UI \u7ea7\u522b API \u7528\u4e8e\u670d\u52a1\u5668 \u2192 \u5ba2\u6237\u7aef\u7684 RPC \u4e8b\u4ef6\u3002</p> <p>\u7136\u800c\uff0c\u5982\u679c\u60a8\u786e\u5b9e\u9700\u8981\u4ece\u670d\u52a1\u5668\u4e3b\u52a8\u5411\u5ba2\u6237\u7aef\u53d1\u9001\u4e8b\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u901a\u7528\u7684 RPC \u6570\u636e\u5305 \u7cfb\u7edf\u6765\u5b9e\u73b0\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u793a\u4f8b\uff0c\u5c55\u793a\u4e86\u670d\u52a1\u5668\u5982\u4f55\u5411\u5ba2\u6237\u7aef\u53d1\u9001 RPC \u6570\u636e\u5305\uff0c\u4ee5\u53ca\u5ba2\u6237\u7aef\u5982\u4f55\u5b9a\u4f4d\u548c\u64cd\u4f5c\u7279\u5b9a\u7684 UI \u5143\u7d20\u3002</p> <pre><code>var element = new UIElement().setId(\"my_element\");\n\n// \u5728\u4efb\u610f\u4f4d\u7f6e\u6ce8\u91ca\u60a8\u7684\u6570\u636e\u5305\u65b9\u6cd5\n@RPCPacket(\"rpcEventToClient\")\npublic static void rpcPacketTest(RPCSender sender, String message, boolean message2) {\n    if (sender.isRemote()) {\n        var player = Minecraft.getInstance().player;\n        if (player != null &amp;&amp; player.containerMenu instanceof IModularUIHolderMenu uiHolderMenu) {\n            uiHolderMenu.getModularUI().select(\"#my_element\").findFirst().ifPresent(element -&gt; {\n                // \u5728\u5ba2\u6237\u7aef\u4f7f\u7528\u60a8\u7684\u5143\u7d20\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\u3002\n            });\n        } \n    }\n}\n\n// \u5411\u8fdc\u7a0b/\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e\u5305\nRPCPacketDistributor.rpcToAllPlayers(\"rpcEventToClient\", \"Hello from server!\", false)\n</code></pre> <p>\u8fd9\u79cd\u65b9\u6cd5\u4f7f\u60a8\u80fd\u591f\u5b8c\u5168\u63a7\u5236\u670d\u52a1\u5668\u53d1\u8d77\u7684\u5ba2\u6237\u7aef\u903b\u8f91\uff0c\u540c\u65f6\u4fdd\u6301 UI RPC \u7cfb\u7edf\u7b80\u5355\u5e76\u4e13\u6ce8\u4e8e\u4ea4\u4e92\u9a71\u52a8\u7684\u5de5\u4f5c\u6d41\u7a0b\u3002</p> <p>Tip</p> <p>\u5f53\u4f7f\u7528\u5e26\u6709\u5bb9\u5668\u7ed1\u5b9a\u7684 <code>FluidSlot</code> \u65f6\uff0c\u5176\u5b9e\u73b0\u5df2\u7ecf\u4f7f\u7528\u4e86 \u670d\u52a1\u5668 \u2192 \u5ba2\u6237\u7aef (s\u2192c) \u7684\u53ea\u8bfb\u6570\u636e\u540c\u6b65 \u7ed3\u5408 \u7528\u4e8e\u4ea4\u4e92\u7684 RPC \u4e8b\u4ef6\u3002</p> <p>\u60a8\u65e0\u9700\u81ea\u5df1\u5904\u7406\u540c\u6b65\u7b56\u7565\u3002 <code>FluidSlot.bind(...)</code> \u7684\u5b9e\u73b0\u4e5f\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u53c2\u8003\uff0c\u53ef\u4ee5\u4e86\u89e3\u6570\u636e\u540c\u6b65\u548c\u57fa\u4e8e RPC \u7684\u4ea4\u4e92\u5982\u4f55\u534f\u540c\u5de5\u4f5c\u3002</p>"},{"location":"zh/ldlib2/ui/preliminary/event/","title":"\u4e8b\u4ef6","text":""},{"location":"zh/ldlib2/ui/preliminary/event/#_1","title":"\u4e8b\u4ef6","text":"<p> Since 2.1.0 </p> <p>LDLib2 UI \u63d0\u4f9b\u4e86\u7528\u4e8e\u5c06\u7528\u6237\u64cd\u4f5c\u6216\u901a\u77e5\u4f20\u9012\u7ed9 UI \u5143\u7d20\u7684\u4e8b\u4ef6\u7cfb\u7edf\u3002\u8be5\u7cfb\u7edf\u4f7f\u7528\u4e0e HTML \u4e8b\u4ef6 \u76f8\u540c\u7684\u672f\u8bed\u548c\u4e8b\u4ef6\u547d\u540d\u3002</p>"},{"location":"zh/ldlib2/ui/preliminary/event/#_2","title":"\u6d3e\u53d1\u4e8b\u4ef6","text":"<p>\u4e8b\u4ef6\u7cfb\u7edf\u76d1\u542c\u6765\u81ea ModularUI \u6216\u624b\u52a8\u89e6\u53d1\u7684\u4e8b\u4ef6\uff0c\u7136\u540e\u4f7f\u7528 <code>UIEventDispatcher</code> \u5c06\u8fd9\u4e9b\u4e8b\u4ef6\u5206\u6d3e\u7ed9 UI \u5143\u7d20\u3002\u4e8b\u4ef6\u5206\u53d1\u5668\u4f1a\u4e3a\u5b83\u53d1\u9001\u7684\u6bcf\u4e2a\u4e8b\u4ef6\u786e\u5b9a\u4e00\u4e2a\u9002\u5f53\u7684\u5206\u53d1\u7b56\u7565\u3002\u4e00\u65e6\u786e\u5b9a\uff0c\u5206\u53d1\u5668\u5c31\u4f1a\u6267\u884c\u8be5\u7b56\u7565\u3002</p>"},{"location":"zh/ldlib2/ui/preliminary/event/#_3","title":"\u4e8b\u4ef6\u4f20\u64ad","text":"<p>\u6bcf\u4e2a\u4e8b\u4ef6\u9636\u6bb5\u90fd\u6709\u5176\u81ea\u5df1\u7684\u5206\u53d1\u884c\u4e3a\u3002\u6bcf\u79cd\u4e8b\u4ef6\u7c7b\u578b\u7684\u884c\u4e3a\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a</p> <ul> <li><code>\u6355\u83b7\u9636\u6bb5</code>\uff1a\u5728\u5411\u4e0b\u6355\u83b7\u9636\u6bb5\u53d1\u9001\u7ed9\u5143\u7d20\u7684\u4e8b\u4ef6\u3002</li> <li><code>\u5192\u6ce1\u9636\u6bb5</code>\uff1a\u5728\u5411\u4e0a\u5192\u6ce1\u9636\u6bb5\u53d1\u9001\u7ed9\u5143\u7d20\u7684\u4e8b\u4ef6\u3002</li> </ul> <p>\u4e8b\u4ef6\u5206\u53d1\u5668\u9009\u62e9\u4e8b\u4ef6 <code>target</code> \u540e\uff0c\u4f1a\u8ba1\u7b97\u4e8b\u4ef6\u7684\u4f20\u64ad\u8def\u5f84\u3002\u4f20\u64ad\u8def\u5f84\u662f\u4e00\u4e2a\u6309\u987a\u5e8f\u63a5\u6536\u4e8b\u4ef6\u7684 UI \u5143\u7d20\u5217\u8868\u3002\u4f20\u64ad\u8def\u5f84\u6309\u4ee5\u4e0b\u987a\u5e8f\u8fdb\u884c\uff1a</p> <ol> <li>\u8def\u5f84\u4ece UI \u5143\u7d20\u6811\u7684\u6839\u5f00\u59cb\uff0c\u5411\u4e0b\u671d\u5411 <code>target</code> \u5143\u7d20\u3002\u8fd9\u662f\u5411\u4e0b\u6355\u83b7\u9636\u6bb5\u3002</li> <li>\u4e8b\u4ef6\u76ee\u6807\u63a5\u6536\u5230\u4e8b\u4ef6\u3002</li> <li>\u4e8b\u4ef6\u7136\u540e\u5411\u4e0a\u671d\u5411\u6839\u5143\u7d20\u5192\u6ce1\u3002\u8fd9\u662f\u5411\u4e0a\u5192\u6ce1\u9636\u6bb5\u3002</li> </ol> \u4f20\u64ad\u8def\u5f84 <p>\u5927\u591a\u6570\u4e8b\u4ef6\u4f1a\u6cbf\u7740\u4f20\u64ad\u8def\u5f84\u53d1\u9001\u7ed9\u6240\u6709\u5143\u7d20\u3002\u6709\u4e9b\u4e8b\u4ef6\u4f1a\u8df3\u8fc7\u5192\u6ce1\u9636\u6bb5\uff0c\u6709\u4e9b\u4e8b\u4ef6\u5219\u4ec5\u53d1\u9001\u7ed9\u4e8b\u4ef6\u76ee\u6807\u3002</p>"},{"location":"zh/ldlib2/ui/preliminary/event/#_4","title":"\u4e8b\u4ef6\u76ee\u6807","text":"<p>\u5f53 <code>UIEvent</code> \u6cbf\u7740\u4f20\u64ad\u8def\u5f84\u79fb\u52a8\u65f6\uff0c<code>UIEvent.currentElement</code> \u4f1a\u66f4\u65b0\u4e3a \u5f53\u524d\u6b63\u5728\u5904\u7406 \u4e8b\u4ef6\u7684\u5143\u7d20\u3002\u8fd9\u4f7f\u5f97\u5f88\u5bb9\u6613\u77e5\u9053\u201c\u54ea\u4e2a\u5143\u7d20\u6b63\u5728\u8fd0\u884c\u6211\u7684\u76d1\u542c\u5668\u201d\u3002</p> <p>\u5728\u4e8b\u4ef6\u76d1\u542c\u5668\u5185\u90e8\uff0cLDLib2 \u533a\u5206\u4e24\u4e2a\u91cd\u8981\u7684\u5143\u7d20\u5f15\u7528\uff1a</p> <ul> <li><code>UIEvent.target</code>\uff1a\u4e8b\u4ef6 \u8d77\u6e90 \u7684\u5143\u7d20\uff08\u5206\u53d1\u76ee\u6807\uff09\u3002</li> <li><code>UIEvent.relatedTarget</code>\uff08\u53ef\u9009\uff09\uff1a\u5728\u67d0\u4e9b\u4e8b\u4ef6\u4e2d\u53ef\u80fd\u6d89\u53ca\u7684\u5176\u4ed6\u5143\u7d20\u3002</li> <li><code>UIEvent.currentElement</code>\uff1a\u5f53\u524d\u6b63\u5728\u6267\u884c \u76d1\u542c\u5668\u7684\u5143\u7d20\u3002</li> </ul> <p><code>target</code> \u5728\u5206\u53d1\u5f00\u59cb\u524d\u786e\u5b9a\uff0c\u5e76\u4e14\u5728\u4f20\u64ad\u8fc7\u7a0b\u4e2d \u4e0d\u4f1a\u6539\u53d8\u3002 <code>currentElement</code> \u4f1a\u968f\u7740\u5206\u53d1\u5668\u5728\u6811\u4e2d\u79fb\u52a8\uff08\u6355\u83b7 \u2192 \u76ee\u6807 \u2192 \u5192\u6ce1\uff09\u800c\u6539\u53d8\u3002</p>"},{"location":"zh/ldlib2/ui/preliminary/event/#_5","title":"\u505c\u6b62\u4f20\u64ad","text":"<p>LDLib2 \u63d0\u4f9b\u4e24\u4e2a\u7ea7\u522b\u7684\u53d6\u6d88\uff1a</p> <ul> <li> <p><code>event.stopPropagation()</code>   \u963b\u6b62\u4e8b\u4ef6\u5230\u8fbe \u540e\u7eed\u5143\u7d20\u548c\u540e\u7eed\u9636\u6bb5\uff08\u6355\u83b7/\u5192\u6ce1\u5c06\u505c\u6b62\uff09\u3002</p> </li> <li> <p><code>event.stopImmediatePropagation()</code>   \u963b\u6b62 \u5f53\u524d\u5143\u7d20 \u4e0a\u7684\u5176\u4ed6\u76d1\u542c\u5668\u8fd0\u884c\uff0c\u540c\u65f6\u4e5f\u963b\u6b62\u8fdb\u4e00\u6b65\u4f20\u64ad\u3002</p> </li> </ul>"},{"location":"zh/ldlib2/ui/preliminary/event/#_6","title":"\u6ce8\u518c\u4e8b\u4ef6\u76d1\u542c\u5668","text":"<p>LDLib2 \u4f7f\u7528 \u7c7b DOM \u4e8b\u4ef6\u6a21\u578b\uff1a\u4e8b\u4ef6\u5728 UI \u6811\u4e2d\u4f20\u64ad\uff0c\u53ef\u4ee5\u4e3a\u4ee5\u4e0b\u4efb\u4e00\u9636\u6bb5\u6ce8\u518c\u76d1\u542c\u5668\uff1a</p> <ul> <li>\u5192\u6ce1\u9636\u6bb5\uff08\u9ed8\u8ba4\uff09</li> <li>\u6355\u83b7\u9636\u6bb5\uff08\u8bbe\u7f6e <code>useCapture = true</code>\uff09</li> </ul> <p>\u4f7f\u7528 <code>addEventListener(eventType, listener)</code> \u6ce8\u518c\u4e00\u4e2a \u5192\u6ce1\u9636\u6bb5 \u76d1\u542c\u5668\uff1a</p> JavaKubeJS <pre><code>var root = new UIElement().setId(\"root\");\nvar button = new UIElement().setId(\"button\");\nroot.addChild(button);\n\n// UIEvents.CLICK == \"mouseClick\"\nbutton.addEventListener(UIEvents.CLICK, e -&gt; {\n    LDLib2.LOGGER.info(\"Bubble listener: current={}, target={}\",\n            e.currentElement.getId(), e.target.getId());\n});\n</code></pre> <pre><code>let root = new UIElement().setId(\"root\");\nlet button = new UIElement().setId(\"button\");\nroot.addChild(button);\n\n// UIEvents.CLICK == \"mouseClick\"\nbutton.addEventListener(UIEvents.CLICK, e =&gt; {\n    console.log(`Bubble listener: current=${e.currentElement.getId()}, target=${e.target.getId()}`);\n});\n</code></pre> <p>\u8981\u6ce8\u518c\u6355\u83b7\u9636\u6bb5\u76d1\u542c\u5668\uff0c\u5c06 true \u4f5c\u4e3a\u7b2c\u4e09\u4e2a\u53c2\u6570\u4f20\u9012\uff1a</p> JavaKubeJS <pre><code>root.addEventListener(UIEvents.CLICK, e -&gt; {\n    LDLib2.LOGGER.info(\"Capture: current={}, target={}\",\n            e.currentElement.getId(), e.target.getId());\n}, true);\n</code></pre> <pre><code>root.addEventListener(UIEvents.CLICK, e =&gt; {\n    console.log(`Capture: current=${e.currentElement.getId()}, target=${e.target.getId()}`);\n}, true);\n</code></pre> <p>\u6211\u4eec\u8fd8\u63d0\u4f9b\u4e86\u5141\u8bb8\u60a8\u5728 <code>server</code> \u4e0a\u76d1\u542c\u4e8b\u4ef6\u7684\u65b9\u6cd5\u3002\u4e8b\u4ef6\u5728\u5ba2\u6237\u7aef\u89e6\u53d1\u5e76\u540c\u6b65\u5230\u670d\u52a1\u5668\u3002\u5e76\u975e\u6240\u6709\u4e8b\u4ef6\u90fd\u652f\u6301\u670d\u52a1\u5668\u76d1\u542c\u5668\uff0c\u8bf7\u67e5\u770b\u4e0b\u9762\u7684 \u4e8b\u4ef6\u53c2\u8003\u3002</p> JavaKubeJS <pre><code>root.addServerEventListener(UIEvents.CLICK, e -&gt; {\n    LDLib2.LOGGER.info(\"Triggered on the server\";\n});\n</code></pre> <pre><code>root.addServerEventListener(UIEvents.CLICK, e =&gt; {\n    console.log(\"Triggered on the server\");\n});\n</code></pre> <p>\u8981\u79fb\u9664\u76d1\u542c\u5668\uff0c\u8c03\u7528 <code>removeEventListener(...)</code>\u3002 \u786e\u4fdd useCapture \u6807\u5fd7\u4e0e\u76d1\u542c\u5668\u6ce8\u518c\u65f6\u7684\u65b9\u5f0f\u5339\u914d\uff1a</p> JavaKubeJS <pre><code>UIEventListener onClick = e -&gt; LDLib2.LOGGER.info(\"clicked!\");\n\nbutton.addEventListener(UIEvents.CLICK, onClick);       // bubble\nroot.addEventListener(UIEvents.CLICK, onClick, true);   // capture\n\nbutton.removeEventListener(UIEvents.CLICK, onClick);          // \u79fb\u9664\u5192\u6ce1\u76d1\u542c\u5668\nroot.removeEventListener(UIEvents.CLICK, onClick, true);      // \u79fb\u9664\u6355\u83b7\u76d1\u542c\u5668\n</code></pre> <pre><code>let onClick = UIEventListener.creatre(e =&gt; LDLib2.LOGGER.info(\"clicked!\"));\n\nbutton.addEventListener(UIEvents.CLICK, onClick);       // bubble\nroot.addEventListener(UIEvents.CLICK, onClick, true);   // capture\n\nbutton.removeEventListener(UIEvents.CLICK, onClick);          // \u79fb\u9664\u5192\u6ce1\u76d1\u542c\u5668\nroot.removeEventListener(UIEvents.CLICK, onClick, true);      // \u79fb\u9664\u6355\u83b7\u76d1\u542c\u5668\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/event/#_7","title":"\u4e8b\u4ef6\u53c2\u8003","text":"<p>\u5f53\u7528\u6237\u4e0e\u5143\u7d20\u4ea4\u4e92\u5e76\u6539\u53d8\u5176\u72b6\u6001\u65f6\uff0cLDLib2 \u4f1a\u5f15\u53d1\u4e8b\u4ef6\u3002\u4e8b\u4ef6\u8bbe\u8ba1\u7c7b\u4f3c\u4e8e HTML \u5143\u7d20\u7684\u4e8b\u4ef6\u63a5\u53e3\u3002</p> <p>\u4e8b\u4ef6\u7c7b\u578b\u57fa\u4e8e <code>UIEvent.class</code> \u5f62\u6210\u4e00\u4e2a\u5c42\u6b21\u7ed3\u6784\u3002\u6bcf\u4e2a\u4e8b\u4ef6\u65cf\u5b9e\u73b0\u4e00\u4e2a\u63a5\u53e3\uff0c\u8be5\u63a5\u53e3\u5b9a\u4e49\u4e86\u540c\u4e00\u65cf\u6240\u6709\u4e8b\u4ef6\u7684\u5171\u540c\u7279\u5f81\u3002</p> <p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5217\u51fa\u4e86\u6240\u6709 UI \u5143\u7d20\u53ef\u7528\u7684\u5e38\u89c1\u4e8b\u4ef6\u3002\u9009\u62e9\u4e0b\u9762\u5217\u51fa\u7684\u4efb\u4f55\u4e8b\u4ef6\u7c7b\u578b\u4ee5\u83b7\u53d6\u6709\u5173\u8be5\u4e8b\u4ef6\u7684\u66f4\u591a\u4fe1\u606f\u4ee5\u53ca API \u6587\u6863\u7684\u94fe\u63a5\u3002</p> <p>Note</p> <p>\u6211\u4eec\u5efa\u8bae\u4f7f\u7528 <code>UIEvents.xxx</code> \u800c\u4e0d\u662f\u4e8b\u4ef6\u7c7b\u578b\u5b57\u7b26\u4e32\u3002</p>"},{"location":"zh/ldlib2/ui/preliminary/event/#_8","title":"\u9f20\u6807\u4e8b\u4ef6","text":"<p>\u9f20\u6807\u4e8b\u4ef6\u662f\u6700\u5e38\u7528\u7684\u4e8b\u4ef6\u3002\u5f53\u5904\u7406\u5668\u5f00\u59cb\u6355\u83b7\u9f20\u6807\u540e\u53d1\u9001\u7684\u4e8b\u4ef6\u3002</p> \u4e8b\u4ef6 \u63cf\u8ff0 \u6355\u83b7\u5411\u4e0b \u5192\u6ce1\u5411\u4e0a \u652f\u6301\u670d\u52a1\u5668 <code>mouseDown</code> \u5f53\u7528\u6237\u6309\u4e0b\u9f20\u6807\u6309\u94ae\u65f6\u89e6\u53d1\u3002 \u2705 \u2705 \u2705 <code>mouseUp</code> \u5f53\u7528\u6237\u91ca\u653e\u9f20\u6807\u6309\u94ae\u65f6\u89e6\u53d1\u3002 \u2705 \u2705 \u2705 <code>mouseClick</code> \u5f53\u7528\u6237\u70b9\u51fb\u9f20\u6807\u6309\u94ae\uff08\u6309\u4e0b + \u91ca\u653e\uff09\u65f6\u89e6\u53d1\u3002 \u2705 \u2705 \u2705 <code>doubleClick</code> \u5f53\u7528\u6237\u53cc\u51fb\u9f20\u6807\u6309\u94ae\u65f6\u89e6\u53d1\u3002 \u2705 \u2705 \u2705 <code>mouseMove</code> \u5f53\u9f20\u6807\u5728\u5143\u7d20\u4e0a\u79fb\u52a8\u65f6\u89e6\u53d1\u3002 \u2705 \u2705 \u2705 <code>mouseEnter</code> \u5f53\u9f20\u6807\u8fdb\u5165\u5143\u7d20\u6216\u5176\u5b50\u5143\u7d20\u4e4b\u4e00\u65f6\u89e6\u53d1\u3002 \u2705 \u274c \u2705 <code>mouseLeave</code> \u5f53\u9f20\u6807\u79bb\u5f00\u5143\u7d20\u6216\u5176\u5b50\u5143\u7d20\u4e4b\u4e00\u65f6\u89e6\u53d1\u3002 \u2705 \u274c \u2705 <code>mouseWheel</code> \u5f53\u7528\u6237\u6eda\u52a8\u9f20\u6807\u6eda\u8f6e\u65f6\u89e6\u53d1\u3002 \u2705 \u2705 \u2705 \u5b57\u6bb5 \u63cf\u8ff0 \u652f\u6301\u7684\u4e8b\u4ef6 <code>x</code> \u9f20\u6807\u4f4d\u7f6e x \u5168\u90e8 <code>y</code> \u9f20\u6807\u4f4d\u7f6e y \u5168\u90e8 <code>button</code> \u9f20\u6807\u6309\u94ae\u4ee3\u7801 (0 - \u5de6\u952e, 1 - \u53f3\u952e, 2 - \u4e2d\u952e, \u5176\u4ed6...) <code>mouseDown</code> <code>mouseUp</code> <code>mouseClick</code> <code>doubleClick</code> <code>deltaX</code> \u6eda\u52a8\u589e\u91cf x <code>mouseWheel</code> <code>deltaY</code> \u6eda\u52a8\u589e\u91cf y <code>mouseWheel</code> <p>\u7528\u6cd5</p> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.DOUBLE_CLICK, e -&gt; {\n    LDLib2.LOGGER.info(\"double click {} with button {}\", e.target, e.button)\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.DOUBLE_CLICK, e =&gt; {\n    console.log(`double click ${e.target} with button ${e.button}`)\n});\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/event/#_9","title":"\u62d6\u653e\u4e8b\u4ef6","text":"<p>\u62d6\u653e\u4e8b\u4ef6\u5728\u62d6\u62fd\u64cd\u4f5c\u671f\u95f4\u6d3e\u53d1\u3002 \u8fd9\u4e9b\u4e8b\u4ef6\u4ec5\u5728\u5ba2\u6237\u7aef\u751f\u6548\uff0c\u4e0d\u4f1a\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002</p> \u4e8b\u4ef6 \u63cf\u8ff0 \u6355\u83b7\u5411\u4e0b \u5192\u6ce1\u5411\u4e0a \u652f\u6301\u670d\u52a1\u5668 <code>dragEnter</code> \u5f53\u6307\u9488\u5728\u62d6\u62fd\u64cd\u4f5c\u671f\u95f4\u8fdb\u5165\u5143\u7d20\u65f6\u89e6\u53d1\u3002 \u2705 \u274c \u274c <code>dragLeave</code> \u5f53\u6307\u9488\u5728\u62d6\u62fd\u64cd\u4f5c\u671f\u95f4\u79bb\u5f00\u5143\u7d20\u65f6\u89e6\u53d1\u3002 \u2705 \u274c \u274c <code>dragUpdate</code> \u5f53\u6307\u9488\u5728\u62d6\u62fd\u8fc7\u7a0b\u4e2d\u5728\u5143\u7d20\u4e0a\u79fb\u52a8\u65f6\u89e6\u53d1\u3002 \u2705 \u2705 \u274c <code>dragSourceUpdate</code> \u62d6\u62fd\u6e90\u5728\u62d6\u62fd\u65f6\u89e6\u53d1\u3002 \u2705 \u274c \u274c <code>dragPerform</code> \u5f53\u88ab\u62d6\u62fd\u5bf9\u8c61\u5728\u5143\u7d20\u4e0a\u91ca\u653e\u65f6\u89e6\u53d1\u3002 \u2705 \u274c \u274c <code>dragEnd</code> \u62d6\u62fd\u64cd\u4f5c\u7ed3\u675f\u65f6\u5728\u62d6\u62fd\u6e90\u4e0a\u89e6\u53d1\u3002 \u2705 \u274c \u274c \u5b57\u6bb5 \u63cf\u8ff0 \u652f\u6301\u7684\u4e8b\u4ef6 <code>x</code> \u9f20\u6807\u4f4d\u7f6e x \u5168\u90e8 <code>y</code> \u9f20\u6807\u4f4d\u7f6e y \u5168\u90e8 <code>relatedTarget</code> \u5982\u679c relatedTarget \u4e0d\u4e3a null\uff0c\u8868\u793a\u6709\u65b0\u7684\u5143\u7d20\u8fdb\u5165\u3002 <code>dragLeave</code> <code>deltaX</code> \u62d6\u62fd\u589e\u91cf x \u5168\u90e8 <code>deltaY</code> \u62d6\u62fd\u589e\u91cf y \u5168\u90e8 <code>dragStartX</code> \u62d6\u62fd\u524d\u7684\u8d77\u59cb\u4f4d\u7f6e x \u5168\u90e8 <code>dragStartY</code> \u62d6\u62fd\u524d\u7684\u8d77\u59cb\u4f4d\u7f6e y \u5168\u90e8 <code>dragHandler</code> DragHandler \u7528\u4e8e\u5904\u7406\u62d6\u62fd\u4e8b\u4ef6\u3002 \u5168\u90e8 <p>\u6240\u6709\u62d6\u653e\u4e8b\u4ef6\u53ea\u6709\u5728\u8c03\u7528 <code>startDrag</code> \u5f00\u59cb\u62d6\u62fd\u540e\u624d\u4f1a\u88ab\u89e6\u53d1\u3002\u62d6\u653e\u751f\u547d\u5468\u671f\u5982\u4e0b\uff1a</p> <ol> <li>\u8981\u89e6\u53d1\u62d6\u62fd\uff0c\u4f8b\u5982\uff0c\u5728\u9f20\u6807\u4e8b\u4ef6\u4e2d\uff0c\u53ef\u4ee5\u8c03\u7528 <code>startDrag</code>\u3002</li> <li>\u4f7f\u7528\u62d6\u62fd\u4e8b\u4ef6\u505a\u4e9b\u4ec0\u4e48\uff0c<code>dragEnter</code>\u3001<code>dragLeave</code>\u3001<code>dragUpdate</code> \u548c <code>dragSourceUpdate</code>\uff08\u5982\u679c\u5b9a\u4e49\u4e86\u62d6\u62fd\u6e90\uff09\u3002</li> <li>\u5f53\u62d6\u62fd\u5b8c\u6210\u65f6\uff0c\u89e6\u53d1 <code>dragPerform</code> \u548c <code>dragEnd</code>\uff08\u5982\u679c\u5b9a\u4e49\u4e86\u62d6\u62fd\u6e90\uff09\u3002</li> </ol> <p>\u65b9\u6cd5\uff1a<code>DragHandler.startDrag(Object draggingObject, IGuiTexture dragTexture, UIElement dragSource)</code></p> <p>\u53c2\u6570\uff1a</p> <ul> <li><code>draggingObject</code>\uff1a\u6b63\u5728\u62d6\u62fd\u7684\u5bf9\u8c61\uff1b\u53ef\u4ee5\u662f\u4efb\u4f55\u7c7b\u578b\u4ee5\u8868\u793a\u62d6\u62fd\u8d1f\u8f7d</li> <li><code>dragTexture</code>\uff1a\u7528\u4e8e\u89c6\u89c9\u4e0a\u8868\u793a\u62d6\u62fd\u64cd\u4f5c\u7684\u7eb9\u7406</li> <li><code>dragSource</code>\uff1a\u4f5c\u4e3a\u62d6\u62fd\u64cd\u4f5c\u6e90\u7684 <code>UIElement</code></li> </ul> <p>Note</p> <p><code>dragSourceUpdate</code> \u548c <code>dragEnd</code> \u4ec5\u6d3e\u53d1\u7ed9\u62d6\u62fd\u6e90\u3002</p> <p>\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>UIElement.startDrag</code> \u6765\u5f00\u59cb\u62d6\u62fd\uff0c\u5b83\u53ef\u4ee5\u5e2e\u52a9\u4f60\u76f4\u63a5\u4f20\u9012 <code>dragSource</code>\u3002</p> <p>\u7528\u6cd5</p> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    // \u9f20\u6807\u6309\u4e0b\u65f6\u5f00\u59cb\u62d6\u62fd\n    elem.startDrag(null, null);\n});\nelem.addEventListener(UIEvents.DRAG_SOURCE_UPDATE, e -&gt; {\n    LDLib2.LOGGER.info(\"{} dragged ({}, {})\", e.target, e.deltaX, e.deltaY)\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.MOUSE_DOWN, e =&gt; {\n    // \u9f20\u6807\u6309\u4e0b\u65f6\u5f00\u59cb\u62d6\u62fd\n    elem.startDrag(null, null);\n});\nelem.addEventListener(UIEvents.DRAG_SOURCE_UPDATE, e =&gt; {\n    copnsole.log(`${e.target} dragged (${e.deltaX}, ${e.deltaY})`)\n});\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/event/#_10","title":"\u7126\u70b9\u4e8b\u4ef6","text":"<p>\u5f53 <code>\u53ef\u805a\u7126</code> \u5143\u7d20\u83b7\u5f97\u6216\u5931\u53bb\u7126\u70b9\u65f6\uff0c\u4f1a\u6d3e\u53d1\u7126\u70b9\u4e8b\u4ef6\u3002</p> \u4e8b\u4ef6 \u63cf\u8ff0 \u6355\u83b7\u5411\u4e0b \u5192\u6ce1\u5411\u4e0a \u652f\u6301\u670d\u52a1\u5668 <code>focusIn</code> \u5f53\u5143\u7d20\u5373\u5c06\u83b7\u5f97\u7126\u70b9\u65f6\u89e6\u53d1\u3002 \u2705 \u274c \u274c <code>focus</code> \u5f53\u5143\u7d20\u83b7\u5f97\u7126\u70b9\u540e\u89e6\u53d1\u3002 \u2705 \u274c \u2705 <code>focusOut</code> \u5f53\u5143\u7d20\u5373\u5c06\u5931\u53bb\u7126\u70b9\u65f6\u89e6\u53d1\u3002 \u2705 \u274c \u274c <code>blur</code> \u5f53\u5143\u7d20\u5931\u53bb\u7126\u70b9\u540e\u89e6\u53d1\u3002 \u2705 \u274c \u2705 \u5b57\u6bb5 \u63cf\u8ff0 \u652f\u6301\u7684\u4e8b\u4ef6 <code>relatedTarget</code> \u5bf9\u4e8e <code>focusIn</code> \u548c <code>focus</code>\uff0c\u6307\u4e0a\u4e00\u4e2a\u83b7\u5f97\u7126\u70b9\u7684\u5143\u7d20\u3002  \u5bf9\u4e8e <code>focusOut</code> \u548c <code>blur</code>\uff0c\u6307\u4e0a\u4e00\u4e2a\u5931\u53bb\u7126\u70b9\u7684\u5143\u7d20\u3002 \u5168\u90e8 <p>Note</p> <ul> <li><code>focusIn</code> \u548c <code>focusOut</code> \u4e0d\u4f1a\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002</li> <li><code>relatedTarget</code> \u8868\u793a\u6b63\u5728\u5931\u53bb\u6216\u83b7\u5f97\u7126\u70b9\u7684\u5143\u7d20\u3002</li> </ul> <p>\u7528\u6cd5</p> JavaKubeJS <pre><code>elem.setFocusable(true)\nelem.addEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    // \u8bf7\u6c42\u7126\u70b9\n    elem.focus();\n});\nelem.addEventListener(UIEvents.FOCUS, e -&gt; {\n    LDLib2.LOGGER.info(\"{} gained the focus\", elem);\n});\n</code></pre> <pre><code>elem.setFocusable(true)\nelem.addEventListener(UIEvents.MOUSE_DOWN, e =&gt; {\n    // \u8bf7\u6c42\u7126\u70b9\n    elem.focus();\n});\nelem.addEventListener(UIEvents.FOCUS, e =&gt; {\n    console.log(`${elem} gained the focus`);\n});\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/event/#_11","title":"\u952e\u76d8\u4e8b\u4ef6","text":"<p>\u952e\u76d8\u4e8b\u4ef6\u6d3e\u53d1\u7ed9\u5f53\u524d\u62e5\u6709 \u7126\u70b9 \u7684\u5143\u7d20\u3002</p> \u4e8b\u4ef6 \u63cf\u8ff0 \u6355\u83b7\u5411\u4e0b \u5192\u6ce1\u5411\u4e0a \u652f\u6301\u670d\u52a1\u5668 <code>keyDown</code> \u5f53\u7528\u6237\u5728\u952e\u76d8\u4e0a\u6309\u4e0b\u6309\u952e\u65f6\u89e6\u53d1\u3002 \u2705 \u2705 \u2705 <code>keyUp</code> \u5f53\u7528\u6237\u5728\u952e\u76d8\u4e0a\u91ca\u653e\u6309\u952e\u65f6\u89e6\u53d1\u3002 \u2705 \u2705 \u2705 \u5b57\u6bb5 \u63cf\u8ff0 \u652f\u6301\u7684\u4e8b\u4ef6 <code>keyCode</code> \u6309\u952e\u4ee3\u7801 \u5168\u90e8 <code>scanCode</code> \u626b\u63cf\u4ee3\u7801 \u5168\u90e8 <code>modifiers</code> \u4fee\u9970\u952e \u5168\u90e8 <p>\u7528\u6cd5</p> JavaKubeJS <pre><code>elem.setFocusable(true)\nelem.addEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    // \u8bf7\u6c42\u7126\u70b9\n    elem.focus();\n});\nelem.addEventListener(UIEvents.KEY_DOWN, e -&gt; {\n    LDLib2.LOGGER.info(\"key {} pressed\", e.keyCode);\n});\n</code></pre> <pre><code>elem.setFocusable(true)\nelem.addEventListener(UIEvents.MOUSE_DOWN, e =&gt; {\n    // \u8bf7\u6c42\u7126\u70b9\n    elem.focus();\n});\nelem.addEventListener(UIEvents.KEY_DOWN, e =&gt; {\n    console.log(`key ${e.keyCode} pressed`)\n});\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/event/#_12","title":"\u6587\u672c\u8f93\u5165\u4e8b\u4ef6","text":"<p>\u6587\u672c\u8f93\u5165\u4e8b\u4ef6\u7528\u4e8e\u5b57\u7b26\u7ea7\u8f93\u5165\uff0c\u4f8b\u5982\u5728\u6587\u672c\u5b57\u6bb5\u4e2d\u952e\u5165\uff0c\u540c\u6837\u6d3e\u53d1\u7ed9\u5f53\u524d\u62e5\u6709 \u7126\u70b9 \u7684\u5143\u7d20\u3002</p> \u4e8b\u4ef6 \u63cf\u8ff0 \u6355\u83b7\u5411\u4e0b \u5192\u6ce1\u5411\u4e0a \u652f\u6301\u670d\u52a1\u5668 <code>charTyped</code> \u5f53\u5411\u5143\u7d20\u8f93\u5165\u5b57\u7b26\u65f6\u89e6\u53d1\u3002 \u274c \u274c \u2705 \u5b57\u6bb5 \u63cf\u8ff0 \u652f\u6301\u7684\u4e8b\u4ef6 <code>codePoint</code> \u4ee3\u7801\u70b9 \u5168\u90e8 <code>modifiers</code> \u4fee\u9970\u952e \u5168\u90e8 <p>\u7528\u6cd5</p> JavaKubeJS <pre><code>elem.setFocusable(true)\nelem.addEventListener(UIEvents.MOUSE_DOWN, e -&gt; {\n    // \u8bf7\u6c42\u7126\u70b9\n    elem.focus();\n});\nelem.addEventListener(UIEvents.CHAR_TYPED, e -&gt; {\n    LDLib2.LOGGER.info(\"key {} pressed\", e.codePoint);\n});\n</code></pre> <pre><code>elem.setFocusable(true)\nelem.addEventListener(UIEvents.MOUSE_DOWN, e =&gt; {\n    // \u8bf7\u6c42\u7126\u70b9\n    elem.focus();\n});\nelem.addEventListener(UIEvents.CHAR_TYPED, e =&gt; {\n    console.log(`key ${e.codePoint} pressed`)\n});\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/event/#_13","title":"\u60ac\u505c\u63d0\u793a\u4e8b\u4ef6","text":"<p>\u5f53\u9700\u8981\u663e\u793a\u52a8\u6001\u63d0\u793a\u4fe1\u606f\u65f6\uff0c\u4f1a\u6d3e\u53d1\u60ac\u505c\u63d0\u793a\u4e8b\u4ef6\u3002</p> \u4e8b\u4ef6 \u63cf\u8ff0 \u6355\u83b7\u5411\u4e0b \u5192\u6ce1\u5411\u4e0a \u652f\u6301\u670d\u52a1\u5668 <code>hoverTooltips</code> \u89e6\u53d1\u4ee5\u4e3a\u5143\u7d20\u63d0\u4f9b\u60ac\u505c\u63d0\u793a\u5185\u5bb9\u3002 \u274c \u274c \u274c \u5b57\u6bb5 \u63cf\u8ff0 \u652f\u6301\u7684\u4e8b\u4ef6 <code>hoverTooltips</code> \u8bbe\u7f6e\u60a8\u8981\u663e\u793a\u7684\u60ac\u505c\u63d0\u793a \u5168\u90e8 <p>TooltipComponent</p> <p> <code>hoverTooltips</code> \u5141\u8bb8\u60a8\u5728\u6587\u672c\u7ec4\u4ef6\u540e\u8ffd\u52a0 <code>TooltipComponent</code>\u3002\u60a8\u53ef\u4ee5\u4f7f\u7528 <code>ModularUITooltipComponent</code> \u5c06 LDLib2 UI \u9644\u52a0\u5230\u63d0\u793a\u4e2d\u3002</p> <p>\u7528\u6cd5</p> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.HOVER_TOOLTIPS, e -&gt; {\n    e.hoverTooltips = HoverTooltips.empty()\n        // \u6dfb\u52a0\u6587\u672c\u63d0\u793a\n        .append(Component.literal(\"Hello\"), Component.literal(\"World\"))\n        // \u6dfb\u52a0\u56fe\u7247\n        .tooltipComponent(new ModularUITooltipComponent(new UIElement().layout(layout -&gt; {\n            layout.width(100).height(100);\n        }).style(style -&gt; style.background(SpriteTexture.of(\"ldlib2:textures/gui/icon.png\")))));\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.HOVER_TOOLTIPS, e =&gt; {\n    e.hoverTooltips = HoverTooltips.empty()\n        // \u6dfb\u52a0\u6587\u672c\u63d0\u793a\n        .append(\"Hello\", \"World\");\n        // \u6dfb\u52a0\u56fe\u7247\n        .tooltipComponent(new ModularUITooltipComponent(new UIElement().layout(layout =&gt; {\n            layout.width(100).height(100);\n        }).style(style =&gt; style.background(SpriteTexture.of(\"ldlib2:textures/gui/icon.png\")))));\n});\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/event/#_14","title":"\u547d\u4ee4\u4e8b\u4ef6","text":"<p>\u547d\u4ee4\u4e8b\u4ef6\u7528\u4e8e\u5904\u7406\u9ad8\u7ea7 UI \u547d\u4ee4\uff08\u4f8b\u5982\u590d\u5236\u3001\u7c98\u8d34\u3001\u5168\u9009\uff09\u3002 \u5b83\u4eec\u9075\u5faa\u9a8c\u8bc1 \u2192 \u6267\u884c\u7684\u6d41\u7a0b\u3002\u8981\u5728 <code>validateCommand</code> \u671f\u95f4\u58f0\u660e\u547d\u4ee4\uff0c\u8bf7\u8c03\u7528 <code>UIEvent.stopPropagation()</code>\u3002</p> \u4e8b\u4ef6 \u63cf\u8ff0 \u6355\u83b7\u5411\u4e0b \u5192\u6ce1\u5411\u4e0a \u652f\u6301\u670d\u52a1\u5668 <code>validateCommand</code> \u89e6\u53d1\u4ee5\u68c0\u67e5\u5143\u7d20\u662f\u5426\u53ef\u4ee5\u5904\u7406\u67d0\u4e2a\u547d\u4ee4\u3002 \u274c \u274c \u274c <code>executeCommand</code> \u5f53\u547d\u4ee4\u5728\u5143\u7d20\u4e0a\u6267\u884c\u65f6\u89e6\u53d1\u3002 \u274c \u274c \u274c \u5b57\u6bb5 \u63cf\u8ff0 \u652f\u6301\u7684\u4e8b\u4ef6 <code>keyCode</code> \u6309\u952e\u4ee3\u7801 \u5168\u90e8 <code>scanCode</code> \u626b\u63cf\u4ee3\u7801 \u5168\u90e8 <code>modifiers</code> \u4fee\u9970\u952e \u5168\u90e8 <code>command</code> \u547d\u4ee4 \u5168\u90e8 <p>\u547d\u4ee4</p> \u547d\u4ee4 \u63cf\u8ff0 <code>copy</code> ctrl + c <code>cut</code> ctrl + x <code>paste</code> ctrl + v <code>select-all</code> ctrl + a <code>undo</code> ctrl + z <code>redo</code> ctrl + y / ctrl + shift + z <code>find</code> ctrl + f <code>save</code> ctrl + s <p>Note</p> <p>\u5982\u679c\u68c0\u6d4b\u5230\u547d\u4ee4\u8f93\u5165\u3002\u547d\u4ee4\u4e8b\u4ef6\u5c06\u9996\u5148\u53d1\u9001\u7ed9 <code>focus</code> \u5143\u7d20\uff08\u5982\u679c\u5b58\u5728\uff09\u3002\u5982\u679c\u5b83\u6ca1\u6709\u88ab\u6d88\u8d39\uff0c\u5b83\u5c06\u88ab\u53d1\u9001\u7ed9 UI \u6811\u5143\u7d20\uff0c\u76f4\u5230\u67d0\u4e2a\u5143\u7d20\u6d88\u8d39\u5b83\u4e3a\u6b62\u3002</p> <p>\u7528\u6cd5</p> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.VALIDATE_COMMAND, e -&gt; {\n    if (CommandEvents.COPY.equals(event.command)) {\n        // \u901a\u77e5\u6d88\u8d39\n        event.stopPropagation();\n    }\n});\n\nelem.addEventListener(UIEvents.EXECUTE_COMMAND, e -&gt; {\n    if (CommandEvents.COPY.equals(event.command)) {\n        ClipboardManager.copyDirect(\"data\");\n    }\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.VALIDATE_COMMAND, e =&gt; {\n    if (CommandEvents.COPY == event.command) {\n        // \u901a\u77e5\u6d88\u8d39\n        event.stopPropagation();\n    }\n});\n\nelem.addEventListener(UIEvents.EXECUTE_COMMAND, e =&gt; {\n    if (CommandEvents.COPY == event.command) {\n        ClipboardManager.copyDirect(\"data\");\n    }\n});\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/event/#_15","title":"\u5e03\u5c40\u4e8b\u4ef6","text":"<p>\u5f53\u5143\u7d20\u7684\u5e03\u5c40\u72b6\u6001\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f1a\u6d3e\u53d1\u5e03\u5c40\u4e8b\u4ef6\u3002</p> \u4e8b\u4ef6 \u63cf\u8ff0 \u6355\u83b7\u5411\u4e0b \u5192\u6ce1\u5411\u4e0a \u652f\u6301\u670d\u52a1\u5668 <code>layoutChanged</code> \u5f53\u5143\u7d20\u7684 yoga \u5e03\u5c40\u53d1\u751f\u53d8\u5316\u65f6\u89e6\u53d1\u3002 \u274c \u274c \u274c <p>\u7528\u6cd5</p> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.LAYOUT_CHANGED, e -&gt; {\n    LDLib2.LOGGER.info(\"{} layout changed\", e.target)\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.LAYOUT_CHANGED, e =&gt; {\n    console.log(`${e.target} layout changed`)\n});\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/event/#_16","title":"\u751f\u547d\u5468\u671f\u4e8b\u4ef6","text":"<p>\u751f\u547d\u5468\u671f\u4e8b\u4ef6\u63cf\u8ff0\u4e86\u5143\u7d20\u5728 UI \u6811\u4e2d\u5b58\u5728\u72b6\u6001\u7684\u53d8\u5316\u3002</p> \u4e8b\u4ef6 \u63cf\u8ff0 \u6355\u83b7\u5411\u4e0b \u5192\u6ce1\u5411\u4e0a \u652f\u6301\u670d\u52a1\u5668 <code>added</code> \u5f53\u5143\u7d20\u88ab\u6dfb\u52a0\u5230 UI \u6811\u65f6\u89e6\u53d1\u3002 \u274c \u274c \u274c <code>removed</code> \u5f53\u5143\u7d20\u4ece UI \u6811\u4e2d\u79fb\u9664\u65f6\u89e6\u53d1\u3002 \u274c \u274c \u274c <code>muiChanged</code> \u5f53\u5143\u7d20\u7684 <code>ModularUI</code> \u5b9e\u4f8b\u66f4\u6539\u65f6\u89e6\u53d1\u3002 \u274c \u274c \u274c <p>Note</p> <p><code>removed</code> \u4e0d\u4ec5\u5728\u5143\u7d20\u79fb\u9664\u65f6\u53d1\u9001\uff0cUI \u5173\u95ed\u65f6\u4e5f\u4f1a\u53d1\u9001\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u6b64\u4e8b\u4ef6\u6765\u91ca\u653e\u8d44\u6e90\u3002</p> <p>\u7528\u6cd5</p> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.REMOVED, e -&gt; {\n    // \u4e3a\u5b89\u5168\u8d77\u89c1\u5728\u6b64\u91ca\u653e\u8d44\u6e90\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.REMOVED, e =&gt; {\n    // \u4e3a\u5b89\u5168\u8d77\u89c1\u5728\u6b64\u91ca\u653e\u8d44\u6e90\n});\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/event/#_17","title":"\u523b\u4e8b\u4ef6","text":"<p>\u523b\u4e8b\u4ef6\u5728\u5143\u7d20\u5904\u4e8e\u6d3b\u52a8\u4e14\u53ef\u89c1\u72b6\u6001\u65f6\uff0c\u6bcf\u6e38\u620f\u523b\u6d3e\u53d1\u4e00\u6b21\u3002</p> \u4e8b\u4ef6 \u63cf\u8ff0 \u6355\u83b7\u5411\u4e0b \u5192\u6ce1\u5411\u4e0a \u652f\u6301\u670d\u52a1\u5668 <code>tick</code> \u5f53\u5143\u7d20\u5904\u4e8e\u6d3b\u52a8\u5e76\u663e\u793a\u72b6\u6001\u65f6\uff0c\u6bcf\u523b\u89e6\u53d1\u4e00\u6b21\u3002 \u274c \u274c \u2705 <p>Note</p> <ul> <li><code>tick</code> \u4e0d\u4f1a\u81ea\u52a8\u53d1\u9001\u5230\u670d\u52a1\u5668\u3002</li> <li>\u5982\u679c\u9700\u8981\uff0c\u60a8\u4ecd\u7136\u53ef\u4ee5\u5728\u670d\u52a1\u5668\u7aef\u76d1\u542c\u5b83\u3002</li> </ul> JavaKubeJS <pre><code>elem.addEventListener(UIEvents.TICK, e -&gt; {\n});\n</code></pre> <pre><code>elem.addEventListener(UIEvents.TICK, e =&gt; {\n});\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/layout/","title":"Layout","text":""},{"location":"zh/ldlib2/ui/preliminary/layout/#layout","title":"Layout","text":"<p> Since 2.1.0 </p> <p>Info</p> <p>Grid layout support will be introduced into Yoga in the future.</p> <p>LDLib2 UI layout is built on top of the Yoga layout engine.</p> <p>Yoga is an embeddable layout system used in popular UI frameworks such as React Native. It is not a UI framework and does not perform any rendering. Its sole responsibility is calculating the size and position of elements.</p> <p>LDLib2 adopts a FlexBox-based layout model, which allows you to describe complex UI structures in a flexible and predictable way.</p>"},{"location":"zh/ldlib2/ui/preliminary/layout/#setting-layout-properties","title":"Setting Layout Properties","text":"<p>Each <code>UIElement</code> owns a layout object backed by Yoga. You can configure layout properties in multiple ways, depending on your preference and use case.</p> <p>In addition to the examples below, layout properties can also be defined through LSS (LDLib Style Sheet), which is especially useful for separating layout logic from UI structure.</p> JavaKubeJS <pre><code>var element = new UIElement();\n\n// Set layout directly\nelement.getLayout()\n        .flexDirection(YogaFlexDirection.ROW)\n        .width(150)\n        .heightPercent(100)\n        .marginAll(10)\n        .paddingAll(10);\n\n// Set layout using a chaining lambda\nelement.layout(layout -&gt; layout\n        .flexDirection(YogaFlexDirection.ROW)\n        .width(150)\n        .heightPercent(100)\n        .marginAll(10)\n        .paddingAll(10)\n);\n\n// Set layout via stylesheet (LSS)\nelement.lss(\"flex-direction\", \"row\");\nelement.lss(\"width\", 150);\nelement.lss(\"height-percent\", 100);\nelement.lss(\"margin-all\", 10);\nelement.lss(\"padding-all\", 10);\n</code></pre> <pre><code>let element = new UIElement();\n\n// Set layout directly\nelement.getLayout()\n        .flexDirection(YogaFlexDirection.ROW)\n        .width(150)\n        .heightPercent(100)\n        .marginAll(10)\n        .paddingAll(10);\n\n// Set layout using a chaining lambda\nelement.layout(layout -&gt; layout\n        .flexDirection(YogaFlexDirection.ROW)\n        .width(150)\n        .heightPercent(100)\n        .marginAll(10)\n        .paddingAll(10)\n);\n\n// Set layout via stylesheet (LSS)\nelement.lss(\"flex-direction\", \"row\");\nelement.lss(\"width\", 150);\nelement.lss(\"height-percent\", 100);\nelement.lss(\"margin-all\", 10);\nelement.lss(\"padding-all\", 10);\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/layout/#learning-flex-layout","title":"Learning Flex Layout","text":"<p>Info</p> <p>If you are already familiar with Flexbox, Yoga layout should feel very intuitive. If not, we recommend reading the official Yoga documentation for a complete explanation.</p> <p>For a lighter introduction, this chapter focuses on the most commonly used Flex concepts in LDLib2 UI.</p>"},{"location":"zh/ldlib2/ui/preliminary/layout/#ui-elements-and-hierarchy","title":"UI Elements and Hierarchy","text":"<p>In LDLib2 UI, the interface is composed of UI elements (<code>UIElement</code>).</p> <ul> <li>A UI element represents a visual container such as a panel, button, text field, or image.</li> <li>UI elements can contain other UI elements, forming a UI hierarchy (also referred to as a layout tree).</li> </ul> <p>Complex interfaces are built by combining multiple UI elements into nested hierarchies, with layout and styling rules applied at different levels.</p> <pre><code>flowchart LR\n  R([UIElement])\n\n  R --- A([UIElement])\n  A --- A1([Label])\n  A --- A2([Toggle])\n  A --- A3([Slider])\n\n  R --- B([UIElement])\n  B --- B1([Label])\n  B --- B2([Toggle])\n\n  linkStyle 0,1,2,3,4,5,6 stroke:#9aa3ab,stroke-width:2px,stroke-dasharray:6 4;</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/layout/#positioning-ui-elements","title":"Positioning UI Elements","text":"<p>When designing a UI layout, think of each screen as a collection of rectangular containers arranged horizontally or vertically.</p> <p>Break down the layout into logical sections, then refine each section using child containers to organize content.</p>"},{"location":"zh/ldlib2/ui/preliminary/layout/#positioning-modes","title":"Positioning Modes","text":"<p>Yoga supports two primary positioning modes:</p>"},{"location":"zh/ldlib2/ui/preliminary/layout/#relative-positioning-default","title":"Relative positioning (default)","text":"<p>Elements participate in the Flexbox layout of their parent container.</p> <ul> <li>Child elements are arranged according to the parent\u2019s Flex Direction</li> <li>Element size and position respond dynamically to:<ul> <li>Parent layout rules (padding, alignment, spacing)</li> <li>The element\u2019s own size constraints (width, height, min/max size)</li> </ul> </li> </ul> <p>If layout constraints conflict, the layout engine resolves them automatically. For example, an element wider than its container may overflow.</p>"},{"location":"zh/ldlib2/ui/preliminary/layout/#absolute-positioning","title":"Absolute positioning","text":"<p>Elements are positioned relative to their parent container, but do not participate in Flexbox layout calculations.</p> <ul> <li>Flex properties such as Grow, Shrink, or alignment are ignored</li> <li>Elements may overlap other content</li> <li>Position is controlled using offsets such as <code>Top</code>, <code>Right</code>, <code>Bottom</code>, and <code>Left</code></li> </ul> On the top, the blue ui element has a Relative position, with the parent element using Flex Direction: Row as the Flex setting. On the bottom, the blue ui element uses Absolute position and ignores the parent element\u2019s Flexbox rules."},{"location":"zh/ldlib2/ui/preliminary/layout/#size-settings","title":"Size Settings","text":"<p>UI elements are containers by default.</p> <ul> <li>Without explicit size rules, an element may expand to fill available space or collapse to the size of its content</li> <li><code>Width</code> and <code>Height</code> define the element\u2019s base size</li> <li><code>Min</code> and <code>Max</code> values limit how much an element can grow or shrink</li> <li>if you set an <code>Aspect Rate</code>, one dimension will be decided by the other one</li> <li><code>Overflow</code> controls the clipping of an element\u2019s content. The default value is <code>visible</code>, which means the element\u2019s content isn\u2019t clipped to the element\u2019s bounds. If you set overflow to hidden, the element\u2019s content is clipped to the element\u2019s content bounds.</li> <li>Sizes can be expressed in pixels or percentages</li> </ul> <p>These size rules interact with Flexbox settings to determine the final layout.</p> Size settings for a UI element."},{"location":"zh/ldlib2/ui/preliminary/layout/#flex-settings","title":"Flex Settings","text":"<p>Flex settings affect how elements grow or shrink when using Relative positioning. It\u2019s recommended that you experiment with elements to understand their behavior firsthand.</p>"},{"location":"zh/ldlib2/ui/preliminary/layout/#flex-basis","title":"Flex Basis","text":"<p>Defines the initial size of an element before Grow or Shrink is applied.</p>"},{"location":"zh/ldlib2/ui/preliminary/layout/#flex-grow","title":"Flex Grow","text":"<ul> <li><code>Flex Grow &gt; 0</code> allows the element to expand and take available space</li> <li>Higher values receive a larger share of free space</li> <li><code>Flex Grow = 0</code> prevents expansion beyond the base size</li> </ul>"},{"location":"zh/ldlib2/ui/preliminary/layout/#flex-shrink","title":"Flex Shrink","text":"<ul> <li><code>Flex Shrink &gt; 0</code> allows the element to shrink when space is limited</li> <li><code>Flex Shrink = 0</code> prevents shrinking and may cause overflow</li> </ul> <p>Elements with fixed pixel sizes do not respond to Grow or Shrink.</p> Basis, Grow, and Shrink settings. <p>The above example shows how Basis works with the Grow and Shrink options:</p> <ol> <li>The green element with a Basis of 80% occupies 80 percent of the available space.</li> <li>Setting the Grow to 1 allows the green element to expand to the entire space.</li> <li>With a yellow element added, the elements overflow the space. The green element returns to occupying 80 percent of the space.</li> <li>A Shrink setting of 1 makes the green element shrink to fit the yellow element.</li> </ol> <p>Here, both elements have a Shrink value of 1. They shrink equally to fit in the available space.</p>"},{"location":"zh/ldlib2/ui/preliminary/layout/#flex","title":"Flex","text":"<p><code>Flex = 1</code> equals to <code>Flex Grow = 1</code> and <code>Flex Shrink = 1</code>, which is used to set <code>Flex Grow</code> and <code>Flex Shrink</code> at the same time.</p>      In this example, we assume the root container <code>width: 200px</code>.      The right most element set <code>width: 50%</code>. Therefore, the left space is 100px for the left most and middle elements. According to the <code>flex</code> of them, they divided the remaining space in a <code>2:1</code> ratio."},{"location":"zh/ldlib2/ui/preliminary/layout/#how-element-size-is-calculated","title":"\ud83d\udca1 How element size is calculated","text":"<p>When using Relative positioning, the layout engine determines element size in this order:</p> <ol> <li>Compute base size from <code>Width</code> and <code>Height</code></li> <li>Check whether the parent container has extra space or overflow</li> <li>Distribute extra space using <code>Flex Grow</code></li> <li>Reduce size using <code>Flex Shrink</code> if space is insufficient</li> <li>Apply constraints such as <code>Min/Max</code> size and <code>Flex Basis</code></li> <li>Apply the final resolved size</li> </ol>"},{"location":"zh/ldlib2/ui/preliminary/layout/#flex-direction-and-flex-wrapping","title":"Flex Direction and Flex Wrapping","text":"<ul> <li><code>Flex Direction</code> controls whether child elements are laid out in rows or columns</li> <li><code>Flex Wrap</code> controls whether elements stay on a single line or wrap onto additional rows or columns</li> </ul> <p>Child elements follow the order defined in the UI hierarchy.</p>      Parent and child UI element using Relative positioning and different Direction and Wrap combinations."},{"location":"zh/ldlib2/ui/preliminary/layout/#alignment","title":"Alignment","text":"<p>Alignment settings control how child elements are positioned within a container.</p>"},{"location":"zh/ldlib2/ui/preliminary/layout/#align-items","title":"Align Items","text":"<p>Aligns elements along the cross-axis (perpendicular to the Flex Direction):</p>"},{"location":"zh/ldlib2/ui/preliminary/layout/#justify-content","title":"Justify Content","text":"<p>Controls spacing along the main axis:</p> <p>Flex Grow and Shrink values influence how space is distributed.</p>"},{"location":"zh/ldlib2/ui/preliminary/layout/#align-self","title":"Align Self","text":"<p>Allows an individual element to override the parent\u2019s alignment rules.</p>"},{"location":"zh/ldlib2/ui/preliminary/layout/#align-content","title":"Align Content","text":"<p>Controls how multiple rows or columns of flex items are aligned along the cross axis.</p> <p>Note</p> <p><code>Align Content</code> only takes effect when:</p> <ul> <li>The container allows wrapping (<code>flex-wrap: wrap</code>)</li> <li>There are multiple lines of children</li> </ul>      Align and Justify settings applied to a parent element with a Direction set to Row; note that other position and sizing options can affect the final output."},{"location":"zh/ldlib2/ui/preliminary/layout/#margin-and-padding","title":"Margin and Padding","text":"<p>LDLib2 UI follows a box model similar to CSS:</p> <ul> <li>Content: the element\u2019s actual content</li> <li>Padding: space between content and border</li> <li>Border: optional boundary around the element, (avoid use it).</li> <li>Margin: space outside the element, separating it from others</li> </ul>      A UI element with defined Size, Margin, Border, and Padding settings; elements with a fixed Width or Height can overflow the space."},{"location":"zh/ldlib2/ui/preliminary/modularui/","title":"ModularUI","text":""},{"location":"zh/ldlib2/ui/preliminary/modularui/#modularui","title":"ModularUI","text":"<p> Since 2.1.0 </p> <p>This page introduces the core concepts of the LDLib2 UI system. At runtime, LDLib2 uses a class called <code>ModularUI</code> to manage the entire UI tree. <code>ModularUI</code> is responsible for:</p> <ul> <li>Managing the UI lifecycle</li> <li>Handling input events</li> <li>Applying styles and stylesheets</li> <li>Coordinating rendering</li> <li>Synchronizing data between client and server (when used with Menus)</li> </ul> <p>In short, <code>ModularUI</code> is the central controller of a UI instance.</p>"},{"location":"zh/ldlib2/ui/preliminary/modularui/#how-modularui-works","title":"How <code>ModularUI</code> Works","text":"<p>The following diagram shows how <code>ModularUI</code> connects Minecraft systems with the UI tree: </p><pre><code>flowchart LR\n    Screen[\"Screen&lt;br/&gt;(Mouse / Keyboard Input)\"]\n    Menu[\"Menu&lt;br/&gt;(Server Data)\"]\n\n    %% internal structure\n    subgraph ModularUI[\"ModularUI\"]\n        direction TB\n        UITree[\"UI Tree\"]\n        Style[\"Style Engine&lt;br/&gt;(LSS / Stylesheets)\"]\n        Events[\"Event System&lt;br/&gt;(Dispatch / Bubble)\"]\n        Render[\"Renderer&lt;br/&gt;(Draw Commands)\"]\n        Bindings[\"Data Binding&lt;br/&gt;(C&lt;--&gt;S)\"]\n\n        UITree &lt;--&gt; Style\n        UITree &lt;--&gt; Events\n        UITree &lt;--&gt; Render\n        UITree &lt;--&gt; Bindings\n    end\n\n    %% external connections\n    Screen --&gt;|Input Events| ModularUI\n    Menu --&gt;|Data Sync| ModularUI\n    ModularUI --&gt;|Render Output| Screen\n    ModularUI --&gt;|Data Sync / RPC Event| Menu</code></pre><p></p>"},{"location":"zh/ldlib2/ui/preliminary/modularui/#modularui-apis","title":"<code>ModularUI</code> APIs","text":"<p>There are two methods to create a <code>ModualrUI</code>:</p> <ul> <li><code>ModularUI.of(ui)</code></li> <li><code>ModularUI.of(ui, player)</code></li> </ul> <p>To create a simple <code>client-side</code> only UI, the first one is enough.</p> <p>The second one requires a <code>Player</code> as input, which is NECESSARY if your UI is a <code>menu-based</code> UI and requires data synchronization between client and server. </p>"},{"location":"zh/ldlib2/ui/preliminary/modularui/#general-apis","title":"General APIs","text":"Method Description <code>shouldCloseOnEsc()</code> Whether the UI should close when pressing <code>ESC</code>. <code>shouldCloseOnKeyInventory()</code> Whether the UI should close when pressing the Inventory key (default: <code>E</code>). <code>getTickCounter()</code> Returns how many ticks this <code>ModularUI</code> instance has been active. <code>getWidget()</code> Returns the widget instance used by the Minecraft <code>Screen</code>. <code>getAllElements()</code> Returns an unmodifiable list of all UI elements in the UI tree."},{"location":"zh/ldlib2/ui/preliminary/modularui/#element-query-apis-by-id","title":"Element Query APIs (By ID)","text":"Method Description <code>getElementById(String id)</code> Finds and returns the first UI element with the given ID, or <code>null</code> if not found. <code>getElementsById(String id)</code> Returns all UI elements with the given ID. <code>hasElementWithId(String id)</code> Checks whether at least one element with the given ID exists. <code>getElementCountById(String id)</code> Returns the number of elements with the given ID. <code>getAllElementsById()</code> Returns a copy of the internal mapping from ID to UI elements."},{"location":"zh/ldlib2/ui/preliminary/modularui/#element-query-apis-regex-pattern","title":"Element Query APIs (Regex &amp; Pattern)","text":"Method Description <code>getElementByIdRegex(String pattern)</code> Finds the first element whose ID matches the given regex pattern. <code>getElementsByIdRegex(String pattern)</code> Finds all elements whose IDs match the given regex pattern. <code>getElementByIdPattern(Pattern pattern)</code> Same as above, but uses a precompiled <code>Pattern</code> for better performance. <code>getElementsByIdPattern(Pattern pattern)</code> Returns all elements matching a precompiled regex pattern."},{"location":"zh/ldlib2/ui/preliminary/modularui/#element-query-apis-partial-matching","title":"Element Query APIs (Partial Matching)","text":"Method Description <code>getElementsByIdContains(String substring)</code> Finds all elements whose IDs contain the given substring. <code>getElementsByIdStartsWith(String prefix)</code> Finds all elements whose IDs start with the given prefix. <code>getElementsByIdEndsWith(String suffix)</code> Finds all elements whose IDs end with the given suffix."},{"location":"zh/ldlib2/ui/preliminary/modularui/#element-query-apis-by-type","title":"Element Query APIs (By Type)","text":"Method Description <code>getElementsByType(Class&lt;T&gt; type)</code> Returns all UI elements of the given type. <code>getAllElementsByType()</code> Returns a copy of the internal mapping from element type to UI elements. <p>Note</p> <p>All query methods return copies of internal collections when applicable. Returned lists are safe to modify and will not affect the internal UI tree.</p>"},{"location":"zh/ldlib2/ui/preliminary/modularui/#debug-your-ui","title":"Debug your UI","text":"<p>During development, the UI tree may not always behave as expected, and it can be difficult to understand what is going wrong.</p> <p>You can press <code>F3</code> to enable UI debug mode. When debug mode is active, LDLib2 displays helpful information directly on the screen.</p>"},{"location":"zh/ldlib2/ui/preliminary/screen_and_menu/","title":"Screen and Menu","text":""},{"location":"zh/ldlib2/ui/preliminary/screen_and_menu/#screen-and-menu","title":"Screen and Menu","text":""},{"location":"zh/ldlib2/ui/preliminary/stylesheet/","title":"StyleSheet","text":""},{"location":"zh/ldlib2/ui/preliminary/stylesheet/#stylesheet","title":"StyleSheet","text":"<p>You can style your UI with a <code>LDLib Style Sheet</code> (LSS). LSS files are text files inspired by CSS from HTML. USS syntax is the same as CSS syntax, but USS includes overrides and customizations to work better with LDLib2 UI.</p> <p>LSS allows you to separate presentation from logic, making UI code cleaner and easier to maintain.</p>"},{"location":"zh/ldlib2/ui/preliminary/stylesheet/#what-is-a-style-in-ldlib2","title":"What Is a Style in LDLib2","text":"<p>Before introducing LSS itself, it is important to understand what a Style means in LDLib2 and how styles work internally.</p> <p>If you are familiar with CSS, these concepts should feel natural.</p> <p>A Style in LDLib2 refers to any visual or layout-related configuration that affects how a UI element is rendered, and is not related to server-side logic. Examples include:</p> <ul> <li><code>layout</code> (size, position, flex behavior)</li> <li><code>background</code></li> <li><code>font-size</code>, <code>alignment</code>, and more</li> </ul> <p>In fact, the <code>layout</code> system you already know is itself a type of Style.</p> <p>Each <code>UIElement</code> may define multiple styles, and a single style property can have multiple candidate values coming from different sources.</p> <p>Internally, every UI element maintains a StyleBag, which:</p> <ul> <li>Stores all style values applied to the element</li> <li>Resolves conflicts between styles</li> <li>Computes the final effective style used for rendering</li> </ul> <p>The final style is determined by priority, not by application order.</p>"},{"location":"zh/ldlib2/ui/preliminary/stylesheet/#style-origin-and-priority","title":"Style Origin and Priority","text":"<p>Every style value has a StyleOrigin, which defines where the style comes from and how strong it is.</p> StyleOrigin <pre><code>public enum StyleOrigin {\n    /**\n     * Default style defined by the UI component itself\n     */\n    DEFAULT(0),\n\n    /**\n     * Style defined in an external stylesheet (LSS)\n     */\n    STYLESHEET(2),\n\n    /**\n     * Inline style set directly in code\n     */\n    INLINE(3),\n\n    /**\n     * Style applied by animations\n     */\n    ANIMATION(4),\n\n    /**\n     * Important style that overrides all others\n     */\n    IMPORTANT(5);\n}\n</code></pre> <p>Styles with a higher priority override styles with a lower priority:</p> <p><code>DEFAULT</code> &lt; <code>STYLESHEET</code> &lt; <code>INLINE</code> &lt; <code>ANIMATION</code> &lt; <code>IMPORTANT</code></p> <p>This design ensures that:</p> <ul> <li>Components have sensible defaults</li> <li>Stylesheets define the global look</li> <li>Inline styles can override stylesheets</li> <li>Animations can temporarily override visuals</li> <li><code>IMPORTANT</code> styles always win</li> </ul>"},{"location":"zh/ldlib2/ui/preliminary/stylesheet/#customizable-styles","title":"Customizable Styles","text":"<p>LDLib2 provides multiple ways to customize UI styles. You can freely mix these approaches depending on your needs.</p> <p>Note</p> <p>In this page, we won't introduce all supported styles and their behaviour. Each UI component documents the styles it supports on its own wiki page.</p> <p>Each UI component exposes the <code>Style</code> objects it supports, allowing you to configure styles directly through code.</p> <p>For example, in <code>layout</code>, both <code>#layout(...)</code> and <code>#getLayout()</code> are based on the same underlying <code>Style</code> system. <code>layout</code> is a shared style available on all UI Elements.</p> <p>In addition, some components provide their own specialized styles. For instance, <code>Button</code> exposes a <code>buttonStyle(...)</code> API for configuring button-specific visual properties.</p>"},{"location":"zh/ldlib2/ui/preliminary/stylesheet/#customizing-styles-via-code","title":"Customizing Styles via Code","text":"<p>There are many methods to set styles.</p> JavaKubeJS <pre><code>var button = new Button();\n\n// direct call\nbutton.getStyle()\n    // set background texture\n    .background(SpriteTexture.of(\"photon:textures/icon.png\"));\n    // set tooltips\n    .tooltips(\"This is my tooltips\")\n    // set opacity\n    .opacity(0.5);\n\n// chain call, return button itself for chain calls\nbutton.buttonStyle(style -&gt; {}).style(style -&gt; style\n    .background(SpriteTexture.of(\"photon:textures/icon.png\"));\n    .tooltips(\"This is my tooltips\")\n    .opacity(0.5)\n);\n\n// lss text\nbutton.lss(\"background\", \"sprite(ldlib2:textures/gui/icon.png)\");\nbutton.lss(\"tooltips\", \"This is my tooltips\");\nbutton.lss(\"opacity\", 0.5);\n</code></pre> <pre><code>let button = new Button();\n\n// direct call\nbutton.getStyle()\n    // set background texture\n    .background(SpriteTexture.of(\"photon:textures/icon.png\"));\n    // set tooltips\n    .tooltips(\"This is my tooltips\")\n    // set opacity\n    .opacity(0.5);\n\n // chain call, return button itself for chain calls\nbutton.buttonStyle(style =&gt; {}).style(style =&gt; style\n    .background(SpriteTexture.of(\"photon:textures/icon.png\"));\n    .tooltips(\"This is my tooltips\")\n    .opacity(0.5)\n);\n\n// lss text\nbutton.lss(\"background\", \"sprite(ldlib2:textures/gui/icon.png)\");\nbutton.lss(\"tooltips\", \"This is my tooltips\");\nbutton.lss(\"opacity\", 0.5);\n</code></pre> <p>All of the methods above can be used to set styles, but they are not equivalent.</p> <ul> <li>Using <code>getStyle()</code> or <code>style(...)</code> sets styles with the <code>INLINE</code> origin by default.</li> <li>Using <code>lss(...)</code> sets styles with the <code>STYLESHEET</code> origin by default.</li> </ul> <p>If you want to assign styles using these APIs with a different <code>StyleOrigin</code>, you can explicitly specify the origin when applying the style, as shown below:</p> JavaKubeJS <pre><code>Style.pipeline(StyleOrigin.IMPORTANT, button.getStyle(), style -&gt; style\n    .tooltips(\"This is my tooltips\")\n);\n\n// lss text\nbutton.lss(\"tooltips\", \"This is my tooltips\", StyleOrigin.DEFAULT);\n</code></pre> <pre><code>Style.pipeline(\"IMPORTANT\", button.getStyle(), style =&gt; style\n    .tooltips(\"This is my tooltips\")\n);\n\n// lss text\nbutton.lss(\"tooltips\", \"This is my tooltips\", \"DEFAULT\");\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/stylesheet/#customizing-styles-via-stylesheet","title":"Customizing Styles via stylesheet","text":"<p>Although styling UI elements directly in code is convenient, it quickly becomes tedious and repetitive when your project involves a large amount of UI design.</p> <p>In particular:</p> <ul> <li>Applying the same styles to many UI elements requires repeated code.</li> <li>Updating a shared style (for example, changing a background texture) may require modifying every related UI element manually.</li> </ul> <p>More importantly, if you want your UI styles to be customizable by players\u2014for example, allowing styles to be overridden via resource packs\u2014managing styles purely in code becomes impractical.</p> <p>Using stylesheets (LSS) allows you to:</p> <ul> <li>Centralize and reuse styles across multiple UI elements.</li> <li>Modify the appearance of the entire UI from a single place.</li> <li>Expose UI styling to resource packs for easy customization.</li> </ul> <p>For these reasons, stylesheets are the recommended way to manage and unify UI styles for big project.</p>"},{"location":"zh/ldlib2/ui/preliminary/stylesheet/#syntax","title":"Syntax","text":"<p>If you are familiar with CSS, you will be very familiar with the syntax of LSS.</p> <p>A LSS consists of the following:</p> <ul> <li>Style rules that include a <code>selector</code> and a <code>declaration block</code>.</li> <li>Selectors that identify which ui element the style rule affects.</li> <li>A declaration block, inside curly braces, that has one or more style declarations. Each style declaration has a property and a value. Each style declaration ends with a semi-colon.</li> </ul> <p>Style matching with rules</p> <p>The following is the general syntax of a style rule:</p> <pre><code>selector {\n    property1: value;\n    property2: value;\n}\n</code></pre> <p>When you define a stylesheet, you can apply it to the ui tree. Selectors match against elements to resolve which properties apply from the LSS. If a selector matches an element, the style declarations apply to the element.</p> <p>For example, the following rule matches any <code>Button</code> object: </p><pre><code>button {\n  base-background: built-in(ui-mc:RECT_BORDER);\n  hover-background: built-in(ui-mc:RECT_3);\n  pressed-background: built-in(ui-mc:RECT_3) color(#dddddd);\n  padding-all: 3;\n  height: 16;\n}\n</code></pre><p></p> <p>Supported selector types LSS supports several types of simple and complex selectors that match elements based on different criteria, such as the following:</p> <ul> <li>Component type name</li> <li>An assigned <code>id</code></li> <li>A list of LSS <code>classes</code></li> <li>The element\u2019s position in the ui tree and its relationship to other elements</li> </ul> <p>If an element matches more than one selector, LSS applies the styles from whichever selector takes precedence.</p> <p>LSS supports a set of simple selectors that are analogous, but not identical, to simple selectors in CSS. The following table provides a quick reference of LSS simple selectors.</p> Selector type Syntax Matches Component selector <code>type {...}</code> Elements of a specific component type.  (e.g. <code>button</code>, <code>text-field</code>, <code>toogle</code>) Class selector <code>.class {...}</code> Elements with an assigned LSS class.  (e.g. <code>.__focused__</code>) ID selector <code>#root {...}</code> Elements with an assigned <code>id</code>.  (e.g. <code>#root</code>) Universal selector <code>* {...}</code> Any elements. <p>LSS supports a subset of CSS complex selectors. The following table provides a quick reference of LSS complex selectors.</p> Selector type Syntax Matches Not selector <code>:not(selector) {...}</code> Elements that not match the selector. Host selector <code>selector:host {...}</code> Elements that must be the <code>host</code>. Internal selector <code>selector:internal {...}</code> Elements that must be the <code>internal</code>. Descendant selector <code>selector1 selector2 {...}</code> Elements that are the descendant of another element in the ui tree. Child selector <code>selector1 &gt; selector2 {...}</code> Elements that are the children of another element in the ui tree. Multiple selector <code>selector1, selector2 {...}</code> Elements that match all the simple selectors. <p><code>Host</code> and <code>Internal</code> Element</p> <p>A UI tree can contain both host elements and internal elements.</p> <p>Using <code>button</code> as an example:</p> <ul> <li>The <code>button</code> itself is a host element. It is a component that you create and interact with directly.</li> <li>Internally, a <code>button</code> contains other UI elements, such as a <code>text</code> used to render its label.</li> </ul> <p></p> <p>These internal elements are part of the component\u2019s implementation and are called internal elements, which cannot be removed from the UI tree and diplayed in gray.</p> <p>You normally don\u2019t need to create or manage them manually, but they still exist in the UI tree and can participate in layout, styling, and event propagation.</p> <p>This distinction allows LDLib2 components to be both composable and customizable, while keeping their internal structure encapsulated.</p> supported characters <ul> <li>Must begin with a letter (<code>A\u2013Z</code> or <code>a\u2013z</code>) or an underscore (<code>_</code>).</li> <li>Can contain letters, digits (<code>0\u20139</code>), hyphens (<code>-</code>), and underscores (<code>_</code>).</li> <li>Selectors are case-sensitive. For example, myClass and MyClass are different.</li> <li>Selectors can\u2019t start with a digit or a hyphen followed by a digit (for example, <code>.1class</code> or <code>.-1class</code>).</li> </ul> <p>Quiz</p> <p>What kind of elements will be selected here? </p><pre><code>button:host :not(.my_label#my_id &gt; text:internal) &gt; .my_class:host, text-field {\n    // ...\n}\n</code></pre><p></p> Answer <ol> <li> <p>All <code>text-field</code> elements, regardless of their position in the UI tree.</p> </li> <li> <p>Host elements with the class <code>my_class</code>, with the following constraints:</p> <ul> <li>The element must be a host element.</li> <li>Its direct parent must not be an internal <code>text</code> element whose parent is an element with <code>my_label</code> class and with the ID <code>my_id</code>.</li> <li>The element must have a host <code>button</code> ancestor somewhere above it in the UI tree.</li> </ul> </li> </ol>"},{"location":"zh/ldlib2/ui/preliminary/stylesheet/#apply-stylesheet","title":"Apply stylesheet","text":"<p>To apply your stylesheets, you can append them during <code>UI</code> creation.</p> JavaKubeJS <pre><code>private static ModularUI createModularUI() {\n    // set root with an ID\n    var root = new UIElement().setId(\"root\");\n    root.addChildren(\n            new Label().setText(\"LSS example\"),\n            new Button().setText(\"Click Me!\"),\n            // set the element with a class\n            new UIElement().addClass(\"image\")\n    );\n    var lss = \"\"\"\n        // id selector\n        #root {\n            background: built-in(ui-gdp:BORDER);\n            padding-all: 7;\n            gap-all: 5;\n        }\n\n        // class selector\n        .image {\n            width: 80;\n            height: 80;\n            background: sprite(ldlib2:textures/gui/icon.png);\n        }\n\n        // element selector\n        #root label {\n            horizontal-align: center;\n        }\n        \"\"\";\n    var stylesheet = Stylesheet.parse(lss);\n    // add stylesheets to ui\n    var ui = UI.of(root, stylesheet);\n    return ModularUI.of(ui);\n}\n</code></pre> <pre><code>function createModularUI() {\n    // set root with an ID\n    let root = new UIElement().setId(\"root\");\n    root.addChildren(\n            new Label().setText(\"LSS example\"),\n            new Button().setText(\"Click Me!\"),\n            // set the element with a class\n            new UIElement().addClass(\"image\")\n    );\n    let lss = `\n        // id selector\n        #root {\n            background: built-in(ui-gdp:BORDER);\n            padding-all: 7;\n            gap-all: 5;\n        }\n\n        // class selector\n        .image {\n            width: 80;\n            height: 80;\n            background: sprite(ldlib2:textures/gui/icon.png);\n        }\n\n        // element selector\n        #root label {\n            horizontal-align: center;\n        }\n    `;\n    let stylesheet = Stylesheet.parse(lss);\n    // add stylesheets to ui\n    let ui = UI.of(root, stylesheet);\n    return ModularUI.of(ui);\n}\n</code></pre> <p>You could also modify stylesheets at runtime.</p> JavaKubeJS <pre><code>var mui = elem.getModularUI();\nif (mui != null) {\n    mui.getStyleEngine().addStylesheet(stylesheet);\n}\n</code></pre> <pre><code>let mui = elem.getModularUI();\nif (mui != null) {\n    mui.getStyleEngine().addStylesheet(stylesheet);\n}\n</code></pre>"},{"location":"zh/ldlib2/ui/preliminary/stylesheet/#builtin-stylesheets","title":"Builtin Stylesheets","text":"<p>LDLib2 provides three builtin stylesheets <code>gdp</code>, <code>mc</code>, and <code>modern</code>, allows you to  switch themes flexibly. <code>gdp</code> is the default stylesheet while using LDLib2 components.</p> <p>You can use <code>StylesheetManager</code> to access all registered stylesheets.</p> JavaKubeJS <pre><code>private static ModularUI createModularUI() {\n    // ...\n    var stylesheet = StylesheetManager.INSTANCE.getStylesheetSafe(StylesheetManager.MC)\n    return ModularUI.of(UI.of(root, stylesheet));\n}\n</code></pre> <pre><code>function createModularUI() {\n    // ...\n    let stylesheet = StylesheetManager.INSTANCE.getStylesheetSafe(StylesheetManager.MC)\n    return ModularUI.of(UI.of(root, stylesheet));\n}\n</code></pre> <p>All three builtin stylesheets as below:</p>      GDP           MC           MODERN"},{"location":"zh/ldlib2/ui/preliminary/stylesheet/#stylesheets-from-resourcepack","title":"Stylesheets from resourcepack","text":"<p>Note</p> <p></p> <p>Don't foget <code>F3 + T</code> to reload resource after modification at runtime.</p> <p>In practice, stylesheets can be added or overridden via resource packs. By placing your <code>LSS</code> files in the designated path, <code>StylesheetManager</code> will automatically discover and register them at runtime while reload resources.</p> <p>You should place your stylesheets under the path of <code>.assets/&lt;namespace&gt;/lss/&lt;name&gt;.lss</code>.</p> <p>After register, you are able to access them by using <code>StylesheetManager</code>.</p> JavaKubeJS <pre><code>// replace &lt;namespace&gt; and &lt;name&gt; with your own.\nStylesheetManager.INSTANCE.getStylesheetSafe(\n    ResourceLocation.parse(\"&lt;namespace&gt;:lss/&lt;name&gt;.lss\")\n);\n</code></pre> <pre><code>// replace &lt;namespace&gt; and &lt;name&gt; with your own.\nStylesheetManager.INSTANCE.getStylesheetSafe(\n    \"&lt;namespace&gt;:lss/&lt;name&gt;.lss\"\n);\n</code></pre>"},{"location":"zh/ldlib2/ui/textures/","title":"IGuiTexture","text":""},{"location":"zh/ldlib2/ui/textures/#iguitexture","title":"IGuiTexture","text":""},{"location":"zh/ldlib2/ui/textures/lss/","title":"Texture in LSS","text":""},{"location":"zh/ldlib2/ui/textures/lss/#texture-in-lss","title":"Texture in LSS","text":"<p> Since 2.1.4 </p> <p>In LDLib2, many visual styles (such as <code>background</code>) accept a texture value. Texture values in LSS are string-based expressions that describe how a texture is created and optionally transformed.</p> <p>This system is flexible and composable, allowing you to build complex visuals using a concise syntax.</p>"},{"location":"zh/ldlib2/ui/textures/lss/#supported-texture-types","title":"Supported Texture Types","text":""},{"location":"zh/ldlib2/ui/textures/lss/#empty-texture","title":"Empty Texture","text":"<pre><code>background: empty;\n</code></pre> <p>or an empty string:</p> <pre><code>background: ;\n</code></pre> <p>This results in no texture being rendered.</p>"},{"location":"zh/ldlib2/ui/textures/lss/#solid-color","title":"Solid Color","text":"<p>If the value can be parsed as a color, it will be treated as a color rectangle:</p> <pre><code>background: #1F00FFFF; /* #AARRGGBB */\nbackground: #FF00FF; //* #RRGGBB */\nbackground: #FFF; /* #RGB */\nbackground: rgba(255, 0, 0, 128);\nbackground: rgb(255, 123, 0);\n</code></pre>"},{"location":"zh/ldlib2/ui/textures/lss/#sprite","title":"<code>sprite(...)</code>","text":"<p>Uses a sprite from a texture atlas or resource location.</p> <pre><code>background: sprite(ldlib2:textures/gui/icon.png);\n</code></pre> <p>Advanced usage:</p> <pre><code>background: sprite(\n    ldlib2:textures/gui/icon.png,\n    0, 0, 16, 16,          /* sprite region (optional) */\n    2, 2, 2, 2,            /* border (opional) */\n    #FFFFFF                /* color tint (optional) */\n);\n</code></pre>"},{"location":"zh/ldlib2/ui/textures/lss/#icon","title":"<code>icon(...)</code>","text":"<p>Uses a registered icon texture.</p> <pre><code>background: icon(check);\nbackground: icon(modid, check);\n</code></pre>"},{"location":"zh/ldlib2/ui/textures/lss/#rect-sdf","title":"<code>rect(...)</code> / <code>sdf(...)</code>","text":"<p>Creates an SDF-based rectangle texture.</p> <pre><code>background: rect(#FF0000);\nbackground: rect(#FF0000, 4);\nbackground: rect(#FF0000, 4 4 4 4, 2, #FFFFFF);\n</code></pre> <p>Arguments:</p> <ol> <li>Fill color</li> <li>Corner radius (single value or 4 values) (optional)</li> <li>Stroke width (optional)</li> <li>Border color (optional)</li> </ol>"},{"location":"zh/ldlib2/ui/textures/lss/#border","title":"<code>border(...)</code>","text":"<p>Creates a simple colored border.</p> <pre><code>background: border(2, #00FF00); \n</code></pre>"},{"location":"zh/ldlib2/ui/textures/lss/#group","title":"<code>group(...)</code>","text":"<p>Combines multiple textures into a single group.</p> <pre><code>background: group(\n    sprite(ldlib2:textures/gui/bg.png),\n    rect(#FFFFFF, 2)\n);\n</code></pre>"},{"location":"zh/ldlib2/ui/textures/lss/#shader","title":"<code>shader(...)</code>","text":"<p>Uses a custom shader texture.</p> <pre><code>background: shader(ldlib2:fbm);\n</code></pre>"},{"location":"zh/ldlib2/ui/textures/lss/#resource-based-textures","title":"Resource-based Textures","text":"<p>If the function name matches a registered resource provider type, it will be resolved automatically:</p> <pre><code>background: builtin(ui-gdp:BORDER);\nbackground: file(\"&lt;namespace&gt;:&lt;path&gt;\");\n</code></pre> <p>This allows integration with LDLib2\u2019s resource system.</p>"},{"location":"zh/ldlib2/ui/textures/lss/#texture-transforms","title":"Texture Transforms","text":"<p>After the main texture, you can apply transform functions.</p>"},{"location":"zh/ldlib2/ui/textures/lss/#scale","title":"Scale","text":"<pre><code>background: sprite(...) scale(2);\nbackground: sprite(...) scale(2, 1);\n</code></pre>"},{"location":"zh/ldlib2/ui/textures/lss/#rotate","title":"Rotate","text":"<pre><code>background: sprite(...) rotate(45);\n</code></pre>"},{"location":"zh/ldlib2/ui/textures/lss/#translate","title":"Translate","text":"<pre><code>background: sprite(...) translate(4, 8);\n</code></pre>"},{"location":"zh/ldlib2/ui/textures/lss/#color-override","title":"Color Override","text":"<pre><code>background: sprite(...) color(#FFAA00);\nbackground: sprite(...) color(255, 255, 0, 0);\n</code></pre> <p>This tints the texture using the given color.</p> <p>In summary, LSS texture values let you:</p> <ul> <li>Define textures declaratively</li> <li>Chain transforms in a readable way</li> <li>Reuse and override visuals efficiently</li> </ul> <p>This makes UI styling both powerful and resource-pack friendly.</p>"},{"location":"zh/multiblocked2/","title":"Introduction","text":""},{"location":"zh/multiblocked2/#introduction","title":"Introduction","text":"<p>Multiblocked2 (mbd2) is the more powerful visual custom machine/multi-block structure mod after mbd1(multiblocked). Mbd2 is an extremely flexible yet vanilla-esque multiblock mod, that embraces aspects of MultiblockTweaker and Modular Machinery.</p> <p>Original project can be found here: Multiblocked</p> <p> Discord: Join our Discord</p> <p> Github:  Multiblocked2 Repository</p>"},{"location":"zh/multiblocked2/#compatibility","title":"Compatibility","text":"<p>Built-in</p> <ul> <li>Item</li> <li>Item Durability</li> <li>Fluid</li> <li>Forge energy</li> <li>Entity</li> </ul> <p>GTCEU</p> <ul> <li>Energy</li> </ul> <p>Botania</p> <ul> <li>mana</li> </ul> <p>Mekanism</p> <ul> <li>Heat</li> <li>Gas</li> <li>Slurry</li> <li>Pigment</li> <li>Infusion</li> </ul> <p>Create</p> <ul> <li>Stress</li> <li>RPM</li> </ul> <p>PneumaticCraft</p> <ul> <li>pressure</li> <li>heat</li> </ul> <p>Embers</p> <ul> <li>ember</li> </ul> <p>Nature's aura</p> <ul> <li>aura</li> </ul>"},{"location":"zh/multiblocked2/#whats-new","title":"What's new","text":""},{"location":"zh/multiblocked2/#demo","title":"Demo","text":"<p>Demo: A fire pedestal burn coals to emi fire and light surroundings. Just imagine how amazing it is to create such a cool machine without writing a single line of code!</p>"},{"location":"zh/multiblocked2/#new-editor","title":"New Editor","text":"<p>New editor: more powerful, more modern and easier to use. mbd2 helps you work without code, provides a unity-like game design engine, more efficient customization of your machine.</p>"},{"location":"zh/multiblocked2/#logic-node-graph","title":"Logic Node Graph","text":"<p>Node Graph: The node graph is a brand-new way to configure event logic. You no longer need KubeJS to define complex functionality. If you're a user of Blender or Shader Graph, you're going to love this new feature.</p> <p>MBD2 allows you to listen to various machine events through the node graph and set up a wide range of execution logic, giving you immense creative power.</p>"},{"location":"zh/multiblocked2/java_integration/","title":"Java Integration","text":""},{"location":"zh/multiblocked2/java_integration/#java-integration","title":"Java Integration","text":"<p>You can find the latest version from our maven. </p><pre><code>repositories{\n    maven {\n        name \"firstdarkdev\"\n        url \"https://maven.firstdark.dev/snapshots\"\n    }\n}\n\ndependencies {\n    implementation fg.deobf(\"com.lowdragmc.ldlib:ldlib-forge-{minecraft_version}:{latest_version}\") { transitive = false }\n    implementation fg.deobf(\"com.lowdragmc.multiblocked2:Multiblocked2:{minecraft_version}-{latest_version}\") { transitive = false }\n}\n</code></pre><p></p>"},{"location":"zh/multiblocked2/java_integration/#multiblocked2-registry-event","title":"Multiblocked2 Registry Event","text":"<p>Multiblocked2 provides a Forge event (<code>MBDRegistryEvent</code>) for registries.</p> <pre><code>public class MBDEvents {\n\n    @SubscribeEvent\n    public void onRegisterMachine(MBDRegistryEvent.Machine event) {\n        System.out.println(\"Registering machine\");\n    }\n\n    @SubscribeEvent\n    public void onRegisterRecipeType(MBDRegistryEvent.MBDRecipeType event) {\n        System.out.println(\"Registering recipe type\");\n    }\n\n    // other events....\n}\n\npublic void modInit() {\n    IEventBus eventBus = FMLJavaModLoadingContext.get().getModEventBus();\n    eventBus.register(new MBDEvents());\n}\n</code></pre>"},{"location":"zh/multiblocked2/java_integration/#register-machines-via-java-code","title":"Register machines via Java Code","text":"<p>Instead of place projecs files under the <code>.minecraft/assets/ldlib/mbd2/machine_type</code> directly, there are two ways to register machines via code.</p>"},{"location":"zh/multiblocked2/java_integration/#1-create-and-register-machines-via-raw-code","title":"1. Create and register machines via raw code","text":"<pre><code>@SubscribeEvent\npublic void onRegisterMachine(MBDRegistryEvent.Machine event) {\n    var renderer = new IModelRenderer(MBD2.id(\"block/pedestal\"));\n    event.register(MBDMachineDefinition.builder()\n            .id(MBD2.id(\"test_machine\"))\n                    .rootState(MachineState.builder()\n                            .name(\"base\")\n                            .renderer(renderer)\n                            .shape(Shapes.block())\n                            .lightLevel(0)\n                            .build())\n            .blockProperties(ConfigBlockProperties.builder().build())\n            .itemProperties(ConfigItemProperties.builder().build())\n            .build());\n}\n</code></pre>"},{"location":"zh/multiblocked2/java_integration/#2-register-project-files-from-your-mod-resource-assets","title":"2. Register project files from your mod resource assets","text":"<p>For example, you have such projects in your resource assets like this.</p> <p></p>"},{"location":"zh/multiblocked2/java_integration/#register-machine-project","title":"Register Machine Project","text":"<p>event.registerFromResource(<code>mod class</code>, <code>project type</code>, <code>project resource</code>)</p> <p>Available <code>project types</code> are below:</p> <ul> <li>single machine project: <code>single_machine</code></li> <li>multiblock machine project: <code>multiblock</code></li> <li>create kinematic machien project: <code>create_machine</code></li> </ul> <pre><code>@SubscribeEvent\npublic void onRegisterMachine(MBDRegistryEvent.Machine event) {\n    event.registerFromResource(this.getClass(), \"single_machine\", \"mbd2/machine/machine_project_file.sm\");\n}\n</code></pre>"},{"location":"zh/multiblocked2/java_integration/#register-recipe-type-project","title":"Register Recipe Type Project","text":"<p>event.registerFromResource(<code>mod class</code>, <code>project resource</code>)</p> <pre><code>@SubscribeEvent\npublic void onRegisterRecipeType(MBDRegistryEvent.MBDRecipeType event) {\n    event.registerFromResource(this.getClass(), \"mbd2/recipe_type/recipe_type_file.rt\");\n}\n</code></pre>"},{"location":"zh/multiblocked2/KubeJS/event/","title":"Events","text":""},{"location":"zh/multiblocked2/KubeJS/event/#events","title":"Events","text":"<p>All events can be found here:</p> <ul> <li><code>MBDStartupEvents</code></li> <li><code>MBDServerEvents</code></li> <li><code>MBDClientEvents</code></li> </ul>"},{"location":"zh/multiblocked2/KubeJS/event/#registry-events","title":"Registry Events","text":"<p>W.I.P</p>"},{"location":"zh/multiblocked2/KubeJS/event/#machine-events","title":"Machine Events","text":"<p>Check <code>MBDServerEvents</code> and <code>MBDClientEvents</code> for all available machien events.</p> <p>Because events will be posted to the Forge Event Handler as well. We wrap it with a KubeJS Event. So the actually event instance are shown here. Please check it for detials of fields and methods.</p> <p>This is an example of using it. </p><pre><code>MBDMachineEvents.onOpenUI(\"mbd2:machine_id\", e =&gt; {\n    let event = e.event; // NOTE! you have to use it to get the actual event instance.\n    let machine = event.machine;\n    let machienID = machine.getDefinition().id();\n    console.log(\"Open UI!! id: \" + machienID)\n})\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/proxy_recipetype/","title":"Customize Proxy RecipeTypes Transfer","text":""},{"location":"zh/multiblocked2/KubeJS/proxy_recipetype/#customize-proxy-recipetypes-transfer","title":"Customize Proxy RecipeTypes Transfer","text":"<p><code>Proxy Recipetype</code> in mbd2 doesn't always work very well. For example, if some recipes contain input types that mbd2 does not know, they cannot be translated.</p> <p>Furthermore, ppl may want to filter some recipes, or modify the duration, inputs, etc.  We provide an event <code>onTransferProxyRecipe</code> to allow you to take over the transfer processing. </p><pre><code>MBDRecipeTypeEvents.onTransferProxyRecipe(\"mbd2:recipe_type_id\", e =&gt; {\n    let event = e.event;\n    const {recipeType, proxyTypeId, proxyType, proxyRecipeId, proxyRecipe} = event;\n\n    // make sure the recipe type is correct\n    if (proxyTypeId === \"create:haunting\") {\n        let input = proxyRecipe.getIngredients()[0]; // we assume the ingredients has and only has one item.\n        let output = proxyRecipe.getResultItem(null);\n        console.log(\"input: \", input);\n        console.log(\"output: \", output);\n        // convert it into a mbd2 recipe\n        var recipe = recipeType.recipeBuilder() // same as create recipe via kjs event\n            .id(proxyRecipeId + \"_mbd2\")\n            .duration(400)\n            .inputItems(input)\n            .outputItems(output)\n            .chance(0)\n            .inputFluids(\"water 1000\")\n            .chance(1)\n            .buildMBDRecipe();\n\n        // If you want to skip this recipe\n        // event.mbdRecipe = null;\n        // set the result\n        event.mbdRecipe = recipe;\n    }\n})\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/recipe/","title":"Recipe Creation","text":""},{"location":"zh/multiblocked2/KubeJS/recipe/#recipe-creation","title":"Recipe Creation","text":"<p>Add recipes to the recipe type (<code>id = mbd2:blender</code>).</p> <pre><code>// server script\nServerEvents.recipes((event) =&gt; {\n    // add recipes here\n    event.recipes.mbd2.blender()\n        // recipe id is optional, but we recommend to set a unique id\n        .id(\"mbd2:recipe_id\")\n        // duration in tick\n        .duration(400)\n        // hight priority will be handled first\n        .priority(-1)\n        // mark this recipe as a fuel recipe\n        .isFuel(true)\n        // item\n        .inputItems(\"minecraft:apple\", \"4x minecraft:oak_log\")\n        .outputItems(\"4x minecraft:apple\")\n        // item durability\n        .inputItemsDurability(\"16x flint_and_steel\") // 16x refer to the durability value\n        .outputItemsDurability(\"16x flint_and_steel\") // 16x refer to the durability value\n        // fluid\n        .inputFluids(\"water 1000\")\n        .outputFluids(\"lava 2000\")\n        // entity\n        .inputEntities(\"4x minecraft:pig\")\n        .outputEntities(\"4x minecraft:pig\")\n        // forge energy\n        .inputFE(1000)\n        .outputFE(2000)\n        // create stress\n        .inputStress(1024)\n        .outputStress(2048)\n        .inputRPM(4)\n        .outputRPM(4)\n        // botaina mana\n        .inputMana(100)\n        .outputMana(200)\n        // natures aura\n        .inputAura(50)\n        .outputAura(50)\n        // mek heat\n        .inputHeat(100)\n        .outputHeat(200)\n        // gtm eu\n        .inputEU(100)\n        .outputEU(200)\n        // mek chemicals\n        .inputGases(\"100x mekanism:hydrogen\")\n        .outputGases(\"200x mekanism:oxygen\")\n            // .inputInfusions(...) \n            // .outputInfusions(...) \n            // .inputSlurries(...)\n            // .outputSlurries(...)\n            // .inputPigments(...)\n            // .outputPigments(...)\n        // ember\n        .inputEmber(256)\n        .outputEmber(256)\n        // pnc pressure / air\n        .inputPNCPressure(10)\n        .outputPNCPressure(10)\n        .inputPNCAir(40)\n        .outputPNCAir(40)\n        // pnc heat\n        .inputPNCHeat(100)\n        .outputPNCHeat(200)\n        // per tick (consume / generate per tick)\n        .perTick(builder =&gt; builder\n            .inputFluids(\"10x lava\") \n        )\n        // chance\n        .chance(0.5, builder =&gt; builder\n            .inputFluids(\"10x lava\")\n        )\n        // tier chance boost (the final chance = chance + tierChanceBoost * machineLevel)\n        .tierChanceBoost(0.1, builder =&gt; builder\n            .inputFluids(\"10x lava\")\n        )\n        // slot name (ingredient can only be consumed/filled from given slot name (trait name))\n        .slotName(\"input_tank\", builder =&gt; builder\n            .inputFluids(\"10x lava\")\n        )\n        // ui name (ingredient displays in the xei recipe ui (widget id) by a given ui name)\n        .uiName(\"input_tank\", builder =&gt; builder\n            .inputFluids(\"10x lava\")\n        )\n        // builtin condtions\n        .dimension(\"minecraft:overworld\") // dimension id\n        .biome(\"minecraft:plains\") // biome id\n        .machineLevel(2) // min machine level\n        .positionY(-10, 64) // min y, max y\n        .raining(0.5, 1) // min level, max level\n        .thundering(0.5, 1) // min level, max level\n        .blocksInStructure(0, 100, \"minecraft:stone\") // min count, max count, blocks\n        .dayTime(true) // is day\n        .light(0, 15, 0, 15, true) // min sky light, max sky light, min block light, max block light, can see sky\n        .redstoneSignal(7, 15) // min signal, max signal\n        // mod conditions\n        .rotationCondition(4, 16, 256, 1024) // min RPM, max RPM, min stress, max stress\n        .mekTemperatureCondition(0, 250) // min temperatue,  max temperatue\n        .pncTemperatureCondition(0, 256) // min temperatue,  max temperatue\n        .pncPressureCondition(false, 10, 16) // is air, min value (air / pressure), max value (air / pressure)\n        // custom data\n        .addData(\"key\", '{\"temperature\": 32}')\n        .addDataString(\"key\", \"value\")\n        .addDataNumber(\"key\", 32)\n        .addDataBoolean(\"key\", true)\n})\n</code></pre> <p>More apis and details can be found here: MBDRecipeSchema</p>"},{"location":"zh/multiblocked2/KubeJS/trait/","title":"Interact with Traits","text":""},{"location":"zh/multiblocked2/KubeJS/trait/#interact-with-traits","title":"Interact with Traits","text":"<p>You can obtain machine trait by name.</p> <pre><code>// reuturn the first match trait.\nlet trait = machine.getTraitByName(\"item item_trait\") \n\nlet allTraits = machine.additionalTraits;\n</code></pre>"},{"location":"zh/multiblocked2/KubeJS/trait/#trait-apis","title":"Trait APIs","text":""},{"location":"zh/multiblocked2/KubeJS/trait/#item","title":"Item","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"item_trait\") \nlet storage = trait.storage;\nlet stored = storage.getStackInSlot(0);\nstorage.insertItem(0, \"16x apple\", true) // index, item stack, simulate\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/trait/#fluid","title":"Fluid","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"fluid_trait\") \nlet storages = trait.storages;\nlet stored = storages[0].getFluid();\nstorages[0].setFluid(0, \"water 1000\")\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/trait/#forge-energy","title":"Forge Energy","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"forge_energy_trait\") \nlet storage = trait.storage;\nlet stored = storage.getEnergyStored();\nlet maxStored = storage.getMaxEnergyStored();\nstorage.receiveEnergy(1024, false) // fe, simulate\nstorage.extractEnergy(1024, false) // fe, simulate\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/trait/#botania-mana","title":"Botania Mana","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"botania_mana_trait\") \nlet storage = trait.storage;\nlet stored = storage.getCurrentMana();\nstorage.receiveMana(1024) // input mana\nstorage.receiveMana(-1024) // output mana\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/trait/#create-rpm-stress","title":"Create rpm / stress","text":""},{"location":"zh/multiblocked2/KubeJS/trait/#let-trait-machinegettraitbynamecreate_trait-let-available_stress-traitgetmachinegetholderscheduleworkingrpm4-false-rpm-simulate-let-available_stress-traitgetmachinegetholderscheduleworking256-false-stress-simulate","title":"<pre><code>let trait = machine.getTraitByName(\"create_trait\") \nlet available_stress = trait.getMachine().getHolder().scheduleWorkingRPM(4, false) // rpm, simulate\nlet available_stress = trait.getMachine().getHolder().scheduleWorking(256, false) // stress, simulate\n</code></pre>","text":""},{"location":"zh/multiblocked2/KubeJS/trait/#ember","title":"Ember","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"ember_trait\") \nlet storage = trait.storage;\nlet stored = storage.getEmber();\nlet capacity = storage.getEmberCapacity();\nstorage.addAmount(1024, false) // ember, simulate\nstorage.removeAmount(1024, false) // ember, simulate\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/trait/#gtm-energy","title":"GTM energy","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"gtm_energy_trait\") \nlet container = trait.container;\nlet stored = container.getEnergyStored();\nlet capacity = container.getEnergyCapacity();\ncontainer.changeEnergy(1024) // energyToAdd\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/trait/#mek-chemical","title":"Mek Chemical","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"mek_chemical_trait\") \nlet storages = trait.storages;\nlet stored = storages[0].getStack();\nstorages[0].setStack(stored) // did not check how to create a chemical instance via kjs\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/trait/#mek-heat","title":"Mek Heat","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"mek_heat_trait\") \nlet container = trait.container;\nlet stored = container.getTemperature(0); // capacitor\nlet stocapacityred = container.getHeatCapacity(0); // capacitor\ncontainer.handleHeat(0, 1000) // capacitor, transfer value\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/trait/#pnc-pressure-air","title":"PNC Pressure / Air","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"pnc_pressure_trait\") \nlet handler = trait.handler;\nlet stored = handler.getAir();\nlet maxPressure = handler.maxPressure();\nhandler.addAir(16); // added air\nhandler.setPressure(4) // addAir(((int) (pressure * getVolume())) - getAir());\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/trait/#pnc-heat","title":"PNC heat","text":"<p>more APIs can be found here </p><pre><code>let trait = machine.getTraitByName(\"pnc_heat_trait\") \nlet handler = trait.handler;\nlet temp = handler.getTemperature();\nlet cap = handler.getThermalCapacity();\nhandler.setTemperature(300); // temperature\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/ui/","title":"UI","text":""},{"location":"zh/multiblocked2/KubeJS/ui/#ui","title":"UI","text":"<p>You might have used mbd2\u2019s visual editor to create the UI, but you may have noticed that apart from the trait widget, the other widgets don't really work. This is because we haven't set up the UI logic, such as what should happen when a button is pressed. As mentioned in the Ldlbib UI, we recommend using the UI Editor to create and edit the UI layout, and using <code>KubeJS</code> / <code>NodeGraph (W.I.P)</code> to set up the interaction logic.</p> <p>Here, we implement a simple, UI-based manual lava filling machine.</p> <p>Note</p> <p>Example can be download here! </p> <p>Put it under the <code>.minecraft</code> folder.</p> <p>First, we configure the machine to have one item trait and one fluid trait, and prepare our UI:</p> <ol> <li>A UI corresponding to the trait.</li> <li>Two <code>buttons</code> corresponding to the filling directions.</li> <li>A <code>TextTexture</code> to display the amount of fluid in the tank.</li> </ol> <p></p> <p>Once you have everything set up, opening the machine's UI should look like this:</p> <p></p>"},{"location":"zh/multiblocked2/KubeJS/ui/#kubejs-control","title":"KubeJS Control","text":"<p>Next, we use KubeJS to add interaction logic to the UI. We provide an event <code>MBDMachineEvents.onUI</code> for you to setup the root widget. This event is triggered after <code>MBDMachineEvents.onOpenUI</code> and everything is prepared except the logic.</p> <pre><code>MBDMachineEvents.onUI(\"mbd2:kjs_ui_test\", e =&gt; {\n    const { machine, root } = e.event;\n    const slot = root.getFirstWidgetById(\"ui:item_slot_0\") // SlotWidget\n    const tank = root.getFirstWidgetById(\"ui:fluid_tank_0\") // FluidTankWidget\n    const fill_button = root.getFirstWidgetById(\"fill_button\") // Button\n    const drain_button = root.getFirstWidgetById(\"drain_button\") // Button\n    const label = root.getFirstWidgetById(\"tank_label\") // TextWidget\n\n    // Set label to display fluid amount\n    label.setTextProvider(() =&gt; Component.string(tank.fluid.amount + \"mB\"))\n\n    // on button click\n    fill_button.setOnPressCallback(clickData =&gt; {\n        if (clickData.isRemote) {\n            // trigger on the remote side\n            // because everything is synced from server to client. you can do nothing on the remote side\n        } else {\n            var stored = slot.item\n            // check if a lava bucket is stored\n            if (stored &amp;&amp; stored.id === \"minecraft:lava_bucket\") {\n                // check if there is enough space in the tank\n                if (tank.lastTankCapacity - tank.fluid.amount &gt;= 1000) {\n                    // remove the lava bucket\n                    slot.item = { item: \"minecraft:bucket\", count: 1 }\n                    // add 1000mB of lava to the tank\n                    tank.fluid = { fluid: \"minecraft:lava\", amount: tank.fluid.amount + 1000 }\n                }\n            }\n        }\n    })\n\n    drain_button.setOnPressCallback(clickData =&gt; {\n        if (!clickData.isRemote) {\n            // check if there is lava in the tank\n            if (tank.fluid.amount &gt;= 1000 &amp;&amp; slot.item.id === \"minecraft:bucket\") {\n                // remove 1000mB of lava from the tank\n                tank.fluid = { fluid: \"minecraft:lava\", amount: tank.fluid.amount - 1000 }\n                // add a lava bucket\n                slot.item = { item: \"minecraft:lava_bucket\", count: 1 }\n            }\n        }\n    })\n\n})\n</code></pre> <p>Let's see our final result!</p>      Your browser does not support video.    <p>We only use four widgets here (<code>TextTexture</code>, <code>Button</code>, <code>Slot</code>, and <code>Tank</code>). For more details about other widgets please check pages.</p>"},{"location":"zh/multiblocked2/KubeJS/ui/#display-parts-trait-ui-in-the-controller-display-controllers-trait-ui-in-the-part","title":"Display part's trait ui in the Controller / Display controller's trait ui in the Part","text":"<p>MBD2 supports proxy capabilities, allowing you to use a part to proxy the capabilities of a controller. However, you might also want to display the UI of a trait defined in the controller within the part, or vice versa\u2014display a trait from a part in the controller\u2019s UI. This is possible, but it requires some additional setup.</p> <p>For example, suppose your part has an item trait named <code>item_slot</code> with only one slot. Its UI ID would be <code>ui:item_slot_0</code>. To display it in the controller\u2019s UI, you need to manually add an item slot widget to the controller UI and set its ID to <code>part:item_slot@ui:item_slot_0</code>.</p> <p>Similarly, let\u2019s say your controller has a PneumaticCraft air trait named <code>air_handler</code>. To display it in the part's UI, you need to manually add a progress bar widget (you can also temporarily add a trait to auto-generate the UI, then remove the trait), and set the widget's ID to <code>controller:air_handler@ui:air_handler</code>.</p>"},{"location":"zh/multiblocked2/KubeJS/upgrade_system/","title":"Dynamic recipe on the fly","text":""},{"location":"zh/multiblocked2/KubeJS/upgrade_system/#dynamic-recipe-on-the-fly","title":"Dynamic recipe on the fly","text":""},{"location":"zh/multiblocked2/KubeJS/upgrade_system/#upgrade-system","title":"Upgrade System","text":"<p>Credit: @yellowcake3d  For anyone in the future seeking for a way to make this sorta upgrade system, here's what I have, which is quite practically mostly from mierno, but instead I ended up using the <code>getTraitByName</code> and also had to turn on the \"Always modify recipe\" checkmark in the mbd editor </p><pre><code>MBDMachineEvents.onBeforeRecipeModify('mbd2:high_pressure_electrolyzer', (event) =&gt; {\n    const mbdEvent = event.getEvent();\n    const { machine, recipe } = mbdEvent;\n\n    let itemTrait = machine.getTraitByName(\"item_slot\");\n    if (itemTrait == null) return;\n    let storage = itemTrait.storage;\n    let upgradeCount = storage.getStackInSlot(0).count;\n\n    //parallel recipe modifiers, the more upgrades in the upgrade slot, the more recipes processed in parallel\n    let parallelRecipe = machine.applyParallel(recipe, upgradeCount);\n    let copyRecipe = parallelRecipe.copy();\n    //speed modifier, makes recipe go 1% faster every new upgrade installed\n    let reductionFactor = Math.max(1 - 0.01 * upgradeCount, 0.1);\n    copyRecipe.duration = Math.ceil(recipe.duration * reductionFactor);\n\n    mbdEvent.setRecipe(copyRecipe);\n});\n</code></pre><p></p>"},{"location":"zh/multiblocked2/KubeJS/upgrade_system/#create-dynamic-recipes-via-kubejs-recipe-builder","title":"Create dynamic recipes via KubeJS recipe builder","text":"<p>You can dynamically modify recipes by using the <code>onBeforeRecipeModify</code> event to apply a modifier and replace the original recipe. In most cases, this approach is sufficient.  However, there are times when you may want more flexibility\u2014such as removing, replacing, or appending ingredients. To support this, we offer an alternative method that allows you to define recipes in a way similar to KJS recipe events.  </p><pre><code>MBDMachineEvents.onBeforeRecipeModify('machine:id', (event) =&gt; {\n    const mbdEvent = event.getEvent();\n    const { machine, recipe } = mbdEvent;\n\n    // creat an empty builder\n    // let newEmptyRecipeBuilder = recipe.recipeType.recipeBuilder();\n    // create a builder with current recipe\n    let builder = recipe.toBuilder();\n\n    builder.duration(412) // modify duration\n    builder.inputItems(\"apple\") // append ingredient\n\n    let fluidCap = MBDRegistries.RECIPE_CAPABILITIES.get(\"fluid\")\n    builder.removeOutputs(fluidCap) // remove all output fluid ingredients\n\n    let newRecipe = builder.buildMBDRecipe();\n    mbdEvent.setRecipe(newRecipe );\n});\n</code></pre><p></p>"},{"location":"zh/photon2/","title":"Introduction","text":""},{"location":"zh/photon2/#introduction","title":"Introduction","text":"<p> Since 2.0.0 </p> <p>Warning</p> <p>This Wiki is only available for Photon <code>2.x</code>. For <code>1.x</code>, check this link</p>"},{"location":"zh/photon2/#overview","title":"Overview","text":"<p>Photon2 is a powerful Minecraft VFX creation mod inspired by Unity\u2019s particle system. It brings modern, flexible, and highly customizable visual effects into Minecraft, making it possible to design stunning in-game VFX with a workflow familiar to Unity developers.</p>"},{"location":"zh/photon2/#key-features","title":"Key Features","text":"<ul> <li>\ud83d\ude80 Unity-like Particle System: 90%+ feature parity with Unity, including particles, trails, partial line rendering, and more</li> <li>\ud83d\uddbc Visual FX Editor: Built-in FX Editor with real-time preview and intuitive controls</li> <li>\ud83e\udde9 Flexible Resource Management: Custom materials, meshes, textures, curves, noise, and more</li> <li>\u26a1 Advanced Rendering: GPU instancing, custom shaders, HDR/bloom effects, pixel-art style</li> <li>\ud83d\udca1 Programmable &amp; Extensible: Custom shader material support, build up your own rendering pipeline</li> <li>\ud83e\uddd1\u200d\ud83d\udcbb Developer Friendly: Easily transferable skills for Unity users; clear and open extension points</li> </ul>"},{"location":"zh/photon2/#getting-started","title":"Getting Started","text":"<ul> <li> <p>Photon2 is recommended for users with some Unity or VFX experience.   If you know Unity\u2019s particle system, you\u2019ll find Photon2 intuitive.   Beginners should check out Unity or VFX basics first.</p> </li> <li> <p>Photon2 focuses on effect creation\u2014not usage logic.   Use commands or code to bind effects to entities, blocks, or your own lifecycle manager.</p> </li> <li> <p>Supports advanced rendering and effects   Such as custom shaders, HDR glow, Fresnel, mesh-based particle animations, and intersection highlights.</p> </li> </ul>"},{"location":"zh/photon2/#quick-start","title":"Quick Start","text":"<ol> <li>Enter a creative mode world and run <code>/photon_editor</code> to launch the editor</li> <li>Create a new FX project and start experimenting with particle effects</li> <li>Export FX files and apply them via command or your own triggers</li> <li>Explore advanced features: custom shaders, mesh-based animation, depth-based highlights, and more</li> </ol> <p>For details, see: Getting Started, Shader Guide, Advanced Tips</p>"},{"location":"zh/photon2/#community-support","title":"Community &amp; Support","text":"<ul> <li>GitHub: Submit issues or feature requests</li> <li>Discord: Join our community</li> <li>Feedback &amp; Docs Contributions: Open for issues, PRs, and community input!</li> </ul>"},{"location":"zh/photon2/commands/","title":"Commands","text":""},{"location":"zh/photon2/commands/#commands","title":"Commands","text":"<p> Since 2.0.0 </p> <p>Photon2 does not manage when, where, or how VFX are used. While Photon provides some built-in commands, these are primarily for testing purposes.</p>"},{"location":"zh/photon2/commands/#basic-commands","title":"\u2728 Basic Commands","text":"Command Description <code>/photon particle_editor</code> Open the visual particle editor <code>/photon_client clear_particles</code> Remove all Photon particles <code>/photon_client clear_fx_cache</code> Clear FX cache (run after changing .fx files)"},{"location":"zh/photon2/commands/#fx-binding-emitting","title":"\ud83d\udce6 FX Binding &amp; Emitting","text":"<p>Photon2 lets you bind effects to blocks or entities, or emit them at specific positions with full parameter control.</p>"},{"location":"zh/photon2/commands/#command-format","title":"Command Format","text":"<pre><code>/photon fx &lt;fxFile&gt; &lt;type&gt; ... [offset] [rotation] [scale] [delay] [force death] [allow multi] ...\n</code></pre> <ul> <li><code>&lt;fxFile&gt;</code>: Resource location of the FX file (e.g., <code>mod_id:filename</code> for <code>assets/mod_id/fx/filename.fx</code>)</li> <li><code>&lt;type&gt;</code>: <code>block</code> or <code>entity</code></li> <li>See parameter table below for details</li> </ul> Parameter Required Default Description fxFile Yes - FX file resource name, e.g. <code>photon:fire</code> type Yes - <code>block</code> or <code>entity</code> offset No 0 0 0 Position offset (x y z) rotation No 0 0 0 Rotation (Euler angles: x y z) scale No 1 1 1 Scale (x y z) delay No 0 Emit delay (ticks) force death No false Immediately remove all particles if the target becomes invalid allow multi No false Allow multiple effects with the same name to be bound to the same object"},{"location":"zh/photon2/commands/#bind-fx-to-a-block","title":"\ud83d\udfe6 Bind FX to a Block","text":"<p>Format:</p> <pre><code>/photon fx &lt;fxFile&gt; block &lt;position(x y z)&gt; [offset] [rotation] [scale] [delay] [force death] [allow multi] [check state]\n</code></pre> <ul> <li><code>position</code>: Required, block coordinates (x y z)</li> <li><code>check state</code>: If <code>false</code> (default), effect is removed if the block changes. If <code>true</code>, also removed if the blockstate changes.</li> </ul> <p>Example:</p> <pre><code>/photon fx photon:fire block ~ ~ ~ 0 0 0 0 0 0 1 1 1 0 false false false\n</code></pre>"},{"location":"zh/photon2/commands/#bind-fx-to-entities","title":"\ud83d\udfe9 Bind FX to Entities","text":"<p>Format:</p> <pre><code>/photon fx &lt;fxFile&gt; entity &lt;entities(selector)&gt; [offset] [rotation] [scale] [delay] [force death] [allow multi] [auto rotation]\n</code></pre> <ul> <li><code>entities</code>: Required, entity selector</li> <li> <p><code>auto rotation</code>:</p> </li> <li> <p><code>none</code> (default): No rotation</p> </li> <li><code>forward</code>: Forward direction</li> <li><code>look</code>: Head look direction</li> <li><code>xrot</code>: Body rotation direction</li> </ul> <p>Example:</p> <pre><code>/photon fx photon:fire entity @e[type=minecraft:minecart, distance=..1] 0 0.5 0 0 0 0 1 1 1 0 false false look\n</code></pre>"},{"location":"zh/photon2/commands/#remove-fx-commands","title":"\u274c Remove FX Commands","text":"Command Format Example <code>/photon fx remove block &lt;position(x y z)&gt; [force] [location]</code> <code>/photon fx remove block ~ ~ ~ true</code> <code>/photon fx remove entity &lt;entities(selector)&gt; [force] [location]</code> <code>/photon fx remove entity @e[type=pig]</code> <ul> <li><code>force</code>: Remove all particles immediately if the object becomes invalid (<code>true</code>), or wait for natural death (<code>false</code>)</li> <li><code>location</code>: Specify FX resource location (optional)</li> </ul>"},{"location":"zh/photon2/commands/#parameter-notes-tips","title":"\ud83d\udccb Parameter Notes &amp; Tips","text":"<ul> <li>Position, rotation, and scale are always three numbers (x y z)</li> <li>FX file path is usually <code>assets/&lt;mod_id&gt;/fx/your_fx_name.fx</code></li> <li>After changing any .fx file, always run <code>/photon_client clear_fx_cache</code> to refresh!</li> </ul>"},{"location":"zh/photon2/commands/#advanced-usage-examples","title":"\ud83c\udf08 Advanced Usage Examples","text":"<p>Bind an effect to your feet</p> <p><code>shell     /photon fx photon:smoke block ~ ~-1 ~</code></p> <p>Bind explosion FX to all pigs nearby</p> <p><code>shell     /photon fx photon:explosion entity @e[type=minecraft:pig, distance=..10]</code></p>"},{"location":"zh/photon2/resourcepack/","title":"Resource Pack Integration","text":""},{"location":"zh/photon2/resourcepack/#resource-pack-integration","title":"Resource Pack Integration","text":"<p>FX created with Photon2 are stored in:</p> <pre><code>.minecraft/ldlib2/assets/...\n</code></pre> <p>You may want to bundle these FX files into a resource pack or mod for distribution. To do this, you must move all required files into your own <code>assets/</code> directory.</p>"},{"location":"zh/photon2/resourcepack/#required-files","title":"\ud83d\udcc2 Required Files","text":"<ul> <li>FX Files</li> <li>Resources (materials, gradients, colors, etc.)</li> <li>Other Resources (textures, models, shaders, etc.)</li> </ul>"},{"location":"zh/photon2/resourcepack/#1-fx-files","title":"1\ufe0f\u20e3 FX Files","text":"<p>Exported FX files must be placed under:</p> <pre><code>assets/&lt;namespace&gt;/fx/\n</code></pre>"},{"location":"zh/photon2/resourcepack/#2-resources","title":"2\ufe0f\u20e3 Resources","text":"<p>Minecraft resource naming rules</p> <p>Minecraft does not allow uppercase letters, spaces, or non-English characters in file paths. Before moving files, ensure all names follow the Minecraft Resource Naming rules.</p> <p>All FX resource dependencies (materials, gradients, colors, etc.) must be moved from:</p> <pre><code>.minecraft/ldlib2/assets/ldlib2/resources/global/xxxx.material.nbt\n</code></pre> <p>to:</p> <pre><code>assets/ldlib2/resources/global/xxxx.material.nbt\n</code></pre>"},{"location":"zh/photon2/resourcepack/#3-other-resources","title":"3\ufe0f\u20e3 Other Resources","text":"<p>Materials and meshes often reference additional assets such as:</p> <ul> <li>Textures</li> <li>Models</li> <li>Shaders</li> </ul> <p>These must also be moved to their corresponding folders under your <code>assets/</code> directory.</p>"},{"location":"zh/photon2/resourcepack/#recommended-migration-method","title":"\ud83d\udca1 Recommended Migration Method","text":"<p>Info</p> <p>The easiest and most error-proof method is to copy everything under:</p> <pre><code>.minecraft/ldlib2/assets/...\n</code></pre> <p>into:</p> <pre><code>assets/...\n</code></pre> <p>This ensures all dependencies are preserved and your FX works correctly after packaging.</p>"},{"location":"zh/photon2/Java%20Integration/","title":"Basic Information","text":""},{"location":"zh/photon2/Java%20Integration/#basic-information","title":"Basic Information","text":"<p> Since 2.0.4 </p>"},{"location":"zh/photon2/Java%20Integration/#development-maven","title":"Development Maven","text":"<pre><code>repositories {\n    maven { url = \"https://maven.firstdark.dev/snapshots\" } // LDLib2, Photon2\n}\n\ndependencies {\n    // LDLib2\n    implementation(\"com.lowdragmc.ldlib2:ldlib2-neoforge-${minecraft_version}:${ldlib2_version}:all\") { transitive = false }\n    compileOnly(\"org.appliedenergistics.yoga:yoga:1.0.0\")\n\n    // Photon2\n    implementation(\"com.lowdragmc.photon:photon-neoforge-${minecraft_version}:${photon2_version}\") { transitive = false }\n}\n</code></pre>"},{"location":"zh/photon2/Java%20Integration/#latest-version","title":"latest version","text":""},{"location":"zh/photon2/Java%20Integration/#how-to-load-and-use-the-effect-files","title":"How to load and use the effect files?","text":"<pre><code>FX fx = FXHelper.getFX(ResourceLocation.parse(\"photon:fire\"));\n// bind it to a block\nnew BlockEffectExecutor(fx, level, pos).start();\n// bind it to an entity\nnew EntityEffectExecutor(fx, level, entity, AutoRotate.NONE).start();\n</code></pre>"},{"location":"zh/photon2/Java%20Integration/#implement-your-ownieffectexecutor-to-manage-the-lifecycle-of-your-photon-effects","title":"Implement your own<code>IEffectExecutor</code> to manage the lifecycle of your photon effects.","text":"<p>Sometimes, you wanna control the effect you have with additional logic. You can implement the <code>IEffectExecutor</code> and do what you want. </p> IEffectExecutorExampleExecutor <pre><code>public interface IEffectExecutor {\n\n    Level getLevel();\n\n    /**\n     * update each FX objects during their duration, per tick. Execute low frequency logic here.\n     * &lt;br&gt;\n     * e.g., kill particle\n     * @param fxObject fx object\n     */\n    default void updateFXObjectTick(IFXObject fxObject) {\n    }\n\n    /**\n     * update each FX objects during rendering, per frame. Execute high frequency logic here.\n     * &lt;br&gt;\n     * e.g., update emitter position, rotation, scale\n     * @param fxObject fx object\n     * @param partialTicks partialTicks\n     */\n    default void updateFXObjectFrame(IFXObject fxObject, float partialTicks) {\n\n    }\n\n    default RandomSource getRandomSource() {\n        return getLevel().random;\n    }\n}\n</code></pre> <pre><code>public class ExampleExecutor extends IEffectExecutor {\n    public final FX fx;\n    @Getter\n    public final Level level;\n    // runtime\n    @Nullable\n    private FXRuntime fxRuntime;\n\n    public ExampleExecutor(FX fx, Level level) {\n        this.fx = fx;\n        this.level = level;\n    }\n\n    public void emit() {\n        kill();\n        fxRuntime = fx.createRuntime(); // (1)\n        fxRuntime.emmit(this);\n    }\n\n    public void kill() {\n        if (fxRuntime == null) return;\n        fxRuntime.destory(true);\n        fxRuntime = null;\n    }\n}\n</code></pre> <ol> <li>if you want to modify config data. use <code>fx.createRuntime(true)</code> instead.</li> </ol> <p>Check ExampleExecutor to see how it works. </p><pre><code>FX fx = FXHelper.getFX(ResourceLocation.parse(\"photon:fire\"));\nvar executor = new ExampleExecutor(fx, level);\nexecutor.emit();\n</code></pre><p></p>"},{"location":"zh/photon2/Materials/","title":"Introduction","text":""},{"location":"zh/photon2/Materials/#introduction","title":"Introduction","text":"<p> Since 2.0.0 </p> <p>The Materials system provides a flexible and extensible framework for handling rendering materials in particle systems. It offers various material types with different rendering capabilities, from simple textures to complex custom shaders with HDR support and advanced effects:</p> <ul> <li>Texture Material</li> <li>Sprite Material</li> <li>Custom Shader Material</li> </ul>"},{"location":"zh/photon2/Materials/#universal-configuration","title":"Universal Configuration","text":"<p>All materials share the following settings:</p> Property Type Description Default <code>material</code> <code>IMaterial</code> The specific material implementation Built-in circle texture <code>blendMode</code> <code>BlendMode</code> Controls how particles blend with the background - <code>cull</code> <code>boolean</code> Enable/disable face culling <code>true</code> <code>depthTest</code> <code>boolean</code> Enable/disable depth testing <code>true</code> <code>depthMask</code> <code>boolean</code> Enable/disable depth buffer writing <code>false</code> Texture MaterialSprite MaterialCustom Shader Material <p><code>Texture Material</code> is the most common type, designed for texture-based rendering. It supports custom textures, HDR color processing, pixel-art mode, and more. This makes it the most versatile material choice in the particle system.</p> <p>Configuration parameters:</p> Property Type Description <code>Texture</code> <code>ResourceLocation</code> Path to the texture file <code>Discard Threshold</code> <code>float</code> Alpha discard threshold <code>HDR</code> <code>Vector4f</code> HDR color vector <code>HDR Mode</code> <code>HDRMode</code> HDR blending mode <code>Pixel Art.bits</code> <code>int</code> Pixel art bit depth <p><code>Sprite Material</code> allows you to access Minecraft\u2019s registered particle textures.</p> <p>The most powerful material type, allowing you to fully control rendering, set custom samplers/uniforms, and even access particle data. In fact, all material types can be implemented via a custom shader.</p> <p>For more info, see Custom Shader Material.</p>"},{"location":"zh/photon2/Materials/#special-material-block_atlas","title":"Special Material: <code>block_atlas</code>","text":"<p>What is the Block Atlas?</p> <p>See the official wiki: Block Atlas </p> <p></p> <p>The built-in <code>block_atlas</code> material is essentially a Texture Material that lets FX access Minecraft's block atlas texture.</p> <p>It\u2019s especially useful when rendering particles in model mode with <code>useBlockUV</code> enabled \u2014 the UVs can directly access the required block textures from the atlas.  </p> <p>You can also pass the block atlas as a sampler in a Custom Shader Material (see the sampler page for details).</p>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/","title":"Preliminary","text":""},{"location":"zh/photon2/Materials/CustomShaderMaterial/#preliminary","title":"Preliminary","text":"<p> Since 2.0.0 </p> <p><code>Custom Shader Material</code> lets you fully control how rendering is performed. Photon2 allows you to write materials using Minecraft Core Shaders.  </p> <p>Warning</p> <p>This wiki is not a shader programming tutorial and will not teach Minecraft shader basics. Please refer to the linked resources below for shader knowledge.</p>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/#related-links","title":"\ud83d\udcda Related Links","text":"<ul> <li>Minecraft Shaders</li> <li>Minecraft Shaders (Google Doc)</li> <li>Minecraft Shaders (GitHub Wiki)</li> <li>Post-processing Shaders</li> <li>Learn OpenGL</li> </ul> <p>Photon2 and LDLib2 extend Vanilla Minecraft Shader via ExtendedShader. This extension adds:</p> <ul> <li>Geometry shader (<code>attach</code>) support</li> <li>Extra samplers and uniforms</li> </ul> <p>For details, see the ExtendedShader page.</p> <p></p>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/#how-to-use","title":"How to Use","text":"<ul> <li>Click <code>Select Shader</code> to choose your shader JSON.  </li> <li>Or specify the shader by its resource location.</li> <li>After modifying your shader, click <code>Reload Shader</code> to recompile and reload.</li> </ul> <p>Shader Path Requirement</p> <p>Minecraft requires all shader files (GLSL + JSON) to be placed in: </p><pre><code>assets/&lt;namespace&gt;/shaders/core/\n</code></pre><p></p>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/#shader-settings","title":"Shader Settings","text":"<p>The Shader Settings panel displays all custom (non-built-in) samplers and uniforms. You can edit them directly via the Inspector.</p>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/#sampler-curve-sampler-gradient","title":"Sampler Curve / Sampler Gradient","text":"<p>Photon2 lets you pass a Curve or Gradient to the shader. They are encoded into a 128\u00d7128 sampler so you can sample them in the shader to get values.</p> <p>For details, see ExtendedShader.</p>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/AdditionalGPUData/","title":"Additional GPU Data","text":""},{"location":"zh/photon2/Materials/CustomShaderMaterial/AdditionalGPUData/#additional-gpu-data","title":"Additional GPU Data","text":"<p> Since 2.0.0 </p> <p>Photon2 lets you send extra per-particle vertex attributes to the GPU \u2014 such as <code>age</code>, <code>T</code>, or velocity.  </p> <p>Note: - This feature requires GPU Instance mode. - Currently supported only for Particle Emitters (support for other FX objects will come later). - Modifying vanilla vertex formats is difficult and sending large amounts of per-vertex data is inefficient, hence this separate system.</p>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/AdditionalGPUData/#particle-emitter","title":"Particle Emitter","text":"<p>In the <code>Particle Emitter</code> Inspector, enable Additional GPU Data and select the data fields you need.</p>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/AdditionalGPUData/#supported-data-types","title":"Supported Data Types","text":"Data Type Description <code>Random</code> <code>float</code> Random value form [0, 1)   <code>since 2.1.3</code> <code>T</code> <code>float</code> Normalized lifetime: <code>age / lifetime</code> <code>Age</code> <code>float</code> Particle age <code>LifeTime</code> <code>float</code> Particle lifetime <code>Position (local)</code> <code>vec3</code> Particle local position <code>Velocity</code> <code>vec3</code> Particle velocity <code>isCollided</code> <code>float</code> <code>1</code> = collided, <code>0</code> = not yet <code>Emitter T</code> <code>float</code> Emitter normalized lifetime <code>Emitter Age</code> <code>float</code> Emitter age <code>Emitter Position</code> <code>vec3</code> Emitter world position <code>Emitter Velocity</code> <code>vec3</code> Emitter velocity"},{"location":"zh/photon2/Materials/CustomShaderMaterial/AdditionalGPUData/#shader-setup","title":"\ud83d\udee0 Shader Setup","text":"<p>Extra attributes are appended sequentially after the default vertex layout in the vertex shader (vsh).  </p> <p>\u26a0 Warning: - Always place new attribute declarations after <code>#moj_import &lt;photon:particle.glsl&gt;</code>. - GPU &amp; driver behavior may vary; sequential layouts may not always be reliable \u2014 use <code>layout(location = x)</code> to explicitly bind attributes when needed.</p> <p>Example: If you enable <code>T</code> and <code>Velocity</code>, add them to your shader:</p> <pre><code>#version 330 core\n\n#moj_import &lt;photon:particle.glsl&gt;\n\nin float T;\nin vec3 velocity;\n\n/*\nlayout(location = 9) in float T;       // Explicit location binding\nlayout(location = 10) in vec3 velocity;\n*/\n\nvoid main() {\n    // Use the extra attributes here...\n}\n</code></pre> <p>\u2705 Pro tip: Keep your layout indices organized \u2014 mismatches between the emitter\u2019s attribute order and shader declarations can cause rendering glitches or incorrect values.</p>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/ExtendedShader/","title":"ExtendedShader","text":""},{"location":"zh/photon2/Materials/CustomShaderMaterial/ExtendedShader/#extendedshader","title":"ExtendedShader","text":"<p> Since 2.0.0 </p> <p>Before reading this page, make sure you understand Minecraft Core Shader.</p> <p>Photon2 and LDLib2 extend vanilla shaders with ExtendedShader, adding:</p> <ul> <li>Geometry shader (<code>attach</code>) support  </li> <li>Extra samplers and uniforms</li> </ul>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/ExtendedShader/#how-to-use","title":"\ud83d\udce6 How to Use","text":"<p>ExtendedShader JSON is almost the same as Vanilla. Here\u2019s an example using <code>Texture Material</code>.</p> hdr_particle.jsonparticle.vshhdr_particle.fsh <pre><code>{\n    \"vertex\": \"photon:particle\",\n    /*\n        \"geometry\": \"&lt;namespace&gt;:&lt;name&gt;.gsh\" // (1)\n    */\n    \"fragment\": \"photon:hdr_particle\",\n    \"samplers\": [\n        { \"name\": \"Sampler2\" },\n        // custom samplers\n        { \"name\": \"Texture\" }\n    ],\n    \"uniforms\": [\n        { \"name\": \"ModelViewMat\", \"type\": \"matrix4x4\", \"count\": 16, \"values\": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1] },\n        { \"name\": \"ProjMat\", \"type\": \"matrix4x4\", \"count\": 16, \"values\": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1] },\n        { \"name\": \"ColorModulator\", \"type\": \"float\", \"count\": 4, \"values\": [1,1,1,1] },\n        { \"name\": \"FogStart\", \"type\": \"float\", \"count\": 1, \"values\": [0.0] },\n        { \"name\": \"FogEnd\", \"type\": \"float\", \"count\": 1, \"values\": [1.0] },\n        { \"name\": \"FogColor\", \"type\": \"float\", \"count\": 4, \"values\": [0,0,0,0] },\n        { \"name\": \"FogShape\", \"type\": \"int\", \"count\": 1, \"values\": [0] },\n        // custom uniforms\n        { \"name\": \"DiscardThreshold\", \"type\": \"float\", \"count\": 1, \"values\": [0.01] },\n        { \"name\": \"HDR\", \"type\": \"float\", \"count\": 4, \"values\": [0,0,0,1] },\n        { \"name\": \"HDRMode\", \"type\": \"int\", \"count\": 1, \"values\": [0] }\n    ]\n}\n</code></pre> <ol> <li>Attach geometry shader if needed.</li> </ol> <pre><code>// have to use 330+\n#version 330 core\n\n#moj_import &lt;fog.glsl&gt;\n// Photon2 vertex helper\n#moj_import &lt;photon:particle.glsl&gt; \n\nuniform sampler2D Sampler2;\nuniform mat4 ModelViewMat;\nuniform mat4 ProjMat;\nuniform int FogShape;\n\nout float vertexDistance;\nout vec2 texCoord0;\nout vec4 vertexColor;\n\nvoid main() {\n    ParticleData data = getParticleData();\n    gl_Position = ProjMat * ModelViewMat * vec4(data.Position, 1.0);\n    vertexDistance = fog_distance(data.Position, FogShape);\n    texCoord0 = data.UV;\n    vertexColor = data.Color * texelFetch(Sampler2, data.LightUV / 16, 0);\n}\n</code></pre> <pre><code>#version 150\n#moj_import &lt;fog.glsl&gt;\n\nuniform sampler2D Texture;\nuniform vec4 ColorModulator;\nuniform float FogStart;\nuniform float FogEnd;\nuniform vec4 FogColor;\nuniform float DiscardThreshold;\nuniform vec4 HDR;\nuniform int HDRMode;\nuniform float Bits;\n\nin float vertexDistance;\nin vec2 texCoord0;\nin vec4 vertexColor;\n\nout vec4 fragColor;\n\nvoid main() {\n    float bits = max(Bits, 1.0);\n    vec2 uv = (floor(texCoord0 * bits) + 0.5) / bits;\n    vec4 color = texture(Texture, uv) * vertexColor * ColorModulator;\n\n    if (color.a &lt; DiscardThreshold) discard;\n\n    if (HDRMode == 0) {\n        color.rgb += HDR.a * HDR.rgb;\n    } else {\n        color.rgb *= HDR.a * HDR.rgb;\n    }\n\n    fragColor = linear_fog(color, vertexDistance, FogStart, FogEnd, FogColor);\n}\n</code></pre> <p>Difference from vanilla particle shader:</p> <ul> <li>In <code>vsh</code>, use <code>#moj_import &lt;photon:particle.glsl&gt;</code> and <code>getParticleData()</code> to fetch vertex data.</li> <li>In <code>fsh</code>, added HDR color output.</li> </ul>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/ExtendedShader/#handle-vertex-data","title":"\ud83c\udfaf Handle Vertex Data","text":"<p>Different FX objects and renderer settings (e.g., GPU Instance, Additional GPU Data) can change vertex type and layout.  </p> <p>Photon2 provides a helper library that, through macros, automatically parses and converts input vertex data into an accessible format.  </p> <p>More info: Vertex Format</p> <pre><code>// Requires GLSL version 330+\n#version 330 core\n\n/*\nstruct ParticleData {\n    vec3 Position;\n    vec4 Color;\n    vec2 UV;\n    ivec2 LightUV;\n    vec3 Normal;\n};\n\nParticleData getParticleData() {\n    // (1)\n}\n*/\n\nvoid main() {\n    ParticleData data = getParticleData();\n    vec3 position = data.Position;\n    vec4 color = data.Color;\n    vec2 uv = data.UV;\n    ivec2 lightUV = data.LightUV;\n    vec3 normal = data.Normal;\n}\n</code></pre> <ol> <li>Internal Implementation, check Vertex Format for details.</li> </ol> <p>Implementation Details</p> <p>In vertex shader:</p> <ol> <li>Ensure <code>#version</code> is 330 or higher.</li> <li>Import Photon2 vertex library: <code>#moj_import &lt;photon:particle.glsl&gt;</code></li> <li>Access data via <code>getParticleData()</code> \u2014 no need to handle internal layouts manually.</li> <li>Photon2 supports passing extra GPU vertex data (e.g., particle lifetime, velocity). See: Additional GPU Data</li> </ol>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/ExtendedShader/#extended-samplers","title":"\ud83c\udfa8 Extended Samplers","text":"<p>Photon2 provides extra built-in samplers beyond vanilla. When declared in JSON, these samplers won\u2019t appear in the Inspector.</p> Sampler Name Description Preview <code>Sampler2</code> Light Map <code>SamplerSceneColor</code> World Color <code>SamplerSceneDepth</code> World Depth <code>SamplerCurve</code> Curve Sampler - <code>SamplerGradient</code> Gradient Sampler -"},{"location":"zh/photon2/Materials/CustomShaderMaterial/ExtendedShader/#samplercurve-samplergradient","title":"\ud83d\udcc8 SamplerCurve / SamplerGradient","text":"<p>Special samplers, active only if a Curve or Gradient is assigned. Photon2 encodes them into a 128\u00d7128 texture for sampling in shader.</p> <pre><code>#moj_import &lt;photon:particle_utils.glsl&gt;\n/* internal implementation\nconst float INV_TEX_SIZE = 1.0 / 128.0;\nconst float MAX_U = 1.0 - 0.5 * INV_TEX_SIZE;\n\nfloat getCurveValue(sampler2D curveTexture, int curveIndex, float x) {\n    return texture(curveTexture, vec2(clamp(x, 0.0, MAX_U), (float(curveIndex) + 0.5) * INV_TEX_SIZE)).r;\n}\n\nvec4 getGradientValue(sampler2D gradientTexture, int gradientIndex, float x) {\n    return texture(gradientTexture, vec2(clamp(x, 0.0, MAX_U), (float(gradientIndex) + 0.5) * INV_TEX_SIZE));\n}\n*/\n\nuniform sampler2D SamplerCurve;\nuniform sampler2D SamplerGradient;\n\nvoid main() {\n    float value = getCurveValue(SamplerCurve, 0, x);\n    vec4 color = getGradientValue(SamplerGradient, 0, x);\n}\n</code></pre> <p>Use:</p> <ul> <li>Import helpers:</li> </ul> <pre><code>#moj_import &lt;photon:particle_utils.glsl&gt;\n</code></pre> <ul> <li>Call <code>getCurveValue()</code> and <code>getGradientValue()</code> to retrieve values.</li> </ul>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/ExtendedShader/#extended-uniforms","title":"\ud83d\udee0 Extended Uniforms","text":"<p>Photon2 adds more built-in uniforms on top of vanilla core shaders.</p>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/ExtendedShader/#vanilla-built-in-uniforms","title":"\ud83d\udccb Vanilla Built-in Uniforms","text":"Name Type Description <code>ModelViewMat</code> mat4 Model-view matrix <code>ProjMat</code> mat4 Orthographic projection matrix (width=window, height=window, near=0.1, far=1000) <code>ScreenSize</code> vec2 Framebuffer width &amp; height (pixels) <code>ColorModulator</code> vec4 Final color multiplier <code>FogColor</code> vec4 Fog color &amp; density (alpha = density) <code>FogStart</code> float Fog start distance <code>FogEnd</code> float Fog end distance <code>FogShape</code> int Fog mode <code>GameTime</code> float Normalized day time (0\u20131, loops every 20min) <code>GlintAlpha</code> float Glint strength (0\u20131)"},{"location":"zh/photon2/Materials/CustomShaderMaterial/ExtendedShader/#photon2-built-in-uniforms","title":"\ud83d\udccb Photon2 Built-in Uniforms","text":"Name Type Description <code>U_CameraPosition</code> vec3 Camera world position <code>U_InverseProjectionMatrix</code> mat4 Precomputed inverse <code>ProjMat</code> <code>U_InverseViewMatrix</code> mat4 Precomputed inverse <code>ModelViewMat</code> <code>U_ViewPort</code> vec4 ViewPort(x, y, w, h) <code>since 2.1.3.a</code>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/VertexFormat/","title":"Vertex Format","text":""},{"location":"zh/photon2/Materials/CustomShaderMaterial/VertexFormat/#vertex-format","title":"Vertex Format","text":"<p> Since 2.0.0 </p> <p>Note: In most cases, you don\u2019t need to understand this section \u2014 Photon2 handles vertex layouts automatically. But for curious users or those with special shader needs, here\u2019s how Photon2 processes different vertex layouts and unifies them for materials.</p> <p>Photon2 supports three vertex layouts:</p> <ul> <li>Vanilla layout</li> <li>Particle Instance</li> <li>Particle Model Instance</li> </ul>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/VertexFormat/#vanilla-layout","title":"\ud83d\udcc4 Vanilla Layout","text":"<p>Default format used when no special GPU settings are enabled.</p> <pre><code>in vec3 Position;\nin vec4 Color;\nin vec2 UV0;\nin ivec2 UV2;\nin vec3 Normal;\n\nstruct ParticleData {\n    vec3 Position;\n    vec4 Color;\n    vec2 UV;\n    ivec2 LightUV;\n    vec3 Normal;\n};\n\nParticleData getParticleData() {\n    ParticleData data;\n    data.Position = Position;\n    data.Color = Color;\n    data.UV = UV0;\n    data.LightUV = UV2;\n    data.Normal = Normal;\n    return data;\n}\n</code></pre>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/VertexFormat/#particle-instance","title":"\ud83d\ude80 Particle Instance","text":"<p>Used when GPU Instance is enabled in the particle emitter. Add the following macro to the shader:</p> <pre><code>#define PARTICLE_INSTANCE\n</code></pre> <pre><code>#ifdef PARTICLE_INSTANCE\nlayout(location = 0) in vec3 aPos;\nlayout(location = 1) in vec3 iPos;\nlayout(location = 2) in vec2 iSize;\nlayout(location = 3) in vec3 iScale;\nlayout(location = 4) in vec4 iRot;\nlayout(location = 5) in vec4 iColor;\nlayout(location = 6) in vec4 iUV;\nlayout(location = 7) in int iLight;\n\nstruct ParticleData {\n    vec3 Position;\n    vec4 Color;\n    vec2 UV;\n    ivec2 LightUV;\n    vec3 Normal;\n};\n\nmat3 quatToMat(vec4 q) {\n    float x2 = q.x + q.x, y2 = q.y + q.y, z2 = q.z + q.z;\n    float xx = q.x * x2, yy = q.y * y2, zz = q.z * z2;\n    float xy = q.x * y2, xz = q.x * z2, yz = q.y * z2;\n    float wx = q.w * x2, wy = q.w * y2, wz = q.w * z2;\n\n    return mat3(\n        1 - (yy + zz), xy + wz, xz - wy,\n        xy - wz, 1 - (xx + zz), yz + wx,\n        xz + wy, yz - wx, 1 - (xx + yy)\n    );\n}\n\nParticleData getParticleData() {\n    ParticleData data;\n    mat3 rotMat = quatToMat(iRot);\n    data.Position = (rotMat * vec3(aPos.xy * iSize, aPos.z)) * iScale + iPos;\n    data.Color = iColor;\n    data.UV = mix(iUV.xy, iUV.zw, aPos.xy * 0.5 + 0.5);\n    data.LightUV = ivec2((iLight &gt;&gt; 16) &amp; 0xFFFF, iLight &amp; 0xFFFF);\n    data.Normal = normalize(rotMat * vec3(0, 0, 1));\n    return data;\n}\n#endif\n</code></pre>"},{"location":"zh/photon2/Materials/CustomShaderMaterial/VertexFormat/#particle-model-instance","title":"\ud83c\udfd7 Particle Model Instance","text":"<p>Used when model mode is enabled in the emitter and GPU Instance is active. Add the following macro to the shader:</p> <pre><code>#define PARTICLE_MODEL_INSTANCE\n</code></pre> <pre><code>#ifdef PARTICLE_MODEL_INSTANCE\nlayout(location = 0) in vec3 aPos;\nlayout(location = 1) in vec2 aUV;\nlayout(location = 2) in vec3 aNormal;\nlayout(location = 3) in float aBrightness;\nlayout(location = 4) in vec3 iPos;\nlayout(location = 5) in vec3 iScale;\nlayout(location = 6) in vec4 iRot;\nlayout(location = 7) in vec4 iColor;\nlayout(location = 8) in int iLight;\n\nstruct ParticleData {\n    vec3 Position;\n    vec4 Color;\n    vec2 UV;\n    ivec2 LightUV;\n    vec3 Normal;\n};\n\nmat3 quatToMat(vec4 q) {\n    float x2 = q.x + q.x, y2 = q.y + q.y, z2 = q.z + q.z;\n    float xx = q.x * x2, yy = q.y * y2, zz = q.z * z2;\n    float xy = q.x * y2, xz = q.x * z2, yz = q.y * z2;\n    float wx = q.w * x2, wy = q.w * y2, wz = q.w * z2;\n\n    return mat3(\n        1 - (yy + zz), xy + wz, xz - wy,\n        xy - wz, 1 - (xx + zz), yz + wx,\n        xz + wy, yz - wx, 1 - (xx + yy)\n    );\n}\n\nParticleData getParticleData() {\n    ParticleData data;\n    mat3 rotMat = quatToMat(iRot);\n    vec3 centeredPos = aPos - vec3(0.5); // Centered\n    data.Position = (rotMat * (centeredPos * iScale)) + iPos;\n    data.Color = vec4(iColor.rgb * aBrightness, iColor.a);\n    data.UV = aUV;\n    data.LightUV = ivec2((iLight &gt;&gt; 16) &amp; 0xFFFF, iLight &amp; 0xFFFF);\n    data.Normal = normalize(rotMat * aNormal);\n    return data;\n}\n#endif\n</code></pre>"}]}